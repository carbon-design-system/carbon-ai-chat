/*! For license information please see 1240.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_carbon_ai_chat_examples_demo=self.webpackChunk_carbon_ai_chat_examples_demo||[]).push([[1240],{1485:function(e,t,n){n.d(t,{W:function(){return l}});var a=n(3696),i=n(6254),s=n(6680),o=n(4452);function r(e){return a.createElement(s.A,{className:o("WACErrorIcon",e.className)})}var c=n(369);function l({text:e}){const t=(0,i.D)();return a.createElement("div",{className:"WAC__inlineError"},a.createElement("div",{className:"WAC__inlineError--iconHolder"},a.createElement(r,{className:"WAC__inlineError--icon"})),a.createElement("div",{className:"WAC__inlineError--text"},a.createElement(c.s,{shouldRemoveHTMLBeforeMarkdownConversion:!0,text:e||t.errors_generalContent})))}},1516:function(e,t,n){n.d(t,{a:function(){return c}});var a=n(3696),i=n(5022),s=n(6254),o=n(6683),r=n(8676);function c(e){const{onConfirm:t,onCancel:n,title:c,message:l}=e,d=(0,s.D)(),u=(0,o.O)(),{isConnected:m,isSuspended:g}=(0,i.d4)(e=>e.persistedToBrowserStorage.chatState.agentState),h=c||(m?d.agent_endChat:d.agent_confirmCancelRequestTitle),p=l||(m?d.agent_confirmEndChat:d.agent_confirmCancelRequestMessage),f=d.agent_confirmEndChatNo;let b;return b=g?d.agent_confirmEndSuspendedYes:m?d.agent_confirmEndChatYes:d.agent_confirmCancelRequestYes,a.createElement(r.u,{title:h,message:p,onConfirm:t,onCancel:n,cancelButtonLabel:f,confirmButtonLabel:b,modalAnnounceMessage:p,serviceManager:u})}},2510:function(e,t,n){n.d(t,{_:function(){return g}});var a=n(9599),i=n(4452),s=n(3696),o=n(9705),r=n(5230),c=n(5822),l=n(1485),d=n(3561);function u(e){const{imageError:t,title:n,description:c,displayURL:u,hideIconAndTitle:g,needsAnnouncement:h,renderIcon:p,inline:f}=e,b=(0,o.q)(),[v,_]=(0,s.useState)(!1),[C,y]=(0,s.useState)(!1),E=(0,s.useRef)(),A=(0,s.useRef)(h),x=Boolean(n||c||u),S=p;return(0,s.useEffect)(()=>{v&&A.current&&b(E.current)},[b,v]),C?s.createElement(l.W,{text:t}):f?s.createElement(m,{...e,setIsError:y,setIsLoaded:_,isError:C,isLoaded:v}):s.createElement(a.FAs,{ref:E,className:i("WACImage",{WACImage__TextAndIcon:x&&Boolean(p),WACImage__IconOnly:!g&&!n&&!c&&Boolean(p)})},s.createElement("div",{className:"WACImage__ImageWrapper"},s.createElement(m,{...e,setIsError:y,setIsLoaded:_,isError:C,isLoaded:v})),x&&s.createElement(d.g,{title:n,description:c,displayURL:u,urlHostName:u&&(0,r.PB)(u),hideTitle:g}),Boolean(S)&&s.createElement(S,{className:i("WACImage__Icon","WACDirectionHasReversibleSVG",{"WACImage__Icon--link":u})}))}function m({source:e,title:t,description:n,altText:o,displayURL:r,preventInlineError:l,onImageLoad:d,useAITheme:u,isLoaded:m,isError:g,setIsLoaded:h,setIsError:p,className:f,inline:b}){const[v,_]=(0,s.useState)(!1),C=o||t||n||"",y=Boolean(t||n||r),E=(0,s.useCallback)(()=>{l&&y?_(!0):p(!0)},[l,y,p]);return(0,s.useEffect)(()=>{let e=null;return m||(e=setTimeout(E,c.S)),()=>{clearTimeout(e)}},[m,E]),s.createElement(s.Fragment,null,!m&&!v&&!b&&e&&(u?s.createElement(a.HOw,{className:"WACImage__Skeleton"}):s.createElement(a.PuA,{className:"WACImage__Skeleton"})),!g&&!v&&e&&s.createElement("img",{className:i("WACImage__Image",{[f]:f,"WACImage__Image--loaded":m}),src:e,alt:C,onLoad:()=>{d?.(),h(!0)},onError:E}))}const g=s.memo(u)},3160:function(e,t,n){n.d(t,{j:function(){return c}});var a=n(3696),i=n(4869);function s(e){return null==e}var o=n(5888),r=n(369);function c({availability:e,fallbackText:t}){let n,c,l;return s(e?.estimated_wait_time)?s(e?.position_in_queue)?l=e?.message?e.message:t:(n="agent_connectingQueue",c={position:e.position_in_queue}):(n="agent_connectingMinutes",c={time:e.estimated_wait_time}),l?a.createElement(r.s,{overrideSanitize:!0,text:l}):a.createElement(i.A,{id:n,values:(0,o.KS)(c)})}},3415:function(e,t,n){n.d(t,{K:function(){return C}});var a=n(169),i=n(9599),s=n(4452),o=n(3696),r=n(9705),c=n(6254),l=n(5608),d=n(5822),u=n(2870),m=n(5681),g=n(1485),h=n(3561),p=n(9633),f=n(5088),b=n(4432);const v=(0,f.kN)();function _({type:e,source:t,title:n,description:f,ariaLabel:_,isMixcloud:C,baseHeight:y,doAutoScroll:E,playing:A,onPlay:x,onPause:S,hideIconAndTitle:I,needsAnnouncement:T}){const[M,k]=(0,o.useState)(!1),[w,$]=(0,o.useState)(!1),{errors_audioSource:W,errors_videoSource:N}=(0,c.D)(),P=(0,r.q)(),L=(0,o.useRef)(),D=C?"120px":(0,u.rP)(y),R=(0,b.T)({paddingTop:D}),F=e===p.sP.AUDIO,O=F?W:N,B=(0,l.Z)(t),z=(0,o.useRef)(T),q=(0,o.useCallback)(()=>{$(!0),k(!0)},[]);(0,o.useEffect)(()=>{t!==B&&M&&k(!1)},[B,M,t]),(0,o.useEffect)(()=>{let e=null;return M||(e=setTimeout(q,d.S)),()=>{clearTimeout(e)}},[M,q]),(0,o.useEffect)(()=>{M&&z.current&&P(L.current)},[P,M]);const U=(0,o.useCallback)(()=>{M||(k(!0),E?.())},[E,M]);return o.createElement(o.Fragment,null,!M&&o.createElement(i.FAs,{className:"WACMediaPlayer__Skeleton"},o.createElement("div",{className:"WACMediaPlayer__SkeletonContainer",style:R},o.createElement(m.P,{className:"WACMediaPlayer__SkeletonPlayer"})),(n||f)&&o.createElement("div",{className:"WACMediaPlayer__SkeletonTextContainer"},o.createElement(m.r,{paragraph:!0,lineCount:2}))),o.createElement("div",{className:"WACMediaPlayer__Root",ref:L},w&&o.createElement(g.W,{text:O}),!w&&o.createElement(i.FAs,{className:s("WACMediaPlayer",{WAC__hidden:!M})},o.createElement("div",{className:"WACMediaPlayer__Wrapper",style:R},o.createElement("div",{className:s("WACMediaPlayer__Background",{"WACMediaPlayer__Background--audio":F})},F&&o.createElement(a.A,{size:32,className:"WACMediaPlayer__MusicIcon"})),o.createElement(o.Suspense,{fallback:o.createElement("div",null)},o.createElement(v,{className:"WACMediaPlayer__Player",url:t,controls:!0,width:"100%",height:"100%",config:{file:{forceVideo:!0,attributes:{controlsList:"nodownload","aria-label":_||f||n}}},playsinline:!0,playing:A,onPlay:x,onPause:S,onReady:U,onError:q,pip:!0}))),(n||f)&&o.createElement(h.g,{title:n,description:f,hideTitle:I}))))}const C=o.memo(_)},3561:function(e,t,n){n.d(t,{g:function(){return o}});var a=n(4452),i=n(3696),s=n(5112);function o({title:e,description:t,displayURL:n,urlHostName:o,hideTitle:r}){return i.createElement("div",{className:"WACTextHolderTile"},i.createElement("div",{className:a("WACTextHolderTile__Wrapper","WACWidget__textEllipsis",{WACTextHolderTile__IconMargin:!n})},!r&&e&&i.createElement("div",{className:"WACTextHolderTile__Title"},e),t&&i.createElement("div",{className:a("WACTextHolderTile__Description",{WACTextHolderTile__DescriptionMargin:e})},t),n&&i.createElement(i.Fragment,null,i.createElement(s.A,null,o),i.createElement("div",{className:a("WACTextHolderTile__Url","WACWidget__textEllipsis",{WACTextHolderTile__UrlMargin:e||t}),"aria-hidden":!0},n))))}},3692:function(e,t,n){n.d(t,{x:function(){return f}});var a=n(3696),i=n(5022),s=n(6254),o=n(6683),r=n(9049),c=n(5822),l=n(4452),d=n(8189),u=n(9633);function m(e){const{bodyLocalMessageItemIDs:t}=e.message.ui_state,n=(0,i.d4)(e=>e.allMessageItemsByID),s=t?.map((i,s)=>{const o=n[i],r=g(o.item.response_type),c=t[s+1],u=n[c],m=g(u?.item.response_type),h=!(s===t.length-1||r||m);return a.createElement("div",{key:i,className:l("WACBodyMessageComponents__MessageWrapper",{"WACBodyMessageComponents__MessageWrapper--fullWidth":r,"WACBodyMessageComponents__MessageWrapper--shortBottomPadding":h})},a.createElement(d.V,{...e,message:o,isNestedMessageItem:!0}))});return s?.length?a.createElement("div",{className:"WACBodyMessageComponents"},s):null}function g(e){switch(e){case u.sP.IMAGE:case u.sP.IFRAME:case u.sP.VIDEO:case u.sP.AUDIO:case u.sP.USER_DEFINED:return!0;default:return!1}}const h=a.memo(m);function p(e){const t=(0,i.d4)(e=>e.allMessageItemsByID),n=e.message.ui_state.footerLocalMessageItemIDs?.map(n=>{const i=t[n];return a.createElement(d.V,{key:n,...e,message:i,isNestedMessageItem:!0})}),s=n?.length??0,o=s>2;return s?a.createElement("div",{className:l("WACFooterButtonComponents",{"WACFooterButtonComponents--column":o})},n):null}function f({localMessageItem:e,fullMessage:t,isMessageForInput:n,requestFocus:l}){const d=(0,o.O)(),u=(0,s.D)(),m=(0,i.d4)(e=>e.config),g=(0,i.d4)(r.i_);return a.createElement(a.Fragment,null,a.createElement(h,{message:e,originalMessage:t,languagePack:u,requestInputFocus:l,disableUserInputs:g.isReadonly,config:m,isMessageForInput:n,scrollElementIntoView:c.w6,serviceManager:d,hideFeedback:!0,allowNewFeedback:!1}),a.createElement(p,{message:e,originalMessage:t,languagePack:u,requestInputFocus:l,disableUserInputs:g.isReadonly,config:m,isMessageForInput:n,scrollElementIntoView:c.w6,serviceManager:d,hideFeedback:!0,allowNewFeedback:!1}))}},4051:function(e,t,n){n.d(t,{d:function(){return r}});var a=n(3696),i=n(3415),s=n(9633);function o({...e}){return a.createElement(i.K,{type:s.sP.VIDEO,...e})}const r=a.memo(o)},4432:function(e,t,n){n.d(t,{T:function(){return i}});var a=n(3696);const i=e=>(0,a.useMemo)(()=>{const t={};return Object.entries(e).forEach(([e,n])=>{if(null!=n){const a=e.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`);t[`--${a}`]=n}}),t},[e])},5681:function(e,t,n){n.d(t,{P:function(){return r},r:function(){return o}});var a=n(9599),i=n(3696),s=n(5022);function o(e){return(0,s.d4)(e=>e.theme.useAITheme)?i.createElement(a.Ty7,{...e}):i.createElement(a.rrI,{...e})}function r(e){return(0,s.d4)(e=>e.theme.useAITheme)?i.createElement(a.FKV,{...e}):i.createElement(a.PuA,{...e})}},7113:function(e,t,n){n.d(t,{I:function(){return s}});var a=n(3696);let i=1;function s(){const e=(0,a.useRef)();return void 0===e.current&&(e.current=i++),e.current}},8189:function(e,t,n){n.d(t,{V:function(){return pn}});var a=n(2417),i=n(3696),s=n(8710),o=n(5022),r=n(5505),c=n(3210),l=n(4629),d=n(3981),u=n(3192),m=n(619);class g extends u.WF{}g.styles=u.AH`
    ${(0,u.iz)(".cds--aichat-feedback-buttons{\n  display:flex;\n  margin-block-start:0.5rem;\n}")}
  `,(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"is-positive-open",reflect:!0})],g.prototype,"isPositiveOpen",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"is-negative-open",reflect:!0})],g.prototype,"isNegativeOpen",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"is-positive-selected",reflect:!0})],g.prototype,"isPositiveSelected",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"has-positive-details",reflect:!0})],g.prototype,"hasPositiveDetails",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"has-negative-details",reflect:!0})],g.prototype,"hasNegativeDetails",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"is-negative-selected",reflect:!0})],g.prototype,"isNegativeSelected",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"is-positive-disabled",reflect:!0})],g.prototype,"isPositiveDisabled",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"is-negative-disabled",reflect:!0})],g.prototype,"isNegativeDisabled",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"positive-label",reflect:!0})],g.prototype,"positiveLabel",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"negative-label",reflect:!0})],g.prototype,"negativeLabel",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"panel-id",reflect:!0})],g.prototype,"panelID",void 0),(0,l.Cg)([(0,m.MZ)({type:Object,attribute:"on-click"})],g.prototype,"onClick",void 0),n(7454),n(1200);var h=n(1523),p=n(8976),f=n(7190),b=n(8715),v=n(8761),_=n(4574),C=n(404),y=n(4774);const E=(0,h.dI)(p.A),A=(0,h.dI)(f.A),x=(0,h.dI)(b.A),S=(0,h.dI)(v.A),I="cds-aichat-feedback-buttons";let T=class extends g{render(){return function(e){const{isPositiveOpen:t,isNegativeOpen:n,isPositiveSelected:a,isNegativeSelected:i,hasPositiveDetails:s,hasNegativeDetails:o,isPositiveDisabled:r,isNegativeDisabled:c,positiveLabel:l,negativeLabel:d,panelID:m,onClick:g}=e;return u.qy`<div class="${C.o}-feedback-buttons">
    <cds-custom-icon-button
      class="${C.o}-feedback-buttons-positive"
      size="sm"
      align="top-left"
      kind="ghost"
      role="button"
      disabled="${r||u.s6}"
      aria-expanded="${r||!s?u.s6:t}"
      aria-pressed="${a||u.s6}"
      aria-controls="${m}-feedback-positive"
      @click="${()=>g(!0)}"
    >
      <span slot="icon"
        >${(0,_.T)(a?S:x)}</span
      >
      <span slot="tooltip-content"
        >${l||y.Ay$.feedback_positiveLabel}</span
      >
    </cds-custom-icon-button>
    <cds-custom-icon-button
      class="${C.o}-feedback-buttons-negative"
      size="sm"
      align="top-left"
      kind="ghost"
      role="button"
      disabled="${c||u.s6}"
      aria-expanded="${c||!o?u.s6:n}"
      aria-pressed="${i||u.s6}"
      aria-controls="${m}-feedback-positive"
      @click="${()=>g(!1)}"
    >
      <span slot="icon"
        >${(0,_.T)(i?A:E)}</span
      >
      <span slot="tooltip-content"
        >${d||y.Ay$.feedback_negativeLabel}</span
      >
    </cds-custom-icon-button>
  </div>`}(this)}};T=(0,l.Cg)([(0,d.Q)(I)],T);const M=(0,c.a)({tagName:I,elementClass:T,react:i});class k extends u.WF{constructor(){super(...arguments),this.selectedTags=new Set}updated(e){e.has("initialSelectedTags")&&this._setInitialValues(this.initialSelectedTags)}_setInitialValues(e){e&&(this.selectedTags=new Set(this.initialSelectedTags))}_handleTagClick(e){const t=e.target.getAttribute("data-content");this.selectedTags.has(t)?this.selectedTags.delete(t):this.selectedTags.add(t),this.onTagsChanged?.(Array.from(this.selectedTags)),this.requestUpdate()}}k.styles=u.AH`
    ${(0,u.iz)(".cds--aichat-tag-list-container{\n  display:flex;\n  flex-wrap:wrap;\n  align-items:center;\n  padding:0;\n  margin:0;\n  gap:0.5rem;\n  list-style:none;\n}\n\n.cds--aichat-tag-list-item{\n  box-sizing:border-box;\n  padding:0.125rem;\n  animation:fade-in 600ms forwards;\n  font-size:var(--cds-chat-BASE-font-size-small);\n  opacity:0;\n}\n\n@keyframes fade-in{\n  from{\n    opacity:0;\n  }\n  to{\n    opacity:1;\n  }\n}")}
  `,(0,l.Cg)([(0,m.MZ)({type:Array,attribute:"tags"})],k.prototype,"tags",void 0),(0,l.Cg)([(0,m.MZ)({type:Array,attribute:"initial-selected-tags"})],k.prototype,"initialSelectedTags",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"multi-select"})],k.prototype,"multiSelect",void 0),(0,l.Cg)([(0,m.MZ)({type:Object,attribute:"on-tags-changed"})],k.prototype,"onTagsChanged",void 0),(0,l.Cg)([(0,m.wk)()],k.prototype,"selectedTags",void 0),n(2436),n(2769);const w=`${C.S}-tag-list`;let $=class extends k{render(){return function(e){const{selectedTags:t,tags:n,_handleTagClick:a}=e;return u.qy`<div class="${C.o}-tag-list">
    ${u.qy`<ul class="${C.o}-tag-list-container">
      ${n.map(e=>u.qy`<li class="${C.o}-tag-list-item}">
            <cds-custom-chat-button
              class="${C.o}-tag-list-button"
              kind="primary"
              size="sm"
              type="button"
              is-quick-action
              role="option"
              aria-pressed="${t.has(e)}"
              ?is-selected="${t.has(e)}"
              data-content="${e}"
              @click="${a}"
            >
              ${e}
            </cds-custom-chat-button>
          </li>`)}
    </div>`}
  </div>`}(this)}};$=(0,l.Cg)([(0,d.Q)(w)],$);var W=n(5222);const N="cds-aichat-rounded-button",P=`\n  .cds-custom--btn {\n    border-start-start-radius: var(--${N}-top-left);\n    border-start-end-radius: var(--${N}-top-right);\n    border-end-start-radius: var(--${N}-bottom-left);\n    border-end-end-radius: var(--${N}-bottom-right);\n    width: var(--${N}-width);\n    max-width: var(--${N}-max-width);\n  }`;let L=class extends W.Ay{};L.styles=u.AH`
    ${W.Ay.styles}
    ${(0,u.iz)(P)}
  `,L=(0,l.Cg)([(0,d.Q)(N)],L);var D=n(9890);class R extends u.WF{constructor(){super(...arguments),this.showTextArea=!0,this.showPrompt=!0}updated(e){e.has("initialValues")&&this._setInitialValues(this.initialValues)}_setInitialValues(e){e&&(this._textInput=e.text,this._initialSelectedCategories=e.selectedCategories)}_handleTextInput(e){this._textInput=e.currentTarget.value}_handleSubmit(){this.onSubmit?.({text:this._textInput,selectedCategories:this._selectedCategories})}_handleCancel(){this.onClose?.()}_handleCategoryChange(e){this._selectedCategories=e}}R.styles=u.AH`
    ${(0,u.iz)(".cds--aichat-container{\n  box-sizing:border-box;\n  border:1px solid var(--cds-chat-bubble-border, #e0e0e0);\n  border-radius:var(--cds-chat-BASE-border-radius-med);\n  animation:fade-in 600ms forwards;\n  background-color:var(--cds-chat-shell-background, #ffffff);\n  container-type:inline-size;\n  inline-size:100%;\n  margin-block-start:0.25rem;\n}\n\n.cds--aichat-is-closed{\n  display:none;\n}\n\n.cds--aichat-title-row{\n  display:flex;\n  margin-block-start:0.75rem;\n  margin-inline:1rem 0.5rem;\n}\n\n.cds--aichat-title{\n  flex:1;\n  font-size:var(--cds-chat-BASE-font-size-xlarge);\n  line-height:var(--cds-chat-BASE-line-height-xlarge);\n}\n\n.cds--aichat-close{\n  margin-inline-start:0.5rem;\n}\n\n.cds--aichat-disclaimer,\n.cds--aichat-prompt{\n  color:var(--cds-text-secondary, #525252);\n  font-size:var(--cds-chat-BASE-font-size-small);\n  line-height:var(--cds-chat-BASE-line-height-small);\n  margin-block-start:0.5rem;\n  margin-inline:1rem;\n}\n\n.cds--aichat-categories{\n  margin-block-start:0.5rem;\n  margin-inline:1rem;\n}\n\n.cds--aichat-feedback-text{\n  margin-block-start:0.5rem;\n  margin-inline:1rem;\n}\n\n.cds--aichat-buttons{\n  display:flex;\n  inline-size:100%;\n  margin-block-start:1rem;\n}\n\n.cds--aichat-submit{\n  flex:1;\n  --cds-aichat-rounded-button-bottom-right:var(\n    --cds-chat-BASE-border-radius-med\n  );\n  --cds-aichat-rounded-button-width:100%;\n  --cds-aichat-rounded-button-max-width:100%;\n}\n\n.cds--aichat-cancel{\n  flex:1;\n  --cds-aichat-rounded-button-bottom-left:var(\n    --cds-chat-BASE-border-radius-med\n  );\n  --cds-aichat-rounded-button-width:100%;\n  --cds-aichat-rounded-button-max-width:100%;\n}\n\n@keyframes fade-in{\n  from{\n    opacity:0;\n  }\n  to{\n    opacity:1;\n  }\n}")}
  `,(0,l.Cg)([(0,m.MZ)({type:String,attribute:"class",reflect:!0})],R.prototype,"class",void 0),(0,l.Cg)([(0,m.MZ)({type:String,reflect:!0})],R.prototype,"id",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"is-open",reflect:!0})],R.prototype,"isOpen",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"is-readonly",reflect:!0})],R.prototype,"isReadonly",void 0),(0,l.Cg)([(0,m.MZ)({type:Object,attribute:"on-close"})],R.prototype,"onClose",void 0),(0,l.Cg)([(0,m.MZ)({type:Object,attribute:"on-submit"})],R.prototype,"onSubmit",void 0),(0,l.Cg)([(0,m.MZ)({type:Object,attribute:"initial-values",reflect:!0})],R.prototype,"initialValues",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"title",reflect:!0})],R.prototype,"title",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"prompt",reflect:!0})],R.prototype,"prompt",void 0),(0,l.Cg)([(0,m.MZ)({type:Object,attribute:"categories",reflect:!0})],R.prototype,"categories",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"disclaimer",reflect:!0})],R.prototype,"disclaimer",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"text-area-placeholder",reflect:!0})],R.prototype,"placeholder",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"cancel-label",reflect:!0})],R.prototype,"cancelLabel",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"submit-label",reflect:!0})],R.prototype,"submitLabel",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"show-text-area",reflect:!0})],R.prototype,"showTextArea",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"show-prompt",reflect:!0})],R.prototype,"showPrompt",void 0),(0,l.Cg)([(0,m.wk)()],R.prototype,"_textInput",void 0),(0,l.Cg)([(0,m.wk)()],R.prototype,"_initialSelectedCategories",void 0),(0,l.Cg)([(0,m.wk)()],R.prototype,"_selectedCategories",void 0),(0,l.Cg)([D.oI],R.prototype,"_handleCategoryChange",null),n(236),n(7826);var F=n(4452);const O="cds-aichat-feedback";let B=class extends R{render(){return function(e){const{_handleCancel:t,_handleSubmit:n,_handleTextInput:a,_initialSelectedCategories:i,_textInput:s,_handleCategoryChange:o,id:r,isReadonly:c,isOpen:l,title:d,prompt:m,placeholder:g,categories:h,disclaimer:p,showTextArea:f,showPrompt:b,submitLabel:v,cancelLabel:_}=e;return u.qy`<div
    class="${F(`${C.o}-container`,{[`${C.o}-is-closed`]:!l})}"
  >
    <div class="${C.o}-title-row">
      <div class="${C.o}-title">
        ${d||y.Ay$.feedback_defaultTitle}
      </div>
    </div>
    ${b?u.qy`<div class="${C.o}-prompt">
          ${m||y.Ay$.feedback_defaultPrompt}
        </div>`:""}
    ${h?.length?u.qy`<div class="${C.o}-categories">
          <cds-aichat-tag-list
            .tags=${h}
            .initialSelectedTags=${i}
            .onTagsChanged=${o}
          >
          </cds-aichat-tag-list>
        </div>`:""}
    ${f?u.qy`<div class="${C.o}-feedback-text">
          <cds-custom-layer level="1">
            <cds-custom-textarea
              id="${r}-text-area"
              value="${s}"
              class="${C.o}-feedback-text-area"
              ?disabled="${c}"
              placeholder="${g||y.Ay$.feedback_defaultPlaceholder}"
              rows="3"
              max-count="${1e3}"
              @input=${a}
            ></cds-custom-textarea>
          </cds-custom-layer>
        </div>`:""}
    ${p?u.qy`<div class="${C.o}-disclaimer">
          <cds-aichat-markdown-text
            markdown="${p}"
          ></cds-aichat-markdown-text>
        </div>`:""}
    <div class="${C.o}-buttons">
      <cds-aichat-rounded-button
        class="${C.o}-cancel"
        disabled=${c||u.s6}
        size="lg"
        kind="secondary"
        @click=${t}
      >
        ${_||y.Ay$.feedback_cancelLabel}
      </cds-aichat-rounded-button>
      <cds-aichat-rounded-button
        class="${C.o}-submit"
        disabled=${c||u.s6}
        size="lg"
        @click=${n}
      >
        ${v||y.Ay$.feedback_submitLabel}
      </cds-aichat-rounded-button>
    </div>
  </div>`}(this)}};B=(0,l.Cg)([(0,d.Q)(O)],B);const z=(0,c.a)({tagName:O,elementClass:B,react:i});var q=n(6254);function U(){const{messages_responseStopped:e}=(0,q.D)();return i.createElement("div",{className:"WACResponseStopped"},e)}var H=n(7391),Z=n(4431),V=n(4671),j=n(2634),G=n(6158),K=n(9599),X=n(8625),Y=n(3160),Q=n(1516);function J(e){const{languagePack:t,localMessage:n,originalMessage:a,disableUserInputs:s,serviceManager:o,agentState:r,requestFocus:c,agentDisplayState:l,persistedAgentState:d}=e,{activeLocalMessageID:u,availability:m,isConnecting:g}=r,{isSuspended:h}=d,[p,f]=(0,i.useState)(!1);function b(){h&&!p?f(!0):(f(!1),o.humanAgentService.startChat(n,a),setTimeout(c))}if(!h&&p&&f(!1),a.history.agent_availability===X.Gf.OFFLINE){const e=n.item.agent_unavailable?.message||t.default_agent_unavailableMessage;return i.createElement("div",null,e)}const v=n.item.agent_available?.message||t.default_agent_availableMessage;let _,C,y=s||l.isConnectingOrConnected,E=v;return n.ui_state.id===u?(y=!0,g?(_=Z.A,C=t.agent_cardButtonChatRequested,E=i.createElement(Y.j,{availability:m,fallbackText:t.agent_connectWaiting})):(_=V.A,C=t.agent_cardButtonConnected,E=t.agent_cardMessageConnected)):s?n.ui_state.wasAgentChatEnded?(_=G.A,C=t.agent_cardButtonChatEnded,E=t.agent_cardMessageChatEnded):(_=V.A,C=t.agent_startChat):(_=j.A,C=t.agent_startChat),i.createElement(K.FAs,{className:"WACConnectToAgent"},i.createElement("div",{className:"WACConnectToAgent__Title"},i.createElement("span",null,t.agent_chatTitle)),i.createElement("div",{className:"WACConnectToAgent__Text"},E),i.createElement(K.$nd,{className:"WACConnectToAgent__RequestButton",size:"md",disabled:y,onClick:b,renderIcon:_},C),!y&&h&&i.createElement("div",{className:"WACConnectToAgent__SuspendedWarning"},t.agent_suspendedWarning),p&&i.createElement(Q.a,{title:t.agent_confirmSuspendedEndChatTitle,message:t.agent_confirmSuspendedEndChatMessage,onConfirm:b,onCancel:()=>f(!1)}))}function ee(e){const{languagePack:t,localMessage:n,originalMessage:a,config:s,serviceManager:o,disableUserInputs:r,agentState:c,requestFocus:l,agentDisplayState:d,persistedAgentState:u}=e,m=r||!(0,H.Rt)(s);return i.createElement("div",null,i.createElement(J,{localMessage:n,originalMessage:a,languagePack:t,serviceManager:o,disableUserInputs:m,agentState:c,persistedAgentState:u,agentDisplayState:d,requestFocus:l}))}var te=n(3415),ne=n(9633);function ae({source:e,...t}){const n=e?.startsWith("https://www.mixcloud.com");return i.createElement(te.K,{type:ne.sP.AUDIO,source:e,isMixcloud:n,...t})}const ie=i.memo(ae);var se=n(9629),oe=n(6683),re=n(5112),ce=n(2510);function le({buttonAltText:e,isLink:t,target:n,disabled:a,onClick:s,...o}){return t?i.createElement("a",{className:"WACClickableImage",href:o.displayURL,rel:"noopener noreferrer",target:n,onClick:s},i.createElement(ce._,{...o}),e&&i.createElement(re.A,null,e)):i.createElement("button",{className:"WACClickableImage",type:"button",onClick:s,disabled:a},i.createElement(ce._,{...o}),e&&i.createElement(re.A,null,e))}function de({className:e,label:t,kind:n,url:a,target:s="_blank",disabled:r,renderIcon:c,imageURL:l,altText:d,onClick:u}){const{errors_imageSource:m}=(0,q.D)(),g=(0,o.d4)(e=>e.theme.useAITheme),h=t||a,p=a?s:void 0;return l?i.createElement(le,{imageError:m,source:l,target:s,title:t,displayURL:a,altText:d,renderIcon:c,onClick:u,disabled:r,isLink:Boolean(a),useAITheme:g}):i.createElement(K.$nd,{className:F("WACButtonItem",e),as:a?"a":void 0,kind:ue(n),href:a,target:p,rel:a?"noopener noreferrer":void 0,disabled:r,renderIcon:c,onClick:u},h)}function ue(e){switch(e){case ne.qM.LINK:case ne.qM.TERTIARY:return"ghost";case ne.qM.DEFAULT:return"primary";default:return e}}function me({localMessageItem:e,fullMessage:t}){const n=(0,oe.O)(),a=e.item,{ui_state:s}=e,{image_url:o,alt_text:c,label:l,kind:d,value:u}=a,m=Boolean(u&&s.optionSelected),g=(0,i.useCallback)(async()=>{await n.fire({type:r.xp.MESSAGE_ITEM_CUSTOM,messageItem:a,fullMessage:t})},[a,n,t]);return i.createElement(de,{imageURL:o,altText:c,label:l,kind:d,disabled:m,renderIcon:o&&se.A||void 0,onClick:g})}var ge=n(6854),he=n(1748),pe=n(5822),fe=n(2870);function be({localMessageItem:e,requestFocus:t,isMessageForInput:n}){const a=(0,oe.O)(),s=e.item,{ui_state:o,fullMessageID:c}=e,{image_url:l,alt_text:d,label:u,kind:m}=s,g=!n||Boolean(o.optionSelected),h=(0,i.useCallback)(()=>{if(Boolean(s.value?.input?.text||u)){const e=(0,H.E_)(s,c);t(),a.store.dispatch(he.Ay.messageSetOptionSelected(o.id,e)),a.actions.sendWithCatch(e,r.vW.POST_BACK_BUTTON)}else(0,fe.yA)(`${pe.qI} post_back button with label "${s.label}" has no input message to send.`)},[s,u,c,t,a.store,a.actions,o.id]);return i.createElement(de,{imageURL:l,altText:d,label:u,kind:m,onClick:h,renderIcon:l&&ge.A||void 0,disabled:g})}var ve=n(2117);function _e({localMessageItem:e,isMessageForInput:t}){const n=(0,oe.O)(),{image_url:a,alt_text:s,label:o,kind:r}=e.item,c=(0,i.useCallback)(async()=>{n.store.dispatch(he.Ay.setResponsePanelIsOpen(!0)),n.store.dispatch(he.Ay.setResponsePanelContent(e,t))},[e,t,n]);return i.createElement(de,{className:"BaseButtonItemComponent__ShowPanel",imageURL:a,altText:s,label:o,kind:r,renderIcon:a&&ve.A||void 0,onClick:c})}var Ce=n(435);function ye({localMessageItem:e}){const{image_url:t,alt_text:n,url:a,target:s,label:o,kind:r}=e.item;return t||r!==ne.qM.LINK?i.createElement(de,{imageURL:t,altText:n,label:o,kind:r,url:a,target:s,renderIcon:Ce.A}):i.createElement("div",{className:"WAC__received--textContent WACButtonItem"},i.createElement(K.N_E,{className:"WACWidget__breakWord",href:a,target:s,rel:"noopener noreferrer",renderIcon:Ce.A},o||a))}function Ee(e){switch(e.localMessageItem.item.button_type){case ne.kw.URL:return i.createElement(ye,{localMessageItem:e.localMessageItem});case ne.kw.SHOW_PANEL:return i.createElement(_e,{localMessageItem:e.localMessageItem,isMessageForInput:e.isMessageForInput});case ne.kw.CUSTOM_EVENT:return i.createElement(me,{localMessageItem:e.localMessageItem,fullMessage:e.fullMessage});default:return i.createElement(be,{localMessageItem:e.localMessageItem,requestFocus:e.requestFocus,isMessageForInput:e.isMessageForInput})}}var Ae=n(3692);function xe(e){const{ignoreMaxWidth:t}=e,n=e.localMessageItem.item;return i.createElement(K.FAs,{className:F("WACCardMessageComponent",{WACMaxWidthSmall:!t&&n.max_width===ne.Hi.SMALL,WACMaxWidthMedium:!t&&n.max_width===ne.Hi.MEDIUM,WACMaxWidthLarge:!t&&n.max_width===ne.Hi.LARGE})},i.createElement(Ae.x,{...e}))}const Se=i.memo(xe);var Ie=n(5681),Te=n(5088);const Me=(0,Te.$F)();function ke(e){const{localMessageItem:t,fullMessage:n,isMessageForInput:a,requestFocus:s}=e,r=(0,o.d4)(e=>e.allMessageItemsByID),{itemsLocalMessageItemIDs:c}=t.ui_state;return i.createElement(i.Suspense,{fallback:i.createElement(Ie.P,null)},i.createElement(Me,null,c.map(e=>{const t=r[e];return i.createElement(Se,{key:e,localMessageItem:t,fullMessage:n,isMessageForInput:a,ignoreMaxWidth:!0,requestFocus:s})})))}var we=n(3233),$e=n(5608);function We(e,t){const n=(0,i.useMemo)(()=>t&&(0,we.A)(t,100,{maxWait:100,leading:!0}),[t]);(0,$e.Z)(e)!==e&&t&&setTimeout(n)}var Ne=n(1485),Pe=n(2428),Le=n(5010),De=n(6538);function Re({citation:e,type:t,setIsExpandable:n,isExpandable:a}){const s=(0,q.D)(),{width:o}=(0,i.useContext)(De.l),{conversationalSearch_viewSourceDocument:r}=s,c=(0,i.useRef)(null),{text:l}=e;let d,u;return(0,i.useLayoutEffect)(()=>{c.current&&!a&&n&&c.current.clientHeight&&c.current.scrollHeight&&n(c.current.clientHeight<c.current.scrollHeight)},[l,a,n,o]),t===Be.URL&&e.url?(d=new URL(e.url).hostname,u=i.createElement(Pe.A,{size:16})):a&&(u=i.createElement(Le.A,{size:16}),d=r),i.createElement(i.Fragment,null,i.createElement("div",{className:"WACCitationCard_Header"},i.createElement("div",{className:"WACCitationCard_Title WACWidget__textEllipsis"},e.title),i.createElement("div",{ref:c,className:"WACCitationCard_Text"},l)),i.createElement("div",{className:"WACCitationCard_Footer"},(d||u)&&i.createElement(i.Fragment,null,i.createElement("div",{className:"WACCitationCard_Label WACWidget__textEllipsis"},d),i.createElement("div",{className:"WACCitationCard_Icon"},u))))}function Fe({title:e,onClick:t,onSelectCitation:n,children:a,className:s}){return i.createElement("button",{type:"button",className:`${s} WACCitationCard--clickable`,"aria-label":e,onClick:()=>{t(),n?.()},onFocus:n},a)}function Oe({className:e,citation:t,onSelectCitation:n,relatedSearchResult:a}){const s=(0,oe.O)(),{title:o}=t,[r,c]=(0,i.useState)(Boolean(a?.body));function l(e){return i.createElement(K.FAs,{className:e},i.createElement(Re,{citation:t,type:Be.EXPAND_IF_NEEDED,setIsExpandable:c,isExpandable:r}))}return r?i.createElement(Fe,{className:e,title:o,onClick:function(){s.store.dispatch(he.Ay.setViewSourcePanelIsOpen(!0,t,a))},onSelectCitation:n},l()):l(e)}var Be,ze=n(5705);function qe({citation:e,isSelected:t,onSelectCitation:n,relatedSearchResult:a}){const{url:s}=e,o=s&&(0,ze.Gz)(s)?Be.URL:Be.EXPAND_IF_NEEDED,r=F("WACCitationCard",{"WACCitationCard--selected":t,"WACCitationCard--clickable":o===Be.URL,"WACCitationCard--url":o===Be.URL,"WACCitationCard--no-url":o!==Be.URL},"WACWidget__textEllipsis");return o===Be.URL?i.createElement("a",{className:r,href:s,target:"_blank",rel:"noopener noreferrer",onClick:n,onFocus:n},i.createElement(K.FAs,null,i.createElement(Re,{citation:e,type:o}))):i.createElement(Oe,{citation:e,className:r,onSelectCitation:n,relatedSearchResult:a})}!function(e){e.URL="url",e.EXPAND_IF_NEEDED="expand"}(Be||(Be={}));const Ue=i.memo(qe);var He=n(7073),Ze=n(112),Ve=n(7113),je=n(8276),Ge=n(4018);var Ke=n(7177);function Xe(e){const{highlightCitation:t,onToggleCitations:n,citationsOpen:a,searchItem:s,showCitationsToggle:o}=e,r=(0,q.D)(),c=(0,oe.O)(),{streamingState:l}=s.ui_state,d=`WACConversationalSearchText-${(0,Ve.I)()}${c.namespace.suffix}`,[m,g]=(0,i.useState)("");let h;return h=l&&!l.isDone?l.chunks.map(e=>e.text).join(""):s.item.text,(0,i.useEffect)(()=>{!async function(){const e=await async function(e,t){const n=t?.ranges;if(n?.length){const t=[];let a=0;n.forEach(n=>{const i=e.substring(a,n.start),s=e.substring(n.start,n.end);t.push(i),t.push(Ye),t.push(s),t.push(Qe),a=n.end});const i=e.substring(a,e.length);t.push(i),e=t.join("")}const a=await async function(e,t=!1){const n=await(0,Ge.o)(e,void 0);return function(e){const t=document.createElement("div");(0,u.XX)(e,t);const n=t.innerHTML;return(0,u.XX)(u.qy``,t),n}((0,je.u)(n,t))}(e),i=(0,ze.p9)(a);if(n)try{const e=document.createElement("div");return e.innerHTML=i,n&&et(e,!1),e.innerHTML}catch(n){(0,fe.yA)("An error occurred processing source highlights.",e,t,n)}return i}(h,t);g(e)}()},[h,t,o]),i.createElement("div",{className:"WACConversationalSearchText"},i.createElement(Ke.R,{markdown:m,sanitizeHTML:!1}),o&&i.createElement("div",{className:"WACConversationalSearchText__CitationsToggleContainer"},i.createElement("div",{className:"WACConversationalSearchText__CitationsToggle"},i.createElement(K.jZg,{id:d,onClick:n,"aria-expanded":a,text:r.conversationalSearch_citationsLabel,renderIcon:a?Ze.A:He.A,"aria-label":r.conversationalSearch_toggleCitations}))))}const Ye="@@:wc-source:@@",Qe="@@/:wc-source:@@",Je=/@@\/?:wc-source:@@/g;function et(e,t){return Array.from(e.childNodes).forEach(n=>{if(n instanceof Text){const a=n.textContent,i=Array.from(a.matchAll(Je));if(i.length||t){let s=0;i.forEach(i=>{const o=i[0]===Qe,r=a.substring(s,i.index);s=i.index+i[0].length,tt(r,o,e,n),t=!o}),tt(a.substring(s,a.length),t,e,n),n.remove()}}else n instanceof Element&&n.getAttributeNames().forEach(e=>{const t=n.getAttribute(e);t&&n.setAttribute(e,t.replaceAll(Je,""))});t=et(n,t)}),t}function tt(e,t,n,a){if(e){const i=document.createTextNode(e);if(t&&e.trim()){const e=document.createElement("span");e.className="WACConversationalSearchText--hasCitation",e.appendChild(i),n.insertBefore(e,a)}else n.insertBefore(i,a)}}const nt=i.memo(Xe),at=(0,Te.$F)();function it({localMessageItem:e,scrollElementIntoView:t,isStreamingError:n,doAutoScroll:a}){const[s,o]=(0,i.useState)(0),[r,c]=(0,i.useState)(!1),l=(0,i.useRef)(),d=(0,i.useRef)(),u=(0,q.D)(),m=e.item,g=(0,i.useMemo)(()=>function(e){if(!e)return null;const t=e.filter(e=>e.ranges?.length),n=e.filter(e=>!e.ranges?.length);return t.concat(n)}(m.citations),[m.citations]);function h(){setTimeout(()=>t(l.current,32,64),50)}return We(e.ui_state.streamingState?.chunks,a),i.createElement("div",{className:"WACConversationalSearch"},i.createElement(nt,{searchItem:e,showCitationsToggle:Boolean(g?.length),highlightCitation:r?g?.[s]:null,onToggleCitations:function(){c(!r),r||h()},citationsOpen:r}),n&&i.createElement(Ne.W,{text:u.conversationalSearch_streamingIncomplete}),i.createElement("div",{ref:l},r&&function(){const e=g?.map((e,t)=>i.createElement(Ue,{key:t,citation:e,isSelected:t===s,onSelectCitation:()=>function(e){c(!0),o(e),setTimeout(()=>d.current?.swiper.slideTo(e)),h()}(t),relatedSearchResult:m.search_results?.[e.search_result_idx]}));return i.createElement("div",{className:"WACConversationalSearch_Citations"},i.createElement(i.Suspense,{fallback:i.createElement(Ie.P,null)},i.createElement(at,{swiperRef:d,initialSlide:s,onSlideChange:o},e)))}()))}function st(e){const{doAutoScroll:t,isStreamingError:n,streamingState:a,serviceManager:s}=e,o=(0,q.D)(),r=s.actions.getOrCreateUserDefinedElement(e.localMessageID);return We(a?.chunks,t),i.createElement("div",{className:"WAC__message-userDefinedResponse","data-floating-menu-container":!0},i.createElement("slot",{name:r.slotName}),n&&i.createElement(Ne.W,{text:o.conversationalSearch_streamingIncomplete}))}var ot=i.memo(st),rt=n(5285),ct=n(2895);const lt=new RegExp(`[ ${pe.Vv}]|\\.$`,"g");var dt=n(6753),ut=n(5888),mt=n(577);function gt(e){const{localMessage:t,disabled:n,scrollElementIntoView:a}=e,c=(0,oe.O)(),l=(0,s.A)(),d=(0,o.d4)(e=>e.locale),u=(0,o.d4)(e=>e.allMessagesByID[t.fullMessageID]),m=(0,i.useRef)((0,dt.u)(mt.y.MISCELLANEOUS)),[g,h]=(0,i.useState)(!1),[p,f]=(0,i.useState)(),[b,v]=(0,i.useState)(),[_,C]=(0,i.useState)(),[y,E]=(0,i.useState)(),[A,x]=(0,i.useState)(),[S,I]=(0,i.useState)(),T=(0,i.useRef)(),M=(0,i.useRef)(!1),k=l.formatMessage({id:"datePicker_chooseDate"},{format:_}),w=l.formatMessage({id:"datePicker_confirmDate"}),$=Boolean(b&&_&&y&&A);function W(e){const t=function(e){let t=e.replace(lt,"");return t.includes("mm")||(t=t.replace("m","mm")),t.includes("dd")||(t=t.replace("d","dd")),t}(rt.Ls[e]?.formats?.L?.toLocaleLowerCase()||pe.tG);var n;x(e),E("zh-tw"===(n=e)?"zh_tw":n.includes("-")?n.split("-")[0]:n),C(t),v(function(e){const t=e.includes("-")?"-":"/",n=e.toLocaleLowerCase().trim()[0];if("m"===n)return`m${t}d${t}Y`;if("d"===n)return`d${t}m${t}Y`;if("y"===n)return`Y${t}m${t}d`;throw Error(`The provided format ${e} is invalid.`)}(t))}const N=(0,i.useCallback)(()=>{const{ui_state:e,fullMessageID:n}=t,a=e.id,i=(0,H.eK)(T.current,p,n);c.actions.sendWithCatch(i,r.vW.DATE_PICKER,{setValueSelectedForMessageID:a})},[t,c,p]),P=(0,i.useCallback)(()=>{a(S,0,24)},[S,a]);return(0,ct.y)(()=>{const e=d,{originalUserText:n}=t.ui_state;u.history.from_history&&n&&f(n);try{rt.Ls[e]?W(e):(0,ut._M)(e).then(e=>{W(e)})}catch{(0,fe.yA)(`Locale ${A} is not recognized by Carbon AI chat. Defaulting to English(US).`),W("en")}}),i.createElement("div",{className:"WACDatePicker"},$&&S&&i.createElement(K.Wdr,null,i.createElement(K.lrV,{className:"WACDatePicker__Calendar",datePickerType:"single",allowInput:!1,locale:y,appendTo:S,onChange:e=>{if(e.length){const t=e[0];T.current=function(e){const t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getFullYear())}-${n}-${t}`}(t),f(function(e,t){const n=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getFullYear());return t.replace("dd",n).replace("mm",a).replace("yyyy",i)}(t,_))}},dateFormat:b,onOpen:()=>{h(!0),M.current?M.current=!1:P()},onClose:()=>h(!1)},i.createElement(K.tKA,{id:m.current,labelText:k,placeholder:_,disabled:n,title:"",onPointerDown:()=>{M.current=!0},onClick:()=>P()}))),i.createElement("div",{className:"WACDatePicker__CalendarContainer",ref:I}),!n&&!g&&p&&i.createElement(K.$nd,{className:"WACDatePicker__ConfirmButton",onClick:N,renderIcon:e=>i.createElement(Z.A,{size:32,...e})},w))}const ht=i.memo(gt);var pt=n(9049);const ft=/^[0-9]*(px)?$/;function bt({localMessageItem:e,originalMessage:t}){const n=(0,oe.O)(),a=(0,q.D)(),s=(0,o.d4)(e=>e.config),r=(0,o.d4)(pt.i_),c=(0,o.d4)(e=>e.allMessageItemsByID),{columns:l,horizontal_alignment:d,vertical_alignment:u,max_width:m}=e.item,g=l?.map(e=>e.width).join(" ")||"1";return i.createElement("div",{className:F("WACGrid",{WACMaxWidthSmall:m===ne.Hi.SMALL,WACMaxWidthMedium:m===ne.Hi.MEDIUM,WACMaxWidthLarge:m===ne.Hi.LARGE}),style:{gridTemplateColumns:g}},e.ui_state.gridLocalMessageItemIDs.map((o,m)=>i.createElement("div",{key:`row-${m}`,className:"WACGrid__Row"},o.map((o,g)=>{const h=e.item.rows[m]?.cells[g];let p,f=l?.[g]?.width||"1";return f.match(ft)?p=f.endsWith("px"):(f="1",p=!1),i.createElement("div",{className:"WACGrid__Cell",style:{width:p?f:void 0,flex:p?void 0:Number(f),alignItems:vt(h?.horizontal_alignment||d),justifyContent:vt(h?.vertical_alignment||u)},key:`cell-${m}-${g}`},o.map((e,o)=>{const l=c[e];return i.createElement(pn,{key:`item-${m}-${g}-${o}`,message:l,originalMessage:t,languagePack:a,requestInputFocus:pe.w6,disableUserInputs:r.isReadonly,config:s,isMessageForInput:!1,scrollElementIntoView:pe.w6,serviceManager:n,isNestedMessageItem:!0,hideFeedback:!0,allowNewFeedback:!1})}))}))))}function vt(e){switch(e){case"bottom":case"right":return"flex-end";case"center":return"center";default:return"flex-start"}}const _t=i.memo(bt);var Ct=n(5230);function yt({messageItem:e,doAutoScroll:t}){const{source:n,image_url:a,title:r,description:c}=e,l=(0,o.d4)(e=>e.theme.useAITheme),d=(0,Ct.PB)(n),{store:u}=(0,oe.O)(),{iframe_ariaImageAltText:m}=(0,q.D)(),g=(0,s.A)().formatMessage({id:"iframe_ariaClickPreviewCard"},{source:d});return i.createElement("div",null,i.createElement(le,{title:r,description:c,source:a,displayURL:n,altText:m,onImageLoad:function(){t?.()},renderIcon:ve.A,onClick:function(){n&&u.dispatch(he.Ay.setIFrameContent(e))},preventInlineError:!0,useAITheme:l}),i.createElement(re.A,null,g))}const Et=i.memo(yt);var At=n(9705),xt=n(9145),St=n(4432);function It({messageItem:e,doAutoScroll:t}){const n=(0,At.q)(),{errors_iframeSource:a}=(0,q.D)(),[s,o]=(0,i.useState)(!1),{source:r,title:c}=e,l=(0,H.I3)(e)?.base_height,d=(0,fe.rP)(l),u=(0,St.T)({paddingTop:d}),m=c||r,g=(0,i.useCallback)(()=>{o(!0),n(a)},[n,a]);return s?i.createElement(Ne.W,{text:a}):i.createElement("div",{className:"WACInlineIFrame",style:u},i.createElement(xt.w,{source:r,title:m,onTimeoutOverride:g,onLoad:()=>t?.()}))}function Tt({doAutoScroll:e,localMessage:t,displayOverride:n}){const{item:a}=t;return a.display===ne.jd.INLINE||n===ne.jd.INLINE?i.createElement(It,{key:a.source,doAutoScroll:e,messageItem:a}):i.createElement(Et,{doAutoScroll:e,messageItem:a})}var Mt=n(369);function kt({className:e,text:t,shouldRemoveHTMLBeforeMarkdownConversion:n=!1}){return i.createElement("div",{className:`WAC__description ${e}`},i.createElement(Mt.s,{text:t,shouldRemoveHTMLBeforeMarkdownConversion:n}))}function wt({title:e=null,description:t=null,id:n=null,shouldRemoveHTMLBeforeMarkdownConversion:a=!1}){return e||t?i.createElement("div",{className:"WAC__received--metablock",id:n},e&&i.createElement(kt,{className:"WAC__received--metablock-content WACMetablock__Title",text:e,shouldRemoveHTMLBeforeMarkdownConversion:a}),t&&i.createElement(kt,{className:"WAC__received--metablock-content WACMetablock__Description",text:t,shouldRemoveHTMLBeforeMarkdownConversion:a})):null}var $t=n(7338);function Wt(e){const{title:t,description:n,options:a,onChange:s,languagePack:o,disableUserInputs:r,serviceManager:c,shouldRemoveHTMLBeforeMarkdownConversion:l}=e,[d,u]=(0,i.useState)(!1),m=(0,i.useRef)(),g=`${(0,Ve.I)()}${c.namespace.suffix}`,h=m.current?.getRootNode?function(e){const t={document:e.ownerDocument,addEventListener:e.ownerDocument.addEventListener.bind(e),removeEventListener:e.ownerDocument.removeEventListener.bind(e),Node:Node};return new Proxy(e,{get:(e,n)=>t[n]})}(m.current.getRootNode()):void 0;return i.createElement("div",{ref:m},i.createElement(wt,{title:t,description:n,id:`WAC__selectUUID_${g}-label`,shouldRemoveHTMLBeforeMarkdownConversion:l}),i.createElement("div",{className:F("WAC__selectHolder",{WAC__customSelectTemporaryPadding:d})},i.createElement(K.Wdr,null,i.createElement(K.msM,{id:`WAC__selectUUID_${g}`,items:a,label:o.options_select,titleText:o.options_select,hideLabel:!0,"aria-label":r?o.options_ariaOptionsDisabled:t,disabled:r,onChange:s,selectedItem:function(){const{value:t,options:n}=e;return n.find(e=>e.value===t)}(),downshiftProps:{environment:h,onIsOpenChange:function(e){e.isOpen&&m.current&&setTimeout(()=>{m?.current&&(u(!0),(0,$t.c1)(m.current,!0),u(!1))},140)},id:`WACSelectComponent__Downshift-${g}`}}))))}var Nt=n(6543);class Pt extends i.Component{constructor(){super(...arguments),this.onOptionSelected=(e,t)=>{const{localMessage:n,serviceManager:a,originalMessage:i}=this.props,{id:s}=i,o=(0,H.Bj)(e,s),c=n.ui_state.id,l="button"===t?r.vW.OPTION_BUTTON:r.vW.OPTION_DROP_DOWN;a.actions.sendWithCatch(o,l,{setValueSelectedForMessageID:c}),this.props.requestInputFocus()},this.onButtonClick=(e,t)=>{this.onOptionSelected(t,"button")},this.onSelectChange=e=>{this.onOptionSelected(e.selectedItem,"dropdown")}}render(){const{localMessage:e,languagePack:t,disableUserInputs:n,serviceManager:a,shouldRemoveHTMLBeforeMarkdownConversion:s}=this.props,{options:o,title:r,description:c,preference:l}=e.item,{optionSelected:d}=e.ui_state;return"button"===(0,H.qH)(l,o.length)?i.createElement(i.Fragment,null,i.createElement(wt,{title:r,description:c,shouldRemoveHTMLBeforeMarkdownConversion:s}),i.createElement("div",{className:"WAC__button-holder"},i.createElement("ul",null,o.map((e,t)=>{const a=!!d&&e.value.input.text===d.input.text;return i.createElement("li",{key:e.label},i.createElement(K.bJ3,{kind:Nt.wQ.TERTIARY,isQuickAction:!0,size:Nt.Ni.SMALL,className:`WAC__button-${t}`,disabled:n,isSelected:a,onClick:t=>{this.onButtonClick(t,e)}},e.label))})))):i.createElement(Wt,{serviceManager:a,languagePack:t,title:r,description:c,options:o,disableUserInputs:n,onChange:this.onSelectChange,value:d,shouldRemoveHTMLBeforeMarkdownConversion:s})}}var Lt=n(9624),Dt=(n(4833),n(6073),n(7118)),Rt=n(3967);const Ft=(0,h.dI)({...Dt.A,attrs:{...Dt.A.attrs,slot:"icon"}});function Ot(e){const{tableTitle:t,tableDescription:n,headers:a,containerWidth:i,filterPlaceholderText:s,locale:o,_handleDownload:r,_rowsWithIDs:c,_allowFiltering:l,_handleFilterEvent:d}=e;return u.qy`<cds-custom-table
    style="--cds-chat-table-width:${i}px"
    size="md"
    locale=${o}
    .isSortable=${l}
    .useZebraStyles=${!0}
    @cds-custom-table-filtered=${d}
  >
    ${t&&u.qy`<cds-custom-table-header-title slot="title"
      >${t}</cds-custom-table-header-title
    >`}
    ${n&&u.qy`<cds-custom-table-header-description slot="description"
      >${n}</cds-custom-table-header-description
    >`}
    ${u.qy`<cds-custom-table-toolbar slot="toolbar">
      <cds-custom-table-toolbar-content>
        ${l?u.qy`<cds-custom-table-toolbar-search
              persistent
              placeholder=${s}
            ></cds-custom-table-toolbar-search>`:""}
        <cds-custom-button @click=${r}
          >${(0,_.T)(Ft)}</cds-custom-button
        >
      </cds-custom-table-toolbar-content>
    </cds-custom-table-toolbar>`} ${u.qy`<cds-custom-table-head>
      <cds-custom-table-header-row>
        ${a.map(e=>u.qy`<cds-custom-table-header-cell
              >${e}</cds-custom-table-header-cell
            >`)}
      </cds-custom-table-header-row>
    </cds-custom-table-head>`} ${u.qy`<cds-custom-table-body>
      ${(0,Rt.u)(c,e=>e.id,e=>u.qy`<cds-custom-table-row id=${e.id}
            >${e.cells.map(e=>u.qy`<cds-custom-table-cell>${e}</cds-custom-table-cell>`)}</cds-custom-table-row
          >`)}
    </cds-custom-table-body>`}
  </cds-custom-table>`}n(644),n(6379),n(533);const Bt=[5,10,15,20,50],zt="cds-aichat-table";let qt=class extends u.WF{constructor(){super(...arguments),this._isValid=!0,this._currentPageNumber=1,this._rowsPerPageChanged=!1,this._rowsWithIDs=[]}updated(e){(e.has("headers")||e.has("rows"))&&void 0!==this.headers&&void 0!==this.rows&&this._calcIsTableValid(),e.has("rows")&&void 0!==this.rows&&this._initializeRowsArrays(),void 0===this._currentPageSize&&e.has("chatHeight")&&this.chatHeight!==e.get("chatHeight")&&this._initializePageSize()}_calcIsTableValid(){const e=this.headers.length;this._isValid=!this.rows.some(t=>t.cells.length!==e)}_initializeRowsArrays(){this._rowsWithIDs=[],this._filterVisibleRowIDs=new Set,this.rows.forEach((e,t)=>{const n=t.toString();this._rowsWithIDs.push({...e,id:n}),this._filterVisibleRowIDs.add(n)})}_initializePageSize(){this.chatHeight>850?this._currentPageSize=10:this._currentPageSize=5,this._allowFiltering=this.rows.length>this._currentPageSize,this._updateVisibleRows()}_handlePageChangeEvent(e){this._updateVisibleRows(e.detail?.page,e.detail?.pageSize),e.stopPropagation()}_handlePageSizeChangeEvent(e){this._rowsPerPageChanged=!0,this._currentPageSize=e.detail?.pageSize,this._updateVisibleRows(),e.stopPropagation()}_handleFilterEvent(e){this._filterVisibleRowIDs=new Set(e?.detail?.unfilteredRows.map(e=>e.id)),this._currentPageNumber=1,this._updateVisibleRows(),e.stopPropagation()}_updateVisibleRows(e=this._currentPageNumber,t=this._currentPageSize){this._currentPageNumber=e;const n=Array.from(this.renderRoot.querySelectorAll("cds-custom-table-row"));n.forEach(e=>e.style.setProperty("display","none"));const a=n.filter(e=>this._filterVisibleRowIDs.has(e.id)),i=e*t-1;for(let n=(e-1)*t;n<=i;n++)a[n]?.removeAttribute("style")}_handleDownload(){const e=[this.headers,...this.rows.map(e=>e.cells)],t=(0,Lt.A)(e),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),i=URL.createObjectURL(n);a.setAttribute("href",i),a.setAttribute("download","table-data.csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}render(){return this.loading?u.qy`<cds-custom-table-skeleton row-count="3" column-count="2">
  </cds-custom-table-skeleton>`:this.rows.length>this._currentPageSize||this._rowsPerPageChanged?u.qy`${Ot(this)} ${function(e){const{_currentPageSize:t,_currentPageNumber:n,_filterVisibleRowIDs:a,rows:i,previousPageText:s,nextPageText:o,itemsPerPageText:r,getPaginationSupplementalText:c,getPaginationStatusText:l,_handlePageChangeEvent:d,_handlePageSizeChangeEvent:m}=e,g=a.size,h=i.length,p=Bt.filter(e=>e<h);return u.qy`<cds-custom-pagination
    page-size=${t}
    page=${n}
    total-items=${g}
    totalPages=${Math.ceil(g/t)}
    backward-text=${s}
    forward-text=${o}
    items-per-page-text=${r}
    .formatSupplementalText=${c}
    .formatStatusWithDeterminateTotal=${l}
    @cds-custom-pagination-changed-current=${d}
    @cds-custom-page-sizes-select-changed=${m}
  >
    ${p.map(e=>u.qy`<cds-custom-select-item value="${e}"
          >${e}</cds-custom-select-item
        >`)}
    <cds-custom-select-item value="${h}"
      >${h}</cds-custom-select-item
    >
  </cds-custom-pagination>`}(this)}`:u.qy`${Ot(this)}`}};qt.styles=u.AH`
    ${(0,u.iz)("cds-custom-table-header-title,\ncds-custom-table-header-description,\ncds-custom-table-toolbar{\n  position:sticky;\n  inline-size:var(--cds-chat-table-width, auto);\n  inset-inline-start:0;\n}\n\n:dir(rtl) cds-custom-table-header-title,\n:dir(rtl) cds-custom-table-header-description,\n:dir(rtl) cds-custom-table-toolbar{\n  right:0;\n  left:unset;\n}\n\ncds-custom-table-header-title,\ncds-custom-table-header-description{\n  padding:0 1rem;\n  inline-size:calc(var(--cds-chat-table-width, auto) - 1rem - 1rem);\n  margin-inline:-1rem;\n}\n\ncds-custom-table-header-description{\n  margin-block-end:-0.5rem;\n}\n\ncds-custom-pagination{\n  inline-size:100%;\n}")}
  `,(0,l.Cg)([(0,m.MZ)({type:String,attribute:"table-title"})],qt.prototype,"tableTitle",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"table-description"})],qt.prototype,"tableDescription",void 0),(0,l.Cg)([(0,m.MZ)({type:Array})],qt.prototype,"headers",void 0),(0,l.Cg)([(0,m.MZ)({type:Array})],qt.prototype,"rows",void 0),(0,l.Cg)([(0,m.MZ)({type:Number,attribute:"container-width"})],qt.prototype,"containerWidth",void 0),(0,l.Cg)([(0,m.MZ)({type:Number,attribute:"chat-height"})],qt.prototype,"chatHeight",void 0),(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"loading"})],qt.prototype,"loading",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"filter-placeholder-text"})],qt.prototype,"filterPlaceholderText",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"previous-page-text"})],qt.prototype,"previousPageText",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"next-page-text"})],qt.prototype,"nextPageText",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"items-per-page-text"})],qt.prototype,"itemsPerPageText",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"locale"})],qt.prototype,"locale",void 0),(0,l.Cg)([(0,m.MZ)({type:Function,attribute:!1})],qt.prototype,"getPaginationSupplementalText",void 0),(0,l.Cg)([(0,m.MZ)({type:Function,attribute:!1})],qt.prototype,"getPaginationStatusText",void 0),(0,l.Cg)([(0,m.wk)()],qt.prototype,"_isValid",void 0),(0,l.Cg)([(0,m.wk)()],qt.prototype,"_currentPageNumber",void 0),(0,l.Cg)([(0,m.wk)()],qt.prototype,"_currentPageSize",void 0),(0,l.Cg)([(0,m.wk)()],qt.prototype,"_rowsPerPageChanged",void 0),(0,l.Cg)([(0,m.wk)()],qt.prototype,"_filterVisibleRowIDs",void 0),(0,l.Cg)([(0,m.wk)()],qt.prototype,"_rowsWithIDs",void 0),(0,l.Cg)([(0,m.wk)()],qt.prototype,"_allowFiltering",void 0),(0,l.Cg)([D.oI],qt.prototype,"_handlePageChangeEvent",null),(0,l.Cg)([D.oI],qt.prototype,"_handlePageSizeChangeEvent",null),(0,l.Cg)([D.oI],qt.prototype,"_handleFilterEvent",null),qt=(0,l.Cg)([(0,d.Q)(zt)],qt);const Ut=(0,c.a)({tagName:zt,elementClass:qt,react:i});function Ht(e){const{tableItem:t}=e,{title:n,description:a,headers:r,rows:c}=t,l=(0,o.d4)(e=>e.theme.carbonTheme),d=(0,o.d4)(e=>e.chatHeight),u=(0,o.d4)(e=>e.locale),m=(0,q.D)(),g=(0,s.A)(),h=(0,i.useRef)(null),[p,f]=(0,i.useState)();function b(){f(h.current?.clientWidth)}return(0,i.useLayoutEffect)(()=>{new ResizeObserver(b).observe(h.current)}),(0,i.useMemo)(()=>{const e=r.length,t=!c.some(t=>t.cells.length!==e);return t||(0,fe.yA)("Number of cells in the table header does not match the number of cells in one or more of the table rows. In order to render a table there needs to be the same number of columns in the table header and all of the table rows."),t},[c,r])?i.createElement(K.Sxu,{theme:pe.Uu.includes(l)?"white":"g90"},i.createElement("div",{className:"WACTableContainer",ref:h},i.createElement(i.Suspense,{fallback:null},i.createElement(Ut,{tableTitle:n,tableDescription:a,headers:r,rows:c,containerWidth:p,chatHeight:d,filterPlaceholderText:m.table_filterPlaceholder,previousPageText:m.table_previousPage,nextPageText:m.table_nextPage,itemsPerPageText:m.table_itemsPerPage,getPaginationSupplementalText:function({count:e}){return g.formatMessage({id:"table_paginationSupplementalText"},{pagesCount:e})},getPaginationStatusText:function({start:e,end:t,count:n}){return g.formatMessage({id:"table_paginationStatus"},{start:e,end:t,count:n})},locale:u})))):i.createElement(Ne.W,null)}const Zt=i.memo(Ht);var Vt=n(2629),jt=n(6895);function Gt({message:e,serviceManager:t}){const{tour_resumeButton:n,tour_restartButton:a,tour_startButton:s}=(0,q.D)(),{activeTourID:c}=(0,o.d4)(e=>e.persistedToBrowserStorage.chatState.persistedTourState),l=e.fullMessageID===c,d=e.item.user_defined?.card_title||"Guided journey",u=e.item.user_defined?.card_description||"Follow along as the assistant guides you to where you want to be.";return i.createElement(K.FAs,{className:"WACTourCard"},i.createElement("div",{className:"WACTourCard__Title"},d),i.createElement("div",{className:"WACTourCard__Description"},u),l&&i.createElement("div",null,i.createElement(K.$nd,{className:"WACTourCard__ResumeButton",renderIcon:ve.A,onClick:async function(){await t.actions.changeView(jt.qi.TOUR,{mainWindowCloseReason:r.MX.TOUR_CARD_RESUMED_TOUR})}},n),i.createElement(K.$nd,{className:"WACTourCard__RestartButton",kind:"ghost",renderIcon:Vt.A,onClick:async function(){(await t.actions.changeView(jt.qi.TOUR,{mainWindowCloseReason:r.MX.TOUR_CARD_RESTARTED_TOUR})).tour&&t.actions.changeStepInTour({newStepIndex:0})}},a)),!l&&i.createElement(K.$nd,{className:"WACTourCard__StartButton",renderIcon:ve.A,onClick:()=>t.actions.startTour(e,r.h4.START_TOUR_CLICKED,{mainWindowCloseReason:r.MX.TOUR_CARD_STARTED_TOUR})},s))}const Kt=i.memo(Gt);function Xt(e){const{text:t,streamingState:n,removeHTML:a,isStreamingError:s,doAutoScroll:o}=e,r=(0,q.D)();let c;return We(n?.chunks,o),c=n&&!n.isDone?n.chunks.map(e=>e.text).join(""):t,i.createElement("div",{className:"WACStreamingRichText"},i.createElement(Mt.s,{text:c,shouldRemoveHTMLBeforeMarkdownConversion:a}),s&&i.createElement(Ne.W,{text:r.conversationalSearch_streamingIncomplete}))}var Yt=n(4051),Qt=n(34);const Jt=(0,ut.w9)("chainOfThought_stepTitle");class en extends u.WF{constructor(){super(...arguments),this.open=!1,this.formatStepLabelText=({stepNumber:e,stepTitle:t})=>Jt.format({stepNumber:e,stepTitle:t||""}),this.inputLabelText=y.Ay$.chainOfThought_inputLabel,this.outputLabelText=y.Ay$.chainOfThought_outputLabel,this.toolLabelText=y.Ay$.chainOfThought_toolLabel,this.explainabilityText=y.Ay$.chainOfThought_explainabilityLabel,this.statusSucceededLabelText=y.Ay$.chainOfThought_statusSucceededLabel,this.statusFailedLabelText=y.Ay$.chainOfThought_statusFailedLabel,this.statusProcessingLabelText=y.Ay$.chainOfThought_statusProcessingLabel,this._chainOfThoughtPanelID=`${C.o}-chain-of-thought-panel-id-${(0,dt.u)()}`}firstUpdated(e){this._steps=this.steps.map(e=>({...e,open:!1}))}}en.styles=u.AH`
    ${(0,u.iz)(":host{\n  display:block;\n  margin-block-start:1rem;\n}\n\n:host([open]) .cds--aichat-chain-of-thought-content{\n  display:block;\n  overflow:visible;\n  max-block-size:-moz-fit-content;\n  max-block-size:fit-content;\n  opacity:1;\n}\n:host([open]) .cds--aichat-chain-of-thought-button-chevron svg{\n  transform:rotate(-90deg);\n}\n\n.cds--aichat-chain-of-thought-button-chevron{\n  display:flex;\n  flex-basis:1.5rem;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .cds--aichat-chain-of-thought-button-chevron svg{\n    transform:rotate(-270deg);\n    transition:none;\n  }\n}\n.cds--aichat-chain-of-thought-button-chevron svg{\n  transform:rotate(-270deg);\n  transition:all 110ms cubic-bezier(0.2, 0, 0.38, 0.9);\n}\n\n.cds--aichat-chain-of-thought-content{\n  display:none;\n  overflow:hidden;\n  max-block-size:0;\n  opacity:0;\n  transition:all 110ms cubic-bezier(0, 0, 0.38, 0.9) allow-discrete;\n}\n\n.cds--aichat-chain-of-thought-inner-content{\n  border:1px solid var(--cds-border-subtle-01, #c6c6c6);\n  background-color:var(--cds-layer-01, #f4f4f4);\n  margin-block-start:0.5rem;\n}\n\n.cds--aichat-chain-of-thought-item:not(:last-child){\n  padding-block-end:0.75rem;\n}\n\n.cds--aichat-chain-of-thought-item cds-aichat-markdown-text:not(:first-child){\n  padding-block-start:0.5rem;\n}\n\n.cds--aichat-chain-of-thought-item-label{\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n}\n\nbutton.cds--aichat-chain-of-thought-button{\n  box-sizing:border-box;\n  padding:0;\n  border:0;\n  margin:0;\n  font-family:inherit;\n  font-size:100%;\n  vertical-align:baseline;\n  display:inline-block;\n  padding:0;\n  border:0;\n  -webkit-appearance:none;\n     -moz-appearance:none;\n          appearance:none;\n  background:none;\n  cursor:pointer;\n  text-align:start;\n  inline-size:100%;\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n  display:flex;\n  align-items:center;\n  color:var(--cds-text-primary, #161616);\n}\nbutton.cds--aichat-chain-of-thought-button *,\nbutton.cds--aichat-chain-of-thought-button *::before,\nbutton.cds--aichat-chain-of-thought-button *::after{\n  box-sizing:inherit;\n}\nbutton.cds--aichat-chain-of-thought-button::-moz-focus-inner{\n  border:0;\n}\n\nbutton.cds--aichat-chain-of-thought-button:focus,\nbutton.cds--aichat-chain-of-thought-button:focus-visible{\n  outline:2px solid var(--cds-focus);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-content{\n  display:block;\n  overflow:visible;\n  background:var(--cds-layer-01, #f4f4f4);\n  color:var(--cds-text-primary, #161616);\n  max-block-size:-moz-fit-content;\n  max-block-size:fit-content;\n  opacity:1;\n  transition:all 110ms cubic-bezier(0, 0, 0.38, 0.9) allow-discrete;\n}\n\n.cds--aichat-chain-of-thought-item{\n  padding-block:1rem;\n  padding-inline:2rem 1rem;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-content[hidden]{\n  display:none;\n  overflow:hidden;\n  max-block-size:0;\n  opacity:0;\n  padding-block:0;\n  padding-inline:0;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-chevron{\n  display:flex;\n  flex:0 1 2rem;\n  justify-content:center;\n  color:var(--cds-text-primary, #161616);\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .cds--aichat-chain-of-thought-accordion-item-header-chevron svg{\n    fill:var(--cds-text-primary, #161616);\n    transform:rotate(-270deg);\n    transition:none;\n  }\n}\n.cds--aichat-chain-of-thought-accordion-item-header-chevron svg{\n  fill:var(--cds-text-primary, #161616);\n  transform:rotate(-270deg);\n  transition:all 110ms cubic-bezier(0.2, 0, 0.38, 0.9);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-chevron[data-open] svg{\n  transform:rotate(-90deg);\n}\n\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header{\n  box-sizing:border-box;\n  padding:0;\n  border:0;\n  margin:0;\n  font-family:inherit;\n  font-size:100%;\n  vertical-align:baseline;\n  display:inline-block;\n  padding:0;\n  border:0;\n  -webkit-appearance:none;\n     -moz-appearance:none;\n          appearance:none;\n  background:none;\n  cursor:pointer;\n  text-align:start;\n  inline-size:100%;\n  font-size:var(--cds-body-01-font-size, 0.875rem);\n  font-weight:var(--cds-body-01-font-weight, 400);\n  line-height:var(--cds-body-01-line-height, 1.42857);\n  letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);\n  display:flex;\n  align-items:center;\n  padding:0.5rem 0;\n  background:var(--cds-layer-accent-02, #e0e0e0);\n  block-size:2rem;\n}\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header *,\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header *::before,\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header *::after{\n  box-sizing:inherit;\n}\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header::-moz-focus-inner{\n  border:0;\n}\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header:focus,\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header:focus-visible{\n  position:relative;\n  z-index:2;\n  box-shadow:0 -1px 0 0 var(--cds-focus, #0f62fe), inset 0 1px 0 0 var(--cds-focus, #0f62fe), inset 2px 0 0 0 var(--cds-focus, #0f62fe), 0 1px 0 0 var(--cds-focus, #0f62fe), inset 0 -1px 0 0 var(--cds-focus, #0f62fe), inset -2px 0 0 0 var(--cds-focus, #0f62fe);\n  outline:none;\n}\n\n.cds--aichat-chain-of-thought-accordion-item:nth-child(odd) button.cds--aichat-chain-of-thought-accordion-item-header{\n  background:var(--cds-layer-02, #ffffff);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-title{\n  overflow:hidden;\n  flex:1 1;\n  color:var(--cds-text-primary, #161616);\n  margin-inline-end:0.5rem;\n  text-overflow:ellipsis;\n  white-space:nowrap;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-status{\n  display:flex;\n  flex:0 0 1.5rem;\n  align-items:center;\n  justify-content:center;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-status--failure{\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  margin-inline-end:0.5rem;\n}\n.cds--aichat-chain-of-thought-accordion-item-header-status--failure svg{\n  fill:var(--cds-support-error, #da1e28);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-status--success{\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  margin-inline-end:0.5rem;\n}\n.cds--aichat-chain-of-thought-accordion-item-header-status--success svg{\n  fill:var(--cds-support-success, #24a148);\n}")}
  `,(0,l.Cg)([(0,m.MZ)({type:Boolean,attribute:"open",reflect:!0})],en.prototype,"open",void 0),(0,l.Cg)([(0,m.MZ)({type:Array,attribute:"steps",reflect:!0})],en.prototype,"steps",void 0),(0,l.Cg)([(0,m.MZ)({type:Function,attribute:!1})],en.prototype,"formatStepLabelText",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"input-label-text",reflect:!0})],en.prototype,"inputLabelText",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"output-label-text",reflect:!0})],en.prototype,"outputLabelText",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"tool-label-text",reflect:!0})],en.prototype,"toolLabelText",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"explainability-text",reflect:!0})],en.prototype,"explainabilityText",void 0),(0,l.Cg)([(0,m.MZ)({type:Function,attribute:!1})],en.prototype,"onToggle",void 0),(0,l.Cg)([(0,m.MZ)({type:Function,attribute:!1})],en.prototype,"onStepToggle",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"status-succeeded-label-text",reflect:!0})],en.prototype,"statusSucceededLabelText",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"status-failed-label-text",reflect:!0})],en.prototype,"statusFailedLabelText",void 0),(0,l.Cg)([(0,m.MZ)({type:String,attribute:"status-processing-label-text",reflect:!0})],en.prototype,"statusProcessingLabelText",void 0),(0,l.Cg)([(0,m.wk)()],en.prototype,"_steps",void 0),(0,l.Cg)([(0,m.wk)()],en.prototype,"_chainOfThoughtPanelID",void 0),n(280),n(9e3);var tn=n(3777),nn=n(9133),an=n(6608),sn=n(82);const on=`${C.o}-chain-of-thought-item`,rn=`${C.o}-chain-of-thought-accordion-item-header-status`,cn=(0,h.dI)(nn.A),ln=(0,h.dI)(tn.A),dn=(0,h.dI)(an.A);function un(e,t,n){const a=(0,sn.WV)(e);return a?function(e,t,n){return u.qy`<div
    class="${on} ${on}-${n}"
  >
    <div class="${on}-label">${t}</div>
    <cds-aichat-markdown-text
      sanitize-html
      markdown=${e}
    ></cds-aichat-markdown-text>
  </div>`}(a,t,n):u.qy``}const mn="cds-aichat-chain-of-thought";let gn=class extends en{render(){return function(e){const{_chainOfThoughtPanelID:t,explainabilityText:n,open:a}=e;return u.qy`<div class="${C.o}-chain-of-thought">
    <button
      class="${C.o}-chain-of-thought-button"
      @click=${function(){e.open=!e.open,e.onToggle?.(e.open,e)}}
      aria-expanded=${a}
      aria-controls=${t}
    >
      <span class="${C.o}-chain-of-thought-button-chevron"
        >${(0,_.T)(cn)}</span
      >
      ${n}
    </button>
    <div
      id=${t}
      class="${C.o}-chain-of-thought-content"
      ?hidden=${!a}
    >
      <div class="${C.o}-chain-of-thought-inner-content">
        ${function(e){const{_steps:t,open:n,_chainOfThoughtPanelID:a,onStepToggle:i,formatStepLabelText:s,statusSucceededLabelText:o,statusFailedLabelText:r,statusProcessingLabelText:c}=e;return n?u.qy`${t.map((t,n)=>{const l=n+1,d=`${a}-step-${l}-content`;return u.qy`<div
        class="${C.o}-chain-of-thought-accordion-item"
      >
        <button
          class="${C.o}-chain-of-thought-accordion-item-header"
          @click=${()=>{t.open=!t.open,e.requestUpdate();const n=e.shadowRoot.querySelector(`#${d}`);i?.(t.open,n)}}
          aria-expanded=${t.open}
          aria-controls=${d}
        >
          <span
            class="${C.o}-chain-of-thought-accordion-item-header-chevron"
            ?data-open=${t.open}
            >${(0,_.T)(cn)}</span
          >
          <span
            class="${C.o}-chain-of-thought-accordion-item-header-title"
            >${s({stepNumber:l,stepTitle:t.title})}</span
          >
          <span class="${rn}"
            >${function(e,t,n,a){switch(e){case ne.iE.PROCESSING:return u.qy`<cds-custom-inline-loading
        status="active"
        aria-label="${a}"
      ></cds-custom-inline-loading>`;case ne.iE.FAILURE:return u.qy`<span
        class="${rn}--${ne.iE.FAILURE}"
        aria-label="${n}"
        >${(0,_.T)(dn)}</span
      >`;default:return u.qy`<span
        class="${rn}--${ne.iE.SUCCESS}"
        aria-label="${t}"
        >${(0,_.T)(ln)}</span
      >`}}(t.status,o,r,c)}</span
          >
        </button>
        <div
          class="${C.o}-chain-of-thought-accordion-item-content"
          id=${d}
          ?hidden=${!t.open}
        >
          ${function(e,t){const{inputLabelText:n,outputLabelText:a,toolLabelText:i}=e;return t.open?u.qy` ${t.description?u.qy`<div
          class="${on} ${on}-description"
        >
          <cds-aichat-markdown-text
            sanitize-html
            markdown=${t.description}
          ></cds-aichat-markdown-text>
        </div>`:null}
    ${t.tool_name?u.qy`<div
          class="${on} ${on}-toolName"
        >
          <div class="${on}-label">${i}</div>
          ${t.tool_name}
        </div>`:null}
    ${un(t.request?.args,n,"input")}
    ${un(t.response?.content,a,"output")}`:u.qy``}(e,t)}
        </div>
      </div>`})}`:u.qy``}(e)}
      </div>
    </div>
  </div>`}(this)}};gn=(0,l.Cg)([(0,d.Q)(mn)],gn);const hn=(0,c.a)({tagName:mn,elementClass:gn,react:i});function pn(e){const{allowNewFeedback:t,hideFeedback:n,serviceManager:c,originalMessage:l,message:d}=e,u=(0,s.A)(),m=(0,q.D)(),g=(0,i.useRef)(),h=(0,o.d4)(pt.R0,o.bN),p=(0,o.d4)(e=>e.agentState),f=(0,o.d4)(e=>e.persistedToBrowserStorage.chatState.agentState),b=d.item.message_options?.feedback?.id,v=(0,Qt.r)(),_=l.history?.feedback?.[b],y=(0,i.useMemo)(()=>_?{text:_.text,selectedCategories:_.categories}:null,[_]),[E,A]=(0,i.useState)(!1),[x,S]=(0,i.useState)(_&&_.is_positive),[I,T]=(0,i.useState)(_&&!_.is_positive),[k,w]=(0,i.useState)(Boolean(_));function $(t,n,a){return i.createElement(Xt,{text:t.item.text,streamingState:t.ui_state.streamingState,isStreamingError:a?.history?.is_streaming_error,removeHTML:n,doAutoScroll:e.doAutoScroll})}function W(t,n){const{serviceManager:a}=e;return i.createElement(ot,{streamingState:t.ui_state.streamingState,isStreamingError:n?.history?.is_streaming_error,doAutoScroll:e.doAutoScroll,localMessageID:t.ui_state.id,serviceManager:a})}function N(t,n){t&&setTimeout(()=>{e.scrollElementIntoView(n,64,64)})}function P({stepNumber:e,stepTitle:t}){return u.formatMessage({id:"chainOfThought_stepTitle"},{stepNumber:e,stepTitle:t})}return function(s,o){if((0,H.ks)(o))return function(t,n){const s=t.item;if((0,H.p0)(s)){const o=n.history?.label||s.text,r=t.ui_state.originalUserText||o;return i.createElement("div",{className:"WAC__sent--text"},n.input.message_type===ne.Co.FILE&&i.createElement(a.A,{className:"WAC__sent-fileIcon","aria-label":e.languagePack.fileSharing_fileIcon}),i.createElement("span",{role:"heading","aria-level":2},r))}return null}(s,o);if((0,H.Sv)(o)){const a=function(t,n){if((0,H.D6)(t.item))return function(t){const{serviceManager:n}=e;return i.createElement(Kt,{message:t,serviceManager:n})}(t);if((0,H.OL)(t.item))return W(t,n);const a=t.item.response_type,s=Boolean(t.item.agent_message_type);switch(a){case ne.sP.TEXT:return function(t,n,a){return e.isNestedMessageItem?$(t,a,n):i.createElement("div",{className:"WAC__received--textContent"},$(t,a,n))}(t,n,s);case ne.sP.IMAGE:return function(t){const{languagePack:n,serviceManager:a}=e,{useAITheme:s}=a.store.getState().theme;return i.createElement(ce._,{imageError:n.errors_imageSource,source:t.item.source,title:t.item.title,description:t.item.description,altText:t.item.alt_text,needsAnnouncement:t.ui_state.needsAnnouncement,useAITheme:s})}(t);case ne.sP.OPTION:return function(t,n){const{languagePack:a,requestInputFocus:s,serviceManager:o,disableUserInputs:r,isMessageForInput:c}=e,l=Boolean(t.item.agent_message_type);return i.createElement(Pt,{localMessage:t,originalMessage:n,languagePack:a,disableUserInputs:r||!c,requestInputFocus:s,serviceManager:o,shouldRemoveHTMLBeforeMarkdownConversion:l})}(t,n);case ne.sP.CONNECT_TO_AGENT:return function(t,n){const{languagePack:a,config:s,serviceManager:o,disableUserInputs:r,isMessageForInput:c}=e;return i.createElement(ee,{localMessage:t,originalMessage:n,languagePack:a,config:s,serviceManager:o,agentState:p,agentDisplayState:h,persistedAgentState:f,disableUserInputs:r||!c,requestFocus:e.requestInputFocus})}(t,n);case ne.sP.INLINE_ERROR:return function(e){return i.createElement(Ne.W,{text:e.item.text})}(t);case ne.sP.IFRAME:return function(t){const{doAutoScroll:n,isNestedMessageItem:a}=e,s=a?ne.jd.INLINE:void 0;return i.createElement(Tt,{localMessage:t,doAutoScroll:n,displayOverride:s})}(t);case ne.sP.VIDEO:return function(t){const{doAutoScroll:n}=e,{item:a}=t,{source:s,title:o,description:r,alt_text:c}=a;return i.createElement(Yt.d,{source:s,title:o,description:r,baseHeight:(0,H.I3)(a)?.base_height,ariaLabel:c,doAutoScroll:n,needsAnnouncement:t.ui_state.needsAnnouncement})}(t);case ne.sP.AUDIO:return function(t){const{doAutoScroll:n}=e,{source:a,title:s,description:o,alt_text:r}=t.item;return i.createElement(ie,{source:a,title:s,description:o,ariaLabel:r,doAutoScroll:n,needsAnnouncement:t.ui_state.needsAnnouncement})}(t);case ne.sP.DATE:return function(t){return i.createElement(ht,{localMessage:t,disabled:!e.isMessageForInput,scrollElementIntoView:e.scrollElementIntoView})}(t);case ne.sP.CONVERSATIONAL_SEARCH:return function(t,n){const{scrollElementIntoView:a,doAutoScroll:s}=e;return i.createElement(it,{localMessageItem:t,scrollElementIntoView:a,isStreamingError:n.history?.is_streaming_error,doAutoScroll:s})}(t,n);case ne.sP.TABLE:return function(e){return i.createElement(Zt,{tableItem:e.item})}(t);case ne.sP.CARD:return function(t,n){const{isMessageForInput:a,requestInputFocus:s}=e;return i.createElement(Se,{localMessageItem:t,fullMessage:n,isMessageForInput:a,requestFocus:s})}(t,n);case ne.sP.CAROUSEL:return function(t,n){const{isMessageForInput:a,requestInputFocus:s}=e;return i.createElement(ke,{localMessageItem:t,fullMessage:n,isMessageForInput:a,requestFocus:s})}(t,n);case ne.sP.BUTTON:return function(t,n){const{isMessageForInput:a,requestInputFocus:s}=e;return i.createElement(Ee,{localMessageItem:t,fullMessage:n,isMessageForInput:a,requestFocus:s})}(t,n);case ne.sP.GRID:return function(e,t){return i.createElement(_t,{localMessageItem:e,originalMessage:t})}(t,n);default:return W(t,n)}}(s,o),l=s.item.streaming_metadata?.stream_stopped;return i.createElement(i.Fragment,null,a,l&&i.createElement(U,null),function(t){const n=t.item.message_options?.chain_of_thought;return!(!n||e.isNestedMessageItem)&&i.createElement(hn,{steps:n,onToggle:N,onStepToggle:N,formatStepLabelText:P,explainabilityText:m.chainOfThought_explainabilityLabel,inputLabelText:m.chainOfThought_inputLabel,outputLabelText:m.chainOfThought_outputLabel,toolLabelText:m.chainOfThought_toolLabel})}(s),function(a,s){const o=a.item.message_options?.feedback||{},{id:l,is_on:d,show_positive_details:u=!0,show_negative_details:h=!0,show_text_area:p=!0,show_prompt:f=!0,title:b,prompt:$,categories:W,placeholder:N,disclaimer:P}=o;if(e.isNestedMessageItem||n||!t&&!_||!d)return!1;function L(e){if(l){const t={feedback:{[l]:e}};c.store.dispatch(he.Ay.mergeMessageHistory(a.fullMessageID,t))}}function D(t){const n=t?!x:!I,i=(t?u:h)&&n;n&&!i?(L({is_positive:t}),w(!0),c.fire({type:r.xp.FEEDBACK,messageItem:a.item,message:s,interactionType:r.ES.SUBMITTED,isPositive:t})):(A(i),i&&setTimeout(()=>{e.scrollElementIntoView(g.current,48,56)}),c.fire({type:r.xp.FEEDBACK,messageItem:a.item,message:s,interactionType:i?r.ES.DETAILS_OPENED:r.ES.DETAILS_CLOSED,isPositive:t})),S(!!t&&n),T(!t&&n)}function R(e){const t=E&&(e?x:I);return i.createElement(z,{class:`${C.o}-feedbackDetails-${e?"positive":"negative"}`,id:`${v}-feedback-${e?"positive":"negative"}`,isOpen:t,isReadonly:k,onClose:()=>D(e),onSubmit:t=>function(e,t){w(!0),A(!1);const n={type:r.xp.FEEDBACK,messageItem:a.item,message:s,interactionType:r.ES.SUBMITTED,isPositive:e,text:t.text,categories:t.selectedCategories};c.fire(n),L({is_positive:n.isPositive,text:n.text,categories:n.categories})}(e,t),initialValues:_&&_?.is_positive===e?y:null,showTextArea:p,showPrompt:f,title:b||m.feedback_defaultTitle,prompt:$||m.feedback_defaultPrompt,categories:W,placeholder:N||m.feedback_defaultPlaceholder,disclaimer:P,submitLabel:m.feedback_submitLabel,cancelLabel:m.feedback_cancelLabel})}return i.createElement("div",{className:"WAC__received--feedback"},i.createElement(M,{isPositiveOpen:E&&x,isNegativeOpen:E&&I,isPositiveSelected:x,isNegativeSelected:I,hasPositiveDetails:u,hasNegativeDetails:h,isPositiveDisabled:I||k,isNegativeDisabled:x||k,positiveLabel:m.feedback_positiveLabel,negativeLabel:m.feedback_negativeLabel,panelID:v,onClick:D}),i.createElement("div",{ref:g},R(!0),R(!1)))}(s,o))}return!1}(e.message,e.originalMessage)}},9145:function(e,t,n){n.d(t,{w:function(){return d}});var a=n(9599),i=n(3696),s=n(9705),o=n(6254),r=n(5822),c=n(5005),l=n(1485);function d({title:e,source:t,onTimeoutOverride:n,onLoad:d}){const{errors_iframeSource:u,iframe_ariaSourceLoaded:m}=(0,o.D)(),g=(0,s.q)(),[h,p]=(0,i.useState)(!0),[f,b]=(0,i.useState)(!1),v=(0,i.useCallback)(()=>{p(!1),b(!0),g(u)},[g,u]),_=(0,i.useCallback)(()=>{p(!1),g(m),d?.()},[g,m,d]);return(0,i.useEffect)(()=>{let e=null;return h&&(e=setTimeout(n||v,r.S)),()=>{clearTimeout(e)}},[h,v,n]),i.createElement("div",{className:"WACIFrameComponent__Wrapper"},f&&(C=u,i.createElement("div",{className:"WACIFrameComponent__StatusContainer"},i.createElement(l.W,{text:C}))),!f&&i.createElement("iframe",{className:"WACIFrameComponent__IFrame",title:e,src:t,sandbox:"allow-scripts allow-downloads allow-forms allow-same-origin allow-popups",referrerPolicy:"origin",onLoad:_}),h&&i.createElement(c.l,{delay:1500},i.createElement("div",{className:"WACIFrameComponent__StatusContainer"},i.createElement(a.Rhj,{withOverlay:!1}))));var C}}}]);
//# sourceMappingURL=1240.bundle.js.map