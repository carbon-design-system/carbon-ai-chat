/*! For license information please see 9574.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_carbon_ai_chat_examples_demo=self.webpackChunk_carbon_ai_chat_examples_demo||[]).push([[9574],{6574:function(e,t,n){n.d(t,{p:function(){return U}});var s,a=n(2417),r=n(6854),i=n(3696),o=n(1709);const l=i.forwardRef(function({children:e,size:t=16,...n},a){return i.createElement(o.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...n},s||(s=i.createElement("path",{d:"M27.45,15.11l-22-11a1,1,0,0,0-1.08.12,1,1,0,0,0-.33,1L6.69,15H18v2H6.69L4,26.74A1,1,0,0,0,5,28a1,1,0,0,0,.45-.11l22-11a1,1,0,0,0,0-1.78Z"})),e)});var c=n(4013),d=n(4452),m=n(3210),u=n(4629),g=n(3981),p=(n(1200),n(1523)),f=n(3192),h=n(4574),C=n(404),E=n(6543);const A=(0,p.dI)({elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M11,10c0,0.6-0.4,1-1,1H6c-0.6,0-1-0.4-1-1V6c0-0.6,0.4-1,1-1h4\tc0.6,0,1,0.4,1,1V10z"}}],name:"stop--filled",size:16});var _=n(9890),v=n(619);class y extends f.WF{_handleOnClick(){this.onClick()}}y.styles=f.AH`
    ${(0,f.iz)(".cds--aichat-stop-icon svg{\n  fill:var(--cds-icon-disabled, rgba(22, 22, 22, 0.25));\n}")}
  `,(0,u.Cg)([(0,v.MZ)({type:String,attribute:"label"})],y.prototype,"label",void 0),(0,u.Cg)([(0,v.MZ)({type:String,attribute:"tooltip-alignment"})],y.prototype,"tooltipAlignment",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean,attribute:"disabled"})],y.prototype,"disabled",void 0),(0,u.Cg)([(0,v.MZ)({type:Object})],y.prototype,"onClick",void 0),(0,u.Cg)([_.oI],y.prototype,"_handleOnClick",null);let S=class extends y{render(){return function({label:e,disabled:t,tooltipAlignment:n,onClick:s}){return f.qy`
    <cds-custom-icon-button
      class="${C.o}-stop-streaming-button"
      align="${n}"
      kind="${E.wQ.GHOST}"
      size="${E.Ni.SMALL}"
      ?disabled=${t}
      @click="${s}"
    >
      <span
        class="${t?`${C.o}-stop-icon`:""}"
        slot="icon"
        >${(0,h.T)(A)}</span
      >
      <span slot="tooltip-content">${e}</span>
    </cds-custom-icon-button>
  `}(this)}};S=(0,u.Cg)([(0,g.Q)("cds-aichat-stop-streaming-button")],S);const M=(0,m.a)({tagName:"cds-aichat-stop-streaming-button",elementClass:S,react:i});var b=n(7113),w=n(1748),I=n(9049),W=n(5230),R=n(7338),N=n(6753);class k{constructor(){this.listeners=[]}addListener(e){this.listeners=[...this.listeners,e]}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}fireListeners(...e){this.listeners.length&&this.listeners.forEach(t=>t(...e))}}var x=n(2870);class T extends i.PureComponent{constructor(){super(...arguments),this.textAreaRef=i.createRef()}getHTMLElement(){return this.textAreaRef.current}takeFocus(){(0,R.Ht)(this.textAreaRef,!1,!0)}doBlur(){this.textAreaRef.current.blur()}render(){const{isRequired:e,name:t,id:n,onFocus:s,onBlur:a,onClick:r,onChange:o,onKeyDown:l,rows:c,value:m,autoSize:u,maxLength:g,disabled:p,placeholder:f,ariaLabel:h,testId:C,onSelect:E}=this.props;return i.createElement("div",{className:d("WAC__TextArea",{"WAC__TextArea--autoSize":u,"WAC__TextArea--disabled":p})},i.createElement("textarea",{ref:this.textAreaRef,"aria-label":h,"aria-required":e,className:"WAC__TextArea-textarea",disabled:p,id:n||C,maxLength:g,name:t,onFocus:s,onBlur:a,onClick:r,onChange:o,onKeyDown:l,onSelect:E,placeholder:f,rows:c,value:m||"","data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false","data-testid":C}),u&&i.createElement("div",{className:"WAC__TextArea-sizer"},m||f||" "))}}T.defaultProps={isRequired:!1,maxLength:1e4};var H=n(5505),B=n(2566),F=n(6895),L=n(577);function O(e,t){const{isInputVisible:n,placeholder:s,disableInput:o,disableSend:m,disableUploadButton:u,pendingUploads:g,allowedFileUploadTypes:p,allowMultipleFileUploads:f,showUploadButton:h,onFilesSelectedForUpload:C,onSendInput:A,blurOnSend:_,serviceManager:v,onUserTyping:y,languagePack:S,isStopStreamingButtonVisible:O,isStopStreamingButtonDisabled:U,testIdPrefix:D}=e,z=`${v.namespace.suffix}-${(0,b.I)()}`,[P,$]=(0,i.useState)(!1),[V,q]=(0,i.useState)(""),G=(0,i.useRef)(!0),Z=(0,i.useRef)(null),X=(0,i.useRef)(),K=(0,i.useRef)(),j=(0,i.useRef)(new k),J=(0,i.useRef)(""),Q=(0,i.useRef)({getHTMLElement:()=>X?.current?.getHTMLElement(),setValue:e=>q(e),setEnableEnterKey:e=>{G.current=e},addChangeListener:e=>j.current.addListener(e),removeChangeListener:e=>j.current.removeListener(e)});function Y(){Z.current&&(clearTimeout(Z.current),Z.current=null,y?.(!1))}function ee(e){if(ne()){e.preventDefault(),Y();const t=V.trim();A(t),q(""),_?X.current.doBlur():X.current.takeFocus()}}function te(){!W.yS&&n&&X.current.takeFocus()}function ne(){const e=Boolean(g?.length);return(!e||!g.find(e=>!(0,x.tk)(e)))&&(Boolean(V.trim())||e)}P&&o&&$(!1),(0,i.useImperativeHandle)(t,()=>({takeFocus:te,getMessageInput:()=>Q.current}));const{input_buttonLabel:se,input_placeholder:ae,input_ariaLabel:re,input_uploadButtonLabel:ie,input_stopResponse:oe}=S,le=o?"":V,ce=ne(),de=!ce||o||m,me=u||o,ue=`WACInputContainer__UploadInput-${z}`,ge="rtl"===document.dir,pe=s||(o?void 0:ae);return J.current!==V&&(J.current=V,j.current.fireListeners(V)),n&&i.createElement("div",{className:"WACInputAndCompletions"},i.createElement("div",{className:d("WACInputContainer",{"WACInputContainer--hasFocus":P,"WACInputContainer--showUploadButton":h})},i.createElement("div",{className:"WACInputContainer__LeftContainer"},i.createElement("div",{className:"WACInputContainer__TextAndUpload"},h&&i.createElement("div",{className:"WACInputContainer__UploadButtonContainer"},i.createElement("input",{ref:K,accept:p,id:ue,className:"WACVisuallyHidden WACInputContainer__UploadInput",type:"file","aria-label":ie,onChange:function(e){const t=(0,I.PK)(v.store.getState()),{dispatch:n}=v.store,{files:s}=e.target,a=[];for(let e=0;e<s.length;e++){const r={id:(0,N.u)(L.y.FILE),status:F.aT.EDIT,file:s[e]};a.push(r),n(w.Ay.addInputFile(r,t))}C?.(a),K.current.value=null},multiple:f,disabled:me}),i.createElement("label",{className:d("WACInputContainer__UploadButton",{"WACInputContainer__UploadButton--disabled":me}),htmlFor:ue},i.createElement(a.A,null))),i.createElement(T,{autoSize:!0,ariaLabel:re,disabled:o,maxLength:2048,onChange:function(e){const t=e.target.value;y&&(Z.current?clearTimeout(Z.current):y(!0),Z.current=setTimeout(Y,5e3)),q(t)},onKeyDown:function(e){(0,R.Ci)(e)&&(m||!G.current?e.preventDefault():ee(e))},placeholder:pe,value:le,ref:X,onFocus:function(){$(!0)},onBlur:function(){$(!1)},testId:(0,B.W)(B.g.INPUT,D)})),Boolean(g?.length)&&i.createElement("div",{className:"WACInputContainer__FilesContainer"},g.map((e,t)=>i.createElement(c.ssm,{key:t,iconDescription:S.fileSharing_removeButtonTitle,name:e.file.name,status:F.aT.EDIT,errorSubject:e.errorMessage,invalid:e.isError,size:E.Ni.SMALL,onDelete:()=>function(e){const t=(0,I.PK)(v.store.getState());v.store.dispatch(w.Ay.removeFileUpload(e,t)),X.current.takeFocus()}(e.id)})))),i.createElement("div",{className:"WACInputContainer__SendButtonContainer"},O&&i.createElement(M,{label:oe,disabled:U,tooltipAlignment:"top",onClick:()=>{const{store:e}=v;e.dispatch(w.Ay.setStopStreamingButtonDisabled(!0)),v.fire({type:H.xp.STOP_STREAMING})}}),i.createElement(c.$nd,{className:"WACInputContainer__SendButton",kind:E.wQ.GHOST,size:E.Ni.SMALL,type:"button",onClick:ee,"aria-label":se,disabled:de,renderIcon:ce?l:r.A,iconDescription:se,tooltipAlignment:ge?"start":"end",tooltipPosition:"top",hasIconOnly:!0,"data-testid":(0,B.W)(B.g.INPUT_SEND,D)}))))}const U=i.memo((0,i.forwardRef)(O))},7542:function(e,t,n){n.r(t),n.d(t,{CatastrophicError:function(){return E}});var s=n(2629),a=n(4013),r=n(4452),i=n(3696),o=n(8710),l=n(5022),c=n(6753);function d(){const e=(0,c.u)();return i.createElement("svg",{viewBox:"0 0 80 80"},i.createElement("defs",null,i.createElement("linearGradient",{id:`${e}-1`,x1:"38.91",y1:"4.92",x2:"38.91",y2:"73.85",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#262626"}),i.createElement("stop",{offset:"1",stopColor:"#393939"})),i.createElement("linearGradient",{id:`${e}-2`,x1:"12.44",y1:"71.21",x2:"76.34",y2:"34.31",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#525252"}),i.createElement("stop",{offset:"0.52",stopColor:"#393939"}),i.createElement("stop",{offset:"0.61",stopColor:"#393939"}),i.createElement("stop",{offset:"0.99",stopColor:"#161616"})),i.createElement("linearGradient",{id:`${e}-3`,x1:"39.38",y1:"50.63",x2:"52.04",y2:"72.55",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0.11",stopColor:"#6f6f6f",stopOpacity:"0"}),i.createElement("stop",{offset:"0.94",stopColor:"#6f6f6f"}))),i.createElement("rect",{width:"80",height:"80",fill:"none"}),i.createElement("polygon",{points:"59.91 78.34 16.91 53.51 21.77 50.7 64.77 75.53 59.91 78.34",opacity:"0.25",className:"error_message_isolate"}),i.createElement("path",{d:"M39,6.92c12.15,7,22,24,21.92,38S51,64.49,38.83,57.48s-22-24-21.92-38S26.83-.09,39,6.92Z",fill:`url(#${e}-1)`}),i.createElement("path",{d:"M42.85,4.68C36.74,1.15,31.2.82,27.2,3.15L23.54,5.28C27.52,3.08,33,3.45,39,6.92c12.15,7,22,24,21.92,38,0,6.77-2.35,11.58-6.13,13.94h-.07c-.32.2,3.66-2.1,3.66-2.1,4-2.3,6.39-7.18,6.41-14.12C64.81,28.7,55,11.69,42.85,4.68Z",fill:`url(#${e}-2)`}),i.createElement("path",{d:"M29.11,3.91v.36a19.59,19.59,0,0,1,9.68,3c12,6.94,21.78,23.84,21.74,37.65,0,9.4-4.56,15.23-11.83,15.23a19.59,19.59,0,0,1-9.68-3C27,50.21,17.24,33.32,17.28,19.5c0-9.39,4.56-15.23,11.83-15.23V3.91m0,0c-7.21,0-12.17,5.71-12.2,15.59,0,14,9.77,31,21.92,38a20.18,20.18,0,0,0,9.87,3c7.21,0,12.17-5.71,12.2-15.6C60.9,31,51.13,14,39,6.9a19.94,19.94,0,0,0-9.87-3Z",fill:`url(#${e}-3)`}),i.createElement("path",{className:"cls-6",d:"M38.93,49.79a6.83,6.83,0,0,1-2.66-2.51,6.19,6.19,0,0,1-.81-3v-1a2.26,2.26,0,0,1,.81-2c.54-.35,1.43-.17,2.66.54a6.67,6.67,0,0,1,2.61,2.5,6,6,0,0,1,.81,3v1a2.23,2.23,0,0,1-.81,2C41,50.66,40.13,50.49,38.93,49.79ZM37.77,38.16,36,22.77V13l5.81,3.36v9.73L40.17,39.55Z",fill:"#525252"}))}function m(){const e=(0,c.u)();return i.createElement("svg",{viewBox:"0 0 80 80"},i.createElement("defs",null,i.createElement("linearGradient",{id:`${e}-1`,x1:"29.96",y1:"36.32",x2:"53.15",y2:"-3.84",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#525252",stopOpacity:"0.05"}),i.createElement("stop",{offset:"1",stopOpacity:"0.1"})),i.createElement("linearGradient",{id:`${e}-2`,x1:"38.91",y1:"29.41",x2:"38.91",y2:"78.7",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#c6c6c6"}),i.createElement("stop",{offset:"0.78",stopColor:"#e0e0e0"})),i.createElement("linearGradient",{id:`${e}-3`,x1:"18.08",y1:"67.95",x2:"71.65",y2:"37.02",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#e0e0e0"}),i.createElement("stop",{offset:"0.13",stopColor:"#f4f4f4"}),i.createElement("stop",{offset:"0.56",stopColor:"#e0e0e0"}),i.createElement("stop",{offset:"0.62",stopColor:"#d8d8d8"}),i.createElement("stop",{offset:"0.7",stopColor:"#c6c6c6"}),i.createElement("stop",{offset:"0.89",stopColor:"#a8a8a8"}),i.createElement("stop",{offset:"1",stopColor:"#8d8d8d"})),i.createElement("linearGradient",{id:`${e}-4`,x1:"27.93",y1:"30.78",x2:"49.86",y2:"68.76",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0.54",stopColor:"#d0d0d0",stopOpacity:"0"}),i.createElement("stop",{offset:"0.82",stopColor:"#f1f1f1",stopOpacity:"0.7"}),i.createElement("stop",{offset:"0.94",stopColor:"#fff"})),i.createElement("linearGradient",{id:`${e}-5`,x1:"28.67",y1:"55.68",x2:"47.16",y2:"45.01",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#fff"}),i.createElement("stop",{offset:"0.05",stopColor:"#fdfdfd"}),i.createElement("stop",{offset:"0.3",stopColor:"#f6f6f6"}),i.createElement("stop",{offset:"1",stopColor:"#f4f4f4"}))),i.createElement("rect",{width:"80",height:"80",fill:"none"}),i.createElement("polygon",{points:"59.91 78.34 16.91 53.51 21.77 50.7 64.77 75.53 59.91 78.34",fill:`url(#${e}-1)`}),i.createElement("path",{d:"M39,6.92c12.15,7,22,24,21.92,38S51,64.49,38.83,57.48s-22-24-21.92-38S26.83-.09,39,6.92Z",fill:`url(#${e}-2)`}),i.createElement("path",{d:"M42.85,4.68C36.74,1.15,31.2.82,27.2,3.15L23.54,5.28C27.52,3.08,33,3.45,39,6.92c12.15,7,22,24,21.92,38,0,6.77-2.35,11.58-6.13,13.94h-.07c-.32.2,3.66-2.1,3.66-2.1,4-2.3,6.39-7.18,6.41-14.12C64.81,28.7,55,11.69,42.85,4.68Z",fill:`url(#${e}-3)`}),i.createElement("path",{d:"M29.11,3.91v.36a19.59,19.59,0,0,1,9.68,3c12,6.94,21.78,23.84,21.74,37.65,0,9.4-4.56,15.23-11.83,15.23a19.59,19.59,0,0,1-9.68-3C27,50.21,17.24,33.32,17.28,19.5c0-9.39,4.56-15.23,11.83-15.23V3.91m0,0c-7.21,0-12.17,5.71-12.2,15.59,0,14,9.77,31,21.92,38a20.18,20.18,0,0,0,9.87,3c7.21,0,12.17-5.71,12.2-15.6C60.9,31,51.13,14,39,6.9a19.94,19.94,0,0,0-9.87-3Z",fill:`url(#${e}-4)`}),i.createElement("path",{d:"M38.93,49.79a6.83,6.83,0,0,1-2.66-2.51,6.19,6.19,0,0,1-.81-3v-1a2.26,2.26,0,0,1,.81-2c.54-.35,1.43-.17,2.66.54a6.67,6.67,0,0,1,2.61,2.5,6,6,0,0,1,.81,3v1a2.23,2.23,0,0,1-.81,2C41,50.66,40.13,50.49,38.93,49.79ZM37.77,38.16,36,22.77V13l5.81,3.36v9.73L40.17,39.55Z",fill:`url(#${e}-5)`}))}var u=n(9186),g=n(3147),p=n(6543),f=n(4458),h=n(3158);function C({onClose:e,languagePack:t,onRestart:n,showHeader:c,botName:C,headerDisplayName:E}){const A=(0,o.A)(),_=(0,l.d4)(e=>e.theme.carbonTheme),v=_===h.jF.G90||_===h.jF.G100,y=A.formatMessage({id:"errors_communicating"},{botName:C});return i.createElement("div",{className:"WAC"},c&&i.createElement(u.r,{headerDisplayName:E,onClose:e,onToggleHomeScreen:null,includeWriteableElement:!1,testIdPrefix:f.G.CATASTROPHIC}),i.createElement("div",{className:r("WACCatastrophicError","WACPanelContent",{"WACCatastrophicError--withHeader":c})},i.createElement("div",{className:"WACCatastrophicError__ErrorTextContainer"},v&&i.createElement(d,null),!v&&i.createElement(m,null),i.createElement("div",{className:"WACCatastrophicError__ErrorHeading"},t.errors_somethingWrong),i.createElement("div",{className:"WACCatastrophicError__ErrorBody"},i.createElement(g.s,{text:y})),n&&i.createElement(a.bJ3,{className:"WACCatastrophicError__RestartButton",kind:p.wQ.TERTIARY,size:p.Ni.SMALL,"aria-label":t.buttons_restart,onClick:n,renderIcon:s.A,type:"button"},t.buttons_retry))))}const E=i.memo(C)},9574:function(e,t,n){n.r(t),n.d(t,{ChatClass:function(){return ze},default:function(){return $e}});var s=n(3696),a=n(2986),r=n(5022),i=n(4452),o=n(2896),l=n(3210),c=n(4629),d=n(3192),m=n(619),u=n(3981);const g=`${n(404).S}-inline-loading`;let p=class extends d.WF{constructor(){super(...arguments),this.bounce=!1,this.loop=!1,this.quickLoad=!1,this.carbonTheme="g10"}getAnimationEffect(){const e=[];return!0===this.quickLoad&&e.push("quick-load"),!0===this.bounce&&!0===this.loop&&e.push("vertical"),!1===this.bounce&&!0===this.loop&&e.push("linear"),!0===this.bounce&&!1===this.loop&&e.push("vertical--no-loop"),e.length?e.join(" "):"linear--no-loop"}render(){return d.qy`<div
      data-carbon-theme=${this.carbonTheme}
      class=${this.getAnimationEffect()}
    >
      <svg class="dots" viewBox="0 0 32 32">
        <circle class="dot dot--left" cx="8" cy="16" />
        <circle class="dot dot--center" cx="16" cy="16" r="2" />
        <circle class="dot dot--right" cx="24" cy="16" r="2" />
      </svg>
    </div>`}};p.styles=d.AH`
    ${(0,d.iz)(".dots{\n  block-size:32px;\n  inline-size:32px;\n}\n\n.dot{\n  fill:none;\n  r:0;\n  stroke-width:0;\n  transform:translateY(0);\n}\n\n[data-carbon-theme=white] .dot,\n[data-carbon-theme=g10] .dot{\n  stroke:#001d6c;\n}\n\n[data-carbon-theme=g90] .dot,\n[data-carbon-theme=g100] .dot{\n  stroke:#f4f4f4;\n}\n\n@media screen and (prefers-reduced-motion: reduce){\n  .linear .dot--left{\n    animation:none;\n    animation-delay:1s, 1s, 2s, 2s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1, 1, infinite, infinite;\n    transform-origin:25% 50%;\n  }\n}\n.linear .dot--left{\n  animation:linear-load-size, linear-load-stroke, linear-loop-size, linear-loop-stroke;\n  animation-delay:1s, 1s, 2s, 2s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1, 1, infinite, infinite;\n  transform-origin:25% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear .dot--center{\n    animation:none;\n    animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1, 1, infinite, infinite;\n    transform-origin:50% 50%;\n  }\n}\n.linear .dot--center{\n  animation:linear-load-size, linear-load-stroke, linear-loop-size, linear-loop-stroke;\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1, 1, infinite, infinite;\n  transform-origin:50% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear .dot--right{\n    animation:none;\n    animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1, 1, infinite, infinite;\n    transform-origin:75% 50%;\n  }\n}\n.linear .dot--right{\n  animation:linear-load-size, linear-load-stroke, linear-loop-size, linear-loop-stroke;\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1, 1, infinite, infinite;\n  transform-origin:75% 50%;\n}\n\n[dir=rtl] .linear .dot--left{\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s, 7.334s, 7.334s;\n}\n[dir=rtl] .linear .dot--center{\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s, 7.167s, 7.167s;\n}\n[dir=rtl] .linear .dot--right{\n  animation-delay:1s, 1s, 2s, 2s, 7s, 7s;\n}\n\n@media screen and (prefers-reduced-motion: reduce){\n  .linear--no-loop .dot--left{\n    animation:none;\n    animation-delay:1s, 1s, 2s, 2s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1;\n    transform-origin:25% 50%;\n  }\n}\n.linear--no-loop .dot--left{\n  animation:linear-load-size, linear-load-stroke, linear-unload-size, linear-unload-stroke;\n  animation-delay:1s, 1s, 2s, 2s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1;\n  transform-origin:25% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear--no-loop .dot--center{\n    animation:none;\n    animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1;\n    transform-origin:50% 50%;\n  }\n}\n.linear--no-loop .dot--center{\n  animation:linear-load-size, linear-load-stroke, linear-unload-size, linear-unload-stroke;\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1;\n  transform-origin:50% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear--no-loop .dot--right{\n    animation:none;\n    animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1;\n    transform-origin:75% 50%;\n  }\n}\n.linear--no-loop .dot--right{\n  animation:linear-load-size, linear-load-stroke, linear-unload-size, linear-unload-stroke;\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1;\n  transform-origin:75% 50%;\n}\n\n[dir=rtl] .linear--no-loop .dot--left{\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n}\n[dir=rtl] .linear--no-loop .dot--center{\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n}\n[dir=rtl] .linear--no-loop .dot--right{\n  animation-delay:1s, 1s, 2s, 2s;\n}\n\n@keyframes linear-load-size{\n  0%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:0;\n  }\n  25%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:2.5px;\n  }\n  83.3%{\n    r:0.875px;\n  }\n  100%{\n    r:0.875px;\n  }\n}\n@keyframes linear-load-stroke{\n  0%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    stroke-width:0;\n  }\n  8.33%{\n    stroke-width:1.72;\n  }\n  100%{\n    stroke-width:1.72;\n  }\n}\n@keyframes linear-loop-size{\n  0%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:0.875px;\n  }\n  25%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:2.5px;\n  }\n  91.66%{\n    r:0.875px;\n  }\n  100%{\n    r:0.875px;\n  }\n}\n@keyframes linear-loop-stroke{\n  0%{\n    animation-timing-function:cubic-bezier(0.4, 0.14, 1, 1);\n    stroke-width:1.72;\n  }\n  100%{\n    stroke-width:1.72;\n  }\n}\n@keyframes linear-unload-size{\n  0%{\n    r:0.875px;\n  }\n  8.33%{\n    r:0.875px;\n  }\n  33.33%{\n    animation-timing-function:cubic-bezier(0.4, 0.14, 1, 1);\n    r:2.5px;\n  }\n  58.33%{\n    r:0;\n  }\n  100%{\n    r:0;\n  }\n}\n@keyframes linear-unload-stroke{\n  0%{\n    stroke-width:1.72;\n  }\n  50%{\n    stroke-width:1.72;\n  }\n  58.33%{\n    stroke-width:0;\n  }\n  100%{\n    stroke-width:0;\n  }\n}\n@media (prefers-reduced-motion: reduce){\n  .dot--left,\n  .dot--center,\n  .dot--right{\n    animation:none;\n    transition:none;\n  }\n}")}
  `,(0,c.Cg)([(0,m.MZ)({type:Boolean})],p.prototype,"bounce",void 0),(0,c.Cg)([(0,m.MZ)({type:Boolean})],p.prototype,"loop",void 0),(0,c.Cg)([(0,m.MZ)({type:Boolean})],p.prototype,"quickLoad",void 0),(0,c.Cg)([(0,m.MZ)({type:String})],p.prototype,"carbonTheme",void 0),p=(0,c.Cg)([(0,u.Q)(g)],p);const f=(0,l.a)({tagName:g,elementClass:p,react:s});var h,C=n(9049),E=n(1709);const A=s.forwardRef(function({children:e,size:t=16,...n},a){return s.createElement(E.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...n},h||(h=s.createElement("path",{d:"M28,22H11.41L30,3.41,28.59,2l-2,2H4A2,2,0,0,0,2,6V22H4V6H24.59L2,28.59,3.41,30l6-6H12v4H8v2H24V28H20V24h8a2,2,0,0,0,2-2V9H28ZM18,28H14V24h4Z"})),e)});var _,v,y,S,M=n(4013),b=n(6254),w=n(6683),I=n(7338),W=n(7429);const R=s.forwardRef(function({children:e,size:t=16,...n},a){return 16===t||"16"===t||"16px"===t?s.createElement(E.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...n},_||(_=s.createElement("path",{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M5,13.2v-1.5c0-0.9,0.6-1.6,1.5-1.7h3c0.9,0.1,1.5,0.8,1.5,1.7v1.5 C9.1,14.3,6.9,14.3,5,13.2L5,13.2z M12,12l0-0.8c0-0.9-1.1-2.1-2.5-2.2h-3C5.1,9.1,4,10.3,4,11.7l0,0.5v0.3c-2.5-2.2-2.7-6-0.5-8.5 s6-2.7,8.5-0.5s2.7,6,0.5,8.5c-0.1,0.2-0.3,0.3-0.5,0.5V12z"})),v||(v=s.createElement("path",{d:"M8,3C6.6,3,5.5,4.1,5.5,5.5S6.6,8,8,8s2.5-1.1,2.5-2.5S9.4,3,8,3z M8,7C7.2,7,6.5,6.3,6.5,5.5S7.2,4,8,4s1.5,0.7,1.5,1.5 S8.8,7,8,7z"})),e):s.createElement(E.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...n},y||(y=s.createElement("path",{d:"M16,8a5,5,0,1,0,5,5A5,5,0,0,0,16,8Zm0,8a3,3,0,1,1,3-3A3.0034,3.0034,0,0,1,16,16Z"})),S||(S=s.createElement("path",{d:"M16,2A14,14,0,1,0,30,16,14.0158,14.0158,0,0,0,16,2ZM10,26.3765V25a3.0033,3.0033,0,0,1,3-3h6a3.0033,3.0033,0,0,1,3,3v1.3765a11.8989,11.8989,0,0,1-12,0Zm13.9925-1.4507A5.0016,5.0016,0,0,0,19,20H13a5.0016,5.0016,0,0,0-4.9925,4.9258,12,12,0,1,1,15.985,0Z"})),e)});var N=n(4432);function k(e){const{agentProfile:t,languagePack:n,width:a,height:r}=e,i=t?.nickname,o=(0,N.T)({width:a,height:r}),l=t?.profile_picture_url,[c,d]=(0,s.useState)(!1);let m;return(0,s.useEffect)(()=>{d(!1)},[l]),m=!c&&l?s.createElement("img",{src:l,alt:n.agent_ariaAgentAvatar,onError:()=>d(!0)}):i?.match(/^[\x20-\xFE]+$/)?s.createElement("div",{"aria-label":n.agent_ariaAgentAvatar,className:"WACAgentAvatar__Circle",style:o},s.createElement("div",{className:"WACAgentAvatar__Letter"},i.charAt(0))):s.createElement(R,{size:32,width:a?Number(a.replace("px","")):void 0,height:r?Number(r.replace("px","")):void 0,"aria-label":n.agent_ariaAgentAvatar}),s.createElement("div",{className:"WACAgentAvatar"},m)}var x=n(1190);function T(e,t){const{onButtonClick:n}=e,a=(0,b.D)(),o=(0,w.O)(),l=(0,r.d4)(e=>e.persistedToBrowserStorage.chatState.agentState),c=(0,r.d4)(e=>e.agentState),{isConnecting:d,availability:m,isScreenSharing:u}=c,g=(0,r.d4)(C.R0,r.bN),{agentProfile:p}=l,f=(0,s.useRef)();let h,E,_,v,y;return d?(y=s.createElement("div",{className:"WACLoadingBar__ConnectingAnimation"}),h=a.agent_connecting,E=s.createElement(W.D,{announceOnce:a.agent_connecting},s.createElement(x.j,{availability:m,fallbackText:a.agent_connectWaiting})),v=a.agent_connectButtonCancel):(h=p?.nickname||a.agent_noName,v=a.agent_connectedButtonEndChat,_=s.createElement(k,{agentProfile:p,languagePack:a,width:"32px",height:"32px"})),(0,s.useImperativeHandle)(t,()=>({requestFocus:()=>!!f.current&&((0,I.Ht)(f),!0)})),s.createElement("div",{className:i("WACAgentBanner",{"WACAgentBanner--connected":!d})},g.isConnectingOrConnected&&s.createElement("div",{className:"WACAgentBanner__Body"},_,s.createElement("div",{className:"WACAgentBanner__AgentInfo"},s.createElement("div",{className:"WACAgentBanner__AgentLine1"},h),E&&s.createElement("div",{className:"WACAgentBanner__AgentLine2"},E)),s.createElement(M.$nd,{ref:f,className:"WACAgentBanner__Button WACAgentBanner__CancelButton",onClick:n,size:"sm"},v)),u&&s.createElement(M.$nd,{className:"WACAgentBanner__Button WACAgentBanner__StopSharingButton",kind:"danger",size:"sm",renderIcon:A,onClick:()=>{o.humanAgentService.screenShareStop()}},a.agent_sharingStopSharingButton),y)}const H=s.memo((0,s.forwardRef)(T));function B({onButtonClick:e,bannerRef:t}){const n=(0,r.d4)(e=>e.agentState);return(0,r.d4)(C.R0,r.bN).isConnectingOrConnected||n.isScreenSharing?s.createElement(H,{ref:t,onButtonClick:e}):null}var F=n(7008),L=n(8795),O=n(8205);function U({children:e}){const{namespace:t}=(0,w.O)();return s.createElement(s.Fragment,null,s.createElement(O.A,{slotName:L.t.WELCOME_NODE_BEFORE_ELEMENT,id:`welcomeNodeBeforeElement${t.suffix}`}),e)}var D=s.memo(U),z=n(1748);function P({notifications:e,serviceManager:t}){const n=(0,b.D)();return e.length?s.createElement("div",{className:"WACNotifications"},e.map(e=>{const a=e.notification,r=()=>{t.store.dispatch(z.Ay.removeNotifications({notificationID:e.id}))};let i,o;return a.actionButtonLabel&&a.onActionButtonClick&&(i=()=>{a.onActionButtonClick(),r()},o=a.actionButtonLabel),s.createElement("div",{className:"WACNotifications__Notification",key:e.id},s.createElement(M.kZS,{"aria-label":n.notifications_toastClose,actionButtonLabel:o,onActionButtonClick:i,kind:a.kind,onClose:()=>{r(),a.onCloseButtonClick?.()},subtitle:a.message,title:a.title,hasFocus:!1}))})):null}var $,V,q=n(8583),G=n(3092),Z=n(5230),X=n(5822),K=n(948),j=n(7391),J=n(2870);const Q=s.forwardRef(function({children:e,size:t=16,...n},a){return s.createElement(E.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...n},$||($=s.createElement("path",{d:"M16 19a6.9908 6.9908 0 01-5.833-3.1287l1.666-1.1074a5.0007 5.0007 0 008.334 0l1.666 1.1074A6.9908 6.9908 0 0116 19zM20 8a2 2 0 102 2A1.9806 1.9806 0 0020 8zM12 8a2 2 0 102 2A1.9806 1.9806 0 0012 8z"})),V||(V=s.createElement("path",{d:"M17.7358,30,16,29l4-7h6a1.9966,1.9966,0,0,0,2-2V6a1.9966,1.9966,0,0,0-2-2H6A1.9966,1.9966,0,0,0,4,6V20a1.9966,1.9966,0,0,0,2,2h9v2H6a3.9993,3.9993,0,0,1-4-4V6A3.9988,3.9988,0,0,1,6,2H26a3.9988,3.9988,0,0,1,4,4V20a3.9993,3.9993,0,0,1-4,4H21.1646Z"})),e)});var Y,ee,te,ne,se,ae,re,ie;const oe=s.forwardRef(function({children:e,size:t=16,...n},a){return 16===t||"16"===t||"16px"===t?s.createElement(E.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...n},Y||(Y=s.createElement("path",{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"})),ee||(ee=s.createElement("path",{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"})),e):20===t||"20"===t||"20px"===t?s.createElement(E.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...n},te||(te=s.createElement("path",{d:"M10,1c-4.9,0-9,4.1-9,9s4.1,9,9,9s9-4,9-9S15,1,10,1z M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z"})),ne||(ne=s.createElement("path",{fill:"none",d:"M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z","data-icon-path":"inner-path",opacity:"0"})),e):24===t||"24"===t||"24px"===t?s.createElement(E.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n},se||(se=s.createElement("path",{d:"M12,1C6,1,1,6,1,12s5,11,11,11s11-4.9,11-11S18.1,1,12,1z M10.4,16.3l-3.9-3.9l1.3-1.2l2.7,2.7l5.8-5.8l1.3,1.3L10.4,16.3z"})),ae||(ae=s.createElement("path",{fill:"none",d:"M10.4,16.3l-3.9-3.9l1.3-1.2l2.7,2.7l5.8-5.8l1.3,1.3L10.4,16.3z","data-icon-path":"inner-path",opacity:"0"})),e):s.createElement(E.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...n},re||(re=s.createElement("path",{d:"M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2ZM14,21.5908l-5-5L10.5906,15,14,18.4092,21.41,11l1.5957,1.5859Z"})),ie||(ie=s.createElement("path",{fill:"none",d:"M14 21.591L9 16.591 10.591 15 14 18.409 21.41 11 23.005 12.585 14 21.591z","data-icon-path":"inner-path"})),e)});var le=n(4671),ce=n(4869),de=n(5807),me=n(6753),ue=n(3158);function ge({theme:e}){const t=`a-${(0,me.u)()}`,n=`b-${(0,me.u)()}`,a=`c-${(0,me.u)()}`,r=`d-${(0,me.u)()}`,i=`e-${(0,me.u)()}`;return e===ue.jF.WHITE||e===ue.jF.G10?s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"cds--watsonx-avatar","aria-hidden":"true"},s.createElement("defs",null,s.createElement("linearGradient",{id:t,x1:"1186.526",y1:"2863.168",x2:"1199.825",y2:"2845.109",gradientTransform:"matrix(.8312 .55596 -.27409 .40979 -198.894 -1827.398)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".3"}),s.createElement("stop",{offset:"1",stopOpacity:"0"})),s.createElement("linearGradient",{id:n,x1:"1189.388",y1:"2911.794",x2:"1200.478",y2:"2896.735",gradientTransform:"rotate(146.223 380.87 -882.286) scale(1 -.493)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".3"}),s.createElement("stop",{offset:".9",stopOpacity:"0"})),s.createElement("linearGradient",{id:a,x1:"-4995.033",y1:"-20162.835",x2:"-4981.733",y2:"-20180.895",gradientTransform:"rotate(-146.223 -971.422 -5714.55) scale(1 .493)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".32"}),s.createElement("stop",{offset:".354",stopOpacity:".798"}),s.createElement("stop",{offset:".7",stopOpacity:"0"})),s.createElement("linearGradient",{id:r,x1:"0",y1:"32",x2:"32",y2:"0",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".1",stopColor:"#a56eff"}),s.createElement("stop",{offset:".9",stopColor:"#0f62fe"})),s.createElement("mask",{id:i,x:"0",y:"0",width:"32",height:"32",maskUnits:"userSpaceOnUse"},s.createElement("path",{d:"M16 1A14.915 14.915 0 0 0 5.502 5.286l1.4 1.429A12.922 12.922 0 0 1 16 3.001c.977 0 1.929.109 2.845.315-3.402.921-5.916 4.026-5.916 7.715 0 .782.118 1.537.328 2.252a7.978 7.978 0 0 0-2.188-.312c-3.704 0-6.819 2.534-7.726 5.957a12.954 12.954 0 0 1-.345-2.927c0-2.117.492-4.134 1.462-5.996l-1.773-.924A15.037 15.037 0 0 0 .999 16c0 8.271 6.729 15 15 15 3.949 0 7.678-1.522 10.498-4.286l-1.4-1.428A12.926 12.926 0 0 1 15.999 29c-3.648 0-6.945-1.516-9.309-3.945a5.959 5.959 0 0 1-1.621-4.086c0-3.309 2.691-6 6-6a6.006 6.006 0 0 1 5.897 7.107l1.967.367a7.971 7.971 0 0 0-.192-3.726 7.976 7.976 0 0 0 2.187.312c3.71 0 6.829-2.542 7.73-5.974.22.947.34 1.931.34 2.944 0 2.117-.492 4.134-1.462 5.995l1.773.924a15.034 15.034 0 0 0 1.688-6.919C31 7.729 24.272 1 16 1zm4.93 16.03c-3.309 0-6-2.692-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z",style:{fill:"#fff",strokeWidth:0}}),s.createElement("path",{style:{fill:`url(#${t})`,strokeWidth:0},d:"M8 9 0 0h16l2.305 3.304L8 9z"}),s.createElement("path",{style:{fill:`url(#${n})`,strokeWidth:0},d:"m12 31 4.386-9L6 21 2 31h10z"}),s.createElement("path",{style:{fill:`url(#${a})`,strokeWidth:0},d:"m24 23 8 9H16l-2.304-3.305L24 23z"}),s.createElement("path",{style:{strokeWidth:0},d:"M16 31h-4.283L15 22h2l-1 9z"}))),s.createElement("g",{style:{mask:`url(#${i})`}},s.createElement("path",{style:{fill:`url(#${r})`,strokeWidth:0},d:"M0 0h32v32H0z"})),s.createElement("circle",{cx:"6",cy:"6",r:"2",style:{fill:"#001d6c",strokeWidth:0}}),s.createElement("circle",{cx:"26",cy:"26",r:"2",style:{fill:"#001d6c",strokeWidth:0}}),s.createElement("path",{d:"M16 31c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5zm0-8c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3z",style:{fill:"#001d6c",strokeWidth:0}})):s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"cds--watsonx-avatar","aria-hidden":"true"},s.createElement("defs",null,s.createElement("linearGradient",{id:t,x1:"1196.653",y1:"2930.892",x2:"1209.953",y2:"2912.832",gradientTransform:"matrix(.8312 .55596 -.27409 .40979 -188.767 -1860.755)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".3"}),s.createElement("stop",{offset:"1",stopOpacity:"0"})),s.createElement("linearGradient",{id:n,x1:"1299.261",y1:"2844.072",x2:"1310.351",y2:"2829.012",gradientTransform:"rotate(146.223 440.869 -882.286) scale(1 -.493)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".3"}),s.createElement("stop",{offset:".9",stopOpacity:"0"})),s.createElement("linearGradient",{id:a,x1:"-4885.16",y1:"-20230.559",x2:"-4871.86",y2:"-20248.618",gradientTransform:"rotate(-146.223 -911.421 -5714.55) scale(1 .493)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".32"}),s.createElement("stop",{offset:".354",stopOpacity:".798"}),s.createElement("stop",{offset:".7",stopOpacity:"0"})),s.createElement("linearGradient",{id:r,x1:"0",y1:"32",x2:"32",y2:"0",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".1",stopColor:"#be95ff"}),s.createElement("stop",{offset:".9",stopColor:"#4589ff"})),s.createElement("mask",{id:i,x:"0",y:"0",width:"32",height:"32",maskUnits:"userSpaceOnUse"},s.createElement("path",{d:"M16 1A14.915 14.915 0 0 0 5.502 5.286l1.4 1.429A12.922 12.922 0 0 1 16 3.001c.977 0 1.929.109 2.845.315-3.402.921-5.916 4.026-5.916 7.715 0 .782.118 1.537.328 2.252a7.978 7.978 0 0 0-2.188-.312c-3.704 0-6.819 2.534-7.726 5.957a12.954 12.954 0 0 1-.345-2.927c0-2.117.492-4.134 1.462-5.996l-1.773-.924A15.037 15.037 0 0 0 .999 16c0 8.271 6.729 15 15 15 3.949 0 7.678-1.522 10.498-4.286l-1.4-1.428A12.926 12.926 0 0 1 15.999 29c-3.648 0-6.945-1.516-9.309-3.945a5.959 5.959 0 0 1-1.621-4.086c0-3.309 2.691-6 6-6a6.006 6.006 0 0 1 5.897 7.107l1.967.367a7.971 7.971 0 0 0-.192-3.726 7.976 7.976 0 0 0 2.187.312c3.71 0 6.829-2.542 7.73-5.974.22.947.34 1.931.34 2.944 0 2.117-.492 4.134-1.462 5.995l1.773.924a15.034 15.034 0 0 0 1.688-6.919c0-8.271-6.729-15-15-15zm4.93 16.03c-3.309 0-6-2.692-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z",style:{fill:"#fff",strokeWidth:0}}),s.createElement("path",{style:{fill:`url(#${t})`,strokeWidth:0},d:"M8 9 0 0h16l2.305 3.305L8 9z"}),s.createElement("path",{style:{fill:`url(#${n})`,strokeWidth:0},d:"m12 31 4.386-9L6 21 2 31h10z"}),s.createElement("path",{style:{fill:`url(#${a})`,strokeWidth:0},d:"m24 23 8 9H16l-2.305-3.305L24 23z"}),s.createElement("path",{style:{strokeWidth:0},d:"M16 31h-4.283L15 22h2l-1 9z"}))),s.createElement("g",{style:{mask:`url(#${i})`}},s.createElement("path",{style:{fill:`url(#${r})`,strokeWidth:0},d:"M0 0h32v32H0z"})),s.createElement("circle",{cx:"6",cy:"6",r:"2",style:{fill:"#f4f4f4",strokeWidth:0}}),s.createElement("circle",{cx:"26",cy:"26",r:"2",style:{fill:"#f4f4f4",strokeWidth:0}}),s.createElement("path",{d:"M16 31c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5zm0-8c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3z",style:{fill:"#f4f4f4",strokeWidth:0}}))}const pe=s.memo(ge);var fe=n(1485);function he(e){return s.createElement("div",{className:"WACIconHolder"},e.icon)}function Ce(e){const{url:t,alt:n,fallback:a}=e,[r,i]=(0,s.useState)(!1);let o;return(0,s.useEffect)(()=>{i(!1)},[t]),o=!r&&t?s.createElement("img",{src:t,alt:n,onError:()=>i(!0)}):a,s.createElement("div",{className:"WACImageWithFallback"},o)}var Ee,Ae=n(5112),_e=n(2537),ve=n(5285),ye=n(618),Se=n(9633),Me=n(6895);!function(e){e[e.FIRST=1]="FIRST",e[e.LAST=2]="LAST",e[e.NEXT=3]="NEXT",e[e.PREVIOUS=4]="PREVIOUS",e[e.INPUT=5]="INPUT"}(Ee||(Ee={}));class be extends s.PureComponent{constructor(){super(...arguments),this.state={didRenderErrorOccur:!1,focusHandleHasFocus:!1},this.ref=s.createRef(),this.messageRef=s.createRef(),this.focusHandleRef=s.createRef(),this.getLocalMessage=()=>this.props.localMessageItem,this.onHandleFocus=()=>{this.setState({focusHandleHasFocus:!0})},this.onHandleBlur=()=>{this.setState({focusHandleHasFocus:!1})},this.onHandleKeyDown=e=>{if(e.altKey||e.metaKey||e.ctrlKey||e.shiftKey)return;let t;if("ArrowUp"===e.key)t=Ee.PREVIOUS;else if("ArrowDown"===e.key)t=Ee.NEXT;else if("Home"===e.key)t=Ee.FIRST;else if("End"===e.key)t=Ee.LAST;else if("Escape"===e.key)t=Ee.INPUT;else if("Enter"===e.key||" "===e.key)return e.preventDefault(),void this.reAnnounceFocusHandle();t&&(e.preventDefault(),this.props.requestMoveFocus(t,this.props.messagesIndex))}}getWidgetSaidMessage(){const{intl:e,botName:t,localMessageItem:n}=this.props;let s;return n.item.agent_message_type?n.item.response_type===Se.sP.TEXT&&(s="messages_agentSaid"):s="messages_botSaid",s?e.formatMessage({id:s},{botName:t}):null}componentDidCatch(e,t){this.props.serviceManager.actions.errorOccurred((0,J.Jg)("Message",e,t)),this.setState({didRenderErrorOccur:!0})}componentDidMount(){const e=this.props.localMessageItem.ui_state;e.needsAnnouncement&&(this.props.ariaAnnouncer(this.ref.current),this.props.serviceManager.store.dispatch(z.Ay.setMessageWasAnnounced(e.id)))}componentDidUpdate(){const e=this.props.localMessageItem.ui_state;e.needsAnnouncement&&(this.props.ariaAnnouncer(this.ref.current),this.props.serviceManager.store.dispatch(z.Ay.setMessageWasAnnounced(e.id)))}shouldRenderFailedMessage(){if(this.state.didRenderErrorOccur)return!0;const{localMessageItem:e,message:t}=this.props;return(0,j.$H)(e.item)&&t.history?.agent_no_service_desk}reAnnounceFocusHandle(){const e=this.focusHandleRef.current;e&&this.props.ariaAnnouncer(e.getAttribute("aria-label"))}requestHandleFocus(){const{languagePack:e,intl:t,message:n,botName:s}=this.props,a=[(0,j.ks)(n)?e.messages_youSaid:t.formatMessage({id:"messages_botSaid"},{botName:s})];(0,de.P)(this.messageRef.current,a),this.focusHandleRef.current.setAttribute("aria-label",a.join(" ")),(0,I.Ht)(this.focusHandleRef,!0)}renderFailedRenderMessage(){const{messagesIndex:e}=this.props;return s.createElement("div",{className:`WAC__message WAC__message--inlineError WAC__message-${e} ${this.props.className||""}`,ref:this.ref},s.createElement("div",{className:"WAC__message--padding"},s.createElement("div",{className:"WAC__bot-message"},s.createElement(Ae.A,null,this.getWidgetSaidMessage()),s.createElement("div",{className:"WAC__received WAC__message-vertical-padding WAC__received--text"},s.createElement(fe.W,{text:this.props.languagePack.errors_singleMessage})))))}renderAvatarLine(e,t){let n;const{languagePack:a,botAvatarURL:r,useAITheme:i,carbonTheme:o}=this.props,l=function(e){return ve(e).format("LT")}(t.history.timestamp);let c,d,m="";if((0,j.Sv)(t)){const u=e.item.agent_message_type,g=t.history.agent_profile;if(we(u))return null;const p=u===Se.Xb.FROM_AGENT;if(p||g?.profile_picture_url)n=s.createElement(Ce,{url:g?.profile_picture_url,alt:p?a.agent_ariaAgentAvatar:a.agent_ariaGenericAvatar,fallback:s.createElement(he,{icon:s.createElement(le.A,null)})}),m="WACMessage__Avatar--agent";else{const e=i?s.createElement(pe,{theme:o}):s.createElement(he,{icon:s.createElement(Q,null)}),t=i?void 0:r;n=s.createElement(Ce,{url:t,alt:a.agent_ariaGenericBotAvatar,fallback:e}),m="WACMessage__Avatar--bot"}p||g?.nickname?d=g?.nickname||a.agent_agentNoNameTitle:i&&(d="watsonx"),c=s.createElement("span",{"data-wac-exclude-node-read":!0},s.createElement(ce.A,{id:"message_labelBot",values:{timestamp:l,actorName:d}}))}else c=s.createElement(ce.A,{id:"message_labelYou",values:{timestamp:l}});return s.createElement("div",{className:"WACMessage__AvatarLine",key:`${t.id}-avatar-line`},n&&s.createElement("div",{className:`WACMessage__Avatar ${m}`},n),s.createElement("div",{className:"WACMessage__Label"},c))}renderMessageState(e){const{languagePack:t}=this.props;let n,a,r=!1;const i=e.history?.error_state,o=e.history?.file_upload_status;return i===G.J.FAILED?(n=s.createElement(fe.W,{text:t.errors_singleMessage}),a="WAC__message-error-failed",r=!0):o===Me.aT.UPLOADING?(n=s.createElement(M.Rhj,{withOverlay:!1,small:!0,"aria-label":t.fileSharing_statusUploading}),a="WAC__message-status-file-uploading"):"success"===o&&(n=s.createElement(oe,{"aria-label":t.fileSharing_statusUploading}),a="WAC__message-status-file-success"),n&&{element:s.createElement("div",{className:`WAC__message-status ${a}`},n),showBelowMessage:r}}renderFocusHandle(){return s.createElement("div",{className:"WACMessage--focusHandle",ref:this.focusHandleRef,tabIndex:-1,onFocus:this.onHandleFocus,onBlur:this.onHandleBlur,onKeyDown:e=>this.onHandleKeyDown(e),onClick:()=>this.reAnnounceFocusHandle(),role:"button"})}render(){if(this.shouldRenderFailedMessage())return this.renderFailedRenderMessage();const{serviceManager:e,config:t,localMessageItem:n,message:a,languagePack:r,requestInputFocus:o,messagesIndex:l,disableUserInputs:c,showAvatarLine:d,className:m,doAutoScroll:u,isMessageForInput:g,scrollElementIntoView:p,isFirstMessageItem:f,hideFeedback:h,allowNewFeedback:C}=this.props,{isIntermediateStreaming:E,isWelcomeResponse:A,disableFadeAnimation:_}=n.ui_state,v=n.item,y=v.response_type,S=v.agent_message_type,M=a.history.from_history,b=f;if(E&&!function(e){switch(e){case Se.sP.IMAGE:case Se.sP.VIDEO:case Se.sP.AUDIO:case Se.sP.OPTION:case Se.sP.IFRAME:case Se.sP.INLINE_ERROR:case Se.sP.CONVERSATIONAL_SEARCH:case Se.sP.USER_DEFINED:case Se.sP.TEXT:return!0;default:return!1}}(v.response_type))return!1;const w=s.createElement(ye.V,{serviceManager:e,languagePack:r,requestInputFocus:o,message:n,originalMessage:a,disableUserInputs:c,isMessageForInput:g,config:t,doAutoScroll:u,scrollElementIntoView:p,hideFeedback:h,allowNewFeedback:C}),I=(0,j.OL)(n.item),W=A||_,R=function(e,t,n){if(n)return"WAC__received--agentCustom";if(!t||t!==Se.sP.TEXT&&t!==Se.sP.BUTTON)return"";switch(e){case null:case void 0:case Se.Xb.FROM_USER:return null;case Se.Xb.RELOAD_WARNING:case Se.Xb.DISCONNECTED:return"WAC__received--chatStatusMessage";case Se.Xb.FROM_AGENT:return"WAC__received--fromAgent";default:return"WAC__received--agentStatusMessage"}}(S,y,I),N=(0,j.ks)(a),k=we(n.item.agent_message_type);let x,T=!1;return(0,j.$Q)(n.item)&&(n.item.title||n.item.description||(T=!0)),N&&(x=this.renderMessageState(a)),s.createElement("div",{id:`WAC__message-${l}${e.namespace.suffix}`,className:i(`WAC__message WAC__message-${l}`,m,S&&"WAC__message--agentMessage",{"WAC__message--withAvatarLine":d,"WAC__message--request":N,"WAC__message--systemMessage":k,"WAC__message--response":!N,"WAC__message--no-animation":W,"WAC__message--custom":I,"WAC__message--disabled-inputs":c,"WAC__message--has-focus":this.state.focusHandleHasFocus,"WAC__message--option-response-without-title-or-description":T}),ref:this.ref},this.renderFocusHandle(),d&&this.renderAvatarLine(n,a),s.createElement("div",{className:"WAC__message--padding"},(0,j.Sv)(a)&&s.createElement("div",{className:"WAC__bot-message"},b&&s.createElement(Ae.A,null,this.getWidgetSaidMessage()),s.createElement("div",{className:i("WAC__received","WAC__message-vertical-padding",R,{"WAC__received--text":y===Se.sP.TEXT,"WAC__received--image":y===Se.sP.IMAGE,"WAC__received--options":y===Se.sP.OPTION,"WAC__received--inlineError":y===Se.sP.INLINE_ERROR,"WAC__received--iframePreviewCard":y===Se.sP.IFRAME,"WAC__received--video":y===Se.sP.VIDEO,"WAC__received--audio":y===Se.sP.AUDIO,"WAC__received--date":y===Se.sP.DATE,"WAC__received--card":y===Se.sP.CARD,"WAC__received--carousel":y===Se.sP.CAROUSEL,"WAC__received--conversationalSearch":y===Se.sP.CONVERSATIONAL_SEARCH,"WAC__received--carouselSingle":(0,j.ee)(n.item),"WAC__received--button":y===Se.sP.BUTTON,"WAC__received--grid":y===Se.sP.GRID,"WAC__received--fullWidth":n.ui_state.fullWidth,"WAC__message--historical":M}),ref:this.messageRef},s.createElement("div",{className:"WAC__received--inner"},w))),N&&s.createElement("div",{className:"WAC__sent-container"},s.createElement("div",{className:i("WAC__sentAndMessageState-container","WAC__message-vertical-padding",{"WAC__sentAndMessageState--belowMessage":x?.showBelowMessage})},!x?.showBelowMessage&&x?.element,s.createElement("div",{className:"WAC__sent"},s.createElement(Ae.A,null,r.messages_youSaid),s.createElement("div",{className:"WAC__sent--bubble"},s.createElement("div",{ref:this.messageRef},w))),x?.showBelowMessage&&x?.element))))}}function we(e){switch(e){case null:case void 0:case Se.Xb.FROM_USER:case Se.Xb.RELOAD_WARNING:case Se.Xb.DISCONNECTED:case Se.Xb.FROM_AGENT:case Se.Xb.INLINE_ERROR:return!1;default:return!0}}var Ie=(0,_e.J)((0,a.Ay)(be,{forwardRef:!0}));class We extends s.PureComponent{constructor(){super(...arguments),this.state={scrollHandleHasFocus:!1},this.messageRefs=new Map,this.messagesContainerWithScrollingRef=s.createRef(),this.scrollHandleRef=s.createRef(),this.agentBannerRef=s.createRef(),this.onResize=()=>{if(this.props.messageState.isScrollAnchored){const e=this.messagesContainerWithScrollingRef.current;e&&(e.scrollTop=e.scrollHeight)}},this.doAutoScroll=(0,o.A)((e={})=>{try{const{scrollToTop:t,scrollToBottom:n}=e,{localMessageItems:s,messageState:a,allMessagesByID:r}=this.props,{isTypingCounter:i,isLoadingCounter:o}=a,{isAgentTyping:l}=(0,C.R0)(this.props),c=this.messagesContainerWithScrollingRef.current;if(void 0!==t)return void(0,I.d$)(c,t,0,!1);if(void 0!==n){const e=c.scrollHeight-c.offsetHeight-n;return void(0,I.d$)(c,e,0,!1)}let d,m=!0;const u=s.length-1,g=s.length?s[u]:null,p=r[g?.fullMessageID];if(g)if(i>0||o>0||l)d=c.scrollHeight;else{const e=(e,t)=>{if((0,j.Sv)(t)){const e=r[t?.request_id];return e?.history?.silent&&""!==e.input?.text}return(0,j.ks)(t)};let t=s.length-1,n=s[t],a=this.messageRefs.get(n?.ui_state.id);for(;t>=1;){n=s[t];const i=r[n?.fullMessageID];if(e(n,i)){a=this.messageRefs.get(n?.ui_state.id),Re(0,s[t]);break}t--}if(a){const e=a.ref.current?.offsetTop;d=e+X.Vt}else d=-1}else m=!1,d=0;-1!==d&&d>=c.scrollTop&&(p?.history?.from_history&&(m=!1),(0,I.d$)(c,d,0,m),this.checkScrollAnchor(!0,d))}catch(e){(0,J.yA)("An error occurred while attempting to scroll.",e)}},X.nc),this.getContainerScrollBottom=()=>(0,I.TV)(this.messagesContainerWithScrollingRef?.current),this.scrollElementIntoView=(e,t=8,n=8)=>{const s=this.messagesContainerWithScrollingRef.current,a=s.getBoundingClientRect(),r=e.getBoundingClientRect(),i=r.top-a.top+s.scrollTop-t,o=r.bottom-a.top+s.scrollTop+n,l=e.offsetHeight+t+n;i<s.scrollTop||l>s.offsetHeight?(0,I.d$)(s,i,0):o>s.scrollTop+s.offsetHeight&&(0,I.d$)(s,o-s.offsetHeight,0)},this.requestMoveFocus=(e,t)=>{if(e===Ee.INPUT)this.props.requestInputFocus();else{const{localMessageItems:n}=this.props;let s;switch(e){case Ee.LAST:s=n.length-1;break;case Ee.NEXT:s=t+1,s>=n.length&&(s=0);break;case Ee.PREVIOUS:s=t-1,s<0&&(s=n.length-1);break;default:s=0}const a=n[s],r=this.messageRefs.get(a?.ui_state.id);r&&r.requestHandleFocus()}}}componentDidMount(){this.scrollPanelObserver=new ResizeObserver(this.onResize),this.scrollPanelObserver.observe(this.messagesContainerWithScrollingRef.current),this.previousScrollOffsetHeight=this.messagesContainerWithScrollingRef.current.offsetHeight}componentDidUpdate(e){const t=this.props,n=e.localMessageItems.length!==t.localMessageItems.length,s=(0,C.R0)(e),a=(0,C.R0)(t),r=e.messageState.isTypingCounter!==t.messageState.isTypingCounter||e.messageState.isLoadingCounter!==t.messageState.isLoadingCounter||s.isAgentTyping!==a.isAgentTyping;(n||r)&&((0,K.ns)(t.localMessageItems)!==(0,K.ns)(e.localMessageItems)||r)&&this.doAutoScroll()}componentWillUnmount(){this.scrollPanelObserver.unobserve(this.messagesContainerWithScrollingRef.current)}checkScrollAnchor(e,t){const n=this.messagesContainerWithScrollingRef.current;if(e||this.previousScrollOffsetHeight===n.offsetHeight&&!this.props.suspendScrollDetection){const e=(void 0!==t?t:n.scrollTop)>=n.scrollHeight-n.offsetHeight;e!==this.props.messageState.isScrollAnchored&&this.props.serviceManager.store.dispatch(z.Ay.setChatMessagesStateProperty("isScrollAnchored",e))}this.previousScrollOffsetHeight=n.offsetHeight}requestAgentBannerFocus(){return!!this.agentBannerRef.current&&this.agentBannerRef.current.requestFocus()}doScrollToMessage(e,t=!0){try{const{localMessageItems:n}=this.props;let s;for(let t=0;t<=n.length;t++){const a=n[t];if(a.fullMessageID===e){s=this.messageRefs.get(a.ui_state.id);break}}if(s){const e=this.messagesContainerWithScrollingRef.current,n=s.ref.current.offsetTop;(0,I.d$)(e,n,0,t),this.checkScrollAnchor(!0,n)}}catch(e){(0,J.yA)("An error occurred while attempting to scroll.",e)}}getLastOutputMessageElements(){const{localMessageItems:e,allMessagesByID:t}=this.props,n=(0,K.ns)(e),s=t[n?.fullMessageID];if((0,j.Sv)(s)){const t=[];let n=!1;for(let a=e.length-1;a>=0;a--){const r=e[a],i=this.messageRefs.get(r?.ui_state.id);if(i){const{getLocalMessage:e}=i;if(e().fullMessageID===s.id){n=!0;const e=i.ref?.current;if(!e)break;t.push(e)}else if(n)break}}return t.reverse()}return[]}renderTypingIndicator(e,t){return s.createElement("div",{className:`WAC__message WAC__message-${t} WAC__message--lastMessage`},s.createElement("div",{className:"WAC__message--padding"},e&&s.createElement(F.z,{message:e}),s.createElement("div",{className:"WAC__bot-message"},s.createElement("div",{className:"WAC__received WAC__received--loading WAC__message-vertical-padding"},s.createElement("div",{className:"WAC__received--inner"},s.createElement(f,{loop:!0,carbonTheme:this.props.carbonTheme}))))))}renderMessage(e,t,n,a,r,o,l){const{serviceManager:c,config:d,languagePack:m,requestInputFocus:u,persistedToBrowserStorage:g,botName:p,messageState:f,locale:h,botAvatarURL:E,carbonTheme:A,useAITheme:_}=this.props,v=(0,C.i_)(this.props),{isAgentTyping:y}=(0,C.R0)(this.props),{isTypingCounter:S,isLoadingCounter:M}=f,{chatState:b}=g,{disclaimersAccepted:w}=b;if(d.public.disclaimer?.is_on&&!w[window.location.hostname])return null;const I=this.props.localMessageItems.length+(S>0||M>0||y?1:0),W=i({"WAC__message--firstMessage":0===n,"WAC__message--lastMessage":n===I-1}),R=e.fullMessageID===l,N=e.ui_state.id,k=s.createElement(Ie,{ref:e=>{e?this.messageRefs.set(N,e):this.messageRefs.delete(N)},className:W,config:d,localMessageItem:e,message:t,languagePack:m,requestInputFocus:u,serviceManager:c,messagesIndex:n,botName:p,disableUserInputs:v.isReadonly,isMessageForInput:r,showAvatarLine:o,botAvatarURL:E,requestMoveFocus:this.requestMoveFocus,doAutoScroll:this.doAutoScroll,scrollElementIntoView:this.scrollElementIntoView,isFirstMessageItem:o,locale:h,carbonTheme:A,useAITheme:_,allowNewFeedback:R,hideFeedback:!1});return a?s.createElement(D,{welcomeNodeBeforeElement:c.writeableElements[L.t.WELCOME_NODE_BEFORE_ELEMENT],key:N},k):s.createElement(s.Fragment,{key:N},k)}renderAgentBanner(){return s.createElement(B,{bannerRef:this.agentBannerRef,onButtonClick:this.props.onEndAgentChat})}renderScrollHandle(e){const{languagePack:t}=this.props;let n;n=Z.yS?e?"messages_scrollHandle":"messages_scrollHandleEnd":e?"messages_scrollHandleDetailed":"messages_scrollHandleEndDetailed";const a=Z.yS?void 0:()=>this.requestMoveFocus(e?Ee.FIRST:Ee.LAST,0);return s.createElement("button",{type:"button",className:"WACMessages--scrollHandle",ref:this.scrollHandleRef,tabIndex:0,"aria-label":t[n]||t.messages_scrollHandle,onClick:a,onFocus:()=>this.setState({scrollHandleHasFocus:!0}),onBlur:()=>this.setState({scrollHandleHasFocus:!1})})}getMessageIDForUserInput(){const{localMessageItems:e,allMessagesByID:t}=this.props;for(let n=e.length-1;n>=0;n--){const s=e[n],a=t[s.fullMessageID];if((0,j.ks)(a)&&a?.history?.error_state!==G.J.FAILED)return null;if((0,j.Sv)(a))return s.fullMessageID}return null}renderMessages(e){const{localMessageItems:t,allMessagesByID:n}=this.props,s=[],a=(0,K.ns)(t)?.fullMessageID;let r=null;for(let i=0;i<t.length;i++){const o=t[i],l=n[o.fullMessageID],c=e===o.fullMessageID,d=r!==o.fullMessageID,m=o.ui_state.isWelcomeResponse&&d;r=o.fullMessageID,s.push(this.renderMessage(o,l,i,m,c,d,a))}return s}render(){const{localMessageItems:e,messageState:t,intl:n,botName:a,serviceManager:r,notifications:o}=this.props,{isTypingCounter:l,isLoadingCounter:c}=t,{isAgentTyping:d}=(0,C.R0)(this.props),{scrollHandleHasFocus:m}=this.state,u=this.getMessageIDForUserInput(),g=this.renderMessages(u);let p;return d?p=n.formatMessage({id:"messages_agentIsTyping"}):l?p=n.formatMessage({id:"messages_botIsTyping"},{botName:a}):c&&(p=n.formatMessage({id:"messages_botIsLoading"},{botName:a})),s.createElement("div",{id:`WACMessages--holder${r.namespace.suffix}`,className:"WACMessages--holder"},this.renderAgentBanner(),s.createElement("div",{className:i("WACMessages__Wrapper",{"WACMessages__Wrapper--scrollHandleHasFocus":m})},s.createElement("div",{id:`WAC__messages${r.namespace.suffix}`,className:"WAC__messages",ref:this.messagesContainerWithScrollingRef,onScroll:()=>this.checkScrollAnchor()},this.renderScrollHandle(!0),g,(Boolean(l)||Boolean(c)||d)&&this.renderTypingIndicator(p,e.length),s.createElement(P,{serviceManager:r,notifications:o}),this.renderScrollHandle(!1))))}}function Re(e,...t){}var Ne=function(e){const t=s.forwardRef((t,n)=>{const a=(0,s.useContext)(q.k);return s.createElement(e,{...t,ref:n,serviceManager:a})});return t.displayName=`withServiceManager(${e.displayName||e.name||"Component"})`,t}((0,r.Ng)(e=>e,null,null,{forwardRef:!0})(We)),ke=n(711);function xe(e,t){const[n,s]=e,[a,r]=t;if(n===a&&s===r)return!0;if(n.length!==a.length)return!1;for(let e=0;e<=n.length;e++){const t=n[e],i=a[e];if(t!==i)return!1;if(s[t]!==r[i])return!1}return!0}var Te=n(7542),He=n(9186),Be=n(6574),Fe=n(1516),Le=n(8676),Oe=n(8625);function Ue(){const e=(0,w.O)(),t=(0,b.D)(),n=t.agent_sharingRequestTitle,a=t.agent_sharingRequestMessage,r=t.agent_sharingDeclineButton,i=t.agent_sharingAcceptButton;return s.createElement(Le.u,{title:n,message:a,onConfirm:()=>{e.humanAgentService?.screenShareUpdateRequestState(Oe.Ri.ACCEPTED)},onCancel:()=>{e.humanAgentService?.screenShareUpdateRequestState(Oe.Ri.DECLINED)},cancelButtonLabel:r,confirmButtonLabel:i,modalAnnounceMessage:a,serviceManager:e})}var De=n(4458);class ze extends s.Component{constructor(){super(...arguments),this.state={showEndChatConfirmation:!1,hasCaughtError:!1},this.inputRef=s.createRef(),this.headerRef=s.createRef(),this.messagesRef=s.createRef(),this.messagesToArray=(0,ke.A)((e,t)=>e.map(e=>t[e]),xe),this.hideConfirmEndChat=()=>{this.setState({showEndChatConfirmation:!1}),setTimeout(()=>{this.requestInputFocus()})},this.showConfirmEndChat=()=>{this.setState({showEndChatConfirmation:!0})},this.confirmAgentEndChat=()=>{this.hideConfirmEndChat(),this.props.serviceManager.humanAgentService.endChat(!0)},this.requestDefaultFocus=()=>{this.headerRef?.current?.requestFocus()||(0,I.Ht)(this.messagesRef.current?.scrollHandleRef)},this.requestInputFocus=()=>{const{agentDisplayState:e}=this.props;try{if(e.isConnectingOrConnected&&e.disableInput&&this.messagesRef.current.requestAgentBannerFocus())return;if(this.inputRef.current)if(this.props.inputState.fieldVisible&&!this.shouldDisableInput())this.inputRef.current.takeFocus();else{const e=this.messagesRef.current.getLastOutputMessageElements();(0,I.vv)(e)||this.requestDefaultFocus()}else this.requestDefaultFocus()}catch(e){(0,J.yA)("An error occurred in Chat.requestInputFocus",e)}},this.doAutoScroll=e=>{this.messagesRef.current?.doAutoScroll(e)},this.getMessagesScrollBottom=()=>this.messagesRef?.current?.getContainerScrollBottom(),this.onFilesSelectedForUpload=e=>{this.props.agentDisplayState.isConnectingOrConnected&&(this.props.serviceManager.humanAgentService.filesSelectedForUpload(e),this.props.inputState.allowMultipleFileUploads||this.requestInputFocus())}}async scrollOnHydrationComplete(){this.doAutoScroll()}componentDidMount(){this.props.isHydrationAnimationComplete&&setTimeout(()=>{this.scrollOnHydrationComplete()})}componentDidUpdate(e){const{isHydrationAnimationComplete:t,agentState:n}=this.props;t&&!e.isHydrationAnimationComplete&&setTimeout(()=>{this.scrollOnHydrationComplete()});const s=n.isConnecting!==e.agentState.isConnecting;this.state.showEndChatConfirmation&&s&&this.hideConfirmEndChat()}componentDidCatch(e,t){this.props.serviceManager.actions.errorOccurred((0,J.Jg)("Chat",e,t)),this.setState({hasCaughtError:!0})}doScrollToMessage(e,t=!0){this.messagesRef.current?.doScrollToMessage(e,t)}getMessageInput(){return this.inputRef.current?.getMessageInput()}shouldDisableInput(){return this.props.inputState.isReadonly||this.props.agentDisplayState.disableInput}shouldDisableSend(){const{isHydrated:e}=this.props;return this.shouldDisableInput()||!e}renderMessagesAndInput(){const{languagePack:e,messageState:t,intl:n,allMessageItemsByID:a,isHydrated:r,serviceManager:i,inputState:o,onUserTyping:l,agentState:c,botName:d,onSendInput:m,locale:u,useAITheme:g,carbonTheme:p,agentDisplayState:f}=this.props,{fieldVisible:h,files:C,allowFileUploads:E,allowedFileUploadTypes:A,allowMultipleFileUploads:_,stopStreamingButtonState:v}=o,{fileUploadInProgress:y}=c,{inputPlaceholderKey:S}=f,M=((C?.length??0)>0||y)&&!_;return s.createElement(s.Fragment,null,r&&s.createElement("div",{className:"WACMessagesContainer__NonInputContainer"},s.createElement(Ne,{ref:this.messagesRef,messageState:t,localMessageItems:this.messagesToArray(t.localMessageIDs,a),requestInputFocus:this.requestInputFocus,botName:d,intl:n,onEndAgentChat:this.showConfirmEndChat,locale:u,useAITheme:g,carbonTheme:p})),s.createElement(O.A,{slotName:L.t.BEFORE_INPUT_ELEMENT,id:`beforeInputElement${i.namespace.suffix}`}),s.createElement(Be.p,{ref:this.inputRef,languagePack:e,serviceManager:i,disableInput:this.shouldDisableInput(),disableSend:this.shouldDisableSend(),isInputVisible:h,onSendInput:m,onUserTyping:l,showUploadButton:E,disableUploadButton:M,allowedFileUploadTypes:A,allowMultipleFileUploads:_,pendingUploads:C,onFilesSelectedForUpload:this.onFilesSelectedForUpload,placeholder:e[S],isStopStreamingButtonVisible:v.isVisible,isStopStreamingButtonDisabled:v.isDisabled,testIdPrefix:De.G.MAIN}),this.state.showEndChatConfirmation&&s.createElement(Fe.a,{onConfirm:this.confirmAgentEndChat,onCancel:this.hideConfirmEndChat}),this.props.agentState.showScreenShareRequest&&s.createElement(Ue,null))}render(){const{languagePack:e,onClose:t,onCloseAndRestart:n,onRestart:a,onToggleHomeScreen:r,botName:i,headerDisplayName:o,headerAvatarConfig:l}=this.props,{hasCaughtError:c}=this.state;return s.createElement("div",{className:"WAC"},s.createElement(He.r,{ref:this.headerRef,onClose:t,onCloseAndRestart:n,onRestart:a,headerDisplayName:o,headerAvatarConfig:l,onToggleHomeScreen:r,enableChatHeaderConfig:!0,includeWriteableElement:!0,testIdPrefix:De.G.MAIN}),s.createElement(Pe,null),s.createElement("div",{className:"WACPanelContent WAC__ChatNonHeaderContainer"},c&&s.createElement("div",{className:"WAC__MessagesErrorHandler"},s.createElement(Te.CatastrophicError,{languagePack:e,onRestart:a,showHeader:!1,botName:i,headerDisplayName:o})),!c&&s.createElement("div",{className:"WAC__messagesAndInputContainer"},this.renderMessagesAndInput())))}}function Pe(){return(0,r.d4)(e=>e.showNonHeaderBackgroundCover)?s.createElement("div",{className:"WACBackgroundCover WACBackgroundCover__NonHeader"}):null}var $e=(0,a.Ay)(ze,{forwardRef:!0})}}]);
//# sourceMappingURL=9574.bundle.js.map