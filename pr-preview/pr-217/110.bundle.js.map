{"version":3,"file":"110.bundle.js","mappings":"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","sources":["webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useUUID.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/homeScreenUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/intlUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/ChatInstanceImpl.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/environmentVariables.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/config/LauncherConfig.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/reducerUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/messaging/History.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/colors.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/styleUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/viewStateUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/events/ChatActionsImpl.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/events/EventBus.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/CustomPanelInstance.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/HistoryService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/historyToMessages.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/messageServiceUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/MessageService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/NamespaceService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/ServiceManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/mockStorage.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/UserSessionStorageService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/customizers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/agentReducers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/tourReducerUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/reducers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/doCreateStore.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/chatEntryFunctions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/Chat.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/loadServices.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/subscriptions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/CustomPanelManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaAnnouncerProvider.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/launcherUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/Launcher.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherComplex.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherDesktopContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/animationUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherExtended.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherMobileContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useEffectDidUpdate.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/HydrationPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/panels/CustomPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/main/MainWindow.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/HasAddRemoveClassName.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/App.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/UserDefinedResponsePortalsContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/WriteableElementsPortalsContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/AppContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/AriaAnnouncerContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/settings.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/UUIDType.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/arrayUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/outputItemToLocalItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/BasePanelComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/actions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hocs/withAriaAnnouncer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/PageObjectId.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/messaging/LocalMessageItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/Animation.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/OverlayPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/HideComponentContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/languages/en.json.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/MountChildrenOnDelay.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/resolvablePromise.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/dynamic-imports/dynamic-imports.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/VisuallyHidden.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/browserUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/usePrevious.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/config/ChatHeaderConfig.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatarElement.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatarElement.scss.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/cds-aichat-chat-header-avatar.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatar.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderAvatar.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderLink/cds-aichat-chat-header-link.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderLink/src/chatHeaderLinkElement.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderLink.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenu.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuButton.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuItemRadioGroup.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderOverflowMenu.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/cds-aichat-chat-header-title.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/src/chatHeaderTitle.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/src/chatHeaderTitle.scss.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderTitle.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/AISlug.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/Header.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaAnnouncerComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/homeScreen/HomeScreenHeader.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/languages.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useLanguagePack.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/HideComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/WindowSizeContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/carbonTypes.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useServiceManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/ModalPortalRootContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/uuid.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaLiveMessage.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/domUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/messageUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/AnnounceOnMountComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/state/AppState.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/WriteableElement.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/ServiceManagerContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/ModalPortal.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/modals/ConfirmModal.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/instance/ChatInstance.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/selectors.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/BotHeader.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/objectUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/inputItemToLocalItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useAriaAnnouncer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/agentActions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/LanguagePackContext.js"],"sourcesContent":["import { useRef } from \"react\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useUUID() {\n  const ref = useRef();\n  if (ref.current === undefined) {\n    ref.current = uuid(UUIDType.COMPONENT);\n  }\n  return ref.current;\n}\n\nexport { useUUID };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction withoutEmptyStarters(config) {\n  let newConfig = config;\n  if (config?.starters?.buttons?.length) {\n    newConfig = {\n      allow_return: true,\n      ...config,\n      starters: {\n        ...config.starters,\n        buttons: config.starters.buttons.filter(button => Boolean(button.label?.trim()))\n      }\n    };\n    if (!newConfig?.starters?.buttons?.length) {\n      newConfig.starters.is_on = false;\n    }\n  }\n  return newConfig;\n}\n\nexport { withoutEmptyStarters };\n","import { createIntl } from \"react-intl\";\n\nimport actions from \"../store/actions.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function setIntl(serviceManager, locale, messages) {\n  serviceManager.intl = createIntl({\n    locale: locale,\n    messages: messages\n  });\n  serviceManager.store.dispatch(actions.setAppStateValue(\"languagePack\", messages));\n  serviceManager.store.dispatch(actions.setAppStateValue(\"locale\", locale));\n}\n\nexport { setIntl };\n","import dayjs from \"dayjs\";\n\nimport cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport actions from \"./store/actions.js\";\n\nimport { selectInputState } from \"./store/selectors.js\";\n\nimport \"../../types/state/AppState.js\";\n\nimport { withoutEmptyStarters } from \"./utils/homeScreenUtils.js\";\n\nimport { loadLocale, loadLanguagePack } from \"./utils/languages.js\";\n\nimport { consoleDebug, debugLog, consoleError, consoleWarn } from \"./utils/miscUtils.js\";\n\nimport { ViewChangeReason, MessageSendSource } from \"../../types/events/eventBusTypes.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { ViewType } from \"../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createChatInstance({serviceManager: serviceManager, callRender: callRender}) {\n  let wasRendered = false;\n  function getMainWindow() {\n    return {\n      addClassName: name => serviceManager.mainWindow?.addClassName(name),\n      removeClassName: name => serviceManager.mainWindow?.removeClassName(name)\n    };\n  }\n  function getMessageInput() {\n    return {\n      getHTMLElement: () => serviceManager.mainWindow?.getMessageInput()?.getHTMLElement(),\n      setValue: value => serviceManager.mainWindow?.getMessageInput()?.setValue(value),\n      setEnableEnterKey: value => serviceManager.mainWindow?.getMessageInput()?.setEnableEnterKey(value),\n      addChangeListener: listener => serviceManager.mainWindow?.getMessageInput()?.addChangeListener(listener),\n      removeChangeListener: listener => serviceManager.mainWindow?.getMessageInput()?.removeChangeListener(listener)\n    };\n  }\n  function getHomeScreenInput() {\n    return {\n      getHTMLElement: () => serviceManager.mainWindow?.getHomeScreenInput()?.getHTMLElement(),\n      setValue: value => serviceManager.mainWindow?.getHomeScreenInput()?.setValue(value),\n      setEnableEnterKey: value => serviceManager.mainWindow?.getHomeScreenInput()?.setEnableEnterKey(value),\n      addChangeListener: listener => serviceManager.mainWindow?.getHomeScreenInput()?.addChangeListener(listener),\n      removeChangeListener: listener => serviceManager.mainWindow?.getHomeScreenInput()?.removeChangeListener(listener)\n    };\n  }\n  let instance = {\n    render: () => {\n      if (wasRendered) {\n        consoleError(\"The render function has already been called!\");\n        return Promise.resolve(instance);\n      }\n      wasRendered = true;\n      return callRender();\n    },\n    on: handlers => {\n      serviceManager.eventBus.on(handlers);\n      return instance;\n    },\n    off: handlers => {\n      serviceManager.eventBus.off(handlers);\n      return instance;\n    },\n    once: handlers => {\n      serviceManager.eventBus.once(handlers);\n      return instance;\n    },\n    updateLanguagePack: newPack => {\n      debugLog(\"Called instance.updateLanguagePack\", newPack);\n      return serviceManager.actions.updateLanguagePack(newPack);\n    },\n    updateLocale: newLocale => {\n      debugLog(\"Called instance.updateLocale\", newLocale);\n      const localePromise = loadLocale(newLocale);\n      const languagePackPromise = loadLanguagePack(serviceManager.store.getState().languagePack);\n      return Promise.all([ localePromise, languagePackPromise ]).then(([localePack, languagePack]) => {\n        dayjs.locale(localePack);\n        setIntl(serviceManager, localePack.name, languagePack);\n        serviceManager.messageService.pendingLocale = true;\n        serviceManager.messageService.localeIsExplicit = true;\n      });\n    },\n    updateCSSVariables: (variables, whiteLabelVariables) => {\n      debugLog(\"Called instance.updateCSSVariables\", variables);\n      return serviceManager.actions.updateCSSVariables(variables, whiteLabelVariables);\n    },\n    send: async (message, options) => {\n      debugLog(\"Called instance.send\", message, options);\n      if (selectInputState(serviceManager.store.getState()).isReadonly) {\n        throw new Error(\"You are unable to send messages in read only mode.\");\n      }\n      return serviceManager.actions.send(message, MessageSendSource.INSTANCE_SEND, options);\n    },\n    doAutoScroll: (options = {}) => {\n      debugLog(\"Called instance.doAutoScroll\", options);\n      serviceManager.mainWindow?.doAutoScroll?.(options);\n    },\n    destroy: () => {\n      debugLog(\"Called instance.destroy\");\n      serviceManager.store.dispatch(actions.setAppStateValue(\"isDestroyed\", true));\n      serviceManager.container?.remove();\n      instance = undefined;\n    },\n    updateAssistantInputFieldVisibility: isVisible => {\n      debugLog(\"Called instance.updateAssistantInputFieldVisibility\", isVisible);\n      serviceManager.store.dispatch(actions.updateInputState({\n        fieldVisible: isVisible\n      }, false));\n    },\n    updateInputIsDisabled: isDisabled => {\n      debugLog(\"Called instance.updateInputIsDisabled\", isDisabled);\n      serviceManager.store.dispatch(actions.updateInputState({\n        isReadonly: isDisabled\n      }, false));\n    },\n    updateBotUnreadIndicatorVisibility: isVisible => {\n      debugLog(\"Called instance.updateBotUnreadIndicatorVisibility\", isVisible);\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"showUnreadIndicator\", isVisible));\n    },\n    changeView: async newView => {\n      debugLog(\"Called instance.changeView\", newView);\n      let issueWithNewView = false;\n      if (!wasRendered) {\n        consoleError(`You tried to call \"changeView\" without ever having called the \"render\" method. There is no view to change!`);\n        issueWithNewView = true;\n      }\n      const viewTypeValues = Object.values(ViewType);\n      if (typeof newView === \"string\") {\n        if (!viewTypeValues.includes(newView)) {\n          consoleError(`You tried to change the view but the view you specified is not a valid view name. Please use` + ` the valid view names; ${viewTypeValues.join(\", \")}.`);\n          issueWithNewView = true;\n        }\n      } else if (typeof newView === \"object\") {\n        Object.keys(newView).forEach(key => {\n          if (!viewTypeValues.includes(key)) {\n            consoleError(`You tried to change the state of multiple views by providing an object, however you included the key` + ` \"${key}\" within the object which is not a valid view name. Please use the valid view names; ` + `${viewTypeValues.join(\", \")}.`);\n            issueWithNewView = true;\n          }\n        });\n      } else {\n        consoleError(\"You tried to change the view but the view you provided was not a string or an object. You can either change\" + ' to one of the supported views by providing a string, ex. \"launcher\", \"mainWindow\", or \"tour\". Or you can' + ' change the state of multiple views by providing an object, ex. { \"launcher\": true, \"mainWindow\": false,' + ' \"tour\": true }. Please use one of these supported options.');\n        issueWithNewView = true;\n      }\n      if (!issueWithNewView) {\n        await serviceManager.actions.changeView(newView, {\n          viewChangeReason: ViewChangeReason.CALLED_CHANGE_VIEW\n        });\n      }\n    },\n    addNotification: notification => {\n      consoleWarn(\"This method is deprecated. Please use instance.notifications.addNotification() instead.\");\n      serviceManager.actions.addNotification(notification);\n    },\n    notifications: {\n      addNotification: notification => {\n        debugLog(\"Called instance.addNotification\", notification);\n        serviceManager.actions.addNotification(notification);\n      },\n      removeNotifications: groupID => {\n        debugLog(\"Called instance.removeNotifications\", groupID);\n        serviceManager.actions.removeNotification(groupID);\n      },\n      removeAllNotifications: () => {\n        debugLog(\"Called instance.removeAllNotifications\");\n        serviceManager.actions.removeAllNotifications();\n      }\n    },\n    updateMainHeaderTitle: title => {\n      debugLog(\"Called instance.updateMainHeaderTitle\", title);\n      if (!title) {\n        title = null;\n      }\n      serviceManager.actions.updateMainHeaderTitle(title);\n    },\n    updateHomeScreenConfig: homeScreenConfig => {\n      debugLog(\"Called instance.updateHomeScreenConfig\", homeScreenConfig);\n      const homeScreenConfigClone = cloneDeep(homeScreenConfig);\n      const isAIThemeEnabled = serviceManager.store.getState().theme.useAITheme;\n      if (isAIThemeEnabled) {\n        if (homeScreenConfig?.background) {\n          consoleWarn(\"The home screen background can not be changed when the AI theme is enabled.\");\n          delete homeScreenConfigClone.background;\n        }\n      }\n      serviceManager.actions.updateHomeScreenConfig(withoutEmptyStarters(homeScreenConfigClone));\n    },\n    getState: () => serviceManager.actions.getPublicWebChatState(),\n    writeableElements: createWriteableElementsProxy(serviceManager),\n    scrollToMessage: (messageID, animate) => {\n      debugLog(\"Called instance.scrollToMessage\", messageID, animate);\n      serviceManager.mainWindow?.doScrollToMessage(messageID, animate);\n    },\n    updateLauncherConfig: config => serviceManager.actions.updateLauncherConfig(config),\n    customPanels: serviceManager.customPanelManager,\n    updateCustomMenuOptions: options => {\n      debugLog(\"Called instance.updateCustomMenuOptions\", options);\n      serviceManager.store.dispatch(actions.setAppStateValue(\"customMenuOptions\", options));\n    },\n    restartConversation: async () => {\n      debugLog(\"Called instance.restartConversation\");\n      return serviceManager.actions.restartConversation();\n    },\n    agentEndConversation: () => {\n      debugLog(\"Called instance.agentEndConversation\");\n      consoleWarn(`The instance.agentEndConversation method is deprecated. Use instance.serviceDesk.endConversation instead.`);\n      return serviceManager.actions.agentEndConversation(false);\n    },\n    updateIsTypingCounter(direction) {\n      debugLog(\"Called instance.updateIsTypingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsTypingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isTypingCounter <= 0) {\n          consoleError(\"You cannot decrease the typing counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsTypingCounter(-1));\n      } else {\n        consoleError(`[updateIsTypingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateIsLoadingCounter(direction) {\n      debugLog(\"Called instance.updateIsLoadingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsLoadingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isLoadingCounter <= 0) {\n          consoleError(\"You cannot decrease the loading counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsLoadingCounter(-1));\n      } else {\n        consoleError(`[updateIsLoadingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateIsChatLoadingCounter(direction) {\n      debugLog(\"Called instance.updateIsChatLoadingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsHydratingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isHydratingCounter <= 0) {\n          consoleError(\"You cannot decrease the hydrating counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsHydratingCounter(-1));\n      } else {\n        consoleError(`[updateIsChatLoadingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateHeaderConfig: config => {\n      const configCopy = cloneDeep(config);\n      serviceManager.store.dispatch(actions.updateChatHeaderConfig(configCopy));\n    },\n    updateMainHeaderAvatar: config => {\n      serviceManager.store.dispatch(actions.updateMainHeaderAvatar(config));\n    },\n    updateBotName: name => serviceManager.actions.updateBotName(name),\n    updateBotAvatarURL: url => serviceManager.actions.updateBotAvatarURL(url),\n    elements: {\n      getMainWindow: getMainWindow,\n      getMessageInput: getMessageInput,\n      getHomeScreenInput: getHomeScreenInput\n    },\n    tours: {\n      startTour: async message => {\n        debugLog(\"Called instance.tours.startTour\", message);\n        await serviceManager.actions.send(message, MessageSendSource.START_TOUR_METHOD, {\n          skipTourCard: true\n        });\n      },\n      endTour: async () => {\n        debugLog(\"Called instance.tours.endTour\");\n        serviceManager.actions.endTour({\n          viewChangeReason: ViewChangeReason.CALLED_END_TOUR\n        });\n      },\n      goToNextStep: async () => {\n        debugLog(\"Called instance.tours.goToNextStep\");\n        serviceManager.actions.changeStepInTour({\n          nextStep: true\n        });\n      },\n      goToStep: async stepId => {\n        debugLog(\"Called instance.tours.goToStep\", stepId);\n        serviceManager.actions.goToSpecificTourStep(stepId);\n      }\n    },\n    messaging: {\n      addMessage: (message, options = {}) => {\n        debugLog(\"Called instance.messaging.addMessage\", message, options);\n        serviceManager.messageService.messageLoadingManager.end();\n        return serviceManager.actions.receive(message, options?.isLatestWelcomeNode ?? false, null, {\n          disableFadeAnimation: options?.disableFadeAnimation\n        });\n      },\n      addMessageChunk: async (chunk, options = {}) => {\n        debugLog(\"Called instance.messaging.addMessageChunk\", chunk, options);\n        serviceManager.messageService.messageLoadingManager.end();\n        await serviceManager.actions.receiveChunk(chunk, null, options);\n      },\n      removeMessages: async messageIDs => {\n        debugLog(\"Called instance.messaging.removeMessages\", messageIDs);\n        return serviceManager.actions.removeMessages(messageIDs);\n      },\n      clearConversation: () => {\n        debugLog(\"Called instance.messaging.clearConversation\");\n        return serviceManager.actions.restartConversation({\n          skipHydration: true,\n          endAgentConversation: false,\n          fireEvents: false\n        });\n      },\n      insertHistory: messages => {\n        debugLog(\"Called instance.messaging.insertHistory\", messages);\n        return serviceManager.actions.insertHistory(messages);\n      }\n    },\n    requestFocus: () => {\n      debugLog(\"Called instance.requestFocus\");\n      serviceManager.appWindow?.requestFocus();\n    },\n    serviceDesk: {\n      endConversation: () => {\n        debugLog(\"Called instance.serviceDesk.endConversation\");\n        return serviceManager.actions.agentEndConversation(false);\n      },\n      updateIsSuspended: async isSuspended => {\n        debugLog(\"Called instance.serviceDesk.updateIsSuspended\", isSuspended);\n        return serviceManager.actions.agentUpdateIsSuspended(isSuspended);\n      }\n    }\n  };\n  if (serviceManager.store.getState().config.public.debug) {\n    consoleDebug(\"[ChatInstanceImpl] Created chat instance\", instance);\n  }\n  return instance;\n}\n\nfunction createWriteableElementsProxy(serviceManager) {\n  const elementSet = new Set;\n  const handler = {\n    get(target, element) {\n      if (!elementSet.has(element)) {\n        elementSet.add(element);\n      }\n      return target[element];\n    }\n  };\n  return new Proxy(serviceManager.writeableElements, handler);\n}\n\nexport { createChatInstance };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst NODE_ENV = \"production\";\n\nconst VERSION = \"0.3.3\";\n\nexport { NODE_ENV, VERSION };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar NotificationType;\n\n(function(NotificationType) {\n  NotificationType[\"TEXT_NOTIFICATION\"] = \"text_notification\";\n})(NotificationType || (NotificationType = {}));\n\nconst BOUNCING_ANIMATION_TIMEOUTS = [ 15e3, 6e4 ];\n\nconst TIME_TO_ENTRANCE_ANIMATION_START = 15e3;\n\nexport { BOUNCING_ANIMATION_TIMEOUTS, NotificationType, TIME_TO_ENTRANCE_ANIMATION_START };\n","import isEqual from \"lodash-es/isEqual.js\";\n\nimport { VERSION } from \"../environmentVariables.js\";\n\nimport { NotificationType, TIME_TO_ENTRANCE_ANIMATION_START } from \"../../../types/config/LauncherConfig.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_ID } from \"../utils/constants.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport \"../../../types/utilities/carbonTypes.js\";\n\nimport { CarbonTheme } from \"../../../types/config/PublicConfig.js\";\n\nimport { CornersType } from \"../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const DEFAULT_LAUNCHER = {\n  config: {\n    is_on: true,\n    mobile: {\n      is_on: true,\n      title: \"\",\n      time_to_expand: TIME_TO_ENTRANCE_ANIMATION_START,\n      new_expand_time: false,\n      time_to_reduce: 1e4,\n      notification_type: NotificationType.TEXT_NOTIFICATION\n    },\n    desktop: {\n      is_on: true,\n      title: \"\",\n      new_expand_time: false,\n      time_to_expand: TIME_TO_ENTRANCE_ANIMATION_START,\n      notification_type: NotificationType.TEXT_NOTIFICATION\n    }\n  }\n};\n\ndeepFreeze(DEFAULT_LAUNCHER);\n\nconst DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS = {\n  title: null,\n  hideBackButton: false,\n  hidePanelHeader: false,\n  disableAnimation: false\n};\n\ndeepFreeze(DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS);\n\nconst DEFAULT_CUSTOM_PANEL_STATE = {\n  isOpen: false,\n  panelID: DEFAULT_CUSTOM_PANEL_ID,\n  options: DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS\n};\n\ndeepFreeze(DEFAULT_CUSTOM_PANEL_STATE);\n\nconst DEFAULT_IFRAME_PANEL_STATE = {\n  isOpen: false,\n  messageItem: null\n};\n\ndeepFreeze(DEFAULT_IFRAME_PANEL_STATE);\n\nconst DEFAULT_CITATION_PANEL_STATE = {\n  isOpen: false,\n  citationItem: null\n};\n\ndeepFreeze(DEFAULT_CITATION_PANEL_STATE);\n\nconst DEFAULT_TOUR_STATE = {\n  activeTourStepItems: null\n};\n\ndeepFreeze(DEFAULT_TOUR_STATE);\n\nconst DEFAULT_MESSAGE_PANEL_STATE = {\n  isOpen: false,\n  localMessageItem: null,\n  isMessageForInput: false\n};\n\ndeepFreeze(DEFAULT_MESSAGE_PANEL_STATE);\n\nconst VIEW_STATE_ALL_CLOSED = {\n  launcher: false,\n  mainWindow: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_ALL_CLOSED);\n\nconst VIEW_STATE_LAUNCHER_OPEN = {\n  launcher: true,\n  mainWindow: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_LAUNCHER_OPEN);\n\nconst VIEW_STATE_MAIN_WINDOW_OPEN = {\n  mainWindow: true,\n  launcher: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_MAIN_WINDOW_OPEN);\n\nconst DEFAULT_PERSISTED_TO_BROWSER = {\n  chatState: {\n    version: VERSION,\n    disclaimersAccepted: {},\n    homeScreenState: {\n      isHomeScreenOpen: false,\n      showBackToBot: false\n    },\n    hasSentNonWelcomeMessage: false,\n    persistedTourState: {\n      activeTourID: null,\n      activeTourCurrentStepIndex: null\n    },\n    agentState: {\n      isConnected: false,\n      isSuspended: false,\n      agentProfiles: {}\n    }\n  },\n  launcherState: {\n    wasLoadedFromBrowser: false,\n    version: VERSION,\n    viewState: VIEW_STATE_ALL_CLOSED,\n    activeTour: false,\n    showUnreadIndicator: false,\n    mobileLauncherIsExtended: false,\n    mobileLauncherWasReduced: false,\n    mobileLauncherDisableBounce: false,\n    desktopLauncherIsExpanded: false,\n    desktopLauncherWasMinimized: false,\n    bounceTurn: 1,\n    hasSentNonWelcomeMessage: false\n  }\n};\n\ndeepFreeze(DEFAULT_PERSISTED_TO_BROWSER);\n\nconst DEFAULT_CHAT_MESSAGES_STATE = {\n  localMessageIDs: [],\n  messageIDs: [],\n  isTypingCounter: 0,\n  isLoadingCounter: 0,\n  isHydratingCounter: 0,\n  isScrollAnchored: false\n};\n\ndeepFreeze(DEFAULT_CHAT_MESSAGES_STATE);\n\nconst DEFAULT_MESSAGE_STATE = {\n  allMessageItemsByID: {},\n  allMessagesByID: {},\n  botMessageState: {\n    ...DEFAULT_CHAT_MESSAGES_STATE\n  }\n};\n\ndeepFreeze(DEFAULT_MESSAGE_STATE);\n\nconst DEFAULT_INPUT_STATE = () => ({\n  fieldVisible: true,\n  isReadonly: false,\n  files: [],\n  allowFileUploads: false,\n  allowMultipleFileUploads: false,\n  allowedFileUploadTypes: null,\n  stopStreamingButtonState: {\n    currentStreamID: null,\n    isVisible: false,\n    isDisabled: false\n  }\n});\n\nconst DEFAULT_AGENT_STATE = {\n  isConnecting: false,\n  isReconnecting: false,\n  numUnreadMessages: 0,\n  fileUploadInProgress: false,\n  showScreenShareRequest: false,\n  isScreenSharing: false,\n  isAgentTyping: false,\n  inputState: DEFAULT_INPUT_STATE()\n};\n\ndeepFreeze(DEFAULT_AGENT_STATE);\n\nconst DEFAULT_THEME_STATE = {\n  carbonTheme: CarbonTheme.G10,\n  useAITheme: false,\n  corners: CornersType.ROUND\n};\n\ndeepFreeze(DEFAULT_THEME_STATE);\n\nconst DEFAULT_LAYOUT_STATE = {\n  showFrame: true,\n  hasContentMaxWidth: true\n};\n\ndeepFreeze(DEFAULT_LAYOUT_STATE);\n\nfunction calcAnnouncementForWidgetOpen(previousState, newViewState) {\n  if (isEqual(previousState.persistedToBrowserStorage.launcherState.viewState, newViewState)) {\n    return previousState.announceMessage;\n  }\n  return {\n    messageID: newViewState.mainWindow ? \"window_ariaWindowOpened\" : \"window_ariaWindowClosed\"\n  };\n}\n\nfunction applyBotMessageState(state, newState) {\n  return {\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      ...newState\n    }\n  };\n}\n\nfunction handleViewStateChange(state, viewState) {\n  let {agentState: agentState} = state;\n  let {showUnreadIndicator: showUnreadIndicator} = state.persistedToBrowserStorage.launcherState;\n  if (viewState.mainWindow && state.isBrowserPageVisible) {\n    if (agentState.numUnreadMessages !== 0) {\n      agentState = {\n        ...agentState,\n        numUnreadMessages: 0\n      };\n    }\n    showUnreadIndicator = false;\n  }\n  return {\n    ...state,\n    announceMessage: calcAnnouncementForWidgetOpen(state, viewState),\n    agentState: agentState,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        viewState: viewState,\n        showUnreadIndicator: showUnreadIndicator\n      }\n    }\n  };\n}\n\nfunction setHomeScreenOpenState(state, isOpen, showBackToBot) {\n  if (showBackToBot === undefined) {\n    showBackToBot = state.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot;\n  }\n  return {\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        homeScreenState: {\n          ...state.persistedToBrowserStorage.chatState.homeScreenState,\n          isHomeScreenOpen: isOpen,\n          showBackToBot: showBackToBot\n        }\n      }\n    }\n  };\n}\n\nfunction applyLocalMessageUIState(state, localMessageID, propertyName, propertyValue) {\n  const oldMessage = state.allMessageItemsByID[localMessageID];\n  if (oldMessage) {\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [localMessageID]: {\n          ...oldMessage,\n          ui_state: {\n            ...oldMessage.ui_state,\n            [propertyName]: propertyValue\n          }\n        }\n      }\n    };\n  }\n  return state;\n}\n\nfunction applyFullMessage(state, message) {\n  const newState = {\n    ...state,\n    allMessagesByID: {\n      ...state.allMessagesByID,\n      [message.id]: message\n    }\n  };\n  if (!state.allMessagesByID[message.id]) {\n    const currentMessageIDs = state.botMessageState.messageIDs;\n    const newMessageIDs = [ ...currentMessageIDs, message.id ];\n    return applyBotMessageState(newState, {\n      messageIDs: newMessageIDs\n    });\n  }\n  return newState;\n}\n\nexport { DEFAULT_AGENT_STATE, DEFAULT_CHAT_MESSAGES_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE, DEFAULT_INPUT_STATE, DEFAULT_LAUNCHER, DEFAULT_LAYOUT_STATE, DEFAULT_MESSAGE_PANEL_STATE, DEFAULT_MESSAGE_STATE, DEFAULT_PERSISTED_TO_BROWSER, DEFAULT_THEME_STATE, DEFAULT_TOUR_STATE, VIEW_STATE_ALL_CLOSED, VIEW_STATE_LAUNCHER_OPEN, VIEW_STATE_MAIN_WINDOW_OPEN, applyBotMessageState, applyFullMessage, applyLocalMessageUIState, handleViewStateChange, setHomeScreenOpenState };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar NoteType;\n\n(function(NoteType) {\n  NoteType[\"HISTORY\"] = \"HISTORY\";\n  NoteType[\"MESSAGE\"] = \"MESSAGE\";\n  NoteType[\"ANSWER\"] = \"ANSWER\";\n  NoteType[\"FLOW\"] = \"FLOW\";\n  NoteType[\"ERROR\"] = \"ERROR\";\n})(NoteType || (NoteType = {}));\n\nexport { NoteType };\n","import { gray100, white } from \"../../../node_modules/@carbon/colors/es/index.js\";\n\nimport Color from \"color\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst MIN_CONTRAST = 4.5;\n\nfunction hexCodeToRGB(color) {\n  if (color.length === 7) {\n    const red = color.substring(1, 3);\n    const blue = color.substring(3, 5);\n    const green = color.substring(5, 7);\n    return [ parseInt(red, 16), parseInt(blue, 16), parseInt(green, 16) ];\n  }\n  if (color.length === 4) {\n    const red = color.substring(1, 2);\n    const blue = color.substring(2, 3);\n    const green = color.substring(3, 4);\n    return [ parseInt(red + red, 16), parseInt(blue + blue, 16), parseInt(green + green, 16) ];\n  }\n  consoleError(`Unsupported color code: \"${color}\"`);\n  return [ 0, 0, 0 ];\n}\n\nfunction calculateContrast(color1, color2) {\n  const rgb1 = hexCodeToRGB(color1);\n  const rgb2 = hexCodeToRGB(color2);\n  const luminance1 = calculateRelativeLuminance(rgb1);\n  const luminance2 = calculateRelativeLuminance(rgb2);\n  let contrast;\n  if (luminance1 > luminance2) {\n    contrast = (luminance1 + .05) / (luminance2 + .05);\n  } else {\n    contrast = (luminance2 + .05) / (luminance1 + .05);\n  }\n  return contrast;\n}\n\nfunction calculateRelativeLuminance([r8, g8, b8]) {\n  const rRGB = r8 / 255;\n  const gRGB = g8 / 255;\n  const bRGB = b8 / 255;\n  const R = rRGB <= .03928 ? rRGB / 12.92 : ((rRGB + .055) / 1.055) ** 2.4;\n  const G = gRGB <= .03928 ? gRGB / 12.92 : ((gRGB + .055) / 1.055) ** 2.4;\n  const B = bRGB <= .03928 ? bRGB / 12.92 : ((bRGB + .055) / 1.055) ** 2.4;\n  const luminance = .2126 * R + .7152 * G + .0722 * B;\n  return luminance;\n}\n\nfunction whiteOrBlackText(background) {\n  return calculateContrast(gray100, background) >= MIN_CONTRAST ? gray100 : white;\n}\n\nfunction adjustLightness(token, shift) {\n  const original = Color(token).hsl().object();\n  return Color({\n    ...original,\n    l: original.l + shift\n  }).round().hex().toLowerCase();\n}\n\nexport { MIN_CONTRAST, adjustLightness, calculateContrast, hexCodeToRGB, whiteOrBlackText };\n","import { white, gray100, gray10, blue60, gray80 } from \"../../../node_modules/@carbon/colors/es/index.js\";\n\nimport { whiteOrBlackText, adjustLightness, calculateContrast, MIN_CONTRAST, hexCodeToRGB } from \"./colors.js\";\n\nimport { WA_CONSOLE_PREFIX } from \"./constants.js\";\n\nimport { CarbonTheme } from \"../../../types/config/PublicConfig.js\";\n\nimport { CarbonThemeClassNames } from \"../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst CSS_VAR_PREFIX = \"--cds-\";\n\nconst CSS_CHAT_PREFIX = \"chat-\";\n\nconst HEXADECIMAL_REGEX = /#([a-f0-9]{3}){1,2}\\b/i;\n\nconst INTERNAL_OVERRIDES_LIGHT_THEME_MAP = {\n  \"$chat-button\": \"#000000\",\n  \"$chat-button-text-hover\": \"#525252\"\n};\n\nconst INTERNAL_OVERRIDES_DARK_THEME_MAP = {\n  \"$chat-button\": \"#ffffff\",\n  \"$chat-button-text-hover\": \"#f4f4f4\"\n};\n\nfunction convertCSSVariablesToString(cssVariables) {\n  const pieces = Object.keys(cssVariables).map(key => {\n    const value = cssVariables[key];\n    if (value === undefined) {\n      return \"\";\n    }\n    const fullName = key.startsWith(\"$\") ? `${CSS_VAR_PREFIX}${key.replace(/^\\$/, \"\")}` : `${CSS_VAR_PREFIX}${CSS_CHAT_PREFIX}${key}`;\n    return `${fullName}:${value};`;\n  });\n  let cssVariablesString = \"\";\n  const allValues = pieces.join(\"\");\n  const prefix = \"\";\n  if (allValues.length > 0) {\n    const rule = `${prefix}.WACContainer .cds--white, ${prefix}.WACContainer .cds--g10, ${prefix}.WACContainer .cds--g90, ${prefix}.WACContainer .cds--g100`;\n    cssVariablesString = `${rule}${`, :host`}{${allValues}}`;\n  }\n  return cssVariablesString;\n}\n\nfunction remoteStylesToCSSVars(whiteLabelVariables, carbonTheme) {\n  const cssOverrides = {};\n  const primaryColor = whiteLabelVariables[\"BASE-primary-color\"];\n  const secondaryColor = whiteLabelVariables[\"BASE-secondary-color\"];\n  const accentColor = whiteLabelVariables[\"BASE-accent-color\"];\n  if (primaryColor) {\n    cssOverrides[\"PRIMARY-color\"] = primaryColor;\n    cssOverrides[\"PRIMARY-color-text\"] = whiteOrBlackText(primaryColor);\n    cssOverrides[\"PRIMARY-color-hover\"] = adjustLightness(primaryColor, -8);\n    cssOverrides[\"PRIMARY-color-active\"] = adjustLightness(primaryColor, -10);\n    const useAccentColor = accentColor || blue60;\n    const tryFocusColor = carbonTheme === CarbonTheme.G90 || carbonTheme === CarbonTheme.G100 ? white : useAccentColor;\n    let useFocusColor;\n    if (calculateContrast(primaryColor, tryFocusColor) >= MIN_CONTRAST) {\n      useFocusColor = tryFocusColor;\n    } else if (tryFocusColor !== useAccentColor && calculateContrast(primaryColor, useAccentColor) >= MIN_CONTRAST) {\n      useFocusColor = useAccentColor;\n    } else if (tryFocusColor !== white && calculateContrast(primaryColor, white) >= MIN_CONTRAST) {\n      useFocusColor = white;\n    } else {\n      useFocusColor = gray100;\n    }\n    if (useFocusColor !== tryFocusColor) {\n      cssOverrides[\"PRIMARY-color-focus\"] = useFocusColor;\n    }\n  }\n  if (secondaryColor) {\n    cssOverrides[\"SECONDARY-color\"] = secondaryColor;\n    cssOverrides[\"SECONDARY-color-text\"] = whiteOrBlackText(secondaryColor);\n  } else if (carbonTheme === CarbonTheme.G90 || carbonTheme === CarbonTheme.G100) {\n    cssOverrides[\"SECONDARY-color\"] = `var(${CSS_VAR_PREFIX}layer-02)`;\n    cssOverrides[\"SECONDARY-color-text\"] = `var(${CSS_VAR_PREFIX}text-primary);`;\n  }\n  if (accentColor) {\n    const colorMap = ACCENT_COLOR_MAPS[carbonTheme];\n    const accentBlue20 = adjustLightness(accentColor, 40);\n    const accentBlue60Hover = adjustLightness(accentColor, -8);\n    const accentBlue80 = adjustLightness(accentColor, -20);\n    fillValues(cssOverrides, colorMap.blue20, accentBlue20);\n    fillValues(cssOverrides, colorMap.blue60, accentColor);\n    fillValues(cssOverrides, colorMap.blue60Hover, accentBlue60Hover);\n    fillValues(cssOverrides, colorMap.blue80, accentBlue80);\n    cssOverrides[\"LAUNCHER-color-background\"] = accentColor;\n    cssOverrides[\"LAUNCHER-color-background-hover\"] = accentBlue60Hover;\n    cssOverrides[\"LAUNCHER-color-background-active\"] = accentBlue80;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-background\"] = accentColor;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-hover\"] = accentBlue60Hover;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-active\"] = accentBlue80;\n    cssOverrides[\"ACCENT-color\"] = accentColor;\n    const accentColorRGB = hexCodeToRGB(accentColor);\n    cssOverrides[\"ACCENT-color-r\"] = accentColorRGB[0].toString();\n    cssOverrides[\"ACCENT-color-g\"] = accentColorRGB[1].toString();\n    cssOverrides[\"ACCENT-color-b\"] = accentColorRGB[2].toString();\n    cssOverrides[\"ACCENT-color-ghost-text\"] = accentColor;\n    const accentColorBW = whiteOrBlackText(accentColor);\n    cssOverrides[\"ACCENT-color-text\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-background-hover\"] = accentBlue60Hover;\n    cssOverrides[\"ACCENT-color-background-active\"] = accentBlue80;\n    cssOverrides[\"LAUNCHER-color-focus-border\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-color-avatar\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-text\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-focus-border\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-MOBILE-color-text\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-bw\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-bw-hover\"] = adjustLightness(accentColorBW, -8);\n    cssOverrides[\"ACCENT-color-bw-active\"] = adjustLightness(accentColorBW, -10);\n    cssOverrides[\"ACCENT-color-bw-inverse\"] = accentColorBW === gray100 ? white : gray100;\n    cssOverrides[\"ACCENT-color-bw-gray\"] = accentColorBW === gray100 ? gray80 : gray10;\n    cssOverrides[\"ACCENT-color-pastel\"] = accentColorBW === gray100 ? adjustLightness(accentColor, 20) : adjustLightness(accentColor, -15);\n  }\n  return cssOverrides;\n}\n\nconst ACCENT_COLOR_MAPS = {\n  white: {\n    blue20: [ \"$highlight\" ],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$icon-interactive\", \"$focus\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$button-tertiary-active\" ]\n  },\n  g10: {\n    blue20: [ \"$highlight\" ],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$icon-interactive\", \"$focus\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$button-tertiary-active\" ]\n  },\n  g90: {\n    blue20: [],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$focus-inverse\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$highlight\", \"$button-tertiary-active\" ]\n  },\n  g100: {\n    blue20: [],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$focus-inverse\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$highlight\", \"$button-tertiary-active\" ]\n  }\n};\n\nfunction fillValues(styles, propertyNames, value) {\n  propertyNames.forEach(propertyName => {\n    styles[propertyName] = value;\n  });\n}\n\nfunction mergeCSSVariables(publicVars, whiteLabelVariables, carbonTheme, useAITheme) {\n  carbonTheme = carbonTheme || CarbonTheme.G10;\n  useAITheme = useAITheme || false;\n  publicVars = publicVars || {};\n  const internalOverrides = createInternalCSSOverridesMap(carbonTheme, useAITheme);\n  const result = {\n    ...internalOverrides,\n    ...publicVars\n  };\n  Object.entries(result).forEach(([key, value]) => {\n    if (key.startsWith(\"$\") && !value.match(HEXADECIMAL_REGEX)) {\n      console.warn(`${WA_CONSOLE_PREFIX} You tried to call \"updateCSSVariables\" with an invalid value for \"${key}\": \"${publicVars[key]}\". You must use hexadecimal values for colors.`);\n      delete result[key];\n    }\n  });\n  const remoteVars = remoteStylesToCSSVars(whiteLabelVariables || {}, carbonTheme);\n  Object.entries(remoteVars).forEach(([key, value]) => {\n    if (value !== \"\" && publicVars[key] === undefined) {\n      result[key] = value;\n    }\n  });\n  return result;\n}\n\nfunction createInternalCSSOverridesMap(carbonTheme, useAITheme) {\n  let internalOverridesMap = {};\n  if (!useAITheme) {\n    if ([ CarbonTheme.G10, CarbonTheme.WHITE ].includes(carbonTheme)) {\n      internalOverridesMap = {\n        ...internalOverridesMap,\n        ...INTERNAL_OVERRIDES_LIGHT_THEME_MAP\n      };\n    } else if ([ CarbonTheme.G90, CarbonTheme.G100 ].includes(carbonTheme)) {\n      internalOverridesMap = {\n        ...internalOverridesMap,\n        ...INTERNAL_OVERRIDES_DARK_THEME_MAP\n      };\n    }\n  }\n  return internalOverridesMap;\n}\n\nfunction getThemeClassNames(themeState) {\n  let themeClassnames;\n  switch (themeState?.carbonTheme) {\n   case CarbonTheme.WHITE:\n    themeClassnames = CarbonThemeClassNames.WHITE;\n    break;\n\n   case CarbonTheme.G10:\n    themeClassnames = CarbonThemeClassNames.G10;\n    break;\n\n   case CarbonTheme.G90:\n    themeClassnames = CarbonThemeClassNames.G90;\n    break;\n\n   case CarbonTheme.G100:\n    themeClassnames = CarbonThemeClassNames.G100;\n    break;\n\n   default:\n    themeClassnames = CarbonThemeClassNames.G10;\n    break;\n  }\n  if (themeState?.useAITheme) {\n    themeClassnames += \" WAC--aiTheme\";\n  }\n  return themeClassnames;\n}\n\nexport { convertCSSVariablesToString, getThemeClassNames, mergeCSSVariables };\n","import { VIEW_STATE_ALL_CLOSED } from \"../store/reducerUtils.js\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function constructViewState(newView, appState) {\n  const {viewState: viewState} = appState.persistedToBrowserStorage.launcherState;\n  let newViewState;\n  if (typeof newView === \"string\") {\n    newViewState = {\n      ...VIEW_STATE_ALL_CLOSED,\n      [newView]: true\n    };\n  } else {\n    newViewState = {\n      ...viewState,\n      ...newView\n    };\n  }\n  return newViewState;\n}\n\nfunction validateViewState(viewState, appState) {\n  const {activeTour: activeTour} = appState.persistedToBrowserStorage.launcherState;\n  if (viewState.tour && !activeTour) {\n    consoleError(\"Error changing the view. The new view was supposed to show a tour however there is no active tour to show.\" + \" Changing the view has been canceled.\");\n    return false;\n  }\n  return true;\n}\n\nexport { constructViewState, validateViewState };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport isEqual from \"lodash-es/isEqual.js\";\n\nimport merge from \"lodash-es/merge.js\";\n\nimport inputItemToLocalItem from \"../schema/inputItemToLocalItem.js\";\n\nimport { outputItemToLocalItem, createLocalMessageItemsForNestedMessageItems } from \"../schema/outputItemToLocalItem.js\";\n\nimport { AgentsOnlineStatus } from \"../../../types/config/ServiceDeskConfig.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { agentUpdateIsSuspended } from \"../store/agentActions.js\";\n\nimport { DEFAULT_PERSISTED_TO_BROWSER, VIEW_STATE_LAUNCHER_OPEN } from \"../store/reducerUtils.js\";\n\nimport \"../../../types/state/AppState.js\";\n\nimport { NoteType } from \"../../../types/messaging/History.js\";\n\nimport { arrayLastValue, asyncForEach } from \"../utils/lang/arrayUtils.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { sleep } from \"../utils/lang/promiseUtils.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { createWelcomeRequest, isLiveAgentMessage, isRequest, createMessageRequestForText, addDefaultsToMessage, isResponse, createMessageResponseForText, isStreamCompleteItem, isStreamPartialItem, isStreamFinalResponse, renderAsUserDefinedMessage, isResponseWithNestedItems, streamItemID, isPause, isConnectToAgent, hasTourUserDefinedType, hasServiceDesk, isChannelTransferToAgent, isTyping } from \"../utils/messageUtils.js\";\n\nimport { debugLog, isEnableDebugLog, consoleError, consoleWarn, callOnError } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\nimport { mergeCSSVariables } from \"../utils/styleUtils.js\";\n\nimport { constructViewState, validateViewState } from \"../utils/viewStateUtils.js\";\n\nimport { MessageResponseTypes } from \"../../../types/messaging/Messages.js\";\n\nimport { BusEventType, MessageSendSource, TourStartReason, MainWindowCloseReason, ViewChangeReason, MainWindowOpenReason } from \"../../../types/events/eventBusTypes.js\";\n\nimport { OnErrorType } from \"../../../types/config/PublicConfig.js\";\n\nimport { setIntl } from \"../utils/intlUtils.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\nimport { ViewType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const VALID_PUBLIC_VARS_IN_AI_THEME_LIST = [ \"BASE-height\", \"BASE-max-height\", \"BASE-width\", \"BASE-z-index\" ];\n\nconst VALID_PUBLIC_VARS_IN_AI_THEME_SET = new Set(VALID_PUBLIC_VARS_IN_AI_THEME_LIST);\n\nconst UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE = `[updateCSSVariables] The AI theme is enabled and only ${VALID_PUBLIC_VARS_IN_AI_THEME_LIST.join(\", \")} can be updated.`;\n\nclass ChatActionsImpl {\n  constructor(serviceManager) {\n    this.hydrating = false;\n    this.restarting = false;\n    this.alreadyHydrated = false;\n    this.chunkQueue = [];\n    this.serviceManager = serviceManager;\n  }\n  async hydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions) {\n    let fireReady = false;\n    try {\n      if (!this.hydrationPromise) {\n        this.hydrating = true;\n        this.hydrationPromise = this.doHydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions);\n        fireReady = true;\n      }\n      await this.hydrationPromise;\n    } finally {\n      this.hydrating = false;\n    }\n    if (fireReady) {\n      await this.serviceManager.fire({\n        type: BusEventType.CHAT_READY\n      });\n    }\n  }\n  async doHydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions) {\n    debugLog(\"Hydrating Carbon AI chat\", alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions);\n    let history;\n    const {serviceManager: serviceManager} = this;\n    serviceManager.store.dispatch(actions.addIsHydratingCounter(1));\n    if (!this.alreadyHydrated) {\n      history = await this.serviceManager.historyService.loadHistory();\n      if (serviceManager.humanAgentService) {\n        debugLog(\"Initializing the human agent service\");\n        await serviceManager.humanAgentService.initialize();\n      } else {\n        debugLog(\"No service desk integrations present\");\n      }\n    }\n    const {config: config} = serviceManager.store.getState();\n    if (!history) {\n      if (!alternateWelcomeRequest) {\n        const state = serviceManager.store.getState();\n        if (state.homeScreenConfig?.is_on) {\n          serviceManager.store.dispatch(actions.setHomeScreenIsOpen(true));\n        } else if (!config.public.messaging?.skipWelcome) {\n          await serviceManager.actions.send(createWelcomeRequest(), MessageSendSource.WELCOME_REQUEST, {\n            returnBeforeStreaming: true\n          }, true);\n        }\n      }\n    } else {\n      serviceManager.store.dispatch(actions.hydrateMessageHistory(history.messageHistory));\n      await this.createElementsForUserDefinedResponses(history.messageHistory);\n      if (history.latestPanelLocalMessageItem) {\n        this.openResponsePanel(history.latestPanelLocalMessageItem, true);\n      }\n    }\n    if (alternateWelcomeRequest) {\n      serviceManager.store.dispatch(actions.setHomeScreenIsOpen(false));\n      await serviceManager.actions.send(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions, true);\n    }\n    serviceManager.store.dispatch(actions.chatWasHydrated());\n    serviceManager.store.dispatch(actions.addIsHydratingCounter(-1));\n    if (history) {\n      const lastMessageID = arrayLastValue(history.messageHistory.botMessageState.localMessageIDs);\n      const lastMessage = history.messageHistory.allMessageItemsByID[lastMessageID];\n      const lastOriginalMessage = history.messageHistory.allMessagesByID[lastMessage?.fullMessageID];\n      if (!isLiveAgentMessage(lastMessage) && isRequest(lastOriginalMessage)) {\n        serviceManager.messageService.resendMessage(lastOriginalMessage, lastMessage.ui_state.id);\n      }\n    }\n    const allowReconnect = config.public.serviceDesk.allowReconnect ?? true;\n    this.serviceManager?.humanAgentService?.handleHydration(allowReconnect, Boolean(history));\n    this.alreadyHydrated = true;\n  }\n  getPublicWebChatState() {\n    const state = this.serviceManager.store.getState();\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = state;\n    const {chatState: chatState, launcherState: launcherState} = persistedToBrowserStorage;\n    const publicWebChatState = {\n      isConnectedWithHumanAgent: chatState.agentState.isConnected,\n      isWebChatOpen: launcherState.viewState.mainWindow,\n      isConnectingWithHumanAgent: state.agentState.isConnecting,\n      isHomeScreenOpen: chatState.homeScreenState.isHomeScreenOpen,\n      isDebugEnabled: isEnableDebugLog(),\n      hasUserSentMessage: chatState.hasSentNonWelcomeMessage,\n      isTourActive: launcherState.activeTour,\n      viewState: {\n        ...launcherState.viewState\n      },\n      serviceDesk: {\n        isConnected: chatState.agentState.isConnected,\n        isConnecting: state.agentState.isConnecting,\n        isSuspended: chatState.agentState.isSuspended ?? false\n      },\n      locale: this.serviceManager.store.getState().locale,\n      intl: this.serviceManager.intl\n    };\n    return publicWebChatState;\n  }\n  async sendWithCatch(message, source, options = {}, ignoreHydration = false) {\n    try {\n      await this.send(message, source, options, ignoreHydration);\n    } catch (error) {\n      consoleError(\"An error occurred sending the message\", error);\n    }\n  }\n  async send(message, source, options = {}, ignoreHydration = false) {\n    const messageRequest = typeof message === \"string\" ? createMessageRequestForText(message) : message;\n    if (this.serviceManager.store.getState().persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen) {\n      this.serviceManager.store.dispatch(actions.setHomeScreenIsOpen(false));\n    }\n    if (this.serviceManager.store.getState().responsePanelState.isOpen) {\n      this.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(false));\n    }\n    if (this.hydrationPromise || ignoreHydration) {\n      if (!ignoreHydration) {\n        await this.hydrationPromise;\n      }\n      await this.doSend(messageRequest, source, options);\n    } else {\n      await this.hydrateChat(messageRequest, source, options);\n    }\n  }\n  async doSend(message, source, options = {}) {\n    const {store: store} = this.serviceManager;\n    addDefaultsToMessage(message);\n    const originalUserText = message.history?.label || message.input.text;\n    if (options.silent) {\n      message.history.silent = true;\n    }\n    const localMessage = inputItemToLocalItem(message, originalUserText);\n    if (!message.history.silent) {\n      store.dispatch(actions.addLocalMessageItem(localMessage, message, true));\n    } else {\n      store.dispatch(actions.addMessage(message));\n    }\n    if (options.setValueSelectedForMessageID) {\n      store.dispatch(actions.messageSetOptionSelected(options.setValueSelectedForMessageID, message));\n    }\n    deepFreeze(message);\n    await this.serviceManager.messageService.send(cloneDeep(message), source, localMessage.ui_state.id, options);\n  }\n  async receive(message, isLatestWelcomeNode = false, requestMessage, requestOptions) {\n    const {restartCount: initialRestartCount} = this.serviceManager;\n    if (!message.id) {\n      message.id = uuid(UUIDType.MESSAGE);\n    }\n    const preReceiveEvent = {\n      type: BusEventType.PRE_RECEIVE,\n      data: message\n    };\n    await this.serviceManager.fire(preReceiveEvent);\n    if (initialRestartCount !== this.serviceManager.restartCount) {\n      return;\n    }\n    if (!isLatestWelcomeNode) {\n      this.serviceManager.store.dispatch(actions.updateHasSentNonWelcomeMessage(true));\n    }\n    if (initialRestartCount !== this.serviceManager.restartCount) {\n      return;\n    }\n    const {languagePack: languagePack} = this.serviceManager.store.getState();\n    if (isResponse(message)) {\n      this.processMessageResponse(message, isLatestWelcomeNode, requestMessage, false, requestOptions).catch(error => {\n        consoleError(\"Error processing the message response\", error);\n      });\n    } else {\n      const inlineError = createMessageResponseForText(languagePack.errors_singleMessage, message.thread_id, MessageResponseTypes.INLINE_ERROR);\n      this.receive(inlineError, false);\n    }\n    deepFreeze(message);\n    await this.serviceManager.fire({\n      type: BusEventType.RECEIVE,\n      data: message\n    });\n  }\n  async removeMessages(messageIDs) {\n    this.serviceManager.store.dispatch(actions.removeMessages(messageIDs));\n  }\n  async insertHistory(messages) {\n    const scrollBottom = this.serviceManager.mainWindow?.getMessagesScrollBottom();\n    const state = this.serviceManager.store.getState();\n    const notes = {\n      notes: [ {\n        type: NoteType.HISTORY,\n        body: messages\n      } ]\n    };\n    const history = await this.serviceManager.historyService.loadHistory(notes);\n    const currentAppStateMessages = {\n      allMessageItemsByID: state.allMessageItemsByID,\n      allMessagesByID: state.allMessagesByID,\n      botMessageState: state.botMessageState\n    };\n    const newAppStateMessages = merge({}, history.messageHistory, currentAppStateMessages);\n    newAppStateMessages.botMessageState.messageIDs = [ ...history.messageHistory.botMessageState.messageIDs, ...currentAppStateMessages.botMessageState.messageIDs ];\n    newAppStateMessages.botMessageState.localMessageIDs = [ ...history.messageHistory.botMessageState.localMessageIDs, ...currentAppStateMessages.botMessageState.localMessageIDs ];\n    this.serviceManager.store.dispatch(actions.hydrateMessageHistory(newAppStateMessages));\n    await this.createElementsForUserDefinedResponses(history.messageHistory);\n    this.serviceManager.mainWindow?.doAutoScroll({\n      scrollToBottom: scrollBottom\n    });\n  }\n  async receiveChunk(chunk, messageID, options = {}) {\n    const chunkPromise = resolvablePromise();\n    this.chunkQueue.push({\n      chunk: chunk,\n      messageID: messageID,\n      options: options,\n      chunkPromise: chunkPromise\n    });\n    if (this.chunkQueue.length === 1) {\n      this.processChunkQueue();\n    }\n    return chunkPromise;\n  }\n  async processChunkQueue() {\n    const {chunk: chunk, options: options, chunkPromise: chunkPromise} = this.chunkQueue[0];\n    let {messageID: messageID} = this.chunkQueue[0];\n    const isCompleteItem = isStreamCompleteItem(chunk);\n    const isPartialItem = isStreamPartialItem(chunk);\n    const {store: store} = this.serviceManager;\n    const isStopGeneratingVisible = store.getState().botInputState.stopStreamingButtonState.isVisible;\n    if (isPartialItem) {\n      const streamingData = chunk.partial_item.streaming_metadata;\n      if (streamingData.cancellable && !isStopGeneratingVisible) {\n        store.dispatch(actions.setStopStreamingButtonVisible(true));\n      }\n    }\n    if (isCompleteItem || isPartialItem) {\n      if (!messageID) {\n        messageID = chunk.streaming_metadata.response_id;\n      }\n      if (!store.getState().allMessagesByID[messageID]) {\n        store.dispatch(actions.streamingStart(messageID));\n      }\n      const item = chunk.partial_item || chunk.complete_item;\n      store.dispatch(actions.streamingAddChunk(messageID, item, isCompleteItem, options.disableFadeAnimation ?? true));\n      if (chunk.partial_response?.history) {\n        if (Object.keys(chunk.partial_response).length > 1) {\n          throw new Error(`The partial_response object only supports the \"history\" property.`);\n        }\n        store.dispatch(actions.streamingMergeHistory(messageID, chunk.partial_response?.history));\n      }\n      await this.handleUserDefinedResponseItemsChunk(messageID, chunk, item);\n    } else if (isStreamFinalResponse(chunk)) {\n      this.receive(chunk.final_response, options.isLatestWelcomeNode, null, {\n        disableFadeAnimation: true\n      });\n    }\n    if ((isCompleteItem || isStreamFinalResponse(chunk)) && isStopGeneratingVisible) {\n      store.dispatch(actions.setStopStreamingButtonDisabled(false));\n      store.dispatch(actions.setStopStreamingButtonVisible(false));\n    }\n    this.chunkQueue.shift();\n    chunkPromise.doResolve();\n    if (this.chunkQueue[0]) {\n      this.processChunkQueue();\n    }\n  }\n  getOrCreateUserDefinedElement(messageItemID) {\n    let userDefinedItem = this.serviceManager.userDefinedElementRegistry.get(messageItemID);\n    if (!userDefinedItem) {\n      userDefinedItem = {\n        element: document.createElement(\"div\"),\n        slotName: `slot-user-defined-${uuid()}`\n      };\n      userDefinedItem.element.setAttribute(\"slot\", userDefinedItem.slotName);\n      this.serviceManager.userDefinedElementRegistry.set(messageItemID, userDefinedItem);\n    }\n    return userDefinedItem;\n  }\n  async handleUserDefinedResponseItems(localMessage, originalMessage) {\n    if (renderAsUserDefinedMessage(localMessage.item)) {\n      let element;\n      let slotName;\n      if (!localMessage.item.user_defined?.silent) {\n        ({element: element, slotName: slotName} = this.getOrCreateUserDefinedElement(localMessage.ui_state.id));\n      }\n      const userDefinedResponseEvent = {\n        type: BusEventType.USER_DEFINED_RESPONSE,\n        data: {\n          message: localMessage.item,\n          fullMessage: originalMessage,\n          element: element,\n          slot: slotName,\n          fullWidth: false\n        }\n      };\n      await this.serviceManager.fire(userDefinedResponseEvent);\n      if (userDefinedResponseEvent.data.fullWidth) {\n        this.serviceManager.store.dispatch(actions.setMessageUIProperty(localMessage.ui_state.id, \"fullWidth\", true));\n      }\n    } else if (isResponseWithNestedItems(localMessage.item)) {\n      const {itemsLocalMessageItemIDs: itemsLocalMessageItemIDs, bodyLocalMessageItemIDs: bodyLocalMessageItemIDs, footerLocalMessageItemIDs: footerLocalMessageItemIDs, gridLocalMessageItemIDs: gridLocalMessageItemIDs} = localMessage.ui_state;\n      const {allMessageItemsByID: allMessageItemsByID} = this.serviceManager.store.getState();\n      const createElementForNestedUserDefinedResponse = localMessageItemID => {\n        const nestedLocalMessage = allMessageItemsByID[localMessageItemID];\n        return this.handleUserDefinedResponseItems(nestedLocalMessage, originalMessage);\n      };\n      if (gridLocalMessageItemIDs?.length) {\n        await asyncForEach(gridLocalMessageItemIDs, row => asyncForEach(row, cell => asyncForEach(cell, itemID => createElementForNestedUserDefinedResponse(itemID))));\n      }\n      if (itemsLocalMessageItemIDs?.length) {\n        await asyncForEach(itemsLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n      if (bodyLocalMessageItemIDs?.length) {\n        await asyncForEach(bodyLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n      if (footerLocalMessageItemIDs?.length) {\n        await asyncForEach(footerLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n    }\n  }\n  async handleUserDefinedResponseItemsChunk(messageID, chunk, messageItem) {\n    if (renderAsUserDefinedMessage(messageItem)) {\n      const {store: store} = this.serviceManager;\n      const itemID = streamItemID(messageID, messageItem);\n      let element;\n      let slotName;\n      if (!messageItem.user_defined?.silent) {\n        ({element: element, slotName: slotName} = this.getOrCreateUserDefinedElement(itemID));\n      }\n      const userDefinedResponseEvent = {\n        type: BusEventType.CHUNK_USER_DEFINED_RESPONSE,\n        data: {\n          messageItem: messageItem,\n          chunk: chunk,\n          element: element,\n          slot: slotName,\n          fullWidth: false\n        }\n      };\n      await this.serviceManager.fire(userDefinedResponseEvent);\n      if (store.getState().allMessageItemsByID[itemID].ui_state.fullWidth !== userDefinedResponseEvent.data.fullWidth) {\n        store.dispatch(actions.setMessageUIProperty(itemID, \"fullWidth\", userDefinedResponseEvent.data.fullWidth));\n      }\n    }\n  }\n  async processMessageResponse(fullMessage, isLatestWelcomeNode, requestMessage, isProvidedFromTransfer, requestOptions = {}) {\n    const {store: store} = this.serviceManager;\n    const {config: config} = store.getState();\n    const initialRestartCount = this.serviceManager.restartCount;\n    const output = fullMessage.output.generic;\n    fullMessage.request_id = requestMessage?.id;\n    addDefaultsToMessage(fullMessage);\n    store.dispatch(actions.addMessage(fullMessage));\n    let previousItemID = null;\n    for (let index = 0; index < output.length && initialRestartCount === this.serviceManager.restartCount; index++) {\n      const messageItem = output[index];\n      if (messageItem) {\n        const pause = isPause(messageItem);\n        const agent = isConnectToAgent(messageItem);\n        const tour = hasTourUserDefinedType(messageItem);\n        const localMessageItem = outputItemToLocalItem(messageItem, fullMessage, isLatestWelcomeNode, requestOptions.disableFadeAnimation);\n        if (tour && (requestOptions.skipTourCard || messageItem.user_defined?.skip_card)) {\n          const startTourReason = requestOptions.skipTourCard ? TourStartReason.START_TOUR_METHOD : TourStartReason.SKIP_CARD;\n          const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n          if (viewState.mainWindow) {\n            const mainWindowCloseReason = requestOptions.skipTourCard ? MainWindowCloseReason.CALLED_START_TOUR : MainWindowCloseReason.TOUR_SKIP_CARD;\n            this.startTour(localMessageItem, startTourReason, {\n              mainWindowCloseReason: mainWindowCloseReason\n            }).catch(error => {\n              consoleError(\"Error starting the tour\", error);\n            });\n          } else {\n            const viewChangeReason = requestOptions.skipTourCard ? ViewChangeReason.CALLED_START_TOUR : ViewChangeReason.TOUR_SKIP_CARD;\n            this.startTour(localMessageItem, startTourReason, {\n              viewChangeReason: viewChangeReason\n            }).catch(error => {\n              consoleError(\"Error starting the tour\", error);\n            });\n          }\n        } else if (!tour && requestOptions.skipTourCard) {\n          consoleError(\"The message response received was not a tour, so the tour card was not skipped nor was a tour started by the startTour() call.\");\n        }\n        const nestedLocalMessageItems = [];\n        createLocalMessageItemsForNestedMessageItems(localMessageItem, fullMessage, false, nestedLocalMessageItems, true);\n        store.dispatch(actions.addNestedMessages(nestedLocalMessageItems));\n        if (agent && isResponse(fullMessage)) {\n          store.dispatch(actions.addIsTypingCounter(1));\n          if (!hasServiceDesk(config)) {\n            const message = 'Web chat received a \"connect_to_agent\" message but there is no service desk configured. Check your chat configuration.';\n            this.errorOccurred({\n              errorType: OnErrorType.INTEGRATION_ERROR,\n              message: message\n            });\n            store.dispatch(actions.setMessageHistoryProperty(localMessageItem.fullMessageID, \"agent_no_service_desk\", true));\n          }\n          const agentAvailability = await (this.serviceManager.humanAgentService?.checkAreAnyAgentsOnline(fullMessage));\n          if (initialRestartCount === this.serviceManager.restartCount) {\n            store.dispatch(actions.setMessageHistoryProperty(localMessageItem.fullMessageID, \"agent_availability\", agentAvailability));\n            let shouldAutoRequestAgent = false;\n            if (isProvidedFromTransfer) {\n              shouldAutoRequestAgent = isChannelTransferToAgent(fullMessage);\n            }\n            if (config.public.serviceDesk?.skipConnectAgentCard) {\n              shouldAutoRequestAgent = true;\n            }\n            store.dispatch(actions.addIsTypingCounter(-1));\n            if (shouldAutoRequestAgent && agentAvailability === AgentsOnlineStatus.ONLINE) {\n              this.serviceManager.humanAgentService.startChat(localMessageItem, fullMessage);\n            }\n          }\n        }\n        if (pause) {\n          const showIsTyping = isTyping(messageItem);\n          if (showIsTyping) {\n            store.dispatch(actions.addIsTypingCounter(1));\n          }\n          await sleep(messageItem.time);\n          if (showIsTyping && initialRestartCount === this.serviceManager.restartCount) {\n            store.dispatch(actions.addIsTypingCounter(-1));\n          }\n        } else {\n          await this.handleUserDefinedResponseItems(localMessageItem, fullMessage);\n          if (!localMessageItem.item.user_defined?.silent && initialRestartCount === this.serviceManager.restartCount) {\n            this.serviceManager.store.dispatch(actions.addLocalMessageItem(localMessageItem, fullMessage, false, previousItemID));\n            previousItemID = localMessageItem.ui_state.id;\n          }\n        }\n      }\n    }\n  }\n  openResponsePanel(localMessageItem, isMessageForInput) {\n    this.serviceManager.store.dispatch(actions.setResponsePanelContent(localMessageItem, isMessageForInput));\n    this.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(true));\n  }\n  async insertLocalMessageResponse(message) {\n    message.id = uuid(UUIDType.MESSAGE);\n    await this.processMessageResponse(message, false, null, false, {});\n  }\n  updateLanguagePack(changes) {\n    const {languagePack: languagePack, locale: locale} = this.serviceManager.store.getState();\n    const messages = {\n      ...languagePack,\n      ...changes\n    };\n    setIntl(this.serviceManager, locale, messages);\n  }\n  addNotification(notification) {\n    this.serviceManager.store.dispatch(actions.addNotification(notification));\n  }\n  removeNotification(groupID) {\n    this.serviceManager.store.dispatch(actions.removeNotifications({\n      groupID: groupID\n    }));\n  }\n  removeAllNotifications() {\n    this.serviceManager.store.dispatch(actions.removeAllNotifications());\n  }\n  updateCSSVariables(publicVars, whiteLabelVariables = {}) {\n    const {store: store} = this.serviceManager;\n    const {theme: theme} = store.getState();\n    const {carbonTheme: carbonTheme, useAITheme: useAITheme} = theme;\n    if (useAITheme) {\n      const usePublicVars = publicVars;\n      publicVars = {};\n      whiteLabelVariables = {};\n      usePublicVars && Object.entries(usePublicVars).forEach(([variable]) => {\n        if (VALID_PUBLIC_VARS_IN_AI_THEME_SET.has(variable)) {\n          publicVars[variable] = usePublicVars[variable];\n        } else {\n          consoleWarn(UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE);\n        }\n      });\n    } else {\n      publicVars = {\n        ...publicVars\n      };\n      whiteLabelVariables = {\n        ...whiteLabelVariables\n      };\n    }\n    const allVariables = mergeCSSVariables(publicVars, whiteLabelVariables, carbonTheme, useAITheme);\n    store.dispatch(actions.updateCSSVariables(allVariables, publicVars, whiteLabelVariables));\n  }\n  updateBotName(name) {\n    this.serviceManager.store.dispatch(actions.updateBotName(name));\n  }\n  updateMainHeaderTitle(title) {\n    this.serviceManager.store.dispatch(actions.updateMainHeaderTitle(title));\n  }\n  updateBotAvatarURL(url) {\n    this.serviceManager.store.dispatch(actions.updateBotAvatarURL(url));\n  }\n  updateHomeScreenConfig(homeScreenConfig) {\n    this.serviceManager.store.dispatch(actions.updateHomeScreenConfig(homeScreenConfig));\n  }\n  updateLauncherConfig(launcherConfig) {\n    this.serviceManager.store.dispatch(actions.updateLauncherConfig(launcherConfig));\n  }\n  async changeView(newView, reason, tryHydrating = true, forceViewChange = false) {\n    const {store: store} = this.serviceManager;\n    const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n    let newViewState = constructViewState(newView, store.getState());\n    if (!validateViewState(newViewState, store.getState())) {\n      return viewState;\n    }\n    if (!isEqual(newViewState, viewState) || forceViewChange) {\n      await this.fireViewChangeEventsAndChangeView(newViewState, reason);\n      newViewState = store.getState().persistedToBrowserStorage.launcherState.viewState;\n      if (tryHydrating && (newViewState.mainWindow || newViewState.tour) && !store.getState().isHydrated) {\n        this.hydrateChat().catch(error => {\n          consoleError(\"Error hydrating the chat\", error);\n        });\n      }\n    }\n    return newViewState;\n  }\n  async fireViewChangeEventsAndChangeView(newViewState, reason) {\n    const {store: store} = this.serviceManager;\n    if (store.getState().viewChanging) {\n      throw new Error(\"The view may not be changed while a view change event is already running. Please make sure to resolve any promises from these events.\");\n    }\n    store.dispatch(actions.setViewChanging(true));\n    const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n    const {viewChangeReason: viewChangeReason} = reason;\n    const oldViewState = deepFreeze(viewState);\n    try {\n      const preViewChangeEvent = {\n        type: BusEventType.VIEW_PRE_CHANGE,\n        reason: viewChangeReason,\n        oldViewState: oldViewState,\n        newViewState: newViewState,\n        cancelViewChange: false\n      };\n      await this.serviceManager.fire(preViewChangeEvent);\n      if (preViewChangeEvent.cancelViewChange) {\n        debugLog(\"The view changing was cancelled by a view:pre:change event.\");\n        return;\n      }\n      if (!validateViewState(preViewChangeEvent.newViewState, store.getState())) {\n        return;\n      }\n      newViewState = preViewChangeEvent.newViewState;\n      store.dispatch(actions.setViewState(deepFreeze(newViewState)));\n      const viewChangeEvent = {\n        type: BusEventType.VIEW_CHANGE,\n        reason: viewChangeReason,\n        oldViewState: oldViewState,\n        newViewState: newViewState,\n        cancelViewChange: false\n      };\n      await this.serviceManager.fire(viewChangeEvent);\n      if (viewChangeEvent.cancelViewChange) {\n        store.dispatch(actions.setViewState(oldViewState));\n        debugLog(\"The view changing was cancelled by a view:change event.\");\n        return;\n      }\n      if (!validateViewState(viewChangeEvent.newViewState, store.getState())) {\n        store.dispatch(actions.setViewState(oldViewState));\n        return;\n      }\n      newViewState = viewChangeEvent.newViewState;\n      store.dispatch(actions.setViewState(deepFreeze(newViewState)));\n    } finally {\n      store.dispatch(actions.setViewChanging(false));\n    }\n  }\n  async startTour(message, startTourReason, changeViewReason) {\n    this.serviceManager.store.dispatch(actions.setTourData(message.fullMessageID));\n    const newViewState = await this.changeView(ViewType.TOUR, changeViewReason);\n    if (newViewState.tour) {\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_START,\n        reason: startTourReason\n      });\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_STEP,\n        step: this.serviceManager.store.getState().tourState.activeTourStepItems[0]\n      });\n    }\n  }\n  async endTour(reason) {\n    const {viewState: viewState} = this.serviceManager.store.getState().persistedToBrowserStorage.launcherState;\n    let newViewState = viewState;\n    if (viewState.tour) {\n      newViewState = await this.changeView(ViewType.LAUNCHER, reason);\n    }\n    if (!newViewState.tour) {\n      this.serviceManager.store.dispatch(actions.clearTourData());\n      return true;\n    }\n    return false;\n  }\n  goToSpecificTourStep(stepId) {\n    const {activeTourStepItems: activeTourStepItems} = this.serviceManager.store.getState().tourState;\n    const newStepIndex = activeTourStepItems.findIndex(stepItem => stepItem.step_id === stepId);\n    if (newStepIndex) {\n      this.changeStepInTour({\n        newStepIndex: newStepIndex\n      });\n    } else {\n      consoleError(`No step with the id \"${stepId}\" was found within the current tour. As a result, goToTourStep() did not change the current tour step.`);\n    }\n  }\n  async changeStepInTour(changeStepOptions) {\n    const {store: store} = this.serviceManager;\n    const {activeTourStepItems: activeTourStepItems} = store.getState().tourState;\n    const {activeTourCurrentStepIndex: activeTourCurrentStepIndex} = store.getState().persistedToBrowserStorage.chatState.persistedTourState;\n    let {newStepIndex: newStepIndex} = changeStepOptions;\n    if (changeStepOptions.nextStep) {\n      newStepIndex = activeTourCurrentStepIndex + 1;\n    } else if (changeStepOptions.previousStep) {\n      newStepIndex = activeTourCurrentStepIndex - 1;\n    }\n    store.dispatch(actions.changeStepInTour(newStepIndex));\n    const actualNewStepIndex = store.getState().persistedToBrowserStorage.chatState.persistedTourState.activeTourCurrentStepIndex;\n    if (actualNewStepIndex === newStepIndex) {\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_STEP,\n        step: activeTourStepItems[actualNewStepIndex]\n      });\n    } else {\n      consoleWarn(\"The tour tried to change to a step that was out of bounds for the step array, so no step change was made.\");\n    }\n  }\n  errorOccurred(error) {\n    consoleError(\"An error has occurred\", error);\n    if (error.catastrophicErrorType) {\n      this.serviceManager.store.dispatch(actions.setAppStateValue(\"catastrophicErrorType\", error.catastrophicErrorType));\n    }\n    callOnError(this.serviceManager.additionalChatParameters.onError, error);\n  }\n  async restartConversation(options = {}) {\n    const {skipHydration: skipHydration = false, endAgentConversation: endAgentConversation = true, fireEvents: fireEvents = true} = options;\n    debugLog(\"Restarting conversation\");\n    if (this.restarting) {\n      consoleWarn(\"You cannot restart a conversation while a previous restart is still pending.\");\n      return;\n    }\n    this.restarting = true;\n    try {\n      const {serviceManager: serviceManager} = this;\n      const {store: store} = serviceManager;\n      if (fireEvents) {\n        await serviceManager.fire({\n          type: BusEventType.PRE_RESTART_CONVERSATION\n        });\n      }\n      serviceManager.restartCount++;\n      if (this.hydrating) {\n        await this.hydrationPromise;\n      }\n      const currentState = store.getState();\n      const {persistedToBrowserStorage: persistedToBrowserStorage} = currentState;\n      const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n      const {isConnecting: isConnecting} = currentState.agentState;\n      const {isConnected: isConnected} = currentState.persistedToBrowserStorage.chatState.agentState;\n      if ((isConnected || isConnecting) && endAgentConversation) {\n        await serviceManager.humanAgentService.endChat(true, false, false);\n      }\n      if (viewState.tour) {\n        await this.serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n          mainWindowOpenReason: MainWindowOpenReason.CALLED_RESTART_CONVERSATION\n        }, false);\n      }\n      this.serviceManager.instance.updateAssistantInputFieldVisibility(true);\n      this.serviceManager.messageService.cancelAllMessageRequests();\n      store.dispatch(actions.restartConversation());\n      if (!skipHydration) {\n        this.hydrationPromise = null;\n      }\n      if (fireEvents) {\n        await serviceManager.fire({\n          type: BusEventType.RESTART_CONVERSATION\n        });\n      }\n      if (this.hydrating) {\n        await this.hydrationPromise;\n      }\n      if (!skipHydration && !serviceManager.store.getState().isHydrated) {\n        this.hydrationPromise = null;\n        if (store.getState().persistedToBrowserStorage.launcherState.viewState.mainWindow) {\n          await serviceManager.actions.hydrateChat();\n        }\n      } else {\n        store.dispatch(actions.chatWasHydrated());\n      }\n    } finally {\n      this.restarting = false;\n    }\n  }\n  async destroySession(keepOpenState) {\n    const {store: store} = this.serviceManager;\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = store.getState();\n    const originalViewState = persistedToBrowserStorage.launcherState.viewState;\n    const newPersistedToBrowserStorage = cloneDeep(DEFAULT_PERSISTED_TO_BROWSER);\n    if (keepOpenState) {\n      newPersistedToBrowserStorage.launcherState.viewState = originalViewState;\n      if (originalViewState.tour) {\n        newPersistedToBrowserStorage.launcherState.viewState = {\n          ...originalViewState,\n          tour: false,\n          mainWindow: true\n        };\n      }\n    } else {\n      newPersistedToBrowserStorage.launcherState.viewState = VIEW_STATE_LAUNCHER_OPEN;\n    }\n    this.serviceManager.messageService.cancelAllMessageRequests();\n    this.serviceManager.userSessionStorageService.clearLauncherSession();\n    this.serviceManager.userSessionStorageService.clearChatSession();\n    this.serviceManager.store.dispatch(actions.setAppStateValue(\"persistedToBrowserStorage\", newPersistedToBrowserStorage));\n  }\n  agentEndConversation(endedByUser) {\n    return this.serviceManager.humanAgentService.endChat(endedByUser);\n  }\n  agentUpdateIsSuspended(isSuspended) {\n    this.serviceManager.store.dispatch(agentUpdateIsSuspended(isSuspended));\n  }\n  async createElementsForUserDefinedResponses(messages) {\n    await asyncForEach(Object.values(messages.allMessageItemsByID), localMessage => {\n      const originalMessage = messages.allMessagesByID[localMessage.fullMessageID];\n      return this.handleUserDefinedResponseItems(localMessage, originalMessage);\n    });\n  }\n}\n\nexport { ChatActionsImpl };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport { asyncForEach, asArray } from \"../utils/lang/arrayUtils.js\";\n\nimport { debugStackTrace, consoleError, consoleLog, consoleWarn, isEnableDebugLog, debugLog } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const HANDLER_NOT_FUNCTION = \"The event handler is not a function.\";\n\nclass EventBus {\n  constructor() {\n    this.handlersByType = new Map;\n    this.eventsTypesRunning = new Set;\n    this.eventsRunningCount = 0;\n  }\n  async fire(busEvent, instance) {\n    logEvent(\"Before fire\", busEvent);\n    const {type: type} = busEvent;\n    if (!type) {\n      throw new Error(`Attempted to fire an event with no type! ${JSON.stringify(busEvent)}`);\n    }\n    function wrappedHandler(handler) {\n      const result = handler(busEvent, instance);\n      if (result && !(result instanceof Promise)) {\n        consoleWarn(`An event handler for event ${type} returned a non-promise. This might be a mistake.`, result);\n      }\n      return result;\n    }\n    if (this.eventsTypesRunning.has(type)) {\n      throw new Error(`An event of type ${type} is already running. Please make sure that you have resolved the Promises for any earlier events that were fired.`);\n    }\n    try {\n      this.eventsRunningCount++;\n      try {\n        this.eventsTypesRunning.add(type);\n        const handlersForType = this.handlersByType.get(type);\n        if (handlersForType && handlersForType.length) {\n          const handlersCopy = handlersForType.slice();\n          await asyncForEach(handlersCopy, wrappedHandler);\n        }\n      } finally {\n        this.eventsTypesRunning.delete(type);\n      }\n    } finally {\n      this.eventsRunningCount--;\n      if (this.waitForEmptyPromise && this.eventsRunningCount === 0) {\n        this.waitForEmptyPromise.doResolve();\n      }\n    }\n    logEvent(\"After fire\", busEvent);\n  }\n  fireSync(busEvent, instance) {\n    logEvent(\"Before fire\", busEvent);\n    const {type: type} = busEvent;\n    const handlersForType = this.handlersByType.get(type);\n    if (handlersForType && handlersForType.length) {\n      const handlersCopy = handlersForType.slice();\n      handlersCopy.forEach(handler => handler(busEvent, instance));\n    }\n    logEvent(\"After fire\", busEvent);\n  }\n  async waitForEmpty() {\n    if (this.eventsRunningCount === 0) {\n      return;\n    }\n    if (!this.waitForEmptyPromise) {\n      this.waitForEmptyPromise = resolvablePromise();\n    }\n    await this.waitForEmptyPromise;\n    this.waitForEmptyPromise = null;\n  }\n  on(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      if (!type) {\n        throw new Error(`Attempted to listen to an event with no type: \"${type}\"!`);\n      }\n      if (typeof handler === \"function\") {\n        if (!this.handlersByType.has(type)) {\n          this.handlersByType.set(type, []);\n        }\n        const handlersForType = this.handlersByType.get(type);\n        debugStackTrace(`[EventBus] Adding ${type} event handler`, handler);\n        handlersForType.push(handler);\n      } else {\n        consoleError(HANDLER_NOT_FUNCTION, handler);\n      }\n    });\n    return this;\n  }\n  off(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      const handlersForType = this.handlersByType.get(type);\n      if (handlersForType) {\n        if (handler) {\n          const index = handlersForType.indexOf(handler);\n          if (index !== -1) {\n            const removed = handlersForType.splice(index, 1);\n            debugStackTrace(`[EventBus] Removing ${type} event handlers`, removed);\n          }\n        } else {\n          debugStackTrace(`[EventBus] Removing all ${type} event handlers`);\n          this.handlersByType.set(type, []);\n        }\n      }\n    });\n    return this;\n  }\n  once(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      if (typeof handler === \"function\") {\n        const onceHandler = (event, instance) => {\n          this.off({\n            type: type,\n            handler: onceHandler\n          });\n          return handler(event, instance);\n        };\n        this.on({\n          type: type,\n          handler: onceHandler\n        });\n      } else {\n        consoleError(HANDLER_NOT_FUNCTION, handler);\n      }\n    });\n    return this;\n  }\n  logListeners() {\n    this.handlersByType.forEach((listeners, type) => {\n      console.group(`Event ${type} (${listeners.length})`);\n      listeners.forEach(listener => {\n        consoleLog(\"Listener\", listener);\n      });\n      console.groupEnd();\n    });\n  }\n  clear() {\n    this.handlersByType.clear();\n    return this;\n  }\n}\n\nfunction logEvent(message, busEvent) {\n  if (isEnableDebugLog()) {\n    const eventCopy = cloneDeep(busEvent);\n    debugLog(`[EventBus] ${message}`, eventCopy);\n  }\n}\n\nexport { EventBus };\n","import actions from \"../store/actions.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS } from \"../store/reducerUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createCustomPanelInstance(serviceManager) {\n  const customPanelInstance = {\n    open(options = DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS) {\n      const {store: store} = serviceManager;\n      store.dispatch(actions.setCustomPanelConfigOptions(options));\n      store.dispatch(actions.setCustomPanelOpen(true));\n    },\n    close() {\n      serviceManager.store.dispatch(actions.setCustomPanelOpen(false));\n    }\n  };\n  return Object.freeze(customPanelInstance);\n}\n\nexport { createCustomPanelInstance };\n","import { notesToLoadedHistory } from \"../schema/historyToMessages.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport \"../../../types/state/AppState.js\";\n\nimport { NoteType } from \"../../../types/messaging/History.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport { MainWindowOpenReason } from \"../../../types/events/eventBusTypes.js\";\n\nimport { ViewType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class HistoryService {\n  constructor(serviceManager) {\n    this.serviceManager = serviceManager;\n  }\n  async loadHistory(useHistory) {\n    const state = this.serviceManager.store.getState();\n    const {config: config, persistedToBrowserStorage: persistedToBrowserStorage} = state;\n    const publicConfig = config.public;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    try {\n      let resultData;\n      if (useHistory) {\n        resultData = useHistory;\n      } else if (publicConfig.messaging?.customLoadHistory) {\n        const items = await publicConfig.messaging.customLoadHistory(this.serviceManager.instance);\n        const note = {\n          type: NoteType.HISTORY,\n          body: items\n        };\n        resultData = {\n          notes: [ note ]\n        };\n      }\n      if (resultData) {\n        const historyNotes = resultData?.notes;\n        return notesToLoadedHistory(historyNotes, this.serviceManager);\n      }\n      if (viewState.tour) {\n        await this.serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n          mainWindowOpenReason: MainWindowOpenReason.SESSION_HISTORY\n        }, false);\n        this.serviceManager.store.dispatch(actions.clearTourData());\n      }\n    } catch (error) {\n      consoleError(\"An error occurred while attempting to load the conversation history\", error);\n    }\n    return null;\n  }\n}\n\nexport { HistoryService };\n","import { DEFAULT_MESSAGE_STATE, DEFAULT_CHAT_MESSAGES_STATE } from \"../store/reducerUtils.js\";\n\nimport { MessageErrorState } from \"../../../types/messaging/LocalMessageItem.js\";\n\nimport { NoteType } from \"../../../types/messaging/History.js\";\n\nimport \"../utils/constants.js\";\n\nimport { findLast } from \"../utils/lang/arrayUtils.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { isResponse, isRequest, isPause, isResponseWithNestedItems, THREAD_ID_MAIN, isOptionItem, isDateResponseType, isEventRequest } from \"../utils/messageUtils.js\";\n\nimport inputItemToLocalItem from \"./inputItemToLocalItem.js\";\n\nimport { outputItemToLocalItem, createLocalMessageItemsForNestedMessageItems } from \"./outputItemToLocalItem.js\";\n\nimport { BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\nimport { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function notesToLoadedHistory(notes, serviceManager) {\n  const allLocalMessagesByID = {};\n  const allMessagesByID = {};\n  const loadingState = {\n    serviceManager: serviceManager,\n    allMessages: [],\n    allMessagesByID: allMessagesByID,\n    allLocalMessagesByID: allLocalMessagesByID,\n    threadMessagesByThreadID: {},\n    responsesByRequestID: {},\n    relatedMessageByID: {},\n    localMessagesByOriginalMessageID: {},\n    lastThreadID: null,\n    loadedHistory: {\n      messageHistory: {\n        allMessageItemsByID: allLocalMessagesByID,\n        allMessagesByID: allMessagesByID,\n        botMessageState: null\n      },\n      latestTransferToAgentResponse: null,\n      latestPanelLocalMessageItem: null\n    }\n  };\n  await notesToMessages(notes, loadingState);\n  if (!loadingState.allMessages.length) {\n    if (loadingState.loadedHistory.latestTransferToAgentResponse) {\n      return {\n        ...loadingState.loadedHistory,\n        messageHistory: DEFAULT_MESSAGE_STATE\n      };\n    }\n    return null;\n  }\n  createLocalMessages(loadingState);\n  createChatStates(loadingState);\n  markIsLatestWelcomeNode(loadingState);\n  markSelectedOptions(loadingState);\n  return loadingState.loadedHistory;\n}\n\nasync function notesToMessages(notes, loadingState) {\n  const {allMessages: allMessages, allMessagesByID: allMessagesByID, responsesByRequestID: responsesByRequestID, relatedMessageByID: relatedMessageByID, serviceManager: serviceManager, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  if (!notes?.length) {\n    return;\n  }\n  notes.forEach(note => {\n    if (note.type === NoteType.HISTORY) {\n      const sessionHistory = note.body;\n      const pushAndPrepareMessage = historyItem => {\n        const {message: message} = historyItem;\n        if (!isEventRequest(message) && (isRequest(message) || isResponse(message))) {\n          addMessage(message, loadingState, historyItem);\n        }\n      };\n      sessionHistory.forEach(pushAndPrepareMessage);\n    }\n  });\n  for (let index = allMessages.length - 1; index >= 0; index--) {\n    const message = allMessages[index];\n    if (message.history?.file_upload_status === FileStatusValue.UPLOADING) {\n      message.history.file_upload_status = FileStatusValue.COMPLETE;\n      message.history.error_state = MessageErrorState.FAILED;\n    }\n    if (isResponse(message) && message.history.silent) {\n      allMessages.splice(index, 1);\n      delete allMessagesByID[message.id];\n    } else {\n      localMessagesByOriginalMessageID[message.id] = [];\n      if (isResponse(message) && message.request_id) {\n        responsesByRequestID[message.request_id] = message;\n      }\n      if (message.history.relatedMessageID) {\n        relatedMessageByID[message.history.relatedMessageID] = message;\n      }\n    }\n  }\n  if (!allMessages.length) {\n    return;\n  }\n  Object.freeze(allMessages);\n  const beginEvent = {\n    type: BusEventType.HISTORY_BEGIN,\n    messages: allMessages\n  };\n  await serviceManager.eventBus.fire(beginEvent, serviceManager.instance);\n  allMessages.forEach(deepFreeze);\n  await serviceManager.eventBus.fire({\n    type: BusEventType.HISTORY_END,\n    messages: allMessages\n  }, serviceManager.instance);\n}\n\nfunction addMessage(message, loadingState, historyItem) {\n  message.history = message.history || {};\n  message.history.from_history = true;\n  message.history.timestamp = new Date(historyItem.time).getTime();\n  if (message.thread_id !== THREAD_ID_MAIN) {\n    loadingState.lastThreadID = message.thread_id;\n  }\n  loadingState.allMessagesByID[message.id] = message;\n  loadingState.allMessages.push(message);\n}\n\nfunction createLocalMessages(loadingState) {\n  const {allMessages: allMessages, allLocalMessagesByID: allLocalMessagesByID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  allMessages.forEach(message => {\n    if (isRequest(message)) {\n      if (!message.history?.silent) {\n        const text = message.history?.label || message.input.text;\n        const localMessage = inputItemToLocalItem(message, text);\n        localMessagesByOriginalMessageID[message.id].push(localMessage);\n        allLocalMessagesByID[localMessage.ui_state.id] = localMessage;\n      }\n    } else {\n      const items = getResponseItems(message);\n      if (items?.length) {\n        items.forEach(messageItem => {\n          if (!isPause(messageItem)) {\n            const localMessage = outputItemToLocalItem(messageItem, message, false);\n            if (isResponseWithNestedItems(localMessage.item)) {\n              const nestedLocalMessageItems = [];\n              createLocalMessageItemsForNestedMessageItems(localMessage, message, true, nestedLocalMessageItems, true);\n              nestedLocalMessageItems.forEach(localMessageItem => {\n                const localMessageID = localMessageItem.ui_state.id;\n                loadingState.loadedHistory.messageHistory.allMessageItemsByID[localMessageID] = localMessageItem;\n              });\n            }\n          }\n        });\n      }\n    }\n    addMessageToThread(message, loadingState);\n  });\n}\n\nfunction getResponseItems(message) {\n  if (isResponse(message)) {\n    return message.output.generic;\n  }\n  return null;\n}\n\nfunction addMessageToThread(message, loadingState) {\n  const {threadMessagesByThreadID: threadMessagesByThreadID} = loadingState;\n  let thread = threadMessagesByThreadID[THREAD_ID_MAIN];\n  if (!thread) {\n    thread = [];\n    threadMessagesByThreadID[THREAD_ID_MAIN] = thread;\n  }\n  thread.push(message);\n}\n\nfunction createChatStates(loadingState) {\n  const {loadedHistory: loadedHistory, threadMessagesByThreadID: threadMessagesByThreadID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  loadedHistory.messageHistory.botMessageState = toChatMessageState(threadMessagesByThreadID[THREAD_ID_MAIN], localMessagesByOriginalMessageID);\n}\n\nfunction toChatMessageState(messages, localMessagesByFullMessageID) {\n  const localMessageIDs = [];\n  const messageIDs = [];\n  if (messages) {\n    messages.forEach(message => {\n      messageIDs.push(message.id);\n      localMessagesByFullMessageID[message.id].forEach(localMessage => {\n        localMessageIDs.push(localMessage.ui_state.id);\n      });\n    });\n  }\n  return {\n    ...DEFAULT_CHAT_MESSAGES_STATE,\n    localMessageIDs: localMessageIDs,\n    messageIDs: messageIDs\n  };\n}\n\nfunction markIsLatestWelcomeNode(loadingState) {\n  const {responsesByRequestID: responsesByRequestID, threadMessagesByThreadID: threadMessagesByThreadID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  const mainThreadMessages = threadMessagesByThreadID[THREAD_ID_MAIN];\n  const welcomeRequest = findLast(mainThreadMessages, message => isRequest(message) && message.history.is_welcome_request);\n  if (welcomeRequest) {\n    const welcomeResponse = responsesByRequestID[welcomeRequest.id];\n    if (welcomeResponse) {\n      localMessagesByOriginalMessageID[welcomeResponse.id].forEach(localMessage => {\n        localMessage.ui_state.isWelcomeResponse = true;\n      });\n    }\n  }\n}\n\nfunction markSelectedOptions({allMessages: allMessages, relatedMessageByID: relatedMessageByID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID}) {\n  allMessages.forEach(message => {\n    if (isResponse(message)) {\n      localMessagesByOriginalMessageID[message.id].forEach(localMessage => {\n        if (isOptionItem(localMessage.item)) {\n          const relatedRequest = relatedMessageByID[message.id];\n          if (isRequest(relatedRequest)) {\n            localMessage.ui_state.optionSelected = relatedRequest;\n          }\n        } else if (isDateResponseType(localMessage)) {\n          const relatedRequest = relatedMessageByID[message.id];\n          if (isRequest(relatedRequest)) {\n            localMessage.ui_state.originalUserText = relatedRequest.history.label;\n          }\n        }\n      });\n    }\n  });\n}\n\nexport { notesToLoadedHistory };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass MessageLoadingManager {\n  start(onExceededMaxSilentLoading, onEnd, onTimeout, msMaxSilentLoading, msMaxAttempt) {\n    this.hasExceededMaxSilentLoading = false;\n    this.onEnd = onEnd;\n    this.onSilentLoading = setTimeout(() => {\n      this.hasExceededMaxSilentLoading = true;\n      onExceededMaxSilentLoading();\n    }, msMaxSilentLoading);\n    this.onMaxAttempt = setTimeout(() => {\n      onTimeout();\n    }, msMaxAttempt);\n  }\n  end() {\n    if (this.onMaxAttempt) {\n      clearTimeout(this.onMaxAttempt);\n    }\n    if (this.onSilentLoading) {\n      clearTimeout(this.onSilentLoading);\n    }\n    if (this.onEnd) {\n      this.onEnd(this.hasExceededMaxSilentLoading);\n    }\n    this.hasExceededMaxSilentLoading = null;\n    this.onEnd = null;\n  }\n}\n\nexport { MessageLoadingManager };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport inputItemToLocalItem from \"../schema/inputItemToLocalItem.js\";\n\nimport { createLocalMessageForInlineError } from \"../schema/outputItemToLocalItem.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { MessageErrorState } from \"../../../types/messaging/LocalMessageItem.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { MessageLoadingManager } from \"../utils/messageServiceUtils.js\";\n\nimport { getLastBotResponseWithContext, THREAD_ID_MAIN } from \"../utils/messageUtils.js\";\n\nimport { debugLog, consoleError, safeFetchTextWithTimeout } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\nimport { MessageInputType } from \"../../../types/messaging/Messages.js\";\n\nimport { MessageSendSource, BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\nimport { OnErrorType } from \"../../../types/config/PublicConfig.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst MS_BETWEEN_RETRIES = [ 1e3, 3e3, 5e3 ];\n\nconst MS_MAX_ATTEMPT = 150 * 1e3;\n\nconst MS_MAX_SILENT_ERROR = 6e3;\n\nconst MS_MAX_SILENT_LOADING = 4e3;\n\nvar RetryType;\n\n(function(RetryType) {\n  RetryType[RetryType[\"SILENT\"] = 1] = \"SILENT\";\n  RetryType[RetryType[\"VISIBLE\"] = 2] = \"VISIBLE\";\n})(RetryType || (RetryType = {}));\n\nclass MessageService {\n  constructor(serviceManager, publicConfig) {\n    this.pendingLocale = false;\n    this.localeIsExplicit = false;\n    this.serviceManager = serviceManager;\n    this.messageLoadingManager = new MessageLoadingManager;\n    this.queue = {\n      waiting: [],\n      current: null\n    };\n    const timeoutOverride = publicConfig.messaging?.messageTimeoutSecs;\n    this.timeoutMS = timeoutOverride ? timeoutOverride * 1e3 : MS_MAX_ATTEMPT;\n  }\n  async processSuccess(current, received) {\n    const {requestOptions: requestOptions, isProcessed: isProcessed} = current;\n    const isWelcomeNode = Boolean(current.message.history.is_welcome_request);\n    if (isProcessed) {\n      return;\n    }\n    this.setMessageErrorState(current, MessageErrorState.NONE);\n    const {message: message} = current;\n    if (received) {\n      if (message.input.message_type !== MessageInputType.EVENT) {\n        if (!isWelcomeNode) {\n          this.messageLoadingManager.end();\n        }\n        received.history = received.history || {};\n        received.history.timestamp = received.history.timestamp || Date.now();\n        current.trackData.lastRequestTime = Date.now() - current.timeLastRequest;\n        current.trackData.totalRequestTime = Date.now() - current.timeFirstRequest;\n        await this.serviceManager.actions.receive(received, isWelcomeNode, message, requestOptions);\n      }\n      this.messageLoadingManager.end();\n    }\n    if (current.isProcessed) {\n      return;\n    }\n    {\n      current.sendMessagePromise.doResolve();\n      current.isProcessed = true;\n    }\n    this.moveToNextQueueItem();\n  }\n  addErrorMessage() {\n    const {store: store} = this.serviceManager;\n    const errorMessage = store.getState().languagePack.errors_singleMessage;\n    const {originalMessage: originalMessage, localMessage: localMessage} = createLocalMessageForInlineError(errorMessage);\n    store.dispatch(actions.addLocalMessageItem(localMessage, originalMessage, true));\n  }\n  async resendMessage(message, localMessageID) {\n    await this.send(cloneDeep(message), MessageSendSource.HYDRATE_RESEND, localMessageID, {\n      skipQueue: true,\n      silent: true\n    });\n  }\n  sendToAssistantAndUpdateErrorState(current) {\n    if (current.isProcessed) {\n      return;\n    }\n    this.sendToAssistant(current);\n    const now = Date.now();\n    const msSinceStarted = now - current.timeFirstRequest;\n    const isSilentErrorWindow = MS_MAX_SILENT_ERROR > msSinceStarted;\n    const type = isSilentErrorWindow ? RetryType.SILENT : RetryType.VISIBLE;\n    if (type === RetryType.VISIBLE) {\n      this.setMessageErrorState(current, MessageErrorState.RETRYING);\n      this.queue.waiting.forEach(waitingMessage => {\n        this.setMessageErrorState(waitingMessage, MessageErrorState.WAITING);\n      });\n    }\n  }\n  async processError(pendingRequest, resultText, allowRetry) {\n    const {message: message, timeFirstRequest: timeFirstRequest, timeLastRequest: timeLastRequest, tryCount: tryCount, isProcessed: isProcessed, trackData: trackData, requestOptions: requestOptions} = pendingRequest;\n    const isWelcome = message.history.is_welcome_request;\n    const now = Date.now();\n    const msSinceStarted = now - timeFirstRequest;\n    const isInAttemptWindow = this.timeoutMS > msSinceStarted && tryCount < MS_BETWEEN_RETRIES.length;\n    if (isProcessed) {\n      return;\n    }\n    trackData.lastRequestTime = Date.now() - timeLastRequest;\n    trackData.totalRequestTime = Date.now() - timeFirstRequest;\n    if (isInAttemptWindow && allowRetry) {\n      trackData.numErrors++;\n      const retryDelay = MS_BETWEEN_RETRIES[pendingRequest.tryCount++];\n      setTimeout(() => {\n        this.sendToAssistantAndUpdateErrorState(pendingRequest);\n      }, retryDelay);\n    } else {\n      let catastrophicErrorType = false;\n      if (isWelcome) {\n        catastrophicErrorType = true;\n      } else if (requestOptions.silent) {\n        this.addErrorMessage();\n      }\n      this.serviceManager.actions.errorOccurred({\n        errorType: OnErrorType.MESSAGE_COMMUNICATION,\n        message: \"An error occurred sending a message\",\n        otherData: resultText,\n        catastrophicErrorType: catastrophicErrorType\n      });\n      this.rejectFinalErrorOnMessage(pendingRequest, resultText);\n    }\n  }\n  rejectFinalErrorOnMessage(pendingRequest, resultText = \"An undefined error occurred trying to send your message.\") {\n    const {sendMessagePromise: sendMessagePromise} = pendingRequest;\n    this.setMessageErrorState(pendingRequest, MessageErrorState.FAILED);\n    const {message: message} = pendingRequest;\n    if (pendingRequest === this.queue.current && message.input.message_type !== MessageInputType.EVENT && !message.history.is_welcome_request) {\n      this.messageLoadingManager.end();\n    }\n    sendMessagePromise.doReject(new Error(resultText));\n    pendingRequest.isProcessed = true;\n    if (pendingRequest === this.queue.current) {\n      this.moveToNextQueueItem();\n    }\n  }\n  async sendToAssistant(current) {\n    const {store: store} = this.serviceManager;\n    const state = store.getState();\n    const {customSendMessage: customSendMessage} = state.config.public.messaging;\n    current.timeLastRequest = Date.now();\n    if (current.isProcessed) {\n      return;\n    }\n    try {\n      const message = cloneDeep(current.message);\n      current.message = message;\n      store.dispatch(actions.updateMessage(message));\n      const controller = new AbortController;\n      current.sendMessageController = controller;\n      debugLog(\"Called customSendMessage\", message);\n      await customSendMessage(message, {\n        signal: controller.signal\n      }, this.serviceManager.instance);\n      await this.processSuccess(current, null);\n    } catch (error) {\n      consoleError(\"An error occurred while sending a message\", error);\n      const resultText = error && (typeof error === \"string\" ? error : JSON.stringify(error)) || \"There was an unidentified error.\";\n      this.processError(current, resultText, !customSendMessage);\n    }\n  }\n  async runQueueIfReady() {\n    if (!this.queue.current && this.queue.waiting.length > 0) {\n      const {eventBus: eventBus, store: store} = this.serviceManager;\n      this.clearCurrentQueueItem();\n      this.queue.current = this.queue.waiting.shift();\n      const {current: current} = this.queue;\n      const {message: message, source: source} = current;\n      const state = store.getState();\n      const {config: config} = store.getState();\n      const {public: publicConfig} = config;\n      current.timeFirstRequest = Date.now();\n      if (message.input.message_type !== MessageInputType.EVENT) {\n        const lastResponse = getLastBotResponseWithContext(state);\n        if (lastResponse) {\n          message.thread_id = THREAD_ID_MAIN;\n        }\n        if (!message.history.is_welcome_request) {\n          const LOADING_INDICATOR_TIMER = !publicConfig.messaging?.messageLoadingIndicatorTimeoutSecs && publicConfig.messaging?.messageLoadingIndicatorTimeoutSecs !== 0 ? MS_MAX_SILENT_LOADING : publicConfig.messaging.messageLoadingIndicatorTimeoutSecs * 1e3;\n          this.messageLoadingManager.start(() => {\n            this.serviceManager.store.dispatch(actions.addIsLoadingCounter(1));\n          }, didExceedMaxLoading => {\n            if (didExceedMaxLoading) {\n              this.serviceManager.store.dispatch(actions.addIsLoadingCounter(-1));\n            }\n          }, () => {\n            this.cancelMessageRequestByID(message.id, true);\n          }, LOADING_INDICATOR_TIMER, this.timeoutMS);\n        }\n        if (current.isProcessed) {\n          return;\n        }\n        const originalUserText = message.history?.label || message.input.text;\n        await eventBus.fire({\n          type: BusEventType.PRE_SEND,\n          data: message,\n          source: source\n        }, this.serviceManager.instance);\n        if (current.isProcessed) {\n          return;\n        }\n        const localMessage = inputItemToLocalItem(message, originalUserText, current.localMessageID);\n        if (!message.history.silent) {\n          store.dispatch(actions.updateLocalMessageItem(localMessage));\n          store.dispatch(actions.updateMessage(message));\n        }\n        deepFreeze(message);\n        await eventBus.fire({\n          type: BusEventType.SEND,\n          data: message,\n          source: source\n        }, this.serviceManager.instance);\n      }\n      this.sendToAssistant(current);\n    }\n  }\n  addToMessageQueue(message, source, localMessageID, sendMessagePromise, requestOptions = {}) {\n    const newPendingMessage = {\n      localMessageID: localMessageID,\n      message: message,\n      sendMessagePromise: sendMessagePromise,\n      requestOptions: requestOptions || {},\n      timeFirstRequest: 0,\n      timeLastRequest: 0,\n      trackData: {\n        numErrors: 0,\n        lastRequestTime: 0,\n        totalRequestTime: 0\n      },\n      tryCount: 0,\n      isProcessed: false,\n      source: source\n    };\n    this.queue.waiting.push(newPendingMessage);\n    if (this.queue.current) {\n      if (message.history?.error_state === MessageErrorState.RETRYING) {\n        this.setMessageErrorState(newPendingMessage, MessageErrorState.WAITING);\n      }\n    }\n  }\n  clearCurrentQueueItem() {\n    if (this.queue.current) {\n      this.queue.current = null;\n    }\n  }\n  moveToNextQueueItem() {\n    this.clearCurrentQueueItem();\n    this.runQueueIfReady();\n  }\n  setMessageErrorState(pendingRequest, errorState) {\n    const {message: message} = pendingRequest;\n    const {allMessagesByID: allMessagesByID} = this.serviceManager.store.getState();\n    const messageToUpdate = allMessagesByID[message.id];\n    if (messageToUpdate) {\n      const currentState = messageToUpdate.history?.error_state;\n      const errorSame = currentState === errorState || errorState === MessageErrorState.NONE && !currentState;\n      if (!errorSame) {\n        let announceMessageID;\n        switch (errorState) {\n         case MessageErrorState.FAILED:\n          {\n            announceMessageID = \"errors_ariaMessageFailed\";\n            break;\n          }\n        }\n        if (announceMessageID) {\n          this.serviceManager.store.dispatch(actions.announceMessage({\n            messageID: announceMessageID\n          }));\n        }\n        this.serviceManager.store.dispatch(actions.setMessageErrorState(message.id, errorState));\n        const {allMessagesByID: allMessagesByID} = this.serviceManager.store.getState();\n        pendingRequest.message = allMessagesByID[message.id];\n      }\n    }\n  }\n  send(message, source, localMessageID, requestOptions) {\n    message.history.timestamp = message.history.timestamp || Date.now();\n    message.input = message.input || {};\n    message.input.message_type = message.input.message_type || MessageInputType.TEXT;\n    const sendMessagePromise = resolvablePromise();\n    this.addToMessageQueue(message, source, localMessageID, sendMessagePromise, requestOptions);\n    this.runQueueIfReady();\n    return sendMessagePromise;\n  }\n  cancelAllMessageRequests() {\n    while (this.queue.waiting.length) {\n      this.cancelMessageRequestByID(this.queue.waiting[0].message.id, false);\n    }\n    if (this.queue.current) {\n      this.cancelMessageRequestByID(this.queue.current.message.id, false);\n      this.clearCurrentQueueItem();\n    }\n  }\n  async cancelMessageRequestByID(messageID, logError) {\n    let pendingRequest;\n    if (this.queue.current?.message.id === messageID) {\n      pendingRequest = this.queue.current;\n    } else {\n      const index = this.queue.waiting.findIndex(item => item.message.id === messageID);\n      if (index !== -1) {\n        pendingRequest = this.queue.waiting[index];\n        this.queue.waiting.splice(index, 1);\n      }\n    }\n    if (pendingRequest) {\n      const {lastResponse: lastResponse, sendMessageController: sendMessageController} = pendingRequest;\n      sendMessageController?.abort(\"Message was cancelled\");\n      this.rejectFinalErrorOnMessage(pendingRequest, \"Message was cancelled\");\n      if (logError) {\n        this.serviceManager.actions.errorOccurred({\n          errorType: OnErrorType.MESSAGE_COMMUNICATION,\n          message: \"Message was cancelled\",\n          otherData: await safeFetchTextWithTimeout(lastResponse)\n        });\n      }\n    }\n  }\n}\n\nexport { MessageService as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass NamespaceService {\n  constructor(namespace) {\n    this.originalName = namespace;\n    this.attributeSafe = namespace;\n    this.suffix = getSuffix(namespace);\n  }\n}\n\nfunction getSuffix(namespace) {\n  const computedName = computeNamespaceName(namespace);\n  return computedName?.length ? `--${namespace}` : \"\";\n}\n\nfunction computeNamespaceName(namespace) {\n  return namespace ? namespace.trim() : \"\";\n}\n\nexport { NamespaceService };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass ServiceManager {\n  constructor() {\n    this.userDefinedElementRegistry = new Map;\n    this.restartCount = 0;\n  }\n  async fire(busEvent) {\n    return this.eventBus.fire(busEvent, this.instance);\n  }\n}\n\nexport { ServiceManager };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nlet innerStorage = {};\n\nconst storage = {\n  getItem(key) {\n    return innerStorage[key];\n  },\n  setItem(key, value) {\n    innerStorage[key] = value;\n  },\n  removeItem(key) {\n    delete innerStorage[key];\n  },\n  length: Object.keys(innerStorage).length,\n  clear() {\n    innerStorage = {};\n  },\n  key(index) {\n    return Object.keys(innerStorage)[index];\n  }\n};\n\nexport { storage as default };\n","import { VERSION } from \"../environmentVariables.js\";\n\nimport { IS_SESSION_STORAGE } from \"../utils/browserUtils.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport storage$1 from \"./mockStorage.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst storage = IS_SESSION_STORAGE() ? window.sessionStorage : storage$1;\n\nclass UserSessionStorageService {\n  constructor(serviceManager) {\n    this.serviceManager = serviceManager;\n    this.prefix = `CARBON_CHAT_SESSION${this.serviceManager?.namespace?.suffix || \"\"}`;\n  }\n  loadChatSession() {\n    try {\n      const chatSessionString = storage.getItem(this.getChatSessionKey());\n      const chatSession = chatSessionString ? JSON.parse(chatSessionString) : null;\n      if (chatSession?.version === VERSION) {\n        return chatSession;\n      }\n      this.clearChatSession();\n      return null;\n    } catch (error) {\n      this.clearChatSession();\n      return null;\n    }\n  }\n  loadLauncherSession() {\n    try {\n      const launcherSessionString = storage.getItem(this.getLauncherSessionKey());\n      const launcherSession = launcherSessionString ? JSON.parse(launcherSessionString) : null;\n      if (launcherSession?.version === VERSION) {\n        launcherSession.wasLoadedFromBrowser = true;\n        return launcherSession;\n      }\n      this.clearLauncherSession();\n      return null;\n    } catch (error) {\n      this.clearLauncherSession();\n      return null;\n    }\n  }\n  persistChatSession(session) {\n    try {\n      storage.setItem(this.getChatSessionKey(), JSON.stringify(session));\n    } catch (error) {\n      consoleError(\"Error in persistChatSession\", error);\n    }\n  }\n  persistLauncherSession(session) {\n    try {\n      storage.setItem(this.getLauncherSessionKey(), JSON.stringify(session));\n    } catch (error) {\n      consoleError(\"Error in persistLauncherSession\", error);\n    }\n  }\n  clearChatSession() {\n    try {\n      storage.removeItem(this.getChatSessionKey());\n    } catch (error) {\n      consoleError(\"Error in clearChatSession\", error);\n    }\n  }\n  clearLauncherSession() {\n    try {\n      storage.removeItem(this.getLauncherSessionKey());\n    } catch (error) {\n      consoleError(\"Error in clearLauncherSession\", error);\n    }\n  }\n  getChatSessionKey() {\n    return this.prefix;\n  }\n  getLauncherSessionKey() {\n    return this.prefix;\n  }\n}\n\nexport { UserSessionStorageService };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction replaceCurrentArrayValue(currentValue, newValue) {\n  if (Array.isArray(newValue)) {\n    return newValue;\n  }\n  return undefined;\n}\n\nexport { replaceCurrentArrayValue };\n","import { HA_END_CHAT, HA_UPDATE_FILE_UPLOAD_IN_PROGRESS, HA_SET_IS_SCREEN_SHARING, HA_UPDATE_CAPABILITIES, HA_SET_AGENT_LEFT_CHAT, HA_UPDATE_IS_TYPING, HA_UPDATE_IS_SUSPENDED, HA_SET_PERSISTED_STATE, HA_SET_AGENT_JOINED, HA_SET_SHOW_SCREEN_SHARE_REQUEST, HA_SET_AGENT_AVAILABILITY, HA_SET_IS_RECONNECTING, HA_SET_IS_CONNECTING } from \"./agentActions.js\";\n\nimport { applyLocalMessageUIState } from \"./reducerUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const agentReducers = {\n  [HA_SET_IS_CONNECTING]: (state, action) => {\n    const {isConnecting: isConnecting, localMessageID: localMessageID} = action;\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isConnecting: isConnecting,\n        activeLocalMessageID: localMessageID,\n        numUnreadMessages: isConnecting ? 0 : state.agentState.numUnreadMessages\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isSuspended: isConnecting ? state.persistedToBrowserStorage.chatState.agentState.isSuspended : false\n          }\n        }\n      }\n    };\n  },\n  [HA_SET_IS_RECONNECTING]: (state, action) => {\n    const {isReconnecting: isReconnecting} = action;\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isReconnecting: isReconnecting\n      }\n    };\n  },\n  [HA_SET_AGENT_AVAILABILITY]: (state, action) => {\n    if (!state.agentState.isConnecting) {\n      return state;\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        availability: state.agentState.isConnecting ? action.availability : null\n      }\n    };\n  },\n  [HA_SET_SHOW_SCREEN_SHARE_REQUEST]: (state, {showRequest: showRequest}) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      showScreenShareRequest: showRequest\n    }\n  }),\n  [HA_SET_AGENT_JOINED]: (state, action) => {\n    const agentProfiles = {\n      ...state.persistedToBrowserStorage.chatState.agentState.agentProfiles\n    };\n    const {agentProfile: agentProfile} = action;\n    if (agentProfile) {\n      agentProfiles[agentProfile.id] = agentProfile;\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        isConnecting: false,\n        isReconnecting: false,\n        availability: null\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isConnected: true,\n            agentProfile: agentProfile,\n            agentProfiles: agentProfiles\n          }\n        }\n      }\n    };\n  },\n  [HA_SET_PERSISTED_STATE]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        agentState: {\n          ...state.persistedToBrowserStorage.chatState.agentState,\n          serviceDeskState: action.state\n        }\n      }\n    }\n  }),\n  [HA_UPDATE_IS_SUSPENDED]: (state, action) => {\n    if (!state.agentState.isConnecting && !state.persistedToBrowserStorage.chatState.agentState.isConnected) {\n      return state;\n    }\n    return {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isSuspended: action.isSuspended\n          }\n        }\n      }\n    };\n  },\n  [HA_UPDATE_IS_TYPING]: (state, action) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      isAgentTyping: action.isTyping\n    }\n  }),\n  [HA_SET_AGENT_LEFT_CHAT]: state => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState\n    },\n    agentState: {\n      ...state.agentState,\n      isAgentTyping: false\n    },\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        agentState: {\n          ...state.persistedToBrowserStorage.chatState.agentState,\n          agentProfile: null\n        }\n      }\n    }\n  }),\n  [HA_UPDATE_CAPABILITIES]: (state, action) => {\n    const newInputState = {\n      ...state.agentState.inputState,\n      ...action.capabilities\n    };\n    if (!newInputState.allowFileUploads) {\n      newInputState.files = [];\n    }\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        inputState: newInputState\n      }\n    };\n  },\n  [HA_SET_IS_SCREEN_SHARING]: (state, {isSharing: isSharing}) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      isScreenSharing: isSharing\n    }\n  }),\n  [HA_UPDATE_FILE_UPLOAD_IN_PROGRESS]: (state, action) => ({\n    ...state,\n    agentState: {\n      ...state.agentState,\n      fileUploadInProgress: action.fileUploadInProgress\n    }\n  }),\n  [HA_END_CHAT]: state => {\n    let newState = applyLocalMessageUIState(state, state.agentState.activeLocalMessageID, \"wasAgentChatEnded\", true);\n    newState = {\n      ...newState,\n      agentState: {\n        ...newState.agentState,\n        isConnecting: false,\n        isReconnecting: false,\n        availability: null,\n        activeLocalMessageID: null,\n        isAgentTyping: false,\n        inputState: {\n          ...newState.agentState.inputState,\n          isReadonly: false\n        }\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          agentState: {\n            ...state.persistedToBrowserStorage.chatState.agentState,\n            isConnected: false,\n            isSuspended: false,\n            agentProfile: null\n          }\n        }\n      }\n    };\n    return newState;\n  }\n};\n\nexport { agentReducers };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction populateTourStepItems(state) {\n  const {activeTourID: activeTourID} = state.persistedToBrowserStorage.chatState.persistedTourState;\n  if (activeTourID) {\n    const originalMessage = state.allMessagesByID[activeTourID];\n    const tourMessageItem = originalMessage?.output?.generic?.find(message => Boolean(message.user_defined?.steps));\n    if (tourMessageItem) {\n      return {\n        ...state,\n        tourState: {\n          ...state.tourState,\n          activeTourStepItems: tourMessageItem.user_defined?.steps\n        }\n      };\n    }\n  }\n  return clearTourState(state);\n}\n\nfunction clearTourState(state) {\n  return {\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        persistedTourState: {\n          activeTourID: null,\n          activeTourCurrentStepIndex: null\n        }\n      },\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        activeTour: false\n      }\n    },\n    tourState: {\n      ...state.tourState,\n      activeTourStepItems: null\n    }\n  };\n}\n\nexport { clearTourState, populateTourStepItems };\n","import merge from \"lodash-es/merge.js\";\n\nimport mergeWith from \"lodash-es/mergeWith.js\";\n\nimport { outputItemToLocalItem } from \"../schema/outputItemToLocalItem.js\";\n\nimport \"../utils/constants.js\";\n\nimport { replaceCurrentArrayValue } from \"../utils/customizers.js\";\n\nimport { streamItemID, isResponse, isRequest } from \"../utils/messageUtils.js\";\n\nimport { UPDATE_MAIN_HEADER_AVATAR, SET_STREAM_ID, SET_STOP_STREAMING_BUTTON_DISABLED, SET_STOP_STREAMING_BUTTON_VISIBLE, UPDATE_MAX_VISIBLE_HEADER_OBJECTS, UPDATE_CHAT_HEADER_CONFIG, STREAMING_ADD_CHUNK, STREAMING_MERGE_HISTORY, STREAMING_START, SET_RESPONSE_PANEL_CONTENT, SET_RESPONSE_PANEL_IS_OPEN, ADD_NESTED_MESSAGES, FILE_UPLOAD_INPUT_ERROR, CLEAR_INPUT_FILES, REMOVE_ALL_NOTIFICATIONS, REMOVE_NOTIFICATIONS, ADD_NOTIFICATION, REMOVE_LOCAL_MESSAGE_ITEM, REMOVE_INPUT_FILE, ADD_INPUT_FILE, SET_IS_BROWSER_PAGE_VISIBLE, UPDATE_INPUT_STATE, CHANGE_STEP_IN_TOUR, CLEAR_TOUR_DATA, SET_TOUR_DATA, SET_CUSTOM_PANEL_OPTIONS, SET_CUSTOM_PANEL_OPEN, SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN, CLOSE_IFRAME_PANEL, OPEN_IFRAME_CONTENT, SET_LAUNCHER_MINIMIZED, SET_CHAT_MESSAGES_PROPERTY, SET_LAUNCHER_CONFIG_PROPERTY, SET_LAUNCHER_PROPERTY, UPDATE_LAUNCHER_CONFIG, TOGGLE_HOME_SCREEN, SET_HOME_SCREEN_IS_OPEN, ACCEPTED_DISCLAIMER, ANNOUNCE_MESSAGE, MERGE_HISTORY, SET_MESSAGE_HISTORY_PROPERTY, SET_MESSAGE_UI_PROPERTY, UPDATE_HOME_SCREEN_CONFIG, UPDATE_CSS_VARIABLES, UPDATE_MAIN_HEADER_TITLE, UPDATE_LAUNCHER_AVATAR_URL, UPDATE_BOT_AVATAR_URL, UPDATE_BOT_NAME, SET_INITIAL_VIEW_CHANGE_COMPLETE, SET_VIEW_CHANGING, SET_VIEW_STATE, UPDATE_HAS_SENT_NON_WELCOME_MESSAGE, UPDATE_PERSISTED_CHAT_STATE, SET_APP_STATE_VALUE, ADD_IS_HYDRATING_COUNTER, ADD_IS_LOADING_COUNTER, ADD_IS_TYPING_COUNTER, MESSAGE_SET_OPTION_SELECTED, ADD_MESSAGE, UPDATE_MESSAGE, UPDATE_LOCAL_MESSAGE_ITEM, REMOVE_MESSAGES, ADD_LOCAL_MESSAGE_ITEM, HYDRATE_MESSAGE_HISTORY, RESTART_CONVERSATION, HYDRATE_CHAT, CHANGE_STATE } from \"./actions.js\";\n\nimport { agentReducers } from \"./agentReducers.js\";\n\nimport { setHomeScreenOpenState, applyFullMessage, applyBotMessageState, applyLocalMessageUIState, handleViewStateChange, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE } from \"./reducerUtils.js\";\n\nimport { clearTourState, populateTourStepItems } from \"./tourReducerUtils.js\";\n\nimport { AgentMessageType } from \"../../../types/messaging/Messages.js\";\n\nimport { FileStatusValue, LauncherType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst EXCLUDE_AGENT_UNREAD = new Set([ AgentMessageType.USER_ENDED_CHAT, AgentMessageType.CHAT_WAS_ENDED, AgentMessageType.RELOAD_WARNING ]);\n\nconst reducers = {\n  [CHANGE_STATE]: (state, action) => merge({}, state, action.partialState),\n  [HYDRATE_CHAT]: state => ({\n    ...state,\n    isHydrated: true\n  }),\n  [RESTART_CONVERSATION]: state => {\n    let newState = {\n      ...state,\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: [],\n        messageIDs: [],\n        isTypingCounter: 0,\n        isScrollAnchored: false\n      },\n      allMessageItemsByID: {},\n      allMessagesByID: {},\n      iFramePanelState: {\n        ...DEFAULT_IFRAME_PANEL_STATE\n      },\n      viewSourcePanelState: {\n        ...DEFAULT_CITATION_PANEL_STATE\n      },\n      customPanelState: {\n        ...DEFAULT_CUSTOM_PANEL_STATE\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          homeScreenState: {\n            ...state.persistedToBrowserStorage.chatState.homeScreenState,\n            showBackToBot: false\n          }\n        }\n      },\n      isHydrated: false,\n      catastrophicErrorType: null\n    };\n    newState = clearTourState(newState);\n    if (newState.homeScreenConfig.is_on) {\n      newState = setHomeScreenOpenState(newState, true);\n    }\n    return newState;\n  },\n  [HYDRATE_MESSAGE_HISTORY]: (state, action) => {\n    let newState = {\n      ...state,\n      ...action.messageHistory\n    };\n    if (state.persistedToBrowserStorage.chatState.persistedTourState.activeTourID) {\n      newState = populateTourStepItems(newState);\n    }\n    return newState;\n  },\n  [ADD_LOCAL_MESSAGE_ITEM]: (state, action) => {\n    const {messageItem: messageItem, message: message, addMessage: addMessage, addAfterID: addAfterID} = action;\n    const {id: id} = messageItem.ui_state;\n    const isSilent = message.history.silent;\n    let newState = state;\n    if (addMessage) {\n      newState = applyFullMessage(newState, message);\n    }\n    const currentIndex = newState.botMessageState.localMessageIDs.findIndex(existingID => existingID === id);\n    const newLocalMessageIDs = [ ...newState.botMessageState.localMessageIDs ];\n    let insertAtIndex = currentIndex;\n    if (currentIndex !== -1) {\n      newLocalMessageIDs.splice(currentIndex, 1);\n    } else {\n      insertAtIndex = newLocalMessageIDs.length;\n    }\n    if (addAfterID) {\n      const afterIDIndex = newLocalMessageIDs.findIndex(existingID => existingID === addAfterID);\n      if (afterIDIndex !== -1) {\n        insertAtIndex = afterIDIndex + 1;\n      }\n    }\n    newLocalMessageIDs.splice(insertAtIndex, 0, id);\n    if (!isSilent) {\n      newState = {\n        ...newState,\n        allMessageItemsByID: {\n          ...newState.allMessageItemsByID,\n          [id]: messageItem\n        },\n        botMessageState: {\n          ...newState.botMessageState,\n          localMessageIDs: newLocalMessageIDs\n        }\n      };\n      if (newState.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen) {\n        newState = setHomeScreenOpenState(newState, false);\n      }\n      const isBotMessage = !messageItem.item.agent_message_type;\n      const isMainWindowOpen = state.persistedToBrowserStorage.launcherState.viewState.mainWindow;\n      if (!isBotMessage && (!isMainWindowOpen || !state.isBrowserPageVisible)) {\n        const fromAgent = !isRequest(message);\n        if (fromAgent && !EXCLUDE_AGENT_UNREAD.has(messageItem.item.agent_message_type)) {\n          newState = {\n            ...newState,\n            agentState: {\n              ...newState.agentState,\n              numUnreadMessages: newState.agentState.numUnreadMessages + 1\n            }\n          };\n        }\n      }\n    }\n    return newState;\n  },\n  [REMOVE_MESSAGES]: (state, {messageIDs: messageIDs}) => {\n    const idsSet = new Set(messageIDs);\n    const newAllMessages = {\n      ...state.allMessagesByID\n    };\n    const newAllMessageItems = {\n      ...state.allMessageItemsByID\n    };\n    const newMessageIDs = state.botMessageState.messageIDs.filter(messageID => !idsSet.has(messageID));\n    const newMessageItemsIDs = state.botMessageState.localMessageIDs.filter(messageItemID => {\n      const messageItem = newAllMessageItems[messageItemID];\n      const removeItem = idsSet.has(messageItem?.fullMessageID);\n      if (removeItem) {\n        delete newAllMessageItems[messageItemID];\n      }\n      return !removeItem;\n    });\n    messageIDs.forEach(messageID => {\n      delete newAllMessages[messageID];\n    });\n    const newState = {\n      ...state,\n      allMessagesByID: newAllMessages,\n      allMessageItemsByID: newAllMessageItems,\n      botMessageState: {\n        ...state.botMessageState,\n        messageIDs: newMessageIDs,\n        localMessageIDs: newMessageItemsIDs\n      }\n    };\n    return newState;\n  },\n  [UPDATE_LOCAL_MESSAGE_ITEM]: (state, action) => {\n    const {messageItem: messageItem} = action;\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [messageItem.ui_state.id]: messageItem\n      }\n    };\n  },\n  [UPDATE_MESSAGE]: (state, action) => {\n    const {message: message} = action;\n    return {\n      ...state,\n      allMessagesByID: {\n        ...state.allMessagesByID,\n        [message.id]: message\n      }\n    };\n  },\n  [ADD_MESSAGE]: (state, action) => {\n    const {message: message} = action;\n    const messageID = message.id;\n    let newState = state;\n    if (isResponse(message)) {\n      const itemIDsInNewMessage = [];\n      message.output.generic.forEach(item => {\n        const id = streamItemID(messageID, item);\n        if (id) {\n          itemIDsInNewMessage.push(id);\n        }\n      });\n      const newAllMessageItemsByID = {\n        ...state.allMessageItemsByID\n      };\n      const existingItemIDs = [];\n      let firstFoundIndex;\n      const newLocalMessageIDs = state.botMessageState.localMessageIDs.filter((itemID, index) => {\n        const item = state.allMessageItemsByID[itemID];\n        const isItemInMessage = item.fullMessageID === messageID;\n        if (isItemInMessage) {\n          if (firstFoundIndex === undefined) {\n            firstFoundIndex = index;\n          }\n          if (!itemIDsInNewMessage.includes(itemID)) {\n            delete newAllMessageItemsByID[itemID];\n          } else {\n            existingItemIDs.push(itemID);\n          }\n        }\n        return !isItemInMessage;\n      });\n      if (existingItemIDs.length) {\n        const itemIDsToInsert = itemIDsInNewMessage.filter(itemID => existingItemIDs.includes(itemID));\n        if (itemIDsToInsert.length) {\n          newLocalMessageIDs.splice(firstFoundIndex, 0, ...itemIDsToInsert);\n        }\n      }\n      newState = {\n        ...newState,\n        allMessageItemsByID: newAllMessageItemsByID,\n        botMessageState: {\n          ...newState.botMessageState,\n          localMessageIDs: newLocalMessageIDs\n        }\n      };\n    }\n    return applyFullMessage(newState, message);\n  },\n  [MESSAGE_SET_OPTION_SELECTED]: (state, action) => {\n    const newMessagesByID = {\n      ...state.allMessageItemsByID\n    };\n    newMessagesByID[action.messageID] = {\n      ...state.allMessageItemsByID[action.messageID],\n      ui_state: {\n        ...state.allMessageItemsByID[action.messageID].ui_state,\n        optionSelected: action.sentMessage\n      }\n    };\n    return {\n      ...state,\n      allMessageItemsByID: newMessagesByID\n    };\n  },\n  [ADD_IS_TYPING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isTypingCounter: Math.max(state.botMessageState.isTypingCounter + action.addToIsTyping, 0)\n    }\n  }),\n  [ADD_IS_LOADING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isLoadingCounter: Math.max(state.botMessageState.isLoadingCounter + action.addToIsLoading, 0)\n    }\n  }),\n  [ADD_IS_HYDRATING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isHydratingCounter: Math.max(state.botMessageState.isHydratingCounter + action.addToIsHydrating, 0)\n    }\n  }),\n  [SET_APP_STATE_VALUE]: (state, action) => ({\n    ...state,\n    [action.key]: action.value\n  }),\n  [UPDATE_PERSISTED_CHAT_STATE]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        ...action.chatState\n      }\n    }\n  }),\n  [UPDATE_HAS_SENT_NON_WELCOME_MESSAGE]: (state, action) => {\n    if (state.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage === action.hasSentNonWelcomeMessage) {\n      return state;\n    }\n    return {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          hasSentNonWelcomeMessage: action.hasSentNonWelcomeMessage\n        },\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          hasSentNonWelcomeMessage: action.hasSentNonWelcomeMessage\n        }\n      }\n    };\n  },\n  [SET_VIEW_STATE]: (state, action) => handleViewStateChange(state, action.viewState),\n  [SET_VIEW_CHANGING]: (state, action) => ({\n    ...state,\n    viewChanging: action.viewChanging\n  }),\n  [SET_INITIAL_VIEW_CHANGE_COMPLETE]: (state, action) => ({\n    ...state,\n    initialViewChangeComplete: action.changeComplete\n  }),\n  [UPDATE_BOT_NAME]: (state, action) => ({\n    ...state,\n    botName: action.name,\n    headerDisplayName: state.theme.useAITheme ? state.headerDisplayName : action.name\n  }),\n  [UPDATE_BOT_AVATAR_URL]: (state, action) => ({\n    ...state,\n    botAvatarURL: action.url\n  }),\n  [UPDATE_LAUNCHER_AVATAR_URL]: (state, action) => ({\n    ...state,\n    launcher: {\n      ...state.launcher,\n      config: {\n        ...state.launcher.config,\n        mobile: {\n          ...state.launcher.config.mobile,\n          avatar_url_override: action.source\n        },\n        desktop: {\n          ...state.launcher.config.desktop,\n          avatar_url_override: action.source\n        }\n      }\n    }\n  }),\n  [UPDATE_MAIN_HEADER_TITLE]: (state, action) => ({\n    ...state,\n    headerDisplayName: action.title\n  }),\n  [UPDATE_CSS_VARIABLES]: (state, action) => {\n    const {config: config} = state;\n    const {variables: variables} = action;\n    const newConfig = {\n      public: {\n        ...config.public\n      }\n    };\n    return {\n      ...state,\n      config: newConfig,\n      cssVariableOverrides: variables\n    };\n  },\n  [UPDATE_HOME_SCREEN_CONFIG]: (state, action) => {\n    const newHomeScreenConfig = action.homeScreenConfig;\n    return {\n      ...state,\n      homeScreenConfig: mergeWith({}, state.homeScreenConfig, newHomeScreenConfig, replaceCurrentArrayValue)\n    };\n  },\n  [SET_MESSAGE_UI_PROPERTY]: (state, action) => applyLocalMessageUIState(state, action.localMessageID, action.propertyName, action.propertyValue),\n  [SET_MESSAGE_HISTORY_PROPERTY]: (state, action) => {\n    const {messageID: messageID, propertyName: propertyName, propertyValue: propertyValue} = action;\n    const oldMessage = state.allMessagesByID[messageID];\n    if (oldMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [messageID]: {\n            ...oldMessage,\n            history: {\n              ...oldMessage.history,\n              [propertyName]: propertyValue\n            }\n          }\n        }\n      };\n    }\n    return state;\n  },\n  [MERGE_HISTORY]: (state, action) => {\n    const oldMessage = state.allMessagesByID[action.messageID];\n    if (oldMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [action.messageID]: {\n            ...oldMessage,\n            history: merge({}, oldMessage.history, action.history)\n          }\n        }\n      };\n    }\n    return state;\n  },\n  [ANNOUNCE_MESSAGE]: (state, action) => ({\n    ...state,\n    announceMessage: action.message\n  }),\n  [ACCEPTED_DISCLAIMER]: state => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        disclaimersAccepted: {\n          ...state.persistedToBrowserStorage.chatState.disclaimersAccepted,\n          [window.location.hostname]: true\n        }\n      }\n    }\n  }),\n  [SET_HOME_SCREEN_IS_OPEN]: (state, {isOpen: isOpen}) => setHomeScreenOpenState(state, isOpen),\n  [TOGGLE_HOME_SCREEN]: state => setHomeScreenOpenState(state, !state.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen, true),\n  [UPDATE_LAUNCHER_CONFIG]: (state, action) => {\n    const newConfig = merge({}, state.launcher.config, action.launcherConfig);\n    return {\n      ...state,\n      launcher: {\n        ...state.launcher,\n        config: newConfig\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          desktopLauncherIsExpanded: newConfig.is_on && newConfig.desktop.is_on ? state.persistedToBrowserStorage.launcherState.desktopLauncherIsExpanded : false,\n          mobileLauncherIsExtended: newConfig.is_on && newConfig.mobile.is_on ? state.persistedToBrowserStorage.launcherState.mobileLauncherIsExtended : false\n        }\n      }\n    };\n  },\n  [SET_LAUNCHER_PROPERTY]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        [action.propertyName]: action.propertyValue\n      }\n    }\n  }),\n  [SET_LAUNCHER_CONFIG_PROPERTY]: (state, action) => {\n    const newState = {\n      ...state,\n      launcher: {\n        ...state.launcher,\n        config: {\n          ...state.launcher.config\n        }\n      }\n    };\n    if (!action.launcherType || action.launcherType === LauncherType.DESKTOP) {\n      newState.launcher.config.desktop = {\n        ...state.launcher.config.desktop,\n        [action.propertyName]: action.propertyValue\n      };\n    }\n    if (!action.launcherType || action.launcherType === LauncherType.MOBILE) {\n      newState.launcher.config.mobile = {\n        ...state.launcher.config.mobile,\n        [action.propertyName]: action.propertyValue\n      };\n    }\n    return newState;\n  },\n  [SET_CHAT_MESSAGES_PROPERTY]: (state, action) => applyBotMessageState(state, {\n    [action.propertyName]: action.propertyValue\n  }),\n  [SET_LAUNCHER_MINIMIZED]: state => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        desktopLauncherIsExpanded: false,\n        desktopLauncherWasMinimized: true\n      }\n    }\n  }),\n  [OPEN_IFRAME_CONTENT]: (state, {messageItem: messageItem}) => ({\n    ...state,\n    iFramePanelState: {\n      ...state.iFramePanelState,\n      messageItem: messageItem,\n      isOpen: true\n    },\n    announceMessage: {\n      messageID: \"iframe_ariaOpenedPanel\"\n    }\n  }),\n  [CLOSE_IFRAME_PANEL]: state => ({\n    ...state,\n    iFramePanelState: {\n      ...state.iFramePanelState,\n      isOpen: false\n    },\n    announceMessage: {\n      messageID: \"iframe_ariaClosedPanel\"\n    }\n  }),\n  [SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN]: (state, action) => ({\n    ...state,\n    viewSourcePanelState: {\n      ...state.viewSourcePanelState,\n      citationItem: action.citationItem,\n      relatedSearchResult: action.relatedSearchResult,\n      isOpen: action.isOpen\n    }\n  }),\n  [SET_CUSTOM_PANEL_OPEN]: (state, action) => ({\n    ...state,\n    customPanelState: {\n      ...state.customPanelState,\n      isOpen: action.isOpen\n    }\n  }),\n  [SET_CUSTOM_PANEL_OPTIONS]: (state, action) => ({\n    ...state,\n    customPanelState: {\n      ...state.customPanelState,\n      options: action.options\n    }\n  }),\n  [SET_TOUR_DATA]: (state, action) => {\n    const newStateWithPersistedTourData = {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          persistedTourState: {\n            activeTourID: action.newActiveTourMessageID,\n            activeTourCurrentStepIndex: 0\n          }\n        },\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          activeTour: true\n        }\n      }\n    };\n    return populateTourStepItems(newStateWithPersistedTourData);\n  },\n  [CLEAR_TOUR_DATA]: state => clearTourState(state),\n  [CHANGE_STEP_IN_TOUR]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        persistedTourState: {\n          ...state.persistedToBrowserStorage.chatState.persistedTourState,\n          activeTourCurrentStepIndex: Math.max(Math.min(action.newStepNumber, state.tourState.activeTourStepItems.length - 1), 0)\n        }\n      }\n    }\n  }),\n  [UPDATE_INPUT_STATE]: (state, action) => {\n    const currentInputState = getInputState(state, action.isInputToAgent);\n    const newInputState = {\n      ...currentInputState,\n      ...action.newState\n    };\n    const newState = applyInputState(state, newInputState, action.isInputToAgent);\n    return newState;\n  },\n  [SET_IS_BROWSER_PAGE_VISIBLE]: (state, action) => {\n    let numUnreadMessages;\n    const isMainWindowOpen = state.persistedToBrowserStorage.launcherState.viewState.mainWindow;\n    if (isMainWindowOpen && action.isVisible) {\n      numUnreadMessages = 0;\n    } else {\n      numUnreadMessages = state.agentState.numUnreadMessages;\n    }\n    return {\n      ...state,\n      isBrowserPageVisible: action.isVisible,\n      agentState: {\n        ...state.agentState,\n        numUnreadMessages: numUnreadMessages\n      }\n    };\n  },\n  [ADD_INPUT_FILE]: (state, {file: file, isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    return applyInputState(state, {\n      ...currentInputState,\n      files: [ ...currentInputState.files, file ]\n    }, isInputToAgent);\n  },\n  [REMOVE_INPUT_FILE]: (state, {fileID: fileID, isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    const newUploads = [ ...currentInputState.files ];\n    const index = newUploads.findIndex(file => file.id === fileID);\n    if (index !== -1) {\n      newUploads.splice(index, 1);\n    }\n    return applyInputState(state, {\n      ...currentInputState,\n      files: newUploads\n    }, isInputToAgent);\n  },\n  [REMOVE_LOCAL_MESSAGE_ITEM]: (state, {localMessageItemID: localMessageItemID}) => {\n    const newLocalMessageIDs = state.botMessageState.localMessageIDs.filter(id => id !== localMessageItemID);\n    const allMessageItemsByID = {\n      ...state.allMessageItemsByID\n    };\n    if (allMessageItemsByID[localMessageItemID]) {\n      delete allMessageItemsByID[localMessageItemID];\n    }\n    return {\n      ...state,\n      allMessageItemsByID: allMessageItemsByID,\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: newLocalMessageIDs\n      }\n    };\n  },\n  [ADD_NOTIFICATION]: (state, {notification: notification, notificationID: notificationID}) => ({\n    ...state,\n    notifications: state.notifications.concat({\n      id: notificationID,\n      notification: notification\n    })\n  }),\n  [REMOVE_NOTIFICATIONS]: (state, {groupID: groupID, notificationID: notificationID}) => ({\n    ...state,\n    notifications: state.notifications.filter(notification => {\n      if (notificationID) {\n        return notification.id !== notificationID;\n      }\n      return notification.notification.groupID !== groupID;\n    })\n  }),\n  [REMOVE_ALL_NOTIFICATIONS]: state => ({\n    ...state,\n    notifications: []\n  }),\n  [CLEAR_INPUT_FILES]: (state, {isInputToAgent: isInputToAgent}) => {\n    const currentInputState = getInputState(state, isInputToAgent);\n    return applyInputState(state, {\n      ...currentInputState,\n      files: []\n    }, isInputToAgent);\n  },\n  [FILE_UPLOAD_INPUT_ERROR]: (state, {fileID: fileID, errorMessage: errorMessage, isInputToAgent: isInputToAgent}) => {\n    const currentInputSate = getInputState(state, isInputToAgent);\n    const newUploads = [ ...currentInputSate.files ];\n    const index = newUploads.findIndex(file => file.id === fileID);\n    if (index !== -1) {\n      newUploads[index] = {\n        ...newUploads[index],\n        isError: true,\n        errorMessage: errorMessage,\n        status: FileStatusValue.COMPLETE\n      };\n    }\n    return applyInputState(state, {\n      ...currentInputSate,\n      files: newUploads\n    }, isInputToAgent);\n  },\n  [ADD_NESTED_MESSAGES]: (state, {localMessageItems: localMessageItems}) => {\n    const allMessageItemsByID = {\n      ...state.allMessageItemsByID\n    };\n    localMessageItems.forEach(localMessageItem => {\n      allMessageItemsByID[localMessageItem.ui_state.id] = localMessageItem;\n    });\n    return {\n      ...state,\n      allMessageItemsByID: allMessageItemsByID\n    };\n  },\n  [SET_RESPONSE_PANEL_IS_OPEN]: (state, {isOpen: isOpen}) => ({\n    ...state,\n    responsePanelState: {\n      ...state.responsePanelState,\n      isOpen: isOpen\n    }\n  }),\n  [SET_RESPONSE_PANEL_CONTENT]: (state, {localMessageItem: localMessageItem, isMessageForInput: isMessageForInput}) => ({\n    ...state,\n    responsePanelState: {\n      ...state.responsePanelState,\n      localMessageItem: localMessageItem,\n      isMessageForInput: isMessageForInput\n    }\n  }),\n  [STREAMING_START]: (state, {messageID: messageID}) => {\n    const streamIntoResponse = {\n      id: messageID,\n      output: {\n        generic: []\n      },\n      history: {\n        timestamp: Date.now()\n      }\n    };\n    return applyFullMessage(state, streamIntoResponse);\n  },\n  [STREAMING_MERGE_HISTORY]: (state, {messageID: messageID, history: history}) => {\n    const existingMessage = state.allMessagesByID[messageID];\n    const newMessage = merge({}, existingMessage, {\n      history: history\n    });\n    if (existingMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [messageID]: newMessage\n        }\n      };\n    }\n    return state;\n  },\n  [STREAMING_ADD_CHUNK]: (state, {chunkItem: chunkItem, fullMessageID: fullMessageID, isCompleteItem: isCompleteItem, disableFadeAnimation: disableFadeAnimation}) => {\n    const message = state.allMessagesByID[fullMessageID];\n    const localItemID = streamItemID(fullMessageID, chunkItem);\n    const existingLocalMessageItem = state.allMessageItemsByID[localItemID];\n    let {localMessageIDs: localMessageIDs} = state.botMessageState;\n    let newItem;\n    if (!existingLocalMessageItem) {\n      newItem = outputItemToLocalItem(chunkItem, message, false);\n      newItem.ui_state.needsAnnouncement = false;\n      newItem.ui_state.disableFadeAnimation = disableFadeAnimation;\n      newItem.ui_state.isIntermediateStreaming = true;\n      if (isCompleteItem) {\n        newItem.ui_state.streamingState = {\n          chunks: [],\n          isDone: true\n        };\n      } else {\n        newItem.ui_state.streamingState = {\n          chunks: [ chunkItem ],\n          isDone: false\n        };\n      }\n      localMessageIDs = [ ...localMessageIDs, localItemID ];\n      if (!newItem.item.response_type) {\n        throw new Error(`New chunk item does not have a response_type: ${JSON.stringify(chunkItem)}`);\n      }\n    } else if (isCompleteItem) {\n      newItem = outputItemToLocalItem(chunkItem, message, false);\n      newItem.ui_state.needsAnnouncement = false;\n      newItem.ui_state.disableFadeAnimation = disableFadeAnimation;\n      newItem.ui_state.streamingState = {\n        chunks: [],\n        isDone: true\n      };\n    } else {\n      newItem = {\n        ...existingLocalMessageItem,\n        ui_state: {\n          ...existingLocalMessageItem?.ui_state,\n          streamingState: {\n            ...existingLocalMessageItem?.ui_state.streamingState,\n            chunks: [ ...existingLocalMessageItem?.ui_state.streamingState?.chunks || [], chunkItem ]\n          }\n        }\n      };\n    }\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [localItemID]: newItem\n      },\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: localMessageIDs\n      }\n    };\n  },\n  [UPDATE_CHAT_HEADER_CONFIG]: (state, {chatHeaderConfig: chatHeaderConfig}) => ({\n    ...state,\n    chatHeaderState: {\n      ...state.chatHeaderState,\n      config: {\n        ...state.chatHeaderState.config,\n        ...chatHeaderConfig\n      }\n    }\n  }),\n  [UPDATE_MAX_VISIBLE_HEADER_OBJECTS]: (state, {maxTotal: maxTotal}) => ({\n    ...state,\n    chatHeaderState: {\n      ...state.chatHeaderState,\n      maxVisibleHeaderObjects: maxTotal\n    }\n  }),\n  [SET_STOP_STREAMING_BUTTON_VISIBLE]: (state, {isVisible: isVisible}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        isVisible: isVisible\n      }\n    }\n  }),\n  [SET_STOP_STREAMING_BUTTON_DISABLED]: (state, {isDisabled: isDisabled}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        isDisabled: isDisabled\n      }\n    }\n  }),\n  [SET_STREAM_ID]: (state, {currentStreamID: currentStreamID}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        currentStreamID: currentStreamID\n      }\n    }\n  }),\n  [UPDATE_MAIN_HEADER_AVATAR]: (state, {config: config}) => ({\n    ...state,\n    headerAvatarConfig: config\n  })\n};\n\nfunction applyInputState(state, newInputState, isInputToAgent) {\n  if (isInputToAgent) {\n    return {\n      ...state,\n      agentState: {\n        ...state.agentState,\n        inputState: newInputState\n      }\n    };\n  }\n  return {\n    ...state,\n    botInputState: newInputState\n  };\n}\n\nfunction getInputState(state, isInputToAgent) {\n  return isInputToAgent ? state.agentState.inputState : state.botInputState;\n}\n\nObject.assign(reducers, agentReducers);\n\nexport { reducers };\n","import merge from \"lodash-es/merge.js\";\n\nimport { createStore } from \"redux\";\n\nimport { NODE_ENV } from \"../environmentVariables.js\";\n\nimport { IS_PHONE } from \"../utils/browserUtils.js\";\n\nimport \"../utils/constants.js\";\n\nimport { withoutEmptyStarters } from \"../utils/homeScreenUtils.js\";\n\nimport { getBotName } from \"../utils/miscUtils.js\";\n\nimport { mergeCSSVariables } from \"../utils/styleUtils.js\";\n\nimport { reducers } from \"./reducers.js\";\n\nimport { DEFAULT_THEME_STATE, VIEW_STATE_MAIN_WINDOW_OPEN, VIEW_STATE_LAUNCHER_OPEN, DEFAULT_LAUNCHER, DEFAULT_PERSISTED_TO_BROWSER, DEFAULT_INPUT_STATE, DEFAULT_MESSAGE_STATE, VIEW_STATE_ALL_CLOSED, DEFAULT_TOUR_STATE, DEFAULT_MESSAGE_PANEL_STATE, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE, DEFAULT_AGENT_STATE, DEFAULT_LAYOUT_STATE } from \"./reducerUtils.js\";\n\nimport \"../../../types/instance/apiTypes.js\";\n\nimport enLanguagePack from \"../../languages/en.json.js\";\n\nimport { CornersType } from \"../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function doCreateStore(config, serviceManager) {\n  let useAITheme;\n  if (config.public.themeConfig?.useAITheme !== undefined) {\n    useAITheme = config.public.themeConfig?.useAITheme;\n  } else {\n    useAITheme = DEFAULT_THEME_STATE.useAITheme;\n  }\n  const themeState = {\n    carbonTheme: config.public.themeConfig?.carbonTheme || DEFAULT_THEME_STATE.carbonTheme,\n    useAITheme: useAITheme,\n    corners: getThemeCornersType(config)\n  };\n  const botName = getBotName(themeState.useAITheme, config);\n  const initialState = {\n    ...DEFAULT_MESSAGE_STATE,\n    notifications: [],\n    botInputState: {\n      ...DEFAULT_INPUT_STATE(),\n      isReadonly: config.public.isReadonly,\n      fieldVisible: !config.public.isReadonly\n    },\n    agentState: {\n      ...DEFAULT_AGENT_STATE\n    },\n    botName: botName,\n    headerDisplayName: useAITheme ? null : botName,\n    botAvatarURL: config.public.botAvatarURL || null,\n    headerAvatarConfig: null,\n    chatWidthBreakpoint: null,\n    chatWidth: null,\n    chatHeight: null,\n    cssVariableOverrides: mergeCSSVariables({}, {}, themeState.carbonTheme, themeState.useAITheme),\n    isHydrated: false,\n    languagePack: enLanguagePack,\n    locale: \"en\",\n    config: config,\n    originalConfig: config,\n    suspendScrollDetection: false,\n    homeScreenConfig: withoutEmptyStarters({}),\n    persistedToBrowserStorage: {\n      ...DEFAULT_PERSISTED_TO_BROWSER,\n      chatState: {\n        ...DEFAULT_PERSISTED_TO_BROWSER.chatState,\n        homeScreenState: {\n          ...DEFAULT_PERSISTED_TO_BROWSER.chatState.homeScreenState\n        }\n      }\n    },\n    launcher: merge({}, DEFAULT_LAUNCHER, {\n      config: merge({}, {}, {\n        mobile: {}\n      }, {\n        is_on: config.public.showLauncher\n      })\n    }),\n    iFramePanelState: DEFAULT_IFRAME_PANEL_STATE,\n    viewSourcePanelState: DEFAULT_CITATION_PANEL_STATE,\n    isDestroyed: false,\n    customPanelState: DEFAULT_CUSTOM_PANEL_STATE,\n    viewChanging: false,\n    initialViewChangeComplete: false,\n    targetViewState: config.public.openChatByDefault ? VIEW_STATE_MAIN_WINDOW_OPEN : VIEW_STATE_LAUNCHER_OPEN,\n    responsePanelState: DEFAULT_MESSAGE_PANEL_STATE,\n    customMenuOptions: null,\n    tourState: DEFAULT_TOUR_STATE,\n    isBrowserPageVisible: true,\n    showNonHeaderBackgroundCover: false,\n    theme: themeState,\n    layout: getLayoutState(config),\n    chatHeaderState: {\n      config: null,\n      maxVisibleHeaderObjects: 0\n    }\n  };\n  const sessionStorageLauncherState = serviceManager.userSessionStorageService?.loadLauncherSession();\n  if (sessionStorageLauncherState) {\n    initialState.targetViewState = sessionStorageLauncherState.viewState;\n    sessionStorageLauncherState.viewState = VIEW_STATE_ALL_CLOSED;\n    initialState.persistedToBrowserStorage.launcherState = sessionStorageLauncherState;\n  }\n  const enhancer = config.public.debug || NODE_ENV === \"development\" ? window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({\n    name: \"CarbonAIChat\",\n    instanceId: `Chat${serviceManager.namespace.suffix}`\n  }) : undefined;\n  return createStore(reducerFunction, initialState, enhancer);\n}\n\nfunction getThemeCornersType(config) {\n  if (getLayoutState(config).showFrame === false || IS_PHONE || config.public.themeConfig?.corners === CornersType.SQUARE) {\n    return CornersType.SQUARE;\n  }\n  return DEFAULT_THEME_STATE.corners;\n}\n\nfunction getLayoutState(config) {\n  if (config.public.themeConfig?.useAITheme) {\n    return {\n      showFrame: config.public.layout?.showFrame ?? true,\n      hasContentMaxWidth: config.public.layout?.hasContentMaxWidth ?? true\n    };\n  }\n  return merge({}, DEFAULT_LAYOUT_STATE, config.public.layout);\n}\n\nfunction reducerFunction(state, action) {\n  return action && reducers[action.type] ? reducers[action.type](state, action) : state;\n}\n\nexport { doCreateStore };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport { consoleDebug, consoleWarn } from \"./utils/miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const DEFAULT_PUBLIC_CONFIG = {\n  openChatByDefault: false,\n  showLauncher: true,\n  shouldTakeFocusIfOpensAutomatically: true,\n  serviceDesk: {},\n  messaging: {},\n  themeConfig: {\n    useAITheme: true\n  }\n};\n\nasync function instantiateWidget(pagePublicConfig, chatConstructorPromise, render, element) {\n  const config = cloneDeep(pagePublicConfig);\n  if (!config.messaging?.customSendMessage) {\n    throw new Error(`You must set messaging.customSendMessage in your configuration object.`);\n  }\n  if (config?.debug) {\n    consoleDebug(\"[ChatEntry] Called instantiateWidget\", config);\n  }\n  if (document.location.protocol !== \"https:\") {\n    consoleWarn('Your page is not running with \"https\"; your data will not be sent  securely.');\n  }\n  if (document.compatMode !== \"CSS1Compat\") {\n    consoleWarn('Your page is running in quirks mode; you may experience layout issues with the chat. Add \"<!DOCTYPE html>\" to the page to run in standards mode.');\n  }\n  const {onError: onError, ...publicConfig} = config;\n  const Chat = await chatConstructorPromise(publicConfig);\n  const additionalChatParameters = {\n    onError: onError,\n    render: render\n  };\n  return new Chat(publicConfig, element, additionalChatParameters);\n}\n\nexport { DEFAULT_PUBLIC_CONFIG, instantiateWidget };\n","import dayjs from \"dayjs\";\n\nimport LocalizedFormat from \"dayjs/plugin/localizedFormat.js\";\n\nimport isEqual from \"lodash-es/isEqual.js\";\n\nimport merge from \"lodash-es/merge.js\";\n\nimport { createChatInstance } from \"./ChatInstanceImpl.js\";\n\nimport { createServiceManager } from \"./loadServices.js\";\n\nimport actions from \"./store/actions.js\";\n\nimport { VIEW_STATE_ALL_CLOSED } from \"./store/reducerUtils.js\";\n\nimport { loadLanguagePack, loadLocale } from \"./utils/languages.js\";\n\nimport { hasServiceDesk } from \"./utils/messageUtils.js\";\n\nimport { consoleDebug, consoleError } from \"./utils/miscUtils.js\";\n\nimport { DEFAULT_PUBLIC_CONFIG } from \"./chatEntryFunctions.js\";\n\nimport { MainWindowOpenReason, ViewChangeReason } from \"../../types/events/eventBusTypes.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { loadHAA } from \"../dynamic-imports/dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\ndayjs.extend(LocalizedFormat);\n\nclass Chat {\n  constructor(publicConfigProvided, customHostElement, additionalChatParametersProvided) {\n    if (publicConfigProvided?.debug) {\n      consoleDebug(\"Constructed chat widget\", publicConfigProvided);\n    }\n    const publicConfig = merge({}, DEFAULT_PUBLIC_CONFIG, publicConfigProvided);\n    this.additionalChatParameters = additionalChatParametersProvided || {};\n    this.appConfig = {\n      public: publicConfig\n    };\n    this.customHostElement = customHostElement;\n  }\n  async start() {\n    try {\n      const result = await this.startInternal();\n      return result.instance;\n    } catch (error) {\n      consoleError(\"There was an error starting your chat\", error);\n      return null;\n    }\n  }\n  async startInternal() {\n    const doesHaveServiceDesk = hasServiceDesk(this.appConfig);\n    this.serviceManager = await createServiceManager(this.appConfig, this.additionalChatParameters);\n    const [languagePack, localePack, render, createHumanAgentService] = await Promise.all([ loadLanguagePack(this.serviceManager.store.getState().languagePack), loadLocale(this.serviceManager.store.getState().locale), Promise.resolve(this.additionalChatParameters.render), doesHaveServiceDesk ? loadHAA() : Promise.resolve(null) ]);\n    this.serviceManager.customHostElement = this.customHostElement;\n    if (createHumanAgentService) {\n      this.serviceManager.humanAgentService = createHumanAgentService(this.serviceManager);\n    }\n    setIntl(this.serviceManager, localePack.name, languagePack);\n    dayjs.locale(localePack);\n    const reallyRenderAndReturnInstance = async () => {\n      await render({\n        serviceManager: this.serviceManager\n      });\n      const initialState = this.serviceManager.store.getState();\n      const {wasLoadedFromBrowser: wasLoadedFromBrowser} = initialState.persistedToBrowserStorage.launcherState;\n      const {targetViewState: targetViewState} = initialState;\n      const {openChatByDefault: openChatByDefault} = initialState.config.public;\n      if (targetViewState.mainWindow) {\n        let mainWindowOpenReason = MainWindowOpenReason.SESSION_HISTORY;\n        if (openChatByDefault && !wasLoadedFromBrowser) {\n          mainWindowOpenReason = MainWindowOpenReason.OPEN_BY_DEFAULT;\n        }\n        await this.serviceManager.actions.changeView(targetViewState, {\n          mainWindowOpenReason: mainWindowOpenReason\n        });\n      } else {\n        const viewChangeReason = ViewChangeReason.WEB_CHAT_LOADED;\n        const tryHydrating = targetViewState.tour;\n        const forceViewChange = isEqual(targetViewState, VIEW_STATE_ALL_CLOSED);\n        await this.serviceManager.actions.changeView(targetViewState, {\n          viewChangeReason: viewChangeReason\n        }, tryHydrating, forceViewChange);\n      }\n      this.serviceManager.store.dispatch(actions.setInitialViewChangeComplete(true));\n      return this.serviceManager.instance;\n    };\n    const renderAndReturnInstance = () => {\n      const promise = reallyRenderAndReturnInstance();\n      this.serviceManager.renderPromise = promise;\n      return promise;\n    };\n    this.serviceManager.instance = createChatInstance({\n      serviceManager: this.serviceManager,\n      callRender: renderAndReturnInstance\n    });\n    return {\n      instance: this.serviceManager.instance,\n      serviceManager: this.serviceManager\n    };\n  }\n}\n\nexport { Chat as default };\n","import { ChatActionsImpl } from \"./events/ChatActionsImpl.js\";\n\nimport { EventBus } from \"./events/EventBus.js\";\n\nimport { createCustomPanelManager } from \"./services/CustomPanelManager.js\";\n\nimport { HistoryService } from \"./services/HistoryService.js\";\n\nimport MessageService from \"./services/MessageService.js\";\n\nimport { NamespaceService } from \"./services/NamespaceService.js\";\n\nimport { ServiceManager } from \"./services/ServiceManager.js\";\n\nimport { UserSessionStorageService } from \"./services/UserSessionStorageService.js\";\n\nimport { doCreateStore } from \"./store/doCreateStore.js\";\n\nimport { copyToSessionStorage, createHandleWindowTitle } from \"./store/subscriptions.js\";\n\nimport \"./utils/constants.js\";\n\nimport { setEnableDebugLog, setEnableDebugStackTracesLog } from \"./utils/miscUtils.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { WriteableElementName } from \"../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function createServiceManager(appConfig, additionalChatParameters) {\n  const publicConfig = appConfig.public;\n  const serviceManager = new ServiceManager;\n  serviceManager.additionalChatParameters = additionalChatParameters;\n  serviceManager.namespace = new NamespaceService(publicConfig.namespace);\n  serviceManager.userSessionStorageService = new UserSessionStorageService(serviceManager);\n  serviceManager.actions = new ChatActionsImpl(serviceManager);\n  serviceManager.eventBus = new EventBus;\n  serviceManager.store = doCreateStore(appConfig, serviceManager);\n  serviceManager.historyService = new HistoryService(serviceManager);\n  serviceManager.messageService = new MessageService(serviceManager, publicConfig);\n  serviceManager.store.subscribe(copyToSessionStorage(serviceManager));\n  if (!publicConfig.disableWindowTitleChanges) {\n    serviceManager.store.subscribe(createHandleWindowTitle(serviceManager));\n  }\n  serviceManager.customPanelManager = createCustomPanelManager(serviceManager);\n  setIntl(serviceManager, serviceManager.store.getState().locale, serviceManager.store.getState().languagePack);\n  serviceManager.writeableElements = {\n    [WriteableElementName.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.WELCOME_NODE_BEFORE_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HEADER_BOTTOM_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.BEFORE_INPUT_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_HEADER_BOTTOM_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_AFTER_STARTERS_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_BEFORE_INPUT_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.CUSTOM_PANEL_ELEMENT]: document.createElement(\"div\")\n  };\n  if (publicConfig.debug) {\n    setEnableDebugLog(true);\n  }\n  if (publicConfig.debugStackTraces) {\n    setEnableDebugStackTracesLog(true);\n  }\n  return serviceManager;\n}\n\nexport { createServiceManager };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst UNREAD_COUNT_TITLE_TIME = 1e4;\n\nfunction copyToSessionStorage(serviceManager) {\n  let previousPersistedToBrowserStorage = serviceManager.store.getState().persistedToBrowserStorage;\n  return () => {\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = serviceManager.store.getState();\n    const persistChatSession = previousPersistedToBrowserStorage !== persistedToBrowserStorage;\n    if (persistChatSession) {\n      previousPersistedToBrowserStorage = persistedToBrowserStorage;\n      serviceManager.userSessionStorageService.persistChatSession(persistedToBrowserStorage.chatState);\n      serviceManager.userSessionStorageService.persistLauncherSession(persistedToBrowserStorage.launcherState);\n    }\n  };\n}\n\nfunction createHandleWindowTitle(serviceManager) {\n  const {store: store} = serviceManager;\n  let originalTitle;\n  let changeTitleTimer;\n  let previousState = store.getState();\n  return () => {\n    const state = store.getState();\n    const {agentState: agentState} = store.getState();\n    const {numUnreadMessages: numUnreadMessages} = agentState;\n    if (numUnreadMessages !== previousState.agentState.numUnreadMessages) {\n      if (!numUnreadMessages) {\n        clearTimeout(changeTitleTimer);\n        if (originalTitle) {\n          window.document.title = originalTitle;\n          originalTitle = null;\n        }\n      } else {\n        clearTimeout(changeTitleTimer);\n        if (!originalTitle) {\n          originalTitle = window.document.title;\n        }\n        window.document.title = state.languagePack.agent_newMessage;\n        changeTitleTimer = setTimeout(() => {\n          window.document.title = `(${numUnreadMessages}) ${originalTitle}`;\n        }, UNREAD_COUNT_TITLE_TIME);\n      }\n    }\n    previousState = state;\n  };\n}\n\nexport { copyToSessionStorage, createHandleWindowTitle };\n","import { DEFAULT_CUSTOM_PANEL_ID } from \"../utils/constants.js\";\n\nimport { createCustomPanelInstance } from \"./CustomPanelInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createCustomPanelManager(serviceManger) {\n  const panels = {\n    [DEFAULT_CUSTOM_PANEL_ID]: createCustomPanelInstance(serviceManger)\n  };\n  return Object.freeze({\n    getPanel() {\n      return panels[DEFAULT_CUSTOM_PANEL_ID];\n    }\n  });\n}\n\nexport { createCustomPanelManager };\n","import React, { useRef, useCallback, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { AriaAnnouncerContext } from \"../../contexts/AriaAnnouncerContext.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport { AriaAnnouncerComponent } from \"./AriaAnnouncerComponent.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AriaAnnouncerProvider(props) {\n  const intl = useIntl();\n  const {store: store} = useServiceManager();\n  const announcerRef = useRef();\n  const announcerFunction = useCallback(value => {\n    if (!announcerRef.current) {\n      setTimeout(() => announcerRef.current.announceValue(value));\n    } else {\n      announcerRef.current.announceValue(value);\n    }\n  }, []);\n  const previousAnnounceMessageRef = useRef();\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      const currentAnnounceMessage = store.getState().announceMessage;\n      if (currentAnnounceMessage !== previousAnnounceMessageRef.current) {\n        announcerFunction(currentAnnounceMessage);\n        previousAnnounceMessageRef.current = currentAnnounceMessage;\n      }\n    });\n    return unsubscribe;\n  }, [ store, announcerFunction ]);\n  return React.createElement(AriaAnnouncerContext.Provider, {\n    value: announcerFunction\n  }, props.children, React.createElement(AriaAnnouncerComponent, {\n    intl: intl,\n    ref: announcerRef\n  }));\n}\n\nexport { AriaAnnouncerProvider };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction getLauncherButtonAriaLabel(languagePack, isLauncherHidden, isTourActive) {\n  if (isTourActive) {\n    return isLauncherHidden ? languagePack.launcher_isTourOpen : languagePack.launcher_isTourClosed;\n  }\n  return isLauncherHidden ? languagePack.launcher_isOpen : languagePack.launcher_isClosed;\n}\n\nexport { getLauncherButtonAriaLabel };\n","import AiLaunch from \"@carbon/icons-react/es/AiLaunch.js\";\n\nimport ArrowUpLeft from \"@carbon/icons-react/es/ArrowUpLeft.js\";\n\nimport ChatLaunch from \"@carbon/icons-react/es/ChatLaunch.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useImperativeHandle } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { getLauncherButtonAriaLabel } from \"./launcherUtils.js\";\n\nimport { ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\nimport { PageObjectId } from \"../../utils/PageObjectId.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function Launcher(props, ref) {\n  const {onToggleOpen: onToggleOpen, languagePack: languagePack, unreadAgentCount: unreadAgentCount, intl: intl, showUnreadIndicator: showUnreadIndicator, className: className, tabIndex: tabIndex, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const launcherAvatarURL = useSelector(state => state.theme.useAITheme ? undefined : state.launcher.config.desktop.avatar_url_override);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const buttonRef = React.createRef();\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      doFocusRef(buttonRef);\n    }\n  }));\n  let ariaLabel = getLauncherButtonAriaLabel(languagePack, launcherHidden, activeTour);\n  if (unreadAgentCount !== 0) {\n    ariaLabel += `. ${intl.formatMessage({\n      id: \"icon_ariaUnreadMessages\"\n    }, {\n      count: unreadAgentCount\n    })}`;\n  }\n  let launcherAvatar = useAITheme ? React.createElement(AiLaunch, {\n    size: 24,\n    className: \"WACLauncher_svg\"\n  }) : React.createElement(ChatLaunch, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  });\n  if (launcherAvatarURL) {\n    launcherAvatar = React.createElement(\"img\", {\n      className: \"WACLauncher__Avatar\",\n      src: launcherAvatarURL,\n      alt: \"\",\n      \"aria-hidden\": true\n    });\n  }\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer\", \"WACLauncher__ButtonContainer--round\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden\n    })\n  }, React.createElement(Button, {\n    \"aria-label\": ariaLabel,\n    className: cx(\"WACLauncher__Button\", {\n      WACLauncher__TourButton: activeTour\n    }),\n    \"data-testid\": PageObjectId.LAUNCHER,\n    kind: ButtonKindEnum.PRIMARY,\n    type: \"button\",\n    onClick: onToggleOpen,\n    ref: buttonRef,\n    tabIndex: tabIndex\n  }, activeTour ? React.createElement(ArrowUpLeft, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  }) : launcherAvatar, (unreadAgentCount !== 0 || showUnreadIndicator) && React.createElement(\"div\", {\n    className: \"WAC__countIndicator\"\n  }, unreadAgentCount !== 0 ? unreadAgentCount : \"\")));\n}\n\nconst LauncherExport = forwardRef(Launcher);\n\nexport { LauncherExport as Launcher };\n","import Close from \"@carbon/icons-react/es/Close.js\";\n\nimport { Tag } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React from \"react\";\n\nimport { Launcher as LauncherExport } from \"./Launcher.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherComplex(props) {\n  const {languagePack: languagePack, intl: intl, launcherConfig: launcherConfig, launcherComplexRef: launcherComplexRef, launcherRef: launcherRef, onOpen: onOpen, onMinimize: onMinimize, unreadAgentCount: unreadAgentCount, showUnreadIndicator: showUnreadIndicator, desktopLauncherIsExpanded: desktopLauncherIsExpanded, launcherHidden: launcherHidden, activeTour: activeTour, className: className} = props;\n  const {launcher_desktopGreeting: launcher_desktopGreeting, launcher_closeButton: launcher_closeButton, launcher_ariaIsExpanded: launcher_ariaIsExpanded} = languagePack;\n  function getLauncherContent() {\n    if (launcherConfig.desktop.title) {\n      return launcherConfig.desktop.title;\n    }\n    return launcher_desktopGreeting;\n  }\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer\", \"WACLauncherComplex__Container\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden\n    }),\n    ref: launcherComplexRef\n  }, React.createElement(\"button\", {\n    className: \"WACLauncherComplex__ContentButton\",\n    type: \"button\",\n    onClick: onOpen,\n    disabled: !desktopLauncherIsExpanded\n  }, React.createElement(\"div\", {\n    className: cx(\"WACWidget__textEllipsis\", {\n      WACLauncherComplex__Text: !launcherHidden\n    })\n  }, getLauncherContent())), React.createElement(LauncherExport, {\n    languagePack: languagePack,\n    intl: intl,\n    ref: launcherRef,\n    onToggleOpen: onOpen,\n    className: \"WACLauncherComplex__SmallLauncherContainer\",\n    unreadAgentCount: unreadAgentCount,\n    showUnreadIndicator: showUnreadIndicator,\n    launcherHidden: launcherHidden,\n    activeTour: activeTour\n  }), React.createElement(Tag, {\n    className: \"WACLauncher__CloseButton\",\n    \"aria-label\": launcher_ariaIsExpanded,\n    onClick: onMinimize,\n    disabled: !desktopLauncherIsExpanded\n  }, React.createElement(\"div\", {\n    className: \"WACLauncher__CloseButtonInnerWrapper\"\n  }, React.createElement(Close, {\n    className: \"WACLauncher__CloseButtonIcon\"\n  }), launcher_closeButton)));\n}\n\nexport { LauncherComplex };\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { useOnMount } from \"../../hooks/useOnMount.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { BOUNCING_ANIMATION_TIMEOUTS } from \"../../../../types/config/LauncherConfig.js\";\n\nimport { Launcher as LauncherExport } from \"./Launcher.js\";\n\nimport { LauncherComplex } from \"./LauncherComplex.js\";\n\nimport { LauncherType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst TIME_FOR_MINIMIZE_ANIMATION = 400;\n\nconst TIME_FOR_BOUNCE_ANIMATION = 500;\n\nconst LauncherDesktopContainer = props => {\n  const {launcherRef: launcherRef, onDoToggle: onDoToggle, requestFocus: requestFocus, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const intl = useIntl();\n  const browserLauncherState = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const {desktopLauncherWasMinimized: desktopLauncherWasMinimized, desktopLauncherIsExpanded: desktopLauncherIsExpanded, bounceTurn: bounceTurn, showUnreadIndicator: showUnreadIndicator, viewState: viewState} = browserLauncherState;\n  const launcherState = useSelector(state => state.launcher);\n  const launcherConfig = launcherState.config;\n  const {time_to_expand: time_to_expand, new_expand_time: new_expand_time} = launcherConfig.desktop;\n  const isExpandedLauncherEnabled = launcherConfig.desktop.is_on;\n  const unreadAgentCount = useSelector(state => state.agentState.numUnreadMessages);\n  const [smallLauncherClassName, setSmallLauncherClassName] = useState(\"\");\n  const [complexLauncherClassName, setComplexLauncherClassName] = useState(\"\");\n  const launcherComplexRef = useRef();\n  const launcherHiddenRef = useRef();\n  launcherHiddenRef.current = launcherHidden;\n  const animateOnceVisible = useRef(false);\n  const bounceTurnRef = useRef();\n  bounceTurnRef.current = bounceTurn;\n  const animationStartTimerRef = useRef();\n  const animationFinishedTimerRef = useRef();\n  const firstBounceAnimationStartTimerRef = useRef();\n  const firstBounceAnimationFinishedTimerRef = useRef();\n  const secondBounceAnimationStartTimerRef = useRef();\n  const secondBounceAnimationFinishedTimerRef = useRef();\n  const determineLauncherHeight = useCallback(() => {\n    const expandedLauncherHeight = `${launcherComplexRef.current?.offsetHeight}px`;\n    if (launcherComplexRef.current?.style?.setProperty) {\n      launcherComplexRef.current.style.setProperty(\"--cds-chat-LAUNCHER-desktop-expanded-height\", expandedLauncherHeight);\n    }\n  }, []);\n  const startExpandLauncher = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"desktopLauncherIsExpanded\", true));\n      determineLauncherHeight();\n      setComplexLauncherClassName(\"WACLauncherComplex__Container--introAnimation\");\n    }\n  }, [ determineLauncherHeight, serviceManager.store ]);\n  const setExpandAnimationTimers = useCallback(() => {\n    animationStartTimerRef.current = setTimeout(() => {\n      startExpandLauncher();\n    }, time_to_expand);\n  }, [ time_to_expand, startExpandLauncher ]);\n  const clearExpandAnimationTimers = useCallback(() => {\n    clearTimeout(animationStartTimerRef.current);\n    clearTimeout(animationFinishedTimerRef.current);\n  }, []);\n  const startBounceAnimation = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--bounceAnimation\");\n    }\n  }, []);\n  const finishBounceAnimation = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n      bounceTurnRef.current++;\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", bounceTurnRef.current));\n    }\n  }, [ serviceManager.store ]);\n  const setBounceAnimationTimers = useCallback(() => {\n    if (bounceTurnRef.current === 1) {\n      firstBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0]);\n      firstBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + TIME_FOR_BOUNCE_ANIMATION);\n      secondBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + BOUNCING_ANIMATION_TIMEOUTS[1]);\n      secondBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + BOUNCING_ANIMATION_TIMEOUTS[1] + TIME_FOR_BOUNCE_ANIMATION);\n    } else if (bounceTurnRef.current === 2) {\n      secondBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[1]);\n      secondBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[1] + TIME_FOR_BOUNCE_ANIMATION);\n    }\n  }, [ finishBounceAnimation, startBounceAnimation ]);\n  const clearBounceAnimationTimers = useCallback(() => {\n    clearTimeout(firstBounceAnimationStartTimerRef.current);\n    clearTimeout(firstBounceAnimationFinishedTimerRef.current);\n    clearTimeout(secondBounceAnimationStartTimerRef.current);\n    clearTimeout(secondBounceAnimationFinishedTimerRef.current);\n  }, []);\n  const setDefaultLauncherState = useCallback(() => {\n    clearExpandAnimationTimers();\n    serviceManager.store.dispatch(actions.setLauncherMinimized());\n    clearBounceAnimationTimers();\n    serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", 3));\n    animateOnceVisible.current = false;\n    setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n  }, [ clearBounceAnimationTimers, clearExpandAnimationTimers, serviceManager.store ]);\n  useOnMount(() => {\n    if (desktopLauncherIsExpanded) {\n      animateOnceVisible.current = true;\n    } else if (!desktopLauncherWasMinimized && isExpandedLauncherEnabled) {\n      setExpandAnimationTimers();\n      return () => {\n        clearExpandAnimationTimers();\n      };\n    } else if (desktopLauncherWasMinimized && bounceTurn !== 3) {\n      setBounceAnimationTimers();\n      return () => {\n        clearBounceAnimationTimers();\n      };\n    }\n    return undefined;\n  });\n  useEffect(() => {\n    if (viewState.launcher && animateOnceVisible.current) {\n      determineLauncherHeight();\n      setComplexLauncherClassName(\"WACLauncherComplex__Container--simpleAnimation\");\n      animateOnceVisible.current = false;\n    }\n  }, [ determineLauncherHeight, viewState.launcher ]);\n  useEffect(() => {\n    if (viewState.mainWindow || viewState.tour) {\n      setDefaultLauncherState();\n    }\n  }, [ viewState, setDefaultLauncherState ]);\n  useEffect(() => {\n    if (new_expand_time) {\n      clearBounceAnimationTimers();\n      clearExpandAnimationTimers();\n      setExpandAnimationTimers();\n      serviceManager.store.dispatch(actions.setLauncherConfigProperty(\"new_expand_time\", false, LauncherType.DESKTOP));\n    }\n  }, [ animationFinishedTimerRef, animationStartTimerRef, new_expand_time, setExpandAnimationTimers, clearExpandAnimationTimers, clearBounceAnimationTimers, serviceManager.store ]);\n  const prevLauncherTitle = usePrevious(launcherConfig.desktop.title);\n  useEffect(() => {\n    if (prevLauncherTitle !== launcherConfig.desktop.title && (launcherConfig.desktop.title || prevLauncherTitle)) {\n      determineLauncherHeight();\n    }\n  }, [ determineLauncherHeight, launcherConfig, prevLauncherTitle ]);\n  const onMinimize = useCallback(() => {\n    setComplexLauncherClassName(\"WACLauncherComplex__Container--closeAnimation\");\n    setTimeout(() => {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n      serviceManager.store.dispatch(actions.setLauncherMinimized());\n      setTimeout(requestFocus);\n    }, TIME_FOR_MINIMIZE_ANIMATION);\n  }, [ requestFocus, serviceManager.store ]);\n  const onOpen = useCallback(() => {\n    setDefaultLauncherState();\n    onDoToggle();\n  }, [ onDoToggle, setDefaultLauncherState ]);\n  let launcher;\n  if (desktopLauncherIsExpanded) {\n    launcher = React.createElement(LauncherComplex, {\n      languagePack: languagePack,\n      intl: intl,\n      launcherComplexRef: launcherComplexRef,\n      launcherRef: launcherRef,\n      launcherConfig: launcherConfig,\n      onOpen: onOpen,\n      onMinimize: onMinimize,\n      unreadAgentCount: unreadAgentCount,\n      showUnreadIndicator: showUnreadIndicator,\n      desktopLauncherIsExpanded: desktopLauncherIsExpanded,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour,\n      className: complexLauncherClassName\n    });\n  } else {\n    launcher = React.createElement(LauncherExport, {\n      languagePack: languagePack,\n      intl: intl,\n      ref: launcherRef,\n      onToggleOpen: onOpen,\n      unreadAgentCount: unreadAgentCount,\n      showUnreadIndicator: showUnreadIndicator,\n      className: smallLauncherClassName,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  }\n  return launcher;\n};\n\nexport { LauncherDesktopContainer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction animateWithClass(element, className, endAnimationNameOrDelay, endAnimationCallback) {\n  if (element) {\n    element.classList.add(className);\n    if (typeof endAnimationNameOrDelay === \"number\") {\n      setTimeout(() => {\n        element.classList.remove(className);\n        if (endAnimationCallback) {\n          endAnimationCallback();\n        }\n      }, endAnimationNameOrDelay);\n    } else {\n      const listener = event => {\n        if (!endAnimationNameOrDelay || event.animationName === endAnimationNameOrDelay) {\n          element.removeEventListener(\"animationend\", listener);\n          element.removeEventListener(\"animationcancel\", listener);\n          element.classList.remove(className);\n          if (endAnimationCallback) {\n            endAnimationCallback();\n          }\n        }\n      };\n      element.addEventListener(\"animationend\", listener);\n      element.addEventListener(\"animationcancel\", listener);\n    }\n  }\n}\n\nfunction setAnimationTimeouts(element, animation, timeouts, options) {\n  const {startingIndex: startingIndex, beforeAll: beforeAll, afterAll: afterAll, beforeEach: beforeEach, afterEach: afterEach} = options;\n  let index = startingIndex || 0;\n  let terminate = false;\n  let timeoutID = null;\n  function playAnimation() {\n    if (beforeAll && index === 0) {\n      beforeAll();\n    }\n    const isComplete = index === timeouts.length;\n    if (!isComplete && !terminate) {\n      timeoutID = setTimeout(setAnimationListener, timeouts[index]);\n    } else if (isComplete && afterAll) {\n      afterAll();\n    }\n  }\n  function replayAnimation() {\n    if (afterEach) {\n      afterEach();\n    }\n    index++;\n    element.removeEventListener(\"animationend\", replayAnimation);\n    element.classList.remove(animation);\n    playAnimation();\n  }\n  function setAnimationListener() {\n    if (beforeEach) {\n      beforeEach();\n    }\n    element.addEventListener(\"animationend\", replayAnimation);\n    element.classList.add(animation);\n  }\n  playAnimation();\n  return () => {\n    terminate = true;\n    clearTimeout(timeoutID);\n    element.classList.remove(animation);\n    element.removeEventListener(\"animationend\", replayAnimation);\n  };\n}\n\nexport { animateWithClass, setAnimationTimeouts };\n","import ArrowUpLeft from \"@carbon/icons-react/es/ArrowUpLeft.js\";\n\nimport ChatLaunch from \"@carbon/icons-react/es/ChatLaunch.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useState, useRef, useImperativeHandle, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useAriaAnnouncer } from \"../../hooks/useAriaAnnouncer.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { animateWithClass } from \"../../utils/animationUtils.js\";\n\nimport { IS_MOBILE } from \"../../utils/browserUtils.js\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { getLauncherButtonAriaLabel } from \"./launcherUtils.js\";\n\nimport { ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const MAX_EXTENDED_LAUNCHER_WIDTH = 400;\n\nfunction LauncherExtended(props, ref) {\n  const {unreadAgentCount: unreadAgentCount, showUnreadIndicator: showUnreadIndicator, launcherConfig: launcherConfig, isExtended: isExtended, playExtendAnimation: playExtendAnimation, onToggleOpen: onToggleOpen, onSwipeRight: onSwipeRight, onReduceEnd: onReduceEnd, className: className, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const ariaAnnouncer = useAriaAnnouncer();\n  const languagePack = useLanguagePack();\n  const intl = useIntl();\n  const launcherAvatarURL = useSelector(state => state.theme.useAITheme ? undefined : state.launcher.config.mobile.avatar_url_override);\n  const [animateExtendedState, setAnimateExtendedState] = useState(playExtendAnimation);\n  const [showGreetingMessage, setShowGreetingMessage] = useState(false);\n  const prevIsExtended = usePrevious(isExtended);\n  const buttonRef = useRef();\n  const extendedContainerRef = useRef();\n  const greetingMessageRef = useRef();\n  const textHolderRef = useRef();\n  const touchStartRef = useRef({\n    touchStartX: null,\n    touchStartY: null\n  });\n  const shouldReduceExtendedLauncher = !isExtended && prevIsExtended;\n  const extendWithAnimation = isExtended && animateExtendedState;\n  const extendWithoutAnimation = isExtended && !animateExtendedState;\n  const launcherGreetingMessage = launcherConfig.mobile.title || languagePack.launcher_mobileGreeting;\n  let ariaLabel = getLauncherButtonAriaLabel(languagePack, launcherHidden, activeTour);\n  if (unreadAgentCount !== 0) {\n    ariaLabel += `. ${intl.formatMessage({\n      id: \"icon_ariaUnreadMessages\"\n    }, {\n      count: unreadAgentCount\n    })}`;\n  }\n  let launcherAvatar = React.createElement(ChatLaunch, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  });\n  if (launcherAvatarURL) {\n    launcherAvatar = React.createElement(\"img\", {\n      className: \"WACLauncher__Avatar\",\n      src: launcherAvatarURL,\n      \"aria-hidden\": true,\n      alt: \"\"\n    });\n  }\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      doFocusRef(buttonRef);\n    },\n    launcherContainerElement: () => extendedContainerRef.current\n  }));\n  useEffect(() => {\n    const textHolderElement = textHolderRef.current;\n    const greetingMessageElement = greetingMessageRef.current;\n    const extendedContainerElement = extendedContainerRef.current;\n    calculateAndSetMaxExtendedLauncherWidth(textHolderElement, greetingMessageElement, extendedContainerElement);\n  }, [ ariaAnnouncer, extendWithoutAnimation, launcherGreetingMessage ]);\n  useEffect(() => {\n    if (isExtended) {\n      if (animateExtendedState) {\n        doFadeAnimationForElements({\n          fadeInElement: greetingMessageRef.current,\n          fadeInTime: 300\n        }, () => {\n          setAnimateExtendedState(false);\n        });\n      } else {\n        setShowGreetingMessage(true);\n      }\n      const buttonEl = buttonRef.current;\n      const handleTouchMove = event => {\n        checkIfUserSwipedRight(event.touches[0], touchStartRef.current, onSwipeRight);\n      };\n      const handleTouchStart = event => {\n        const {clientX: clientX, clientY: clientY} = event.touches[0];\n        const touchStart = touchStartRef.current;\n        touchStart.touchStartX = clientX;\n        touchStart.touchStartY = clientY;\n        buttonRef.current.addEventListener(\"touchmove\", handleTouchMove);\n      };\n      buttonEl.addEventListener(\"touchstart\", handleTouchStart);\n      return () => {\n        buttonEl.removeEventListener(\"touchmove\", handleTouchMove);\n        buttonEl.removeEventListener(\"touchstart\", handleTouchStart);\n      };\n    } else if (shouldReduceExtendedLauncher) {\n      const reduceAnimationEndListener = () => {\n        onReduceEnd();\n        setAnimateExtendedState(true);\n        extendedContainerRef.current.removeEventListener(\"animationend\", reduceAnimationEndListener);\n      };\n      extendedContainerRef.current.addEventListener(\"animationend\", reduceAnimationEndListener);\n      doFadeAnimationForElements({\n        fadeOutElement: greetingMessageRef.current\n      });\n    }\n    return undefined;\n  }, [ animateExtendedState, ariaAnnouncer, isExtended, launcherGreetingMessage, onReduceEnd, onSwipeRight, shouldReduceExtendedLauncher ]);\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer WACLauncher__ButtonContainer--round WACLauncherExtended__Container\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden,\n      \"WACLauncherExtended__Button--extended\": extendWithoutAnimation,\n      \"WACLauncherExtended__Button--extendedAnimation\": extendWithAnimation,\n      \"WACLauncherExtended__Button--reducedAnimation\": shouldReduceExtendedLauncher\n    }),\n    ref: extendedContainerRef\n  }, React.createElement(Button, {\n    \"aria-label\": ariaLabel,\n    className: cx(\"WACLauncher__Button\", \"WACLauncherExtended__Button\", {\n      WACLauncher__TourButton: activeTour\n    }),\n    kind: activeTour ? ButtonKindEnum.GHOST : ButtonKindEnum.PRIMARY,\n    type: \"button\",\n    ref: buttonRef,\n    onClick: onToggleOpen\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__WrapperContainer\"\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__Wrapper\"\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__TextHolder\",\n    ref: textHolderRef\n  }, React.createElement(\"div\", {\n    className: cx(\"WACLauncherExtended__Greeting\", {\n      \"WACLauncherExtended__Element--hidden\": !showGreetingMessage\n    }),\n    ref: greetingMessageRef\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__GreetingText\",\n    \"aria-hidden\": !isExtended\n  }, launcherGreetingMessage))), React.createElement(\"div\", {\n    className: \"WACLauncher__IconHolder\"\n  }, activeTour ? React.createElement(ArrowUpLeft, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  }) : launcherAvatar))), (unreadAgentCount !== 0 || showUnreadIndicator) && React.createElement(\"div\", {\n    className: \"WAC__countIndicator\"\n  }, unreadAgentCount !== 0 ? unreadAgentCount : \"\")));\n}\n\nfunction calculateAndSetMaxExtendedLauncherWidth(textHolderEl, greetingMessageEl, extendedContainerEl) {\n  const nonTextSpace = 68;\n  const maxLauncherExtendedWidth = getMaxLauncherExtendedWidth();\n  const maxTextHolderWidth = maxLauncherExtendedWidth - nonTextSpace + 12;\n  textHolderEl.style.setProperty(\"width\", `${maxTextHolderWidth}px`);\n  greetingMessageEl.style.setProperty(\"width\", `${maxTextHolderWidth - 12}px`);\n  greetingMessageEl.style.setProperty(\"display\", \"flex\");\n  const {clientWidth: clientWidth} = greetingMessageEl.querySelector(\".WACLauncherExtended__GreetingText\");\n  let launcherExtendedWidth = clientWidth + nonTextSpace + 1;\n  if (launcherExtendedWidth > MAX_EXTENDED_LAUNCHER_WIDTH) {\n    launcherExtendedWidth = MAX_EXTENDED_LAUNCHER_WIDTH;\n  }\n  greetingMessageEl.removeAttribute(\"style\");\n  textHolderEl.removeAttribute(\"style\");\n  extendedContainerEl.style.setProperty(\"--cds-chat--LAUNCHER-EXTENDED-width\", `${launcherExtendedWidth}px`);\n}\n\nfunction doFadeAnimationForElements({fadeOutElement: fadeOutElement, fadeInElement: fadeInElement, fadeInTime: fadeInTime = 600}, callback) {\n  if (fadeOutElement) {\n    fadeOutElement.classList.remove(\"WACLauncherExtended__Element--hidden\");\n    animateWithClass(fadeOutElement, \"WACLauncherExtended__Element--FadeOut\", 500, () => {\n      fadeOutElement.classList.add(\"WACLauncherExtended__Element--hidden\");\n      fadeOutElement.classList.remove(\"WACLauncherExtended__Element--FadeOut\");\n      if (!fadeInElement && callback) {\n        callback();\n      }\n    });\n  }\n  if (fadeInElement) {\n    setTimeout(() => {\n      fadeInElement.classList.remove(\"WACLauncherExtended__Element--hidden\");\n      animateWithClass(fadeInElement, \"WACLauncherExtended__Element--FadeIn\", 600, () => {\n        fadeInElement.classList.remove(\"WACLauncherExtended__Element--FadeIn\");\n        if (callback) {\n          callback();\n        }\n      });\n    }, fadeInTime);\n  }\n}\n\nfunction checkIfUserSwipedRight(touchList, touchStartCoordinates, callback) {\n  const {touchStartX: touchStartX, touchStartY: touchStartY} = touchStartCoordinates;\n  if (touchStartX === null || touchStartY === null) {\n    return;\n  }\n  const {clientX: touchEndX, clientY: touchEndY} = touchList;\n  const differenceX = touchEndX - touchStartX;\n  const differenceY = touchEndY - touchStartY;\n  if (Math.abs(differenceX) > Math.abs(differenceY)) {\n    if (differenceX > 0) {\n      callback();\n    }\n  }\n  touchStartCoordinates.touchStartX = null;\n  touchStartCoordinates.touchStartY = null;\n}\n\nfunction getMaxLauncherExtendedWidth() {\n  const launcherPosition = IS_MOBILE ? 32 : 64;\n  const {width: width, height: height} = window.screen;\n  const lowestValue = Math.min(height, width);\n  const extendedWidth = lowestValue - launcherPosition;\n  return Math.min(extendedWidth, MAX_EXTENDED_LAUNCHER_WIDTH);\n}\n\nconst LauncherExtendedExport = React.memo(forwardRef(LauncherExtended));\n\nexport { LauncherExtendedExport as LauncherExtended };\n","import cx from \"classnames\";\n\nimport React, { useState, useRef, useCallback, useEffect } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useOnMount } from \"../../hooks/useOnMount.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { BOUNCING_ANIMATION_TIMEOUTS } from \"../../../../types/config/LauncherConfig.js\";\n\nimport { setAnimationTimeouts } from \"../../utils/animationUtils.js\";\n\nimport { LauncherExtended as LauncherExtendedExport } from \"./LauncherExtended.js\";\n\nimport { LauncherType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherMobileContainer(props) {\n  const {launcherRef: launcherRef, onToggleOpen: onToggleOpen, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const serviceManager = useServiceManager();\n  const {config: launcherConfig} = useSelector(state => state.launcher);\n  const unreadAgentCount = useSelector(state => state.agentState.numUnreadMessages);\n  const {mobileLauncherIsExtended: isExtended, mobileLauncherWasReduced: wasReduced, mobileLauncherDisableBounce: disableBounce, bounceTurn: bounceTurn, showUnreadIndicator: showUnreadIndicator, viewState: viewState} = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const [isStartingBounceAnimation, setIsStartingBounceAnimation] = useState(false);\n  const prevIsExtended = usePrevious(isExtended);\n  const prevWasReduced = usePrevious(wasReduced);\n  const initialBounceTurn = useRef(bounceTurn).current;\n  const previouslyPlayedExtendAnimation = useRef(wasReduced).current;\n  const extendLauncherTimeoutIDRef = useRef(null);\n  const reduceLauncherTimeoutIDRef = useRef(null);\n  const endBounceAnimationRef = useRef(null);\n  const shouldBounceRef = useRef(previouslyPlayedExtendAnimation && !disableBounce);\n  const {time_to_expand: time_to_expand, new_expand_time: new_expand_time, time_to_reduce: time_to_reduce} = launcherConfig.mobile;\n  const isExpandedLauncherEnabled = launcherConfig.mobile.is_on;\n  const playExtendAnimation = prevIsExtended === undefined && !isExtended;\n  const isExtending = prevIsExtended !== undefined && !prevIsExtended && isExtended;\n  const hasReduced = prevWasReduced !== undefined && !prevWasReduced && wasReduced;\n  const disableIntroAnimation = isExtending || hasReduced || isStartingBounceAnimation;\n  const setLauncherStateAsReduced = useCallback(() => {\n    if (!wasReduced) {\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherWasReduced\", true));\n    }\n  }, [ wasReduced, serviceManager ]);\n  const reduceLauncher = useCallback(() => {\n    clearTimeouts();\n    if (isExtended) {\n      document.removeEventListener(\"scroll\", reduceLauncher);\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherIsExtended\", false));\n    }\n  }, [ isExtended, serviceManager ]);\n  const setExpandAnimationTimeout = useCallback(() => {\n    extendLauncherTimeoutIDRef.current = setTimeout(() => {\n      if (!isExtended && !isExtending) {\n        serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherWasReduced\", false));\n        serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherIsExtended\", true));\n      }\n    }, time_to_expand);\n  }, [ isExtended, isExtending, serviceManager.store, time_to_expand ]);\n  const setDefaultLauncherState = useCallback(() => {\n    const endBounceAnimation = endBounceAnimationRef.current;\n    if (endBounceAnimation) {\n      endBounceAnimation();\n      endBounceAnimationRef.current = null;\n    }\n    serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherDisableBounce\", true));\n    reduceLauncher();\n    setLauncherStateAsReduced();\n  }, [ reduceLauncher, serviceManager.store, setLauncherStateAsReduced ]);\n  useOnMount(() => {\n    if (!wasReduced && playExtendAnimation && isExpandedLauncherEnabled) {\n      setExpandAnimationTimeout();\n    } else if (shouldBounceRef.current) {\n      const launcherContainerElement = launcherRef?.current?.launcherContainerElement();\n      if (launcherContainerElement) {\n        const startRecurringBounceAnimation = () => {\n          if (shouldBounceRef.current) {\n            let turnCounter = initialBounceTurn;\n            launcherContainerElement.removeEventListener(\"animationend\", startRecurringBounceAnimation);\n            setIsStartingBounceAnimation(true);\n            endBounceAnimationRef.current = setAnimationTimeouts(launcherContainerElement, \"WACLauncher__ButtonContainer--bounceAnimation\", BOUNCING_ANIMATION_TIMEOUTS, {\n              startingIndex: initialBounceTurn - 1,\n              afterEach: () => {\n                turnCounter++;\n                serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", turnCounter));\n              },\n              afterAll: () => {\n                serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherDisableBounce\", true));\n              }\n            });\n          }\n        };\n        launcherContainerElement.addEventListener(\"animationend\", startRecurringBounceAnimation);\n      }\n    }\n  });\n  useEffect(() => {\n    if (viewState.mainWindow || viewState.tour) {\n      setDefaultLauncherState();\n    }\n  }, [ viewState, setDefaultLauncherState ]);\n  useEffect(() => {\n    if (new_expand_time) {\n      if (shouldBounceRef.current) {\n        shouldBounceRef.current = false;\n      }\n      const endBounceAnimation = endBounceAnimationRef.current;\n      if (endBounceAnimation) {\n        endBounceAnimation();\n        endBounceAnimationRef.current = null;\n      }\n      if (extendLauncherTimeoutIDRef.current) {\n        clearTimeout(extendLauncherTimeoutIDRef.current);\n      }\n      setExpandAnimationTimeout();\n      serviceManager.store.dispatch(actions.setLauncherConfigProperty(\"new_expand_time\", false, LauncherType.MOBILE));\n    }\n  }, [ setExpandAnimationTimeout, new_expand_time, serviceManager.store, shouldBounceRef ]);\n  function clearTimeouts() {\n    const extendLauncherTimeoutID = extendLauncherTimeoutIDRef.current;\n    const reduceLauncherTimeoutID = reduceLauncherTimeoutIDRef.current;\n    if (reduceLauncherTimeoutID) {\n      clearTimeout(reduceLauncherTimeoutID);\n      reduceLauncherTimeoutIDRef.current = null;\n    }\n    if (extendLauncherTimeoutID) {\n      clearTimeout(extendLauncherTimeoutID);\n      extendLauncherTimeoutIDRef.current = null;\n    }\n  }\n  const handleToggleOpen = useCallback(() => {\n    setDefaultLauncherState();\n    onToggleOpen();\n  }, [ onToggleOpen, setDefaultLauncherState ]);\n  const handleSwipeRight = useCallback(() => {\n    reduceLauncher();\n  }, [ reduceLauncher ]);\n  useEffect(() => {\n    if (isExtended) {\n      reduceLauncherTimeoutIDRef.current = setTimeout(() => {\n        reduceLauncher();\n      }, time_to_reduce);\n      document.addEventListener(\"scroll\", reduceLauncher);\n    }\n  }, [ isExtended, reduceLauncher, time_to_reduce, serviceManager ]);\n  return React.createElement(LauncherExtendedExport, {\n    className: cx({\n      \"WACLauncher__ButtonContainer--noAnimation\": disableIntroAnimation\n    }),\n    ref: launcherRef,\n    launcherConfig: launcherConfig,\n    showUnreadIndicator: showUnreadIndicator,\n    unreadAgentCount: unreadAgentCount,\n    isExtended: isExtended,\n    playExtendAnimation: playExtendAnimation,\n    onToggleOpen: handleToggleOpen,\n    onSwipeRight: handleSwipeRight,\n    onReduceEnd: setLauncherStateAsReduced,\n    launcherHidden: launcherHidden,\n    activeTour: activeTour\n  });\n}\n\nexport { LauncherMobileContainer };\n","import React, { useRef, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useEffectDidUpdate } from \"../../hooks/useEffectDidUpdate.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport \"../../../../types/state/AppState.js\";\n\nimport { IS_PHONE } from \"../../utils/browserUtils.js\";\n\nimport { LauncherDesktopContainer } from \"./LauncherDesktopContainer.js\";\n\nimport { LauncherMobileContainer } from \"./LauncherMobileContainer.js\";\n\nimport { ViewChangeReason, MainWindowOpenReason } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { ViewType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherContainer() {\n  const serviceManager = useServiceManager();\n  const launcherRef = useRef();\n  const viewState = useSelector(state => state.persistedToBrowserStorage.launcherState.viewState);\n  const initialViewChangeComplete = useSelector(state => state.initialViewChangeComplete);\n  const launcherHidden = !viewState.launcher;\n  const activeTour = useSelector(state => state.persistedToBrowserStorage.launcherState.activeTour);\n  const requestFocus = useCallback(() => {\n    launcherRef.current?.requestFocus();\n  }, [ launcherRef ]);\n  const onDoToggle = useCallback(() => {\n    if (activeTour) {\n      return serviceManager.actions.changeView(ViewType.TOUR, {\n        viewChangeReason: ViewChangeReason.LAUNCHER_CLICKED\n      });\n    }\n    return serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n      mainWindowOpenReason: MainWindowOpenReason.DEFAULT_LAUNCHER\n    });\n  }, [ activeTour, serviceManager.actions ]);\n  useEffectDidUpdate(() => {\n    if (viewState.launcher && !viewState.mainWindow && !viewState.tour && initialViewChangeComplete) {\n      launcherRef.current?.requestFocus();\n    }\n  }, [ viewState ]);\n  let launcherContainer;\n  if (IS_PHONE) {\n    launcherContainer = React.createElement(LauncherMobileContainer, {\n      launcherRef: launcherRef,\n      onToggleOpen: onDoToggle,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  } else {\n    launcherContainer = React.createElement(LauncherDesktopContainer, {\n      launcherRef: launcherRef,\n      onDoToggle: onDoToggle,\n      requestFocus: requestFocus,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  }\n  return launcherContainer;\n}\n\nexport { LauncherContainer };\n","import { useRef, useEffect } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useEffectDidUpdate(effect, deps) {\n  const hasRunRef = useRef(false);\n  useEffect(() => {\n    if (hasRunRef.current) {\n      return effect();\n    }\n    hasRunRef.current = true;\n    return undefined;\n  }, deps);\n}\n\nexport { useEffectDidUpdate };\n","import { Loading } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { useContext } from \"react\";\n\nimport { HideComponentContext } from \"../contexts/HideComponentContext.js\";\n\nimport { BotHeader as BotHeaderExport } from \"./header/BotHeader.js\";\n\nimport { HomeScreenHeader as HomeScreenHeaderExport } from \"./homeScreen/HomeScreenHeader.js\";\n\nimport { AnnounceOnMountComponent as AnnounceOnMountComponentExport } from \"./util/AnnounceOnMountComponent.js\";\n\nimport { MountChildrenOnDelay } from \"./util/MountChildrenOnDelay.js\";\n\nimport { OverlayPanelName } from \"./OverlayPanel.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HydrationPanel({onClose: onClose, languagePack: languagePack, isHydrated: isHydrated, headerDisplayName: headerDisplayName, useHomeScreenVersion: useHomeScreenVersion}) {\n  const isHidden = useContext(HideComponentContext);\n  let header;\n  if (useHomeScreenVersion) {\n    header = React.createElement(HomeScreenHeaderExport, {\n      onClose: onClose\n    });\n  } else {\n    header = React.createElement(BotHeaderExport, {\n      onClose: onClose,\n      headerDisplayName: headerDisplayName,\n      onToggleHomeScreen: null,\n      includeWriteableElement: false,\n      testIdPrefix: OverlayPanelName.HYDRATING\n    });\n  }\n  return React.createElement(\"div\", {\n    className: \"WAC WAC__hydratingContainer\"\n  }, header, React.createElement(\"div\", {\n    className: cx(\"WAC__hydrating\", \"WACPanelContent\", {\n      \"WAC__hydrating--homeScreen\": useHomeScreenVersion\n    })\n  }, !isHidden && React.createElement(MountChildrenOnDelay, {\n    delay: 400\n  }, !isHydrated && React.createElement(AnnounceOnMountComponentExport, {\n    announceOnce: languagePack.window_ariaWindowLoading\n  }), React.createElement(Loading, {\n    withOverlay: false,\n    \"aria-label\": languagePack.window_ariaWindowLoading\n  }))));\n}\n\nexport { HydrationPanel };\n","import React, { useEffect, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { BusEventType } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { useAriaAnnouncer } from \"../../hooks/useAriaAnnouncer.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS } from \"../../store/reducerUtils.js\";\n\nimport { AnimationInType, AnimationOutType } from \"../../../../types/utilities/Animation.js\";\n\nimport { consoleError } from \"../../utils/miscUtils.js\";\n\nimport { BasePanelComponent as BasePanelComponentExport } from \"../BasePanelComponent.js\";\n\nimport { OverlayPanel, OverlayPanelName } from \"../OverlayPanel.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function CustomPanel(props) {\n  const {useAITheme: useAITheme, onPanelOpenEnd: onPanelOpenEnd, onPanelCloseEnd: onPanelCloseEnd, onPanelOpenStart: onPanelOpenStart, onPanelCloseStart: onPanelCloseStart, onClose: onClose, onCloseAndRestart: onCloseAndRestart, onClickRestart: onClickRestart} = props;\n  const languagePack = useLanguagePack();\n  const {isOpen: isOpen, options: options} = useSelector(state => state.customPanelState);\n  const {title: title, hidePanelHeader: hidePanelHeader, disableDefaultCloseAction: disableDefaultCloseAction, disableAnimation: disableAnimation, onClickBack: onClickBack, onClickClose: onClickClose, onClickCloseAndRestart: onClickCloseAndRestart} = options;\n  const serviceManager = useServiceManager();\n  const ariaAnnouncer = useAriaAnnouncer();\n  const prevIsOpen = usePrevious(isOpen);\n  const openAnimation = disableAnimation ? AnimationInType.NONE : AnimationInType.SLIDE_IN_FROM_BOTTOM;\n  const closeAnimation = disableAnimation ? AnimationOutType.NONE : AnimationOutType.SLIDE_OUT_TO_BOTTOM;\n  useEffect(() => {\n    if (prevIsOpen !== isOpen && isOpen) {\n      if (!hidePanelHeader && title) {\n        ariaAnnouncer(title);\n      }\n    }\n  }, [ ariaAnnouncer, hidePanelHeader, isOpen, prevIsOpen, title ]);\n  const onClickBackLocal = useCallback(() => {\n    serviceManager.store.dispatch(actions.setCustomPanelOpen(false));\n    onClickBack?.();\n  }, [ serviceManager, onClickBack ]);\n  const onClickCloseLocal = useCallback(() => {\n    if (!disableDefaultCloseAction) {\n      checkAllowClose(serviceManager.store.getState().viewChanging);\n      onClose();\n    }\n    onClickClose?.();\n  }, [ disableDefaultCloseAction, onClickClose, onClose, serviceManager ]);\n  const onCloseAndRestartLocal = useCallback(() => {\n    if (!disableDefaultCloseAction) {\n      checkAllowClose(serviceManager.store.getState().viewChanging);\n      onCloseAndRestart();\n    }\n    onClickCloseAndRestart?.();\n  }, [ disableDefaultCloseAction, onClickCloseAndRestart, onCloseAndRestart, serviceManager ]);\n  return React.createElement(OverlayPanel, {\n    className: \"WAC__overlay--covering\",\n    onOpenStart: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_PRE_OPEN\n      }, serviceManager.instance);\n      onPanelOpenStart();\n    },\n    onOpenEnd: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_OPEN\n      }, serviceManager.instance);\n      onPanelOpenEnd();\n    },\n    onCloseStart: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_PRE_CLOSE\n      }, serviceManager.instance);\n      onPanelCloseStart();\n    },\n    onCloseEnd: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_CLOSE\n      }, serviceManager.instance);\n      onPanelCloseEnd();\n      serviceManager.store.dispatch(actions.setCustomPanelConfigOptions(DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS));\n    },\n    animationOnOpen: openAnimation,\n    animationOnClose: closeAnimation,\n    shouldOpen: isOpen,\n    serviceManager: serviceManager,\n    overlayPanelName: OverlayPanelName.CUSTOM\n  }, React.createElement(BasePanelComponentExport, {\n    className: \"WACCustomPanel\",\n    eventName: \"Custom panel opened\",\n    eventDescription: \"A user opened a custom panel.\",\n    labelBackButton: languagePack.general_returnToAssistant,\n    isOpen: isOpen,\n    title: title,\n    useAITheme: useAITheme,\n    onClickBack: onClickBackLocal,\n    onClickClose: onClickCloseLocal,\n    onClickCloseAndRestart: onCloseAndRestartLocal,\n    onClickRestart: onClickRestart,\n    hidePanelHeader: hidePanelHeader,\n    hideBackButton: options.hideBackButton,\n    hideCloseButton: options.hideCloseButton,\n    hideCloseAndRestartButton: options.hideCloseAndRestartButton,\n    testIdPrefix: OverlayPanelName.CUSTOM\n  }, React.createElement(WriteableElement, {\n    slotName: \"customPanelElement\",\n    className: \"WACCustomPanel__ContentContainer\"\n  })));\n}\n\nfunction checkAllowClose(viewChanging) {\n  if (viewChanging) {\n    const message = \"You are attempting to close Carbon AI chat from a custom panel while Carbon AI chat is currently running a view\" + \" change event which is not permitted. Please use the disableDefaultCloseAction option to disable\" + \" this behavior for the custom panel and then use onClickClose to resolve your Promise that is handling\" + \" the event; that Promise will allow you to close Carbon AI chat.\";\n    consoleError(message);\n    throw new Error(message);\n  }\n}\n\nconst CustomPanelExport = React.memo(CustomPanel);\n\nexport { CustomPanelExport as CustomPanel };\n","import \"intl-pluralrules\";\n\nimport cx from \"classnames\";\n\nimport FocusTrap from \"focus-trap-react\";\n\nimport React, { Component, Suspense } from \"react\";\n\nimport { connect } from \"react-redux\";\n\nimport { HydrationPanel } from \"../../components/HydrationPanel.js\";\n\nimport { OverlayPanel, OverlayPanelName } from \"../../components/OverlayPanel.js\";\n\nimport { CustomPanel as CustomPanelExport } from \"../../components/panels/CustomPanel.js\";\n\nimport { HideComponent } from \"../../components/util/HideComponent.js\";\n\nimport VisuallyHidden from \"../../components/util/VisuallyHidden.js\";\n\nimport { ModalPortalRootContext } from \"../../contexts/ModalPortalRootContext.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { selectIsInputToAgent, selectInputState, selectAgentDisplayState } from \"../../store/selectors.js\";\n\nimport { AnimationOutType, AnimationInType } from \"../../../../types/utilities/Animation.js\";\n\nimport { ChatWidthBreakpoint } from \"../../../../types/state/AppState.js\";\n\nimport { addClassNameToState, removeClassNameFromState } from \"../../../../types/utilities/HasAddRemoveClassName.js\";\n\nimport { IS_MOBILE, IS_IOS } from \"../../utils/browserUtils.js\";\n\nimport \"../../utils/constants.js\";\n\nimport { doFocusRef, SCROLLBAR_WIDTH } from \"../../utils/domUtils.js\";\n\nimport { arrayLastValue } from \"../../utils/lang/arrayUtils.js\";\n\nimport { createMessageRequestForText, createMessageRequestForChoice } from \"../../utils/messageUtils.js\";\n\nimport { consoleError, createDidCatchErrorData } from \"../../utils/miscUtils.js\";\n\nimport { MessageSendSource, MainWindowCloseReason } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { lazyChat, lazyCatastrophicError, lazyDisclaimer, lazyHomeScreenContainer, lazyIFramePanel, lazyViewSourcePanel, lazyBodyAndFooterPanelComponent } from \"../../../dynamic-imports/dynamic-imports.js\";\n\nimport { ViewType } from \"../../../../types/instance/apiTypes.js\";\n\nimport { CornersType } from \"../../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const Chat = lazyChat();\n\nconst CatastrophicError = lazyCatastrophicError();\n\nconst Disclaimer = lazyDisclaimer();\n\nconst HomeScreenContainer = lazyHomeScreenContainer();\n\nconst IFramePanel = lazyIFramePanel();\n\nconst ViewSourcePanel = lazyViewSourcePanel();\n\nconst BodyAndFooterPanelComponent = lazyBodyAndFooterPanelComponent();\n\nconst WIDTH_BREAKPOINT_STANDARD = \"WAC--standardWidth\";\n\nconst WIDTH_BREAKPOINT_NARROW = \"WAC--narrowWidth\";\n\nconst WIDTH_BREAKPOINT_WIDE = \"WAC--wideWidth\";\n\nclass MainWindow extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      closing: false,\n      open: this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow,\n      modalPortalHostElement: null,\n      numPanelsOpen: 0,\n      numPanelsAnimating: 0,\n      numPanelsCovering: 0,\n      isHydrationAnimationComplete: this.props.isHydrated,\n      shouldAutoFocus: this.props.config.public.shouldTakeFocusIfOpensAutomatically,\n      extraClassNames: [],\n      areModulesLoaded: false\n    };\n    this.mainWindowRef = React.createRef();\n    this.containerRef = React.createRef();\n    this.botChatRef = React.createRef();\n    this.homeScreenInputRef = React.createRef();\n    this.disclaimerRef = React.createRef();\n    this.brandingRef = React.createRef();\n    this.animationContainerRef = React.createRef();\n    this.iframePanelRef = React.createRef();\n    this.viewSourcePanelRef = React.createRef();\n    this.previousBodyVisibility = undefined;\n    this.previousBodyPosition = undefined;\n    this.onResize = () => {\n      let appChatWidthBreakpoint;\n      const height = this.containerRef?.current?.offsetHeight;\n      const width = this.containerRef?.current?.offsetWidth;\n      if (width >= 672 + 16 + 16) {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.WIDE;\n      } else if (width >= 360) {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.STANDARD;\n      } else {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.NARROW;\n      }\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatWidth\", width));\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatHeight\", height));\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatWidthBreakpoint\", appChatWidthBreakpoint));\n    };\n    this.onVisualViewportResize = () => {\n      this.updateFromVisualViewport();\n    };\n    this.updateFromVisualViewport = () => {\n      const element = this.props.serviceManager.container;\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        element.style.setProperty(\"--cds-chat-viewport-height\", `${visualViewport.height}px`);\n        element.style.setProperty(\"--cds-chat-viewport-width\", `${visualViewport.width}px`);\n        element.style.setProperty(\"--cds-chat-viewport-offsetTop\", `${visualViewport.offsetTop}px`);\n        element.style.setProperty(\"--cds-chat-viewport-offsetLeft\", `${visualViewport.offsetLeft}px`);\n      } else {\n        const height = \"100vh\";\n        element.style.setProperty(\"--cds-chat-viewport-height\", height);\n        element.style.setProperty(\"--cds-chat-viewport-width\", \"100vw\");\n        element.style.setProperty(\"--cds-chat-viewport-offsetTop\", \"0\");\n        element.style.setProperty(\"--cds-chat-viewport-offsetLeft\", \"0\");\n      }\n    };\n    this.setModalPortalHostElement = ref => {\n      if (this.state.modalPortalHostElement !== ref) {\n        this.setState({\n          modalPortalHostElement: ref\n        });\n      }\n    };\n    this.onSendInput = async (text, source, options) => {\n      const isInputToAgent = selectIsInputToAgent(this.props);\n      const {serviceManager: serviceManager} = this.props;\n      const state = serviceManager.store.getState();\n      const {files: files} = selectInputState(state);\n      if (isInputToAgent) {\n        serviceManager.humanAgentService.sendMessageToAgent(text, files);\n      } else {\n        const messageRequest = createMessageRequestForText(text);\n        serviceManager.actions.sendWithCatch(messageRequest, source, {\n          ...options\n        });\n      }\n      if (files.length) {\n        serviceManager.store.dispatch(actions.clearInputFiles(isInputToAgent));\n      }\n    };\n    this.onSendHomeButtonInput = input => {\n      const messageRequest = createMessageRequestForChoice(input);\n      this.props.serviceManager.actions.sendWithCatch(messageRequest, MessageSendSource.HOME_SCREEN_STARTER);\n    };\n    this.removeChatFromDom = () => {\n      this.containerRef.current.removeEventListener(\"animationend\", this.removeChatFromDom);\n      this.setState({\n        open: false,\n        closing: false\n      });\n    };\n    this.onRestart = async () => {\n      await this.props.serviceManager.actions.restartConversation();\n      this.requestFocus();\n    };\n    this.onClose = async () => this.doClose(false);\n    this.onCloseAndRestart = async () => this.doClose(true);\n    this.onToggleHomeScreen = () => {\n      this.props.serviceManager.store.dispatch(actions.toggleHomeScreen());\n    };\n    this.requestFocus = () => {\n      try {\n        if (this.state.shouldAutoFocus && !IS_MOBILE) {\n          if (this.getShowDisclaimer()) {\n            if (this.disclaimerRef.current) {\n              doFocusRef(this.disclaimerRef);\n            }\n          } else if (this.getShowHomeScreen()) {\n            if (this.homeScreenInputRef.current) {\n              this.homeScreenInputRef.current.takeFocus();\n            }\n          } else if (this.props.iFramePanelState.isOpen) {\n            if (this.iframePanelRef.current) {\n              this.iframePanelRef.current.requestFocus();\n            }\n          } else if (this.botChatRef.current) {\n            this.botChatRef.current.requestInputFocus();\n          }\n        }\n      } catch (error) {\n        consoleError(\"An error occurred in MainWindow.requestFocus\", error);\n      }\n    };\n    this.onUserTyping = isTyping => {\n      if (this.props.serviceManager.store.getState().persistedToBrowserStorage.chatState.agentState.isConnected) {\n        this.props.serviceManager.humanAgentService.userTyping(isTyping);\n      }\n    };\n    this.onAcceptDisclaimer = () => {\n      this.props.serviceManager.store.dispatch(actions.acceptDisclaimer());\n    };\n    this.onPanelOpenStart = coverBackground => {\n      this.setState(prevState => ({\n        numPanelsOpen: prevState.numPanelsOpen + 1,\n        numPanelsAnimating: prevState.numPanelsAnimating + 1,\n        numPanelsCovering: prevState.numPanelsCovering + (coverBackground ? 1 : 0)\n      }), this.requestFocus);\n    };\n    this.onPanelOpenEnd = () => {\n      this.setState(prevState => ({\n        numPanelsAnimating: prevState.numPanelsAnimating - 1\n      }));\n    };\n    this.onPanelCloseStart = () => {\n      this.setState(prevState => ({\n        numPanelsAnimating: prevState.numPanelsAnimating + 1\n      }), this.requestFocus);\n    };\n    this.onPanelCloseEnd = coverBackground => {\n      this.setState(prevState => ({\n        numPanelsOpen: prevState.numPanelsOpen - 1,\n        numPanelsAnimating: prevState.numPanelsAnimating - 1,\n        numPanelsCovering: prevState.numPanelsCovering - (coverBackground ? 1 : 0)\n      }));\n    };\n    this.onHydrationPanelClose = () => {\n      this.setState({\n        isHydrationAnimationComplete: true\n      }, this.requestFocus);\n    };\n  }\n  componentDidMount() {\n    const {persistedToBrowserStorage: persistedToBrowserStorage, config: config, serviceManager: serviceManager, mainWindowRef: mainWindowRef} = this.props;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {public: publicConfig} = config;\n    serviceManager.mainWindow = this;\n    mainWindowRef.current = this;\n    this.mainWindowObserver = new ResizeObserver(this.onResize);\n    this.mainWindowObserver.observe(this.containerRef.current);\n    if (IS_MOBILE && !publicConfig.disableCustomElementMobileEnhancements) {\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        visualViewport.addEventListener(\"resize\", this.onVisualViewportResize);\n        visualViewport.addEventListener(\"scroll\", this.updateFromVisualViewport);\n      }\n      this.updateFromVisualViewport();\n      this.updateBody(false);\n    }\n    this.containerRef.current.style.setProperty(\"--cds-chat-scrollbar-width\", `${SCROLLBAR_WIDTH()}px`);\n    if (viewState.mainWindow) {\n      this.loadPanels();\n    }\n  }\n  componentWillUnmount() {\n    this.mainWindowObserver.unobserve(this.containerRef.current);\n  }\n  destroy() {\n    if (IS_MOBILE && !this.props.config.public.disableCustomElementMobileEnhancements) {\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        visualViewport.removeEventListener(\"resize\", this.onVisualViewportResize);\n        visualViewport.removeEventListener(\"scroll\", this.updateFromVisualViewport);\n      }\n    }\n    this.updateBody(true);\n  }\n  componentDidUpdate(oldProps, oldState) {\n    const newProps = this.props;\n    const newState = this.state;\n    const {persistedToBrowserStorage: persistedToBrowserStorage, useCustomHostElement: useCustomHostElement, isDestroyed: isDestroyed} = newProps;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {open: open} = newState;\n    const prevViewState = oldProps.persistedToBrowserStorage.launcherState.viewState;\n    if (viewState.mainWindow !== prevViewState.mainWindow) {\n      this.updateBody(false);\n      this.updateFromVisualViewport();\n    }\n    if (isDestroyed && !oldProps.isDestroyed) {\n      this.destroy();\n    }\n    if ((oldState.areModulesLoaded !== newState.areModulesLoaded || oldProps.isHydrated !== newProps.isHydrated) && newProps.isHydrated && newState.areModulesLoaded) {\n      this.setState({\n        isHydrationAnimationComplete: true\n      }, () => {\n        requestAnimationFrame(() => {\n          this.requestFocus();\n        });\n      });\n    }\n    if (viewState.mainWindow && (!prevViewState.mainWindow || !open)) {\n      this.setState({\n        open: true\n      }, () => {\n        this.requestFocus();\n      });\n      this.loadPanels();\n    } else if (!viewState.mainWindow && prevViewState.mainWindow && oldState.open && open) {\n      this.setState({\n        closing: true\n      });\n      if (useCustomHostElement) {\n        this.removeChatFromDom();\n      } else {\n        this.containerRef.current.addEventListener(\"animationend\", this.removeChatFromDom);\n        this.requestFocus();\n      }\n    }\n    if (newProps.config.public.shouldTakeFocusIfOpensAutomatically) {\n      if (!oldProps.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage && newProps.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage && !this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: true\n        });\n      } else if (oldProps.botMessageState.localMessageIDs.length > newProps.botMessageState.localMessageIDs.length && this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: false\n        });\n      } else if (oldProps.botMessageState.localMessageIDs.length < newProps.botMessageState.localMessageIDs.length && !this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: true\n        });\n      }\n    }\n    const newLastItemID = arrayLastValue(newProps.botMessageState.localMessageIDs);\n    const oldLastItemID = arrayLastValue(oldProps.botMessageState.localMessageIDs);\n    if (newLastItemID !== oldLastItemID && newState.shouldAutoFocus) {\n      const lastMessageItem = newProps.allMessageItemsByID[newLastItemID];\n      const lastMessage = newProps.allMessagesByID[lastMessageItem?.fullMessageID];\n      if (!lastMessage?.history?.from_history) {\n        this.requestFocus();\n      }\n    }\n  }\n  componentDidCatch(error, errorInfo) {\n    this.props.serviceManager.actions.errorOccurred(createDidCatchErrorData(\"MainWindow\", error, errorInfo, true));\n  }\n  loadPanels() {\n    Promise.all([ Chat.preload(), CatastrophicError.preload(), Disclaimer.preload(), HomeScreenContainer.preload(), IFramePanel.preload(), ViewSourcePanel.preload(), BodyAndFooterPanelComponent.preload() ]).then(() => {\n      this.setState({\n        areModulesLoaded: true\n      });\n    });\n  }\n  updateBody(unmounting) {\n    if (IS_IOS && !this.props.config.public.disableCustomElementMobileEnhancements) {\n      if ((window.screen.width <= 500 || window.screen.height <= 500) && this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow && !unmounting) {\n        this.previousBodyVisibility = document.body.style.getPropertyValue(\"visibility\");\n        this.previousBodyPosition = document.body.style.getPropertyValue(\"position\");\n        document.body.style.setProperty(\"visibility\", \"hidden\", \"important\");\n        document.body.style.setProperty(\"position\", \"fixed\", \"important\");\n      } else {\n        document.body.style.setProperty(\"visibility\", this.previousBodyVisibility);\n        document.body.style.setProperty(\"position\", this.previousBodyPosition);\n      }\n    }\n  }\n  async doClose(fromCloseAndRestart) {\n    const {serviceManager: serviceManager} = this.props;\n    const {activeTour: activeTour} = serviceManager.store.getState().persistedToBrowserStorage.launcherState;\n    if (fromCloseAndRestart) {\n      const newViewState = await serviceManager.actions.changeView(ViewType.LAUNCHER, {\n        mainWindowCloseReason: MainWindowCloseReason.MAIN_WINDOW_CLOSED_AND_RESTARTED\n      });\n      if (!newViewState.mainWindow) {\n        await serviceManager.actions.restartConversation();\n      }\n    } else {\n      await serviceManager.actions.changeView(activeTour ? ViewType.TOUR : ViewType.LAUNCHER, {\n        mainWindowCloseReason: MainWindowCloseReason.DEFAULT_MINIMIZE\n      });\n    }\n  }\n  getShowHomeScreen() {\n    return this.props.homeScreenConfig.is_on && this.props.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen && !this.getShowDisclaimer();\n  }\n  getShowDisclaimer() {\n    return this.props.config.public.disclaimer?.is_on && !this.props.persistedToBrowserStorage.chatState.disclaimersAccepted[window.location.hostname];\n  }\n  doAutoScroll(options) {\n    this.botChatRef?.current?.doAutoScroll(options);\n  }\n  getMessagesScrollBottom() {\n    return this.botChatRef?.current?.getMessagesScrollBottom();\n  }\n  doScrollToMessage(messageID, animate = true) {\n    this.botChatRef.current?.doScrollToMessage(messageID, animate);\n  }\n  getMessageInput() {\n    return this.botChatRef.current?.getMessageInput();\n  }\n  getHomeScreenInput() {\n    return this.homeScreenInputRef.current?.getMessageInput();\n  }\n  addClassName(name) {\n    this.setState(addClassNameToState(name));\n  }\n  removeClassName(name) {\n    this.setState(removeClassNameFromState(name));\n  }\n  renderChat() {\n    const {isHydrated: isHydrated, config: config, chatWidthBreakpoint: chatWidthBreakpoint} = this.props;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    const showCovering = this.state.numPanelsCovering > 0 && config.public.layout?.hasContentMaxWidth && chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n    return React.createElement(\"div\", {\n      className: \"WACWidget--content\"\n    }, this.renderCustomPanel(), this.renderHydrationPanel(), isHydrated && areModulesLoaded && React.createElement(React.Fragment, null, this.renderDisclaimerPanel(), this.renderResponsePanel(), this.renderHomeScreenPanel(), this.renderIFramePanel(), this.renderViewSourcePanel(), showCovering && React.createElement(\"div\", {\n      className: \"WACBackgroundCover\"\n    }), this.renderBotChat()));\n  }\n  renderBotChat() {\n    const {botName: botName, languagePack: languagePack, config: config, serviceManager: serviceManager, botMessageState: botMessageState, agentState: agentState, allMessageItemsByID: allMessageItemsByID, isHydrated: isHydrated, locale: locale, theme: theme, headerDisplayName: headerDisplayName, headerAvatarConfig: headerAvatar} = this.props;\n    const {numPanelsAnimating: numPanelsAnimating, numPanelsOpen: numPanelsOpen, isHydrationAnimationComplete: isHydrationAnimationComplete} = this.state;\n    const inputState = selectInputState(this.props);\n    const agentDisplayState = selectAgentDisplayState(this.props);\n    const showDisclaimer = this.getShowDisclaimer();\n    let hideBotContainer;\n    if (!isHydrationAnimationComplete) {\n      hideBotContainer = true;\n    } else if (numPanelsAnimating > 0) {\n      hideBotContainer = false;\n    } else if (numPanelsOpen > 0) {\n      hideBotContainer = true;\n    }\n    return React.createElement(HideComponent, {\n      className: \"WACBotContainer\",\n      hidden: hideBotContainer\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(Chat, {\n      botName: botName,\n      headerDisplayName: headerDisplayName,\n      headerAvatarConfig: headerAvatar,\n      ref: this.botChatRef,\n      languagePack: languagePack,\n      config: config,\n      serviceManager: serviceManager,\n      onClose: this.onClose,\n      onCloseAndRestart: this.onCloseAndRestart,\n      messageState: botMessageState,\n      onSendInput: text => this.onSendInput(text, MessageSendSource.MESSAGE_INPUT),\n      agentState: agentState,\n      agentDisplayState: agentDisplayState,\n      allMessageItemsByID: allMessageItemsByID,\n      onRestart: this.onRestart,\n      isHydrated: isHydrated,\n      isHydrationAnimationComplete: isHydrationAnimationComplete && !showDisclaimer,\n      inputState: inputState,\n      onToggleHomeScreen: this.onToggleHomeScreen,\n      onUserTyping: this.onUserTyping,\n      locale: locale,\n      useAITheme: theme.useAITheme,\n      carbonTheme: theme.carbonTheme\n    })));\n  }\n  renderInnerHydrationPanel() {\n    const {botMessageState: botMessageState, serviceManager: serviceManager, languagePack: languagePack, headerDisplayName: headerDisplayName, persistedToBrowserStorage: persistedToBrowserStorage, homeScreenConfig: homeScreenConfig} = this.props;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    const useHomeScreenVersion = homeScreenConfig.is_on && !persistedToBrowserStorage.launcherState.hasSentNonWelcomeMessage;\n    return React.createElement(HydrationPanel, {\n      headerDisplayName: headerDisplayName,\n      isHydrated: botMessageState.isHydratingCounter === 0 && areModulesLoaded,\n      serviceManager: serviceManager,\n      onClose: this.onClose,\n      languagePack: languagePack,\n      useHomeScreenVersion: useHomeScreenVersion\n    });\n  }\n  renderHydrationPanel() {\n    const {botMessageState: botMessageState, serviceManager: serviceManager, catastrophicErrorType: catastrophicErrorType, persistedToBrowserStorage: persistedToBrowserStorage} = this.props;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    return React.createElement(OverlayPanel, {\n      onOpenStart: () => this.onPanelOpenStart(false),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => {\n        this.onHydrationPanelClose();\n        this.onPanelCloseEnd(false);\n      },\n      animationOnOpen: AnimationInType.NONE,\n      animationOnClose: AnimationOutType.NONE,\n      shouldOpen: (botMessageState.isHydratingCounter > 0 || !areModulesLoaded) && !catastrophicErrorType && viewState.mainWindow,\n      shouldHide: false,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.HYDRATING\n    }, this.renderInnerHydrationPanel());\n  }\n  renderCatastrophicPanel() {\n    const {serviceManager: serviceManager, botName: botName, languagePack: languagePack, headerDisplayName: headerDisplayName} = this.props;\n    return React.createElement(OverlayPanel, {\n      animationOnOpen: AnimationInType.NONE,\n      animationOnClose: AnimationOutType.NONE,\n      shouldOpen: true,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.CATASTROPHIC\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(CatastrophicError, {\n      onClose: this.onClose,\n      headerDisplayName: headerDisplayName,\n      languagePack: languagePack,\n      onRestart: this.onRestart,\n      showHeader: true,\n      botName: botName\n    })));\n  }\n  renderDisclaimerPanel() {\n    const {serviceManager: serviceManager, config: config} = this.props;\n    const showDisclaimer = this.getShowDisclaimer();\n    return config.public.disclaimer?.is_on ? React.createElement(OverlayPanel, {\n      onOpenStart: () => this.onPanelOpenStart(false),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(false),\n      animationOnOpen: AnimationInType.FADE_IN,\n      animationOnClose: AnimationOutType.FADE_OUT,\n      shouldOpen: showDisclaimer,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.DISCLAIMER\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(Disclaimer, {\n      onAcceptDisclaimer: this.onAcceptDisclaimer,\n      onClose: this.onClose,\n      disclaimerHTML: config.public.disclaimer?.disclaimerHTML,\n      disclaimerAcceptButtonRef: this.disclaimerRef\n    }))) : null;\n  }\n  renderHomeScreenPanel() {\n    const {isHydrationAnimationComplete: isHydrationAnimationComplete} = this.state;\n    const showHomeScreen = this.getShowHomeScreen();\n    return React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(HomeScreenContainer, {\n      onPanelOpenStart: () => this.onPanelOpenStart(false),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => this.onPanelCloseEnd(false),\n      onClose: this.onClose,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onSendBotInput: text => this.onSendInput(text, MessageSendSource.HOME_SCREEN_INPUT),\n      onSendButtonInput: this.onSendHomeButtonInput,\n      onRestart: this.onRestart,\n      showHomeScreen: showHomeScreen,\n      isHydrationAnimationComplete: isHydrationAnimationComplete,\n      homeScreenInputRef: this.homeScreenInputRef,\n      onToggleHomeScreen: this.onToggleHomeScreen,\n      requestFocus: this.requestFocus\n    }));\n  }\n  renderIFramePanel() {\n    const {serviceManager: serviceManager, iFramePanelState: iFramePanelState} = this.props;\n    return React.createElement(OverlayPanel, {\n      className: \"WAC__overlay--covering\",\n      onOpenStart: () => this.onPanelOpenStart(true),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(true),\n      animationOnOpen: AnimationInType.SLIDE_IN_FROM_BOTTOM,\n      animationOnClose: AnimationOutType.SLIDE_OUT_TO_BOTTOM,\n      shouldOpen: iFramePanelState.isOpen,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.IFRAME\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(IFramePanel, {\n      useAITheme: this.props.theme.useAITheme,\n      ref: this.iframePanelRef,\n      onClickClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onClickCloseAndRestart: this.onCloseAndRestart\n    })));\n  }\n  renderViewSourcePanel() {\n    const {serviceManager: serviceManager, viewSourcePanelState: viewSourcePanelState} = this.props;\n    return React.createElement(OverlayPanel, {\n      className: \"WAC__overlay--covering\",\n      onOpenStart: () => this.onPanelOpenStart(true),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(true),\n      animationOnOpen: AnimationInType.SLIDE_IN_FROM_BOTTOM,\n      animationOnClose: AnimationOutType.SLIDE_OUT_TO_BOTTOM,\n      shouldOpen: viewSourcePanelState.isOpen,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.CONVERSATIONAL_SEARCH_CITATION\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(ViewSourcePanel, {\n      ref: this.viewSourcePanelRef,\n      onClickClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onClickCloseAndRestart: this.onCloseAndRestart\n    })));\n  }\n  renderCustomPanel() {\n    return React.createElement(CustomPanelExport, {\n      useAITheme: this.props.theme.useAITheme,\n      onClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onPanelOpenStart: () => this.onPanelOpenStart(true),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => this.onPanelCloseEnd(true)\n    });\n  }\n  renderResponsePanel() {\n    if (!this.props.responsePanelState.localMessageItem) {\n      return null;\n    }\n    const {isOpen: isOpen, localMessageItem: localMessageItem, isMessageForInput: isMessageForInput} = this.props.responsePanelState;\n    const panelOptions = (localMessageItem?.item).panel;\n    const eventName = `\"Show panel\" opened`;\n    const eventDescription = \"Panel opened through panel response type\";\n    const overlayPanelName = OverlayPanelName.PANEL_RESPONSE;\n    return React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(BodyAndFooterPanelComponent, {\n      eventName: eventName,\n      eventDescription: eventDescription,\n      overlayPanelName: overlayPanelName,\n      testIdPrefix: overlayPanelName,\n      isOpen: isOpen,\n      isMessageForInput: isMessageForInput,\n      localMessageItem: localMessageItem,\n      title: panelOptions?.title,\n      showAnimations: panelOptions?.show_animations,\n      useAITheme: this.props.theme.useAITheme,\n      requestFocus: this.requestFocus,\n      onClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onClickBack: () => this.props.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(false)),\n      onPanelOpenStart: () => this.onPanelOpenStart(true),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => {\n        this.onPanelCloseEnd(true);\n        this.props.serviceManager.store.dispatch(actions.setResponsePanelContent(null, false));\n      }\n    }));\n  }\n  renderWidget() {\n    const {serviceManager: serviceManager, useCustomHostElement: useCustomHostElement, locale: locale, catastrophicErrorType: catastrophicErrorType, config: config, isHydrated: isHydrated, theme: theme, chatWidthBreakpoint: chatWidthBreakpoint, layout: layout, languagePack: languagePack} = this.props;\n    const {closing: closing, open: open, extraClassNames: extraClassNames} = this.state;\n    const localeClassName = `WACLocale-${locale || \"en\"}`;\n    const showGlass = config.public.enableFocusTrap && open && !config.public.hideCloseButton && !config.public.headerConfig.hideMinimizeButton;\n    const trapActive = Boolean(showGlass && isHydrated);\n    const isWideWidth = chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n    return React.createElement(FocusTrap, {\n      active: trapActive\n    }, React.createElement(\"div\", {\n      className: cx(\"WACMainWindow\", \"WACWidget__FocusTrapContainer\", ...extraClassNames),\n      ref: this.mainWindowRef\n    }, showGlass && React.createElement(\"div\", {\n      className: \"WACWidget__FocusTrapGlass\"\n    }), React.createElement(\"div\", {\n      id: `WACWidget${serviceManager.namespace.suffix}`,\n      className: cx(`WACWidget ${localeClassName}`, {\n        \"WACWidget--rounded\": theme.corners === CornersType.ROUND,\n        \"WACWidget--defaultElement\": !useCustomHostElement,\n        \"WACWidget--launched\": !closing,\n        \"WACWidget--closing\": closing,\n        \"WACWidget--closed\": !open,\n        \"WACWidget--maxWidth\": isWideWidth && layout.hasContentMaxWidth,\n        [WIDTH_BREAKPOINT_NARROW]: chatWidthBreakpoint === ChatWidthBreakpoint.NARROW,\n        [WIDTH_BREAKPOINT_STANDARD]: chatWidthBreakpoint === ChatWidthBreakpoint.STANDARD,\n        [WIDTH_BREAKPOINT_WIDE]: isWideWidth\n      }),\n      ref: this.containerRef\n    }, React.createElement(VisuallyHidden, null, React.createElement(\"h1\", null, languagePack.window_title)), catastrophicErrorType && this.renderCatastrophicPanel(), !catastrophicErrorType && React.createElement(\"div\", {\n      ref: this.animationContainerRef,\n      className: \"WACWidget__animationContainer\",\n      onScroll: () => {\n        if (this.animationContainerRef.current.scrollTop !== 0) {\n          this.animationContainerRef.current.scrollTop = 0;\n        }\n      }\n    }, this.renderChat()), React.createElement(\"div\", {\n      className: \"WACMainWindowModalHost\",\n      ref: this.setModalPortalHostElement\n    }))));\n  }\n  render() {\n    return React.createElement(ModalPortalRootContext.Provider, {\n      value: this.state.modalPortalHostElement\n    }, this.renderWidget());\n  }\n}\n\nvar MainWindow$1 = connect(state => state, null, null, {\n  forwardRef: true\n})(MainWindow);\n\nexport { MainWindow$1 as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction addClassNameToState(name) {\n  return previousState => {\n    const currentIndex = previousState.extraClassNames.indexOf(name);\n    if (currentIndex === -1) {\n      return {\n        extraClassNames: [ ...previousState.extraClassNames, name ]\n      };\n    }\n    return null;\n  };\n}\n\nfunction removeClassNameFromState(name) {\n  return previousState => ({\n    extraClassNames: previousState.extraClassNames.filter(value => value !== name)\n  });\n}\n\nexport { addClassNameToState, removeClassNameFromState };\n","import \"intl-pluralrules\";\n\nimport cx from \"classnames\";\n\nimport React, { useState, useMemo, useRef, Suspense } from \"react\";\n\nimport { RawIntlProvider, useIntl } from \"react-intl\";\n\nimport { Provider, useSelector, useDispatch } from \"react-redux\";\n\nimport { AriaAnnouncerProvider } from \"../components/aria/AriaAnnouncerProvider.js\";\n\nimport { LauncherContainer } from \"../components/launcher/LauncherContainer.js\";\n\nimport { LanguagePackContext } from \"../contexts/LanguagePackContext.js\";\n\nimport { WindowSizeContext } from \"../contexts/WindowSizeContext.js\";\n\nimport { ServiceManagerContext } from \"../contexts/ServiceManagerContext.js\";\n\nimport { useOnMount } from \"../hooks/useOnMount.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { IS_PHONE_IN_PORTRAIT_MODE, IS_PHONE } from \"../utils/browserUtils.js\";\n\nimport { consoleDebug, consoleError } from \"../utils/miscUtils.js\";\n\nimport { convertCSSVariablesToString, getThemeClassNames } from \"../utils/styleUtils.js\";\n\nimport MainWindow from \"./main/MainWindow.js\";\n\nimport { lazyTourComponent } from \"../../dynamic-imports/dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const TourContainerLazy = lazyTourComponent();\n\nfunction App({serviceManager: serviceManager, hostElement: hostElement, applicationStyles: applicationStyles, fontStyles: fontStyles}) {\n  const {store: store} = serviceManager;\n  const {config: config} = store.getState();\n  if (config.public.debug) {\n    consoleDebug(\"[render] Called render\");\n  }\n  const combinedStyles = `${fontStyles ? `${fontStyles} ` : \"\"}${applicationStyles}`;\n  return React.createElement(Provider, {\n    store: store\n  }, React.createElement(AppContainer, {\n    serviceManager: serviceManager,\n    hostElement: hostElement,\n    applicationStyles: combinedStyles\n  }));\n}\n\nfunction AppContainer({serviceManager: serviceManager, hostElement: hostElement, applicationStyles: applicationStyles}) {\n  const languagePack = useSelector(state => state.languagePack);\n  const cssVariableOverrides = useSelector(state => state.cssVariableOverrides);\n  const theme = useSelector(state => state.theme);\n  const config = useSelector(state => state.config);\n  const layout = useSelector(state => state.layout);\n  const {namespace: namespace} = serviceManager;\n  const {originalName: originalName} = namespace;\n  const dispatch = useDispatch();\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  const cssVariableOverrideString = useMemo(() => convertCSSVariablesToString(cssVariableOverrides), [ cssVariableOverrides ]);\n  const dir = document.dir || \"auto\";\n  useOnMount(() => {\n    const windowListener = () => {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n    window.addEventListener(\"resize\", windowListener);\n    const visibilityListener = () => {\n      dispatch(actions.setIsBrowserPageVisible(document.visibilityState === \"visible\"));\n    };\n    document.addEventListener(\"visibilitychange\", visibilityListener);\n    return () => {\n      window.removeEventListener(\"resize\", windowListener);\n      document.removeEventListener(\"visibilitychange\", visibilityListener);\n    };\n  });\n  return React.createElement(\"div\", {\n    className: \"WACContainer\",\n    \"data-namespace\": originalName,\n    ref: node => {\n      if (node && hostElement) {\n        node.style.setProperty(\"height\", \"100%\", \"important\");\n        node.style.setProperty(\"width\", \"100%\", \"important\");\n      }\n    }\n  }, React.createElement(\"div\", {\n    className: \"WACContainer--styles\"\n  }, React.createElement(\"style\", {\n    \"data-base-styles\": \"true\",\n    nonce: config.public.cspNonce\n  }, applicationStyles || `.WACContainer { visibility: hidden; }`), React.createElement(\"style\", {\n    \"data-variables-custom\": \"true\",\n    nonce: config.public.cspNonce\n  }, cssVariableOverrideString)), React.createElement(\"div\", {\n    className: cx(`WACContainer--render`, getThemeClassNames(theme), {\n      \"WACContainer-disableMobileEnhancements\": hostElement && config.public.disableCustomElementMobileEnhancements,\n      \"WAC-isPhone\": IS_PHONE && !config.public.disableCustomElementMobileEnhancements,\n      \"WAC-isPhonePortraitMode\": IS_PHONE_IN_PORTRAIT_MODE && !config.public.disableCustomElementMobileEnhancements,\n      \"WAC--frameless\": !layout?.showFrame\n    }),\n    dir: dir\n  }, React.createElement(WindowSizeContext.Provider, {\n    value: windowSize\n  }, React.createElement(ServiceManagerContext.Provider, {\n    value: serviceManager\n  }, React.createElement(RawIntlProvider, {\n    value: serviceManager.intl\n  }, React.createElement(LanguagePackContext.Provider, {\n    value: languagePack\n  }, React.createElement(AriaAnnouncerProvider, null, React.createElement(MainContainer, {\n    serviceManager: serviceManager,\n    hostElement: hostElement\n  }))))))));\n}\n\nfunction MainContainer(props) {\n  const {hostElement: hostElement, serviceManager: serviceManager} = props;\n  const showLauncher = useSelector(state => state.launcher.config.is_on);\n  const {viewState: viewState} = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const tourContainerRef = useRef();\n  const mainWindowRef = useRef();\n  const showTour = viewState.tour;\n  const showedTourOnce = useRef(showTour);\n  showedTourOnce.current = showTour || showedTourOnce.current;\n  const intl = useIntl();\n  const namespace = serviceManager.namespace.originalName;\n  const languageKey = namespace ? \"window_ariaChatRegionNamespace\" : \"window_ariaChatRegion\";\n  const regionLabel = intl.formatMessage({\n    id: languageKey\n  }, {\n    namespace: namespace\n  });\n  useOnMount(() => {\n    function requestFocus() {\n      try {\n        const {persistedToBrowserStorage: persistedToBrowserStorage} = serviceManager.store.getState();\n        const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n        if (viewState.tour) {\n          tourContainerRef.current?.requestFocus();\n        } else if (viewState.mainWindow) {\n          mainWindowRef.current?.requestFocus();\n        }\n      } catch (error) {\n        consoleError(\"An error occurred in App.requestFocus\", error);\n      }\n    }\n    serviceManager.appWindow = {\n      requestFocus: requestFocus\n    };\n  });\n  return React.createElement(\"div\", {\n    className: \"WACWidget__regionContainer\",\n    role: \"region\",\n    \"aria-label\": regionLabel\n  }, React.createElement(MainWindow, {\n    mainWindowRef: mainWindowRef,\n    useCustomHostElement: Boolean(hostElement),\n    serviceManager: serviceManager\n  }), showedTourOnce.current && React.createElement(Suspense, {\n    fallback: null\n  }, React.createElement(TourContainerLazy, {\n    ref: tourContainerRef\n  })), showLauncher && React.createElement(LauncherContainer, null));\n}\n\nexport { App as default };\n","import React from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function UserDefinedResponsePortalsContainer({chatInstance: chatInstance, renderUserDefinedResponse: renderUserDefinedResponse, userDefinedResponseEventsBySlot: userDefinedResponseEventsBySlot}) {\n  return renderUserDefinedResponse ? Object.entries(userDefinedResponseEventsBySlot).map(([slot, slotState]) => {\n    const {element: element} = slotState;\n    if (!element) {\n      return null;\n    }\n    return React.createElement(UserDefinedResponseComponentPortal, {\n      key: slot,\n      hostElement: element\n    }, renderUserDefinedResponse(slotState, chatInstance));\n  }) : null;\n}\n\nfunction UserDefinedResponseComponentPortal({hostElement: hostElement, children: children}) {\n  return ReactDOM.createPortal(children, hostElement);\n}\n\nconst UserDefinedResponsePortalsContainerExport = React.memo(UserDefinedResponsePortalsContainer);\n\nexport { UserDefinedResponsePortalsContainerExport as UserDefinedResponsePortalsContainer };\n","import React from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function WriteableElementsPortalsContainer({chatInstance: chatInstance, renderResponseMap: renderResponseMap}) {\n  return React.createElement(React.Fragment, null, Object.keys(chatInstance.writeableElements).map(key => {\n    const responseItem = renderResponseMap[key];\n    return responseItem ? React.createElement(WriteableElementsComponentPortal, {\n      key: key,\n      hostElement: chatInstance.writeableElements[key]\n    }, responseItem) : null;\n  }));\n}\n\nfunction WriteableElementsComponentPortal({hostElement: hostElement, children: children}) {\n  return ReactDOM.createPortal(children, hostElement);\n}\n\nconst WriteableElementsPortalsContainerExport = React.memo(WriteableElementsPortalsContainer);\n\nexport { WriteableElementsPortalsContainerExport as WriteableElementsPortalsContainer };\n","import isEqual from \"lodash-es/isEqual.js\";\n\nimport React, { useState, useRef, useEffect } from \"react\";\n\nimport Chat from \"../../shared/Chat.js\";\n\nimport { instantiateWidget } from \"../../shared/chatEntryFunctions.js\";\n\nimport App from \"../../shared/containers/App.js\";\n\nimport { sleep } from \"../../shared/utils/lang/promiseUtils.js\";\n\nimport { UserDefinedResponsePortalsContainer as UserDefinedResponsePortalsContainerExport } from \"./UserDefinedResponsePortalsContainer.js\";\n\nimport { WriteableElementsPortalsContainer as WriteableElementsPortalsContainerExport } from \"./WriteableElementsPortalsContainer.js\";\n\nimport { BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AppContainer({config: config, onBeforeRender: onBeforeRender, onAfterRender: onAfterRender, renderUserDefinedResponse: renderUserDefinedResponse, renderWriteableElements: renderWriteableElements, container: container, setParentInstance: setParentInstance, element: element}) {\n  const [instance, setInstance] = useState(null);\n  const [renderProps, setRenderProps] = useState(null);\n  const [applicationStyles, setApplicationStyles] = useState(null);\n  const setInstances = instance => {\n    setInstance(instance);\n    setParentInstance?.(instance);\n  };\n  const [userDefinedResponseEventsBySlot, setUserDefinedResponseEventsBySlot] = useState({});\n  const managedWebChatRef = useRef(null);\n  const previousConfigRef = useRef(null);\n  useEffect(() => {\n    const previousConfig = previousConfigRef.current;\n    previousConfigRef.current = config;\n    async function render({serviceManager: serviceManager}) {\n      const applicationStyles = await loadStyles();\n      serviceManager.container = container;\n      if (serviceManager.customHostElement) {\n        container.style.setProperty(\"width\", \"100%\", \"important\");\n        container.style.setProperty(\"height\", \"100%\", \"important\");\n      } else {\n        container.style.setProperty(\"width\", \"0\", \"important\");\n        container.style.setProperty(\"height\", \"0\", \"important\");\n      }\n      setApplicationStyles(applicationStyles);\n      setRenderProps({\n        serviceManager: serviceManager\n      });\n      await sleep(0);\n    }\n    if (!isEqual(previousConfig, config)) {\n      const managedWebChat = {\n        instance: null,\n        shouldDestroy: false,\n        config: config\n      };\n      if (config) {\n        loadChat({\n          managedWebChatRef: managedWebChatRef,\n          managedWebChat: managedWebChat,\n          render: render,\n          setInstance: setInstances,\n          onBeforeRender: onBeforeRender,\n          onAfterRender: onAfterRender,\n          setUserDefinedResponseEventsBySlot: setUserDefinedResponseEventsBySlot,\n          element: element\n        });\n      }\n      return () => {\n        destroyWebChat(managedWebChat, setInstances);\n        previousConfigRef.current = null;\n      };\n    }\n    return undefined;\n  }, [ config, container ]);\n  if (renderProps && instance) {\n    return React.createElement(React.Fragment, null, React.createElement(App, {\n      serviceManager: renderProps.serviceManager,\n      hostElement: renderProps.serviceManager.customHostElement,\n      applicationStyles: applicationStyles\n    }), renderUserDefinedResponse && React.createElement(UserDefinedResponsePortalsContainerExport, {\n      chatInstance: instance,\n      renderUserDefinedResponse: renderUserDefinedResponse,\n      userDefinedResponseEventsBySlot: userDefinedResponseEventsBySlot\n    }), renderWriteableElements && React.createElement(WriteableElementsPortalsContainerExport, {\n      chatInstance: instance,\n      renderResponseMap: renderWriteableElements\n    }));\n  }\n  return null;\n}\n\nasync function destroyWebChat(managedWebChat, setInstance) {\n  if (managedWebChat) {\n    if (managedWebChat.instance) {\n      managedWebChat.instance.destroy();\n      await sleep(0);\n    }\n    managedWebChat.shouldDestroy = true;\n    managedWebChat.instance = null;\n  }\n  setInstance(null);\n  await sleep(0);\n}\n\nfunction addUserDefinedResponseHandler(webChatInstance, setUserDefinedResponseEventsBySlot) {\n  console.log({\n    webChatInstance: webChatInstance\n  });\n  function userDefinedResponseHandler(event) {\n    setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n      ...userDefinedEventsBySlot,\n      [event.data.slot]: {\n        fullMessage: event.data.fullMessage,\n        messageItem: event.data.message,\n        element: event.data.element\n      }\n    }));\n  }\n  function userDefinedChunkHandler(event) {\n    if (\"complete_item\" in event.data.chunk) {\n      const messageItem = event.data.chunk.complete_item;\n      setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n        ...userDefinedEventsBySlot,\n        [event.data.slot]: {\n          messageItem: messageItem,\n          element: event.data.element\n        }\n      }));\n    } else if (\"partial_item\" in event.data.chunk) {\n      const itemChunk = event.data.chunk.partial_item;\n      setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n        ...userDefinedEventsBySlot,\n        [event.data.slot]: {\n          partialItems: [ ...userDefinedEventsBySlot[event.data.slot]?.partialItems || [], itemChunk ],\n          element: event.data.element\n        }\n      }));\n    }\n  }\n  function restartHandler() {\n    setUserDefinedResponseEventsBySlot({});\n  }\n  webChatInstance.on({\n    type: BusEventType.CHUNK_USER_DEFINED_RESPONSE,\n    handler: userDefinedChunkHandler\n  });\n  webChatInstance.on({\n    type: BusEventType.USER_DEFINED_RESPONSE,\n    handler: userDefinedResponseHandler\n  });\n  webChatInstance.on({\n    type: BusEventType.RESTART_CONVERSATION,\n    handler: restartHandler\n  });\n}\n\nasync function loadChat({managedWebChatRef: managedWebChatRef, managedWebChat: managedWebChat, render: render, setInstance: setInstance, onBeforeRender: onBeforeRender, onAfterRender: onAfterRender, setUserDefinedResponseEventsBySlot: setUserDefinedResponseEventsBySlot, element: element}) {\n  await destroyWebChat(managedWebChatRef.current, setInstance);\n  managedWebChatRef.current = managedWebChat;\n  if (managedWebChat.shouldDestroy) {\n    await destroyWebChat(managedWebChat, setInstance);\n    return;\n  }\n  const widget = await instantiateWidget(managedWebChat.config, () => Promise.resolve(Chat), Promise.resolve(render), element);\n  const instance = await widget.start();\n  addUserDefinedResponseHandler(instance, setUserDefinedResponseEventsBySlot);\n  onBeforeRender?.(instance);\n  await instance.render();\n  onAfterRender?.(instance);\n  setInstance(instance);\n  managedWebChat.instance = instance;\n  if (managedWebChat.shouldDestroy) {\n    await destroyWebChat(managedWebChat, setInstance);\n  }\n}\n\nconst AppContainerExport = React.memo(AppContainer);\n\nconst loadBaseStyles = async () => {\n  const {default: styles} = await import(\"../../shared/styles/export.scss.js\");\n  return styles;\n};\n\nconst loadCarbon = async () => {\n  const {default: carbon} = await import(\"../../shared/styles/export.carbon.scss.js\");\n  return carbon;\n};\n\nasync function loadStyles() {\n  const [styles, carbonStyles] = await Promise.all([ loadBaseStyles(), loadCarbon() ]);\n  return carbonStyles + styles;\n}\n\nexport { AppContainerExport as AppContainer };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const AriaAnnouncerContext = React.createContext(null);\n\nexport { AriaAnnouncerContext };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst CSS_CLASS_PREFIX = \"cds--aichat\";\n\nconst WEB_COMPONENT_PREFIX = \"cds-aichat\";\n\nexport { CSS_CLASS_PREFIX, WEB_COMPONENT_PREFIX };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar UUIDType;\n\n(function(UUIDType) {\n  UUIDType[UUIDType[\"MISCELLANEOUS\"] = 1] = \"MISCELLANEOUS\";\n  UUIDType[UUIDType[\"LOCAL_MESSAGE\"] = 2] = \"LOCAL_MESSAGE\";\n  UUIDType[UUIDType[\"MESSAGE\"] = 3] = \"MESSAGE\";\n  UUIDType[UUIDType[\"COMPONENT\"] = 4] = \"COMPONENT\";\n  UUIDType[UUIDType[\"USER\"] = 6] = \"USER\";\n  UUIDType[UUIDType[\"DEVICE_ID\"] = 8] = \"DEVICE_ID\";\n  UUIDType[UUIDType[\"FILE\"] = 9] = \"FILE\";\n})(UUIDType || (UUIDType = {}));\n\nexport { UUIDType };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction asArray(value) {\n  return Array.isArray(value) ? value : [ value ];\n}\n\nasync function asyncForEach(array, callbackFunction) {\n  for (let index = 0; index < array.length; index++) {\n    const value = array[index];\n    await callbackFunction(value, index, array);\n  }\n}\n\nfunction findLast(array, predicate, startAt) {\n  const lastIndex = findLastIndex(array, predicate);\n  return lastIndex === -1 ? undefined : array[lastIndex];\n}\n\nfunction findLastIndex(array, predicate, startAt) {\n  if (array) {\n    const startingIndex = array.length - 1;\n    for (let index = startingIndex; index >= 0; index--) {\n      const value = array[index];\n      if (predicate(value, index, array)) {\n        return index;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction findLastWithMap(keys, map, predicate) {\n  for (let index = keys.length - 1; index >= 0; index--) {\n    const key = keys[index];\n    const value = map[key];\n    if (predicate(value, index, keys)) {\n      return value;\n    }\n  }\n  return undefined;\n}\n\nfunction arrayLastValue(array) {\n  return array && array.length ? array[array.length - 1] : null;\n}\n\nexport { arrayLastValue, asArray, asyncForEach, findLast, findLastWithMap };\n","import { MessageResponseTypes, ButtonItemType } from \"../../../types/messaging/Messages.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { streamItemID, isGridResponseType, isCarouselResponseType, isShowPanelButtonType, isResponseWithNestedItems, isItemSupportedInResponseBody, isCardResponseType, isButtonResponseType, createMessageResponseForItem } from \"../utils/messageUtils.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function outputItemToLocalItem(messageItem, fullMessage, isLatestWelcomeNode = false, disableFadeAnimation = false) {\n  const id = streamItemID(fullMessage.id, messageItem) || uuid(UUIDType.LOCAL_MESSAGE);\n  const localMessage = {\n    ui_state: {\n      id: id,\n      needsAnnouncement: !fullMessage.history.from_history,\n      disableFadeAnimation: disableFadeAnimation\n    },\n    item: messageItem,\n    fullMessageID: fullMessage.id\n  };\n  if (isLatestWelcomeNode) {\n    localMessage.ui_state.isWelcomeResponse = true;\n  }\n  return localMessage;\n}\n\nfunction createLocalMessageForInlineError(text) {\n  const messageItem = {\n    response_type: MessageResponseTypes.INLINE_ERROR,\n    text: text\n  };\n  return createLocalMessageForItem(messageItem);\n}\n\nfunction createLocalMessageForItem(messageItem) {\n  const originalMessage = createMessageResponseForItem(messageItem);\n  const localMessage = outputItemToLocalItem(messageItem, originalMessage);\n  return {\n    originalMessage: originalMessage,\n    localMessage: localMessage\n  };\n}\n\nfunction createLocalMessageItemsForNestedMessageItems(localMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter) {\n  const {item: item} = localMessageItem;\n  if (isGridResponseType(item)) {\n    localMessageItem.ui_state.gridLocalMessageItemIDs = item.rows.map(row => row.cells.map(cell => {\n      const cellLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"items\", localMessageItem, cell.items, cellLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(localMessageItem.item, nestedMessageItem), false);\n      return cellLocalMessageItemIDs;\n    }));\n  } else if (isCarouselResponseType(item)) {\n    localMessageItem.ui_state.itemsLocalMessageItemIDs = [];\n    createLocalMessageItemsForNestedType(\"items\", localMessageItem, item.items, localMessageItem.ui_state.itemsLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), allowFooter);\n  } else {\n    const bodyItems = item.body || item.panel?.body;\n    if (bodyItems) {\n      localMessageItem.ui_state.bodyLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"body\", localMessageItem, bodyItems, localMessageItem.ui_state.bodyLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n    if (!allowFooter) {\n      return;\n    }\n    const footerItems = item.footer || item.panel?.footer;\n    if (footerItems) {\n      localMessageItem.ui_state.footerLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"footer\", localMessageItem, footerItems, localMessageItem.ui_state.footerLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInFooter(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n  }\n}\n\nfunction createLocalMessageItemsForNestedType(type, localMessageItem, items, nestedMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, isSupported, allowFooter) {\n  items.forEach(nestedMessageItem => {\n    if (isSupported(nestedMessageItem)) {\n      const nestedLocalMessageItem = outputItemToLocalItem(nestedMessageItem, originalMessage, false, true);\n      nestedMessageItemIDs.push(nestedLocalMessageItem.ui_state.id);\n      nestedLocalMessageItems.push(nestedLocalMessageItem);\n      if (isResponseWithNestedItems(nestedLocalMessageItem.item)) {\n        createLocalMessageItemsForNestedMessageItems(nestedLocalMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter);\n      }\n    } else {\n      consoleError(`The \"${localMessageItem.item.response_type}\" response type does not support \"${nestedMessageItem.response_type}\" in \"${type}\" array.`);\n    }\n  });\n}\n\nfunction isSupportedMessageItemInBody(rootMessageItem, nestedMessageItem) {\n  switch (rootMessageItem.response_type) {\n   case MessageResponseTypes.CARD:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.CAROUSEL:\n    return isCardResponseType(nestedMessageItem);\n\n   case MessageResponseTypes.BUTTON:\n    return rootMessageItem.button_type === ButtonItemType.SHOW_PANEL && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.GRID:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   default:\n    return false;\n  }\n}\n\nfunction isSupportedMessageItemInFooter(rootMessageItem, nestedMessageItem) {\n  if (isButtonResponseType(nestedMessageItem)) {\n    if (isShowPanelButtonType(rootMessageItem)) {\n      return !isShowPanelButtonType(nestedMessageItem);\n    }\n    return true;\n  }\n  return false;\n}\n\nexport { createLocalMessageForInlineError, createLocalMessageItemsForNestedMessageItems, outputItemToLocalItem };\n","import FocusTrap from \"focus-trap-react\";\n\nimport React, { useRef, useImperativeHandle } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { IS_MOBILE } from \"../utils/browserUtils.js\";\n\nimport { Header as HeaderExport } from \"./header/Header.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function BasePanelComponent({className: className, children: children, isOpen: isOpen, hidePanelHeader: hidePanelHeader, labelBackButton: labelBackButton, title: title, hideBackButton: hideBackButton, useAITheme: useAITheme, onClickCloseAndRestart: onClickCloseAndRestart, onClickRestart: onClickRestart, testIdPrefix: testIdPrefix, ...headerProps}, ref) {\n  const showRestartButton = useSelector(state => state.config.public.headerConfig?.showRestartButton);\n  const headerRef = useRef();\n  useImperativeHandle(ref, () => headerRef.current);\n  return React.createElement(FocusTrap, {\n    active: isOpen,\n    focusTrapOptions: {\n      clickOutsideDeactivates: true,\n      returnFocusOnDeactivate: !IS_MOBILE,\n      preventScroll: true\n    }\n  }, React.createElement(\"div\", {\n    className: className\n  }, !hidePanelHeader && React.createElement(HeaderExport, {\n    ...headerProps,\n    ref: headerRef,\n    showRestartButton: showRestartButton,\n    onClickRestart: onClickRestart,\n    onCloseAndRestart: onClickCloseAndRestart,\n    showBackButton: !hideBackButton,\n    labelBackButton: labelBackButton,\n    displayName: title,\n    useAITheme: useAITheme,\n    testIdPrefix: testIdPrefix,\n    showCenter: true\n  }), React.createElement(\"div\", {\n    className: \"WACPanelContent\"\n  }, children)));\n}\n\nconst BasePanelComponentExport = React.memo(React.forwardRef(BasePanelComponent));\n\nexport { BasePanelComponentExport as BasePanelComponent };\n","import { uuid } from \"../utils/lang/uuid.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CHANGE_STATE = \"CHANGE_STATE\";\n\nconst UPDATE_BOT_NAME = \"UPDATE_BOT_NAME\";\n\nconst UPDATE_BOT_AVATAR_URL = \"UPDATE_BOT_AVATAR_URL\";\n\nconst UPDATE_LAUNCHER_AVATAR_URL = \"UPDATE_LAUNCHER_AVATAR_URL\";\n\nconst UPDATE_MAIN_HEADER_TITLE = \"UPDATE_MAIN_HEADER_TITLE\";\n\nconst HYDRATE_CHAT = \"HYDRATE_CHAT\";\n\nconst HYDRATE_MESSAGE_HISTORY = \"HYDRATE_MESSAGE_HISTORY\";\n\nconst ADD_LOCAL_MESSAGE_ITEM = \"ADD_LOCAL_MESSAGE_ITEM\";\n\nconst REMOVE_MESSAGES = \"REMOVE_MESSAGES\";\n\nconst UPDATE_LOCAL_MESSAGE_ITEM = \"UPDATE_LOCAL_MESSAGE_ITEM\";\n\nconst SET_APP_STATE_VALUE = \"SET_APP_STATE_VALUE\";\n\nconst ADD_IS_TYPING_COUNTER = \"ADD_IS_TYPING_COUNTER\";\n\nconst ADD_IS_LOADING_COUNTER = \"ADD_IS_LOADING_COUNTER\";\n\nconst ADD_IS_HYDRATING_COUNTER = \"ADD_IS_HYDRATING_COUNTER\";\n\nconst SET_VIEW_STATE = \"SET_VIEW_STATE\";\n\nconst SET_VIEW_CHANGING = \"SET_VIEW_CHANGING\";\n\nconst SET_INITIAL_VIEW_CHANGE_COMPLETE = \"SET_INITIAL_VIEW_CHANGE_COMPLETE\";\n\nconst UPDATE_CSS_VARIABLES = \"UPDATE_CSS_VARIABLES\";\n\nconst MESSAGE_SET_OPTION_SELECTED = \"MESSAGE_SET_OPTION_SELECTED\";\n\nconst SET_MESSAGE_UI_PROPERTY = \"SET_MESSAGE_UI_PROPERTY\";\n\nconst SET_MESSAGE_HISTORY_PROPERTY = \"SET_MESSAGE_HISTORY_PROPERTY\";\n\nconst MERGE_HISTORY = \"MERGE_HISTORY\";\n\nconst SET_LAUNCHER_PROPERTY = \"SET_LAUNCHER_PROPERTY\";\n\nconst SET_LAUNCHER_CONFIG_PROPERTY = \"SET_LAUNCHER_CONFIG_PROPERTY\";\n\nconst ANNOUNCE_MESSAGE = \"ANNOUNCE_MESSAGE\";\n\nconst SET_CHAT_MESSAGES_PROPERTY = \"SET_CHAT_MESSAGES_PROPERTY\";\n\nconst RESTART_CONVERSATION = \"RESTART_CONVERSATION\";\n\nconst ACCEPTED_DISCLAIMER = \"ACCEPTED_DISCLAIMER\";\n\nconst ADD_MESSAGE = \"ADD_MESSAGE\";\n\nconst UPDATE_HOME_SCREEN_CONFIG = \"UPDATE_HOME_SCREEN_CONFIG\";\n\nconst UPDATE_HAS_SENT_NON_WELCOME_MESSAGE = \"UPDATE_HAS_SENT_NON_WELCOME_MESSAGE\";\n\nconst UPDATE_PERSISTED_CHAT_STATE = \"UPDATE_PERSISTED_CHAT_STATE\";\n\nconst SET_TOUR_DATA = \"SET_TOUR_DATA\";\n\nconst CLEAR_TOUR_DATA = \"CLEAR_TOUR_DATA\";\n\nconst CHANGE_STEP_IN_TOUR = \"CHANGE_STEP_IN_TOUR\";\n\nconst SET_HOME_SCREEN_IS_OPEN = \"SET_HOME_SCREEN_IS_OPEN\";\n\nconst UPDATE_LAUNCHER_CONFIG = \"UPDATE_LAUNCHER_CONFIG\";\n\nconst UPDATE_MESSAGE = \"UPDATE_MESSAGE\";\n\nconst SET_LAUNCHER_MINIMIZED = \"SET_LAUNCHER_MINIMIZED\";\n\nconst CLOSE_IFRAME_PANEL = \"CLOSE_IFRAME_PANEL\";\n\nconst OPEN_IFRAME_CONTENT = \"OPEN_IFRAME_CONTENT\";\n\nconst SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN = \"SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN\";\n\nconst SET_CUSTOM_PANEL_OPTIONS = \"SET_CUSTOM_PANEL_OPTIONS\";\n\nconst SET_CUSTOM_PANEL_OPEN = \"SET_CUSTOM_PANEL_OPEN\";\n\nconst TOGGLE_HOME_SCREEN = \"GO_BACK_TO_HOME\";\n\nconst UPDATE_INPUT_STATE = \"UPDATE_INPUT_STATE\";\n\nconst SET_IS_BROWSER_PAGE_VISIBLE = \"SET_IS_PAGE_VISIBLE\";\n\nconst ADD_INPUT_FILE = \"ADD_INPUT_FILE\";\n\nconst CLEAR_INPUT_FILES = \"CLEAR_INPUT_FILES\";\n\nconst REMOVE_INPUT_FILE = \"REMOVE_INPUT_FILE\";\n\nconst REMOVE_LOCAL_MESSAGE_ITEM = \"REMOVE_LOCAL_MESSAGE_ITEM\";\n\nconst FILE_UPLOAD_INPUT_ERROR = \"FILE_UPLOAD_INPUT_ERROR\";\n\nconst ADD_NESTED_MESSAGES = \"ADD_NESTED_MESSAGES\";\n\nconst SET_RESPONSE_PANEL_IS_OPEN = \"SET_RESPONSE_PANEL_IS_OPEN\";\n\nconst SET_RESPONSE_PANEL_CONTENT = \"SET_PANEL_RESPONSE_CONTENT\";\n\nconst STREAMING_ADD_CHUNK = \"STREAMING_ADD_CHUNK\";\n\nconst STREAMING_START = \"STREAMING_START\";\n\nconst STREAMING_MERGE_HISTORY = \"STREAMING_MERGE_HISTORY\";\n\nconst ADD_NOTIFICATION = \"ADD_NOTIFICATION\";\n\nconst REMOVE_ALL_NOTIFICATIONS = \"REMOVE_ALL_NOTIFICATIONS\";\n\nconst REMOVE_NOTIFICATIONS = \"REMOVE_NOTIFICATIONS\";\n\nconst UPDATE_CHAT_HEADER_CONFIG = \"UPDATE_CHAT_HEADER_CONFIG\";\n\nconst UPDATE_MAX_VISIBLE_HEADER_OBJECTS = \"UPDATE_MAX_VISIBLE_HEADER_OBJECTS\";\n\nconst SET_STOP_STREAMING_BUTTON_VISIBLE = \"SET_STOP_STREAMING_BUTTON_VISIBLE\";\n\nconst SET_STOP_STREAMING_BUTTON_DISABLED = \"SET_STOP_STREAMING_BUTTON_DISABLED\";\n\nconst SET_STREAM_ID = \"SET_STREAM_ID\";\n\nconst UPDATE_MAIN_HEADER_AVATAR = \"UPDATE_MAIN_HEADER_AVATAR\";\n\nconst actions = {\n  changeState(partialState) {\n    return {\n      type: CHANGE_STATE,\n      partialState: partialState\n    };\n  },\n  chatWasHydrated() {\n    return {\n      type: HYDRATE_CHAT\n    };\n  },\n  hydrateMessageHistory(messageHistory) {\n    return {\n      type: HYDRATE_MESSAGE_HISTORY,\n      messageHistory: messageHistory\n    };\n  },\n  removeMessages(messageIDs) {\n    return {\n      type: REMOVE_MESSAGES,\n      messageIDs: messageIDs\n    };\n  },\n  restartConversation() {\n    return {\n      type: RESTART_CONVERSATION\n    };\n  },\n  addLocalMessageItem(messageItem, message, addMessage, addAfterID) {\n    return {\n      type: ADD_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem,\n      message: message,\n      addMessage: addMessage,\n      addAfterID: addAfterID\n    };\n  },\n  addMessage(message) {\n    return {\n      type: ADD_MESSAGE,\n      message: message\n    };\n  },\n  updateLocalMessageItem(messageItem) {\n    return {\n      type: UPDATE_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem\n    };\n  },\n  updateMessage(message) {\n    return {\n      type: UPDATE_MESSAGE,\n      message: message\n    };\n  },\n  messageSetOptionSelected(messageID, sentMessage) {\n    return {\n      type: MESSAGE_SET_OPTION_SELECTED,\n      messageID: messageID,\n      sentMessage: sentMessage\n    };\n  },\n  updatePersistedChatState(chatState) {\n    return {\n      type: UPDATE_PERSISTED_CHAT_STATE,\n      chatState: chatState\n    };\n  },\n  setTourData(newActiveTourMessageID) {\n    return {\n      type: SET_TOUR_DATA,\n      newActiveTourMessageID: newActiveTourMessageID\n    };\n  },\n  clearTourData() {\n    return {\n      type: CLEAR_TOUR_DATA\n    };\n  },\n  changeStepInTour(newStepNumber) {\n    return {\n      type: CHANGE_STEP_IN_TOUR,\n      newStepNumber: newStepNumber\n    };\n  },\n  updateHasSentNonWelcomeMessage(hasSentNonWelcomeMessage) {\n    return {\n      type: UPDATE_HAS_SENT_NON_WELCOME_MESSAGE,\n      hasSentNonWelcomeMessage: hasSentNonWelcomeMessage\n    };\n  },\n  setAppStateValue(key, value) {\n    return {\n      type: SET_APP_STATE_VALUE,\n      key: key,\n      value: value\n    };\n  },\n  addIsTypingCounter(addToIsTyping) {\n    return {\n      type: ADD_IS_TYPING_COUNTER,\n      addToIsTyping: addToIsTyping\n    };\n  },\n  addIsLoadingCounter(addToIsLoading) {\n    return {\n      type: ADD_IS_LOADING_COUNTER,\n      addToIsLoading: addToIsLoading\n    };\n  },\n  addIsHydratingCounter(addToIsHydrating) {\n    return {\n      type: ADD_IS_HYDRATING_COUNTER,\n      addToIsHydrating: addToIsHydrating\n    };\n  },\n  updateBotName(name) {\n    return {\n      type: UPDATE_BOT_NAME,\n      name: name\n    };\n  },\n  updateMainHeaderTitle(title) {\n    return {\n      type: UPDATE_MAIN_HEADER_TITLE,\n      title: title\n    };\n  },\n  updateBotAvatarURL(url) {\n    return {\n      type: UPDATE_BOT_AVATAR_URL,\n      url: url\n    };\n  },\n  updateCSSVariables(variables, publicVars, whiteLabelVariables) {\n    return {\n      type: UPDATE_CSS_VARIABLES,\n      variables: variables,\n      publicVars: publicVars,\n      whiteLabelVariables: whiteLabelVariables\n    };\n  },\n  updateHomeScreenConfig(homeScreenConfig) {\n    return {\n      type: UPDATE_HOME_SCREEN_CONFIG,\n      homeScreenConfig: homeScreenConfig\n    };\n  },\n  setViewState(viewState) {\n    return {\n      type: SET_VIEW_STATE,\n      viewState: viewState\n    };\n  },\n  setViewChanging(viewChanging) {\n    return {\n      type: SET_VIEW_CHANGING,\n      viewChanging: viewChanging\n    };\n  },\n  setInitialViewChangeComplete(changeComplete) {\n    return {\n      type: SET_INITIAL_VIEW_CHANGE_COMPLETE,\n      changeComplete: changeComplete\n    };\n  },\n  setMessageUIProperty(localMessageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_UI_PROPERTY,\n      localMessageID: localMessageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherProperty(propertyName, propertyValue) {\n    return {\n      type: SET_LAUNCHER_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherConfigProperty(propertyName, propertyValue, launcherType) {\n    return {\n      type: SET_LAUNCHER_CONFIG_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue,\n      launcherType: launcherType\n    };\n  },\n  setMessageHistoryProperty(messageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_HISTORY_PROPERTY,\n      messageID: messageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  mergeMessageHistory(messageID, history) {\n    return {\n      type: MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  setMessageErrorState(messageID, errorState) {\n    return actions.setMessageHistoryProperty(messageID, \"error_state\", errorState);\n  },\n  setMessageWasAnnounced(messageID) {\n    return actions.setMessageUIProperty(messageID, \"needsAnnouncement\", false);\n  },\n  announceMessage(message) {\n    return {\n      type: ANNOUNCE_MESSAGE,\n      message: message\n    };\n  },\n  setChatMessagesStateProperty(propertyName, propertyValue) {\n    return {\n      type: SET_CHAT_MESSAGES_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  addNotification(notification) {\n    const notificationID = uuid();\n    return {\n      type: ADD_NOTIFICATION,\n      notificationID: notificationID,\n      notification: notification\n    };\n  },\n  removeNotifications({groupID: groupID, notificationID: notificationID}) {\n    return {\n      type: REMOVE_NOTIFICATIONS,\n      groupID: groupID,\n      notificationID: notificationID\n    };\n  },\n  removeAllNotifications() {\n    return {\n      type: REMOVE_ALL_NOTIFICATIONS\n    };\n  },\n  acceptDisclaimer() {\n    return {\n      type: ACCEPTED_DISCLAIMER\n    };\n  },\n  setHomeScreenIsOpen(isOpen) {\n    return {\n      type: SET_HOME_SCREEN_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  updateLauncherConfig(launcherConfig) {\n    return {\n      type: UPDATE_LAUNCHER_CONFIG,\n      launcherConfig: launcherConfig\n    };\n  },\n  setLauncherMinimized() {\n    return {\n      type: SET_LAUNCHER_MINIMIZED\n    };\n  },\n  closeIFramePanel() {\n    return {\n      type: CLOSE_IFRAME_PANEL\n    };\n  },\n  setIFrameContent(messageItem) {\n    return {\n      type: OPEN_IFRAME_CONTENT,\n      messageItem: messageItem\n    };\n  },\n  setViewSourcePanelIsOpen(isOpen, citationItem, relatedSearchResult) {\n    return {\n      type: SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN,\n      isOpen: isOpen,\n      citationItem: citationItem,\n      relatedSearchResult: relatedSearchResult\n    };\n  },\n  setCustomPanelConfigOptions(options) {\n    return {\n      type: SET_CUSTOM_PANEL_OPTIONS,\n      options: options\n    };\n  },\n  setCustomPanelOpen(isOpen) {\n    return {\n      type: SET_CUSTOM_PANEL_OPEN,\n      isOpen: isOpen\n    };\n  },\n  toggleHomeScreen() {\n    return {\n      type: TOGGLE_HOME_SCREEN\n    };\n  },\n  updateInputState(newState, isInputToAgent) {\n    return {\n      type: UPDATE_INPUT_STATE,\n      newState: newState,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  setIsBrowserPageVisible(isVisible) {\n    return {\n      type: SET_IS_BROWSER_PAGE_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  addInputFile(file, isInputToAgent) {\n    return {\n      type: ADD_INPUT_FILE,\n      file: file,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  removeFileUpload(fileID, isInputToAgent) {\n    return {\n      type: REMOVE_INPUT_FILE,\n      fileID: fileID,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  removeLocalMessageItem(localMessageItemID) {\n    return {\n      type: REMOVE_LOCAL_MESSAGE_ITEM,\n      localMessageItemID: localMessageItemID\n    };\n  },\n  fileUploadInputError(fileID, errorMessage, isInputToAgent) {\n    return {\n      type: FILE_UPLOAD_INPUT_ERROR,\n      fileID: fileID,\n      errorMessage: errorMessage,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  clearInputFiles(isInputToAgent) {\n    return {\n      type: CLEAR_INPUT_FILES,\n      isInputToAgent: isInputToAgent\n    };\n  },\n  addNestedMessages(localMessageItems) {\n    return {\n      type: ADD_NESTED_MESSAGES,\n      localMessageItems: localMessageItems\n    };\n  },\n  setResponsePanelIsOpen(isOpen) {\n    return {\n      type: SET_RESPONSE_PANEL_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  setResponsePanelContent(localMessageItem, isMessageForInput = false) {\n    return {\n      type: SET_RESPONSE_PANEL_CONTENT,\n      localMessageItem: localMessageItem,\n      isMessageForInput: isMessageForInput\n    };\n  },\n  streamingStart(messageID) {\n    return {\n      type: STREAMING_START,\n      messageID: messageID\n    };\n  },\n  streamingMergeHistory(messageID, history) {\n    return {\n      type: STREAMING_MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  streamingAddChunk(fullMessageID, chunkItem, isCompleteItem, disableFadeAnimation) {\n    return {\n      type: STREAMING_ADD_CHUNK,\n      fullMessageID: fullMessageID,\n      chunkItem: chunkItem,\n      isCompleteItem: isCompleteItem,\n      disableFadeAnimation: disableFadeAnimation\n    };\n  },\n  updateChatHeaderConfig(chatHeaderConfig) {\n    return {\n      type: UPDATE_CHAT_HEADER_CONFIG,\n      chatHeaderConfig: chatHeaderConfig\n    };\n  },\n  setMaxVisibleHeaderObjects(maxTotal) {\n    return {\n      type: UPDATE_MAX_VISIBLE_HEADER_OBJECTS,\n      maxTotal: maxTotal\n    };\n  },\n  setStopStreamingButtonVisible(isVisible) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  setStopStreamingButtonDisabled(isDisabled) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_DISABLED,\n      isDisabled: isDisabled\n    };\n  },\n  setStreamID(currentStreamID) {\n    return {\n      type: SET_STREAM_ID,\n      currentStreamID: currentStreamID\n    };\n  },\n  updateMainHeaderAvatar(config) {\n    return {\n      type: UPDATE_MAIN_HEADER_AVATAR,\n      config: config\n    };\n  }\n};\n\nexport { ACCEPTED_DISCLAIMER, ADD_INPUT_FILE, ADD_IS_HYDRATING_COUNTER, ADD_IS_LOADING_COUNTER, ADD_IS_TYPING_COUNTER, ADD_LOCAL_MESSAGE_ITEM, ADD_MESSAGE, ADD_NESTED_MESSAGES, ADD_NOTIFICATION, ANNOUNCE_MESSAGE, CHANGE_STATE, CHANGE_STEP_IN_TOUR, CLEAR_INPUT_FILES, CLEAR_TOUR_DATA, CLOSE_IFRAME_PANEL, FILE_UPLOAD_INPUT_ERROR, HYDRATE_CHAT, HYDRATE_MESSAGE_HISTORY, MERGE_HISTORY, MESSAGE_SET_OPTION_SELECTED, OPEN_IFRAME_CONTENT, REMOVE_ALL_NOTIFICATIONS, REMOVE_INPUT_FILE, REMOVE_LOCAL_MESSAGE_ITEM, REMOVE_MESSAGES, REMOVE_NOTIFICATIONS, RESTART_CONVERSATION, SET_APP_STATE_VALUE, SET_CHAT_MESSAGES_PROPERTY, SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN, SET_CUSTOM_PANEL_OPEN, SET_CUSTOM_PANEL_OPTIONS, SET_HOME_SCREEN_IS_OPEN, SET_INITIAL_VIEW_CHANGE_COMPLETE, SET_IS_BROWSER_PAGE_VISIBLE, SET_LAUNCHER_CONFIG_PROPERTY, SET_LAUNCHER_MINIMIZED, SET_LAUNCHER_PROPERTY, SET_MESSAGE_HISTORY_PROPERTY, SET_MESSAGE_UI_PROPERTY, SET_RESPONSE_PANEL_CONTENT, SET_RESPONSE_PANEL_IS_OPEN, SET_STOP_STREAMING_BUTTON_DISABLED, SET_STOP_STREAMING_BUTTON_VISIBLE, SET_STREAM_ID, SET_TOUR_DATA, SET_VIEW_CHANGING, SET_VIEW_STATE, STREAMING_ADD_CHUNK, STREAMING_MERGE_HISTORY, STREAMING_START, TOGGLE_HOME_SCREEN, UPDATE_BOT_AVATAR_URL, UPDATE_BOT_NAME, UPDATE_CHAT_HEADER_CONFIG, UPDATE_CSS_VARIABLES, UPDATE_HAS_SENT_NON_WELCOME_MESSAGE, UPDATE_HOME_SCREEN_CONFIG, UPDATE_INPUT_STATE, UPDATE_LAUNCHER_AVATAR_URL, UPDATE_LAUNCHER_CONFIG, UPDATE_LOCAL_MESSAGE_ITEM, UPDATE_MAIN_HEADER_AVATAR, UPDATE_MAIN_HEADER_TITLE, UPDATE_MAX_VISIBLE_HEADER_OBJECTS, UPDATE_MESSAGE, UPDATE_PERSISTED_CHAT_STATE, actions as default };\n","import React, { useContext } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function withAriaAnnouncer(Component) {\n  const Wrapped = React.forwardRef((props, ref) => {\n    const ariaAnnouncer = useContext(AriaAnnouncerContext);\n    return React.createElement(Component, {\n      ...props,\n      ref: ref,\n      ariaAnnouncer: ariaAnnouncer\n    });\n  });\n  Wrapped.displayName = `withAriaAnnouncer(${Component.displayName || Component.name || \"Component\"})`;\n  return Wrapped;\n}\n\nexport { withAriaAnnouncer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar PageObjectId;\n\n(function(PageObjectId) {\n  PageObjectId[\"CLOSE_CHAT\"] = \"close_chat\";\n  PageObjectId[\"LAUNCHER\"] = \"launcher_open_chat\";\n  PageObjectId[\"INPUT\"] = \"input_field\";\n  PageObjectId[\"INPUT_SEND\"] = \"input_send\";\n})(PageObjectId || (PageObjectId = {}));\n\nfunction makeTestId(id, panel) {\n  if (panel) {\n    return `${panel}-${id}`;\n  }\n  return id;\n}\n\nexport { PageObjectId, makeTestId };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar MessageErrorState;\n\n(function(MessageErrorState) {\n  MessageErrorState[MessageErrorState[\"NONE\"] = 1] = \"NONE\";\n  MessageErrorState[MessageErrorState[\"FAILED\"] = 2] = \"FAILED\";\n  MessageErrorState[MessageErrorState[\"RETRYING\"] = 3] = \"RETRYING\";\n  MessageErrorState[MessageErrorState[\"WAITING\"] = 4] = \"WAITING\";\n})(MessageErrorState || (MessageErrorState = {}));\n\nexport { MessageErrorState };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar AnimationInType;\n\n(function(AnimationInType) {\n  AnimationInType[\"NONE\"] = \"none\";\n  AnimationInType[\"FADE_IN\"] = \"fadeIn\";\n  AnimationInType[\"SLIDE_IN_FROM_LEFT\"] = \"slideInFromLeft\";\n  AnimationInType[\"SLIDE_IN_FROM_RIGHT\"] = \"slideInFromRight\";\n  AnimationInType[\"SLIDE_IN_FROM_BOTTOM\"] = \"slideInFromBottom\";\n  AnimationInType[\"BRANDING_SLIDE_IN_FROM_BOTTOM\"] = \"brandingSlideInFromBottom\";\n})(AnimationInType || (AnimationInType = {}));\n\nvar AnimationOutType;\n\n(function(AnimationOutType) {\n  AnimationOutType[\"NONE\"] = \"none\";\n  AnimationOutType[\"FADE_OUT\"] = \"fadeOut\";\n  AnimationOutType[\"SLIDE_OUT_TO_LEFT\"] = \"slideOutToLeft\";\n  AnimationOutType[\"SLIDE_OUT_TO_RIGHT\"] = \"slideOutToRight\";\n  AnimationOutType[\"SLIDE_OUT_TO_TOP\"] = \"slideOutToTop\";\n  AnimationOutType[\"SLIDE_OUT_TO_BOTTOM\"] = \"slideOutToBottom\";\n})(AnimationOutType || (AnimationOutType = {}));\n\nexport { AnimationInType, AnimationOutType };\n","import cx from \"classnames\";\n\nimport React, { PureComponent } from \"react\";\n\nimport { AnimationInType, AnimationOutType } from \"../../../types/utilities/Animation.js\";\n\nimport { conditionalSetTimeout } from \"../utils/browserUtils.js\";\n\nimport { HideComponent } from \"./util/HideComponent.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var OverlayPanelName;\n\n(function(OverlayPanelName) {\n  OverlayPanelName[\"MAIN\"] = \"main\";\n  OverlayPanelName[\"DISCLAIMER\"] = \"disclaimer\";\n  OverlayPanelName[\"HOME_SCREEN\"] = \"home_screen\";\n  OverlayPanelName[\"HYDRATING\"] = \"hydrating\";\n  OverlayPanelName[\"CATASTROPHIC\"] = \"catastrophic\";\n  OverlayPanelName[\"IFRAME\"] = \"iframe\";\n  OverlayPanelName[\"CONVERSATIONAL_SEARCH_CITATION\"] = \"conversational_search_citation\";\n  OverlayPanelName[\"CUSTOM\"] = \"custom\";\n  OverlayPanelName[\"SHOW_PANEL\"] = \"show_panel\";\n  OverlayPanelName[\"PANEL_RESPONSE\"] = \"panel_response\";\n})(OverlayPanelName || (OverlayPanelName = {}));\n\nconst ANIMATION_DURATION_IN_MS = 240;\n\nclass OverlayPanel extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isClosing: false,\n      isOpening: false\n    };\n    this.openPanelTimeout = null;\n    this.closePanelTimeout = null;\n    this.openPanel = () => {\n      const {onOpenEnd: onOpenEnd, onOpenStart: onOpenStart, animationOnOpen: animationOnOpen, animationDurationOpen: animationDurationOpen} = this.props;\n      onOpenStart?.();\n      this.setState({\n        isClosing: false,\n        isOpening: true\n      });\n      const durationInMS = animationOnOpen === AnimationInType.NONE ? 0 : animationDurationOpen || ANIMATION_DURATION_IN_MS;\n      this.openPanelTimeout = conditionalSetTimeout(() => {\n        this.setState({\n          isClosing: false,\n          isOpening: false\n        });\n        onOpenEnd?.();\n      }, durationInMS);\n    };\n    this.closePanel = () => {\n      const {onCloseEnd: onCloseEnd, onCloseStart: onCloseStart, animationOnClose: animationOnClose, animationDurationClose: animationDurationClose} = this.props;\n      onCloseStart?.();\n      this.setState({\n        isClosing: true,\n        isOpening: false\n      });\n      const durationInMS = animationOnClose === AnimationOutType.NONE ? 0 : animationDurationClose || ANIMATION_DURATION_IN_MS;\n      this.closePanelTimeout = conditionalSetTimeout(() => {\n        this.setState({\n          isClosing: false,\n          isOpening: false\n        });\n        onCloseEnd?.();\n      }, durationInMS);\n    };\n  }\n  componentDidMount() {\n    const {shouldOpen: shouldOpen} = this.props;\n    if (shouldOpen) {\n      this.openPanel();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {shouldOpen: shouldOpen} = this.props;\n    if (shouldOpen !== prevProps.shouldOpen) {\n      if (shouldOpen) {\n        this.openPanel();\n      } else {\n        this.closePanel();\n      }\n    }\n  }\n  componentWillUnmount() {\n    if (this.openPanelTimeout) {\n      clearTimeout(this.openPanelTimeout);\n    }\n    if (this.closePanelTimeout) {\n      clearTimeout(this.closePanelTimeout);\n    }\n    if (this.props.shouldOpen) {\n      if (this.props.onCloseStart) {\n        this.props.onCloseStart();\n      }\n      if (this.props.onCloseEnd) {\n        this.props.onCloseEnd();\n      }\n    }\n  }\n  render() {\n    const {children: children, className: className, shouldOpen: shouldOpen, animationOnClose: animationOnClose, animationOnOpen: animationOnOpen, overlayPanelName: overlayPanelName} = this.props;\n    const {isClosing: isClosing, isOpening: isOpening} = this.state;\n    return React.createElement(HideComponent, {\n      hidden: !isClosing && !shouldOpen,\n      className: cx(\"WAC__overlay-panelContainer\", `WAC__overlay--${overlayPanelName}`, className, {\n        \"WAC__overlay-panelContainer--animating\": isOpening || isClosing\n      })\n    }, React.createElement(\"div\", {\n      className: cx(\"WAC__overlay-panel\", `WAC__overlay-panel--${overlayPanelName}`, {\n        [`WAC__overlay-panel--closing--${animationOnClose}`]: isClosing,\n        \"WAC__overlay-panel--closed\": !isClosing && !shouldOpen,\n        [`WAC__overlay-panel--opening--${animationOnOpen}`]: isOpening,\n        \"WAC__overlay-panel--open\": !isOpening && shouldOpen\n      })\n    }, children));\n  }\n}\n\nexport { OverlayPanel, OverlayPanelName };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const HideComponentContext = React.createContext(false);\n\nexport { HideComponentContext };\n","var ai_slug_title = \"Powered by IBM watsonx\";\n\nvar ai_slug_description = \"IBM watsonx is powered by the latest AI models to intelligently process conversations and provide help whenever and wherever you may need it.\";\n\nvar components_overflow_ariaLabel = \"Open and close list of options\";\n\nvar components_swiper_currentLabel = \"{currentSlideNumber}/{totalSlideCount}\";\n\nvar errors_communicating = \"{botName} isn't available right now. Problems with a related system are preventing the data from being supplied.\";\n\nvar errors_imageSource = \"Image is not available.\";\n\nvar errors_videoSource = \"Video is not available.\";\n\nvar errors_audioSource = \"Audio is not available.\";\n\nvar errors_iframeSource = \"The web page is not available.\";\n\nvar errors_singleMessage = \"There is an error with the message you just sent, but feel free to ask me something else.\";\n\nvar errors_ariaMessageRetrying = \"We are having some trouble sending your message but are still trying\";\n\nvar errors_ariaMessageFailed = \"Your message failed to be sent\";\n\nvar errors_noAgentsAvailable = \"No agents are available.\";\n\nvar errors_noAgentsJoined = \"No agents accepted the chat\";\n\nvar errors_connectingToAgent = \"I'm sorry. Something went wrong and I cannot connect you to an agent right now.\";\n\nvar errors_busy = \"I'm sorry, but I can't help you right now. I'm answering questions from lots of people at the moment. Please try again later.\";\n\nvar errors_agentAppSessionExpired = \"I'm sorry, but access to the chat history has expired.\";\n\nvar errors_generalContent = \"There was an error displaying this content\";\n\nvar errors_somethingWrong = \"Something went wrong\";\n\nvar input_ariaLabel = \"Message to send\";\n\nvar input_placeholder = \"Type something...\";\n\nvar input_buttonLabel = \"Click to send message\";\n\nvar input_uploadButtonLabel = \"Add files to upload\";\n\nvar window_title = \"Chat window\";\n\nvar window_ariaTourRegion = \"Tour\";\n\nvar window_ariaTourRegionNamespace = \"Tour {namespace}\";\n\nvar window_ariaChatRegion = \"Chat\";\n\nvar window_ariaChatRegionNamespace = \"Chat {namespace}\";\n\nvar window_ariaWindowOpened = \"The chat window has been opened\";\n\nvar window_ariaWindowClosed = \"The chat window has been closed\";\n\nvar window_ariaWindowLoading = \"The chat is loading.\";\n\nvar launcher_isOpen = \"Close the chat window\";\n\nvar launcher_isClosed = \"Open the chat window\";\n\nvar launcher_isTourOpen = \"Close the tour window\";\n\nvar launcher_isTourClosed = \"Open the tour window\";\n\nvar launcher_desktopGreeting = \"Hi! I’m a virtual assistant. How can I help you today?\";\n\nvar launcher_mobileGreeting = \"Hi! How can I help you today?\";\n\nvar launcher_ariaIsExpanded = \"Close the chat launcher\";\n\nvar launcher_closeButton = \"Close\";\n\nvar messages_youSaid = \"You said\";\n\nvar messages_botSaid = \"{botName} said\";\n\nvar messages_agentSaid = \"The live agent said\";\n\nvar messages_searchResults = \"Search results\";\n\nvar messages_searchResultsLink = \"Open this search result in a new window\";\n\nvar messages_searchResultsOpenDocument = \"Open document\";\n\nvar messages_searchResultsOpenDocumentWithLabel = 'Open document \"{documentName}\"';\n\nvar messages_searchResultsExpand = \"Expand\";\n\nvar messages_searchResultsCollapse = \"Collapse\";\n\nvar messages_botIsLoading = \"{botName} is loading\";\n\nvar messages_botIsTyping = \"{botName} is typing\";\n\nvar messages_agentIsTyping = \"The live agent is typing\";\n\nvar messages_scrollHandle = \"Chat history begin\";\n\nvar messages_scrollHandleDetailed = \"Chat history begin. Activate to focus the first message then use the arrow, home, and end keys to move between messages. Press escape to exit.\";\n\nvar messages_scrollHandleEnd = \"Chat history end\";\n\nvar messages_scrollHandleEndDetailed = \"Chat history end. Activate to focus the last message then use the arrow, home, and end keys to move between messages. Press escape to exit.\";\n\nvar message_labelBot = \"{actorName} {timestamp}\";\n\nvar message_labelYou = \"You {timestamp}\";\n\nvar notifications_toastClose = \"Close notification\";\n\nvar buttons_restart = \"Restart conversation\";\n\nvar buttons_cancel = \"Cancel\";\n\nvar buttons_retry = \"Retry\";\n\nvar options_select = \"Select an option\";\n\nvar options_ariaOptionsDisabled = \"These options are disabled and cannot be selected\";\n\nvar header_previewLinkTitle = \"Assistant preview\";\n\nvar header_ariaCloseRestart = \"End chat and close the window\";\n\nvar header_ariaBotAvatar = \"{botName} avatar image\";\n\nvar header_overflowMenu_options = \"Options\";\n\nvar homeScreen_returnToAssistant = \"Return to assistant\";\n\nvar homeScreen_returnToHome = \"Return to the home screen\";\n\nvar homeScreen_overflowMenuHomeScreen = \"Home screen\";\n\nvar homeScreen_ariaQuickStartListButton = \"Quick start menu\";\n\nvar homeScreen_ariaQuickStartListOpened = \"The quick start menu has been opened.\";\n\nvar homeScreen_ariaQuickStartListClosed = \"The quick start menu has been closed.\";\n\nvar default_agent_availableMessage = \"Request an agent, and I'll notify you when they're ready. Your wait time may vary based on availability.\";\n\nvar default_agent_unavailableMessage = \"Sorry, no agents are available right now.\";\n\nvar agent_reason_error = \"Hmmm... I'm experiencing some difficulties. I need a human agent to manually continue the chat.\";\n\nvar agent_sdMissingWarning = 'No service desk is configured. Unless you have a custom service desk implemented, users will see an error instead of the message below. See the <a href=\"https://cloud.ibm.com/docs/watson-assistant?topic=watson-assistant-deploy-web-chat-haa\" rel=\"noreferrer noopener\" target=\"_blank\">documentation</a> for more information.';\n\nvar agent_noName = \"Live agent\";\n\nvar agent_chatTitle = \"Live agent support\";\n\nvar agent_startChat = \"Connect to agent\";\n\nvar agent_connecting = \"Request for agent sent...\";\n\nvar agent_agentNoNameTitle = \"Agent\";\n\nvar agent_agentJoinedName = \"{personName} connected.\";\n\nvar agent_agentJoinedNoName = \"A live agent connected.\";\n\nvar agent_youConnectedWarning = \"If you refresh or leave the current page, you'll have to request a new agent.\";\n\nvar agent_connectingMinutes = \"Current wait time is <b>{time, number} {time, plural, one {minute} other {minutes}}</b>.\";\n\nvar agent_connectingQueue = \"You're number <b>{position, number}</b> in line.\";\n\nvar agent_ariaAgentAvatar = \"Live agent avatar image\";\n\nvar agent_ariaGenericAvatar = \"Avatar image\";\n\nvar agent_ariaGenericBotAvatar = \"Avatar image\";\n\nvar agent_youEndedChat = \"You disconnected from the live agent.\";\n\nvar agent_conversationWasEnded = \"You disconnected from the live agent.\";\n\nvar agent_disconnected = \"Something went wrong and your connection to the live agent was lost. Check your internet connection and then try again to connect to an agent.\";\n\nvar agent_reconnected = \"The agent reconnected.\";\n\nvar agent_agentLeftChat = \"{personName} disconnected.\";\n\nvar agent_agentLeftChatNoName = \"The live agent disconnected.\";\n\nvar agent_agentEndedChat = \"{personName} ended the chat.\";\n\nvar agent_agentEndedChatNoName = \"The live agent ended the chat.\";\n\nvar agent_transferring = \"You're being transferred.\";\n\nvar agent_transferringNoName = \"You're being transferred.\";\n\nvar agent_endChat = \"Disconnect from live agent?\";\n\nvar agent_confirmSuspendedEndChatTitle = \"Disconnect from previous agent?\";\n\nvar agent_confirmSuspendedEndChatMessage = \"You are currently connected to an agent. Continuing will disconnect you from the agent and connect you to a new one. Do you want to continue?\";\n\nvar agent_confirmCancelRequestTitle = \"Cancel request?\";\n\nvar agent_confirmCancelRequestMessage = \"If you continue, you'll cancel your request for an agent.\";\n\nvar agent_confirmCancelRequestNo = \"Go back\";\n\nvar agent_confirmCancelRequestYes = \"Cancel request\";\n\nvar agent_confirmEndChat = \"If you disconnect, you'll have to request a new live agent.\";\n\nvar agent_confirmEndChatNo = \"Go back\";\n\nvar agent_confirmEndChatYes = \"Disconnect\";\n\nvar agent_confirmEndSuspendedYes = \"Continue\";\n\nvar agent_botReturned = \"Can I help you with anything else?\";\n\nvar agent_newMessage = \"New message\";\n\nvar agent_cardButtonChatRequested = \"Connecting...\";\n\nvar agent_cardButtonConnected = \"Connected\";\n\nvar agent_cardButtonChatEnded = \"Disconnected\";\n\nvar agent_cardMessageChatEnded = \"You disconnected from the live agent.\";\n\nvar agent_cardMessageConnected = \"You're now connected.\";\n\nvar agent_connectButtonCancel = \"Cancel\";\n\nvar agent_connectedButtonEndChat = \"Disconnect\";\n\nvar agent_connectWaiting = \"Waiting...\";\n\nvar agent_defaultMessageToAgent = \"Begin conversation\";\n\nvar agent_inputPlaceholderConnecting = \"Waiting for agent...\";\n\nvar agent_inputPlaceholderReconnecting = \"Reconnecting to agent...\";\n\nvar agent_sharingStopSharingButton = \"Stop sharing screen\";\n\nvar agent_sharingRequestTitle = \"Screen sharing\";\n\nvar agent_sharingRequestMessage = \"The agent has requested you share your screen. You can stop sharing at any time.\";\n\nvar agent_sharingAcceptButton = \"Share screen\";\n\nvar agent_sharingDeclineButton = \"Decline\";\n\nvar agent_sharingRequested = \"You were requested to share your screen.\";\n\nvar agent_sharingAccepted = \"You shared your screen.\";\n\nvar agent_sharingDeclined = \"You declined to share your screen.\";\n\nvar agent_sharingCancelled = \"The screen sharing request was cancelled.\";\n\nvar agent_sharingEnded = \"You stopped sharing your screen.\";\n\nvar agent_suspendedWarning = \"You are currently connected to an agent.\";\n\nvar icon_ariaUnreadMessages = \"There {count, plural, one {is} other {are}} {count, number} unread {count, plural, one {message} other {messages}}\";\n\nvar showMore = \"See more\";\n\nvar showMoreResults = \"See more\";\n\nvar disclaimer_title = \"Disclaimer\";\n\nvar disclaimer_accept = \"I accept\";\n\nvar general_ariaCloseInformationOverlay = \"Close information panel.\";\n\nvar general_ariaAnnounceOpenedInformationOverlay = \"An information panel has been opened.\";\n\nvar general_ariaAnnounceClosedInformationOverlay = \"An information panel has been closed.\";\n\nvar general_ariaAnnounceEscapeOverlay = \"Press escape or click the close button to close.\";\n\nvar general_returnToAssistant = \"Return to assistant\";\n\nvar conversationalSearch_streamingIncomplete = \"This message was not completed. Please try again.\";\n\nvar conversationalSearch_viewSourceDocument = \"View source\";\n\nvar conversationalSearch_citationsLabel = \"Sources\";\n\nvar conversationalSearch_toggleCitations = \"Open or close the list of sources\";\n\nvar conversationalSearch_responseStopped = \"Response stopped\";\n\nvar launcher_chatNow = \"Chat now\";\n\nvar iframe_ariaSourceLoaded = \"The web page has loaded.\";\n\nvar iframe_ariaImageAltText = \"Preview image for the web page panel.\";\n\nvar iframe_ariaClosePanel = \"Close the web page panel.\";\n\nvar iframe_ariaOpenedPanel = \"Web page panel has opened.\";\n\nvar iframe_ariaClosedPanel = \"Web page panel has closed.\";\n\nvar iframe_ariaClickPreviewCard = \"Click to open the web page panel and visit {source}.\";\n\nvar closeAndRestartModal_title = \"End chat\";\n\nvar closeAndRestartModal_message = \"Are you sure you want to end your chat?\";\n\nvar closeAndRestartModal_confirm = \"Yes\";\n\nvar closeAndRestartModal_cancel = \"No\";\n\nvar datePicker_chooseDate = \"Choose a date ({format})\";\n\nvar datePicker_confirmDate = \"Confirm date\";\n\nvar tour_resumeButton = \"Resume\";\n\nvar tour_restartButton = \"Restart\";\n\nvar tour_startButton = \"Get started\";\n\nvar tour_doneButton = \"Done\";\n\nvar tour_ariaMinimizeButton = \"Hide tour window\";\n\nvar tour_ariaCloseButton = \"Close tour window\";\n\nvar tour_ariaChatButton = \"Open the chat window\";\n\nvar tour_ariaPreviousButton = \"Go to previous step\";\n\nvar tour_ariaNextButton = \"Go to next step\";\n\nvar tour_instructions = \"Use the previous and next buttons to navigate between steps of the tour. Use the {chatButtonText} button to open that chat window.\";\n\nvar tour_errorFetchingStep = \"There was a problem fetching the next step.\";\n\nvar tour_errorTitle = \"Unable to continue\";\n\nvar tour_errorBody = \"The content failed to load. Please try again.\";\n\nvar fileSharing_fileTooLarge = \"The maximum file size allowed is {maxSize}.\";\n\nvar fileSharing_ariaAnnounceSuccess = \"The file was uploaded successfully.\";\n\nvar fileSharing_fileIcon = \"File icon\";\n\nvar fileSharing_removeButtonTitle = \"Remove file\";\n\nvar fileSharing_statusUploading = \"Uploading file\";\n\nvar fileSharing_uploadFailed = \"There was an error uploading the file.\";\n\nvar fileSharing_agentMessageText = \"File upload\";\n\nvar fileSharing_request = \"The agent has requested you upload a file.\";\n\nvar carousel_prevNavButton = \"Go to previous slide.\";\n\nvar carousel_nextNavButton = \"Go to next slide.\";\n\nvar input_completionsTagApp = \"App\";\n\nvar input_completionsTagAssistant = \"Assistant\";\n\nvar table_filterPlaceholder = \"Filter table\";\n\nvar table_previousPage = \"Previous page\";\n\nvar table_nextPage = \"Next page\";\n\nvar table_itemsPerPage = \"Items per page:\";\n\nvar table_paginationSupplementalText = \"of {pagesCount, number} {pagesCount, plural, one {page} other {pages}}\";\n\nvar table_paginationStatus = \"{start, number}–{end, number} of {count, number} {count, plural, one {item} other {items}}\";\n\nvar feedback_positiveLabel = \"Good response\";\n\nvar feedback_negativeLabel = \"Bad response\";\n\nvar feedback_defaultTitle = \"Additional feedback\";\n\nvar feedback_defaultPrompt = \"Why did you choose this rating?\";\n\nvar feedback_defaultPlaceholder = \"Add a comment\";\n\nvar feedback_submitLabel = \"Submit\";\n\nvar feedback_cancelLabel = \"Cancel\";\n\nvar input_stopResponse = \"Stop response\";\n\nvar messages_responseStopped = \"Response stopped\";\n\nvar chainOfThought_stepTitle = \"{stepNumber, number}: {stepTitle}\";\n\nvar chainOfThought_inputLabel = \"Input\";\n\nvar chainOfThought_outputLabel = \"Output\";\n\nvar chainOfThought_toolLabel = \"Tool\";\n\nvar chainOfThought_statusSucceededLabel = \"Succeeded\";\n\nvar chainOfThought_statusFailedLabel = \"Failed\";\n\nvar chainOfThought_statusProcessingLabel = \"Processing\";\n\nvar chainOfThought_explainabilityLabel = \"How did I get this answer?\";\n\nvar enLanguagePack = {\n  ai_slug_title: ai_slug_title,\n  ai_slug_description: ai_slug_description,\n  components_overflow_ariaLabel: components_overflow_ariaLabel,\n  components_swiper_currentLabel: components_swiper_currentLabel,\n  errors_communicating: errors_communicating,\n  errors_imageSource: errors_imageSource,\n  errors_videoSource: errors_videoSource,\n  errors_audioSource: errors_audioSource,\n  errors_iframeSource: errors_iframeSource,\n  errors_singleMessage: errors_singleMessage,\n  errors_ariaMessageRetrying: errors_ariaMessageRetrying,\n  errors_ariaMessageFailed: errors_ariaMessageFailed,\n  errors_noAgentsAvailable: errors_noAgentsAvailable,\n  errors_noAgentsJoined: errors_noAgentsJoined,\n  errors_connectingToAgent: errors_connectingToAgent,\n  errors_busy: errors_busy,\n  errors_agentAppSessionExpired: errors_agentAppSessionExpired,\n  errors_generalContent: errors_generalContent,\n  errors_somethingWrong: errors_somethingWrong,\n  input_ariaLabel: input_ariaLabel,\n  input_placeholder: input_placeholder,\n  input_buttonLabel: input_buttonLabel,\n  input_uploadButtonLabel: input_uploadButtonLabel,\n  window_title: window_title,\n  window_ariaTourRegion: window_ariaTourRegion,\n  window_ariaTourRegionNamespace: window_ariaTourRegionNamespace,\n  window_ariaChatRegion: window_ariaChatRegion,\n  window_ariaChatRegionNamespace: window_ariaChatRegionNamespace,\n  window_ariaWindowOpened: window_ariaWindowOpened,\n  window_ariaWindowClosed: window_ariaWindowClosed,\n  window_ariaWindowLoading: window_ariaWindowLoading,\n  launcher_isOpen: launcher_isOpen,\n  launcher_isClosed: launcher_isClosed,\n  launcher_isTourOpen: launcher_isTourOpen,\n  launcher_isTourClosed: launcher_isTourClosed,\n  launcher_desktopGreeting: launcher_desktopGreeting,\n  launcher_mobileGreeting: launcher_mobileGreeting,\n  launcher_ariaIsExpanded: launcher_ariaIsExpanded,\n  launcher_closeButton: launcher_closeButton,\n  messages_youSaid: messages_youSaid,\n  messages_botSaid: messages_botSaid,\n  messages_agentSaid: messages_agentSaid,\n  messages_searchResults: messages_searchResults,\n  messages_searchResultsLink: messages_searchResultsLink,\n  messages_searchResultsOpenDocument: messages_searchResultsOpenDocument,\n  messages_searchResultsOpenDocumentWithLabel: messages_searchResultsOpenDocumentWithLabel,\n  messages_searchResultsExpand: messages_searchResultsExpand,\n  messages_searchResultsCollapse: messages_searchResultsCollapse,\n  messages_botIsLoading: messages_botIsLoading,\n  messages_botIsTyping: messages_botIsTyping,\n  messages_agentIsTyping: messages_agentIsTyping,\n  messages_scrollHandle: messages_scrollHandle,\n  messages_scrollHandleDetailed: messages_scrollHandleDetailed,\n  messages_scrollHandleEnd: messages_scrollHandleEnd,\n  messages_scrollHandleEndDetailed: messages_scrollHandleEndDetailed,\n  message_labelBot: message_labelBot,\n  message_labelYou: message_labelYou,\n  notifications_toastClose: notifications_toastClose,\n  buttons_restart: buttons_restart,\n  buttons_cancel: buttons_cancel,\n  buttons_retry: buttons_retry,\n  options_select: options_select,\n  options_ariaOptionsDisabled: options_ariaOptionsDisabled,\n  header_previewLinkTitle: header_previewLinkTitle,\n  header_ariaCloseRestart: header_ariaCloseRestart,\n  header_ariaBotAvatar: header_ariaBotAvatar,\n  header_overflowMenu_options: header_overflowMenu_options,\n  homeScreen_returnToAssistant: homeScreen_returnToAssistant,\n  homeScreen_returnToHome: homeScreen_returnToHome,\n  homeScreen_overflowMenuHomeScreen: homeScreen_overflowMenuHomeScreen,\n  homeScreen_ariaQuickStartListButton: homeScreen_ariaQuickStartListButton,\n  homeScreen_ariaQuickStartListOpened: homeScreen_ariaQuickStartListOpened,\n  homeScreen_ariaQuickStartListClosed: homeScreen_ariaQuickStartListClosed,\n  default_agent_availableMessage: default_agent_availableMessage,\n  default_agent_unavailableMessage: default_agent_unavailableMessage,\n  agent_reason_error: agent_reason_error,\n  agent_sdMissingWarning: agent_sdMissingWarning,\n  agent_noName: agent_noName,\n  agent_chatTitle: agent_chatTitle,\n  agent_startChat: agent_startChat,\n  agent_connecting: agent_connecting,\n  agent_agentNoNameTitle: agent_agentNoNameTitle,\n  agent_agentJoinedName: agent_agentJoinedName,\n  agent_agentJoinedNoName: agent_agentJoinedNoName,\n  agent_youConnectedWarning: agent_youConnectedWarning,\n  agent_connectingMinutes: agent_connectingMinutes,\n  agent_connectingQueue: agent_connectingQueue,\n  agent_ariaAgentAvatar: agent_ariaAgentAvatar,\n  agent_ariaGenericAvatar: agent_ariaGenericAvatar,\n  agent_ariaGenericBotAvatar: agent_ariaGenericBotAvatar,\n  agent_youEndedChat: agent_youEndedChat,\n  agent_conversationWasEnded: agent_conversationWasEnded,\n  agent_disconnected: agent_disconnected,\n  agent_reconnected: agent_reconnected,\n  agent_agentLeftChat: agent_agentLeftChat,\n  agent_agentLeftChatNoName: agent_agentLeftChatNoName,\n  agent_agentEndedChat: agent_agentEndedChat,\n  agent_agentEndedChatNoName: agent_agentEndedChatNoName,\n  agent_transferring: agent_transferring,\n  agent_transferringNoName: agent_transferringNoName,\n  agent_endChat: agent_endChat,\n  agent_confirmSuspendedEndChatTitle: agent_confirmSuspendedEndChatTitle,\n  agent_confirmSuspendedEndChatMessage: agent_confirmSuspendedEndChatMessage,\n  agent_confirmCancelRequestTitle: agent_confirmCancelRequestTitle,\n  agent_confirmCancelRequestMessage: agent_confirmCancelRequestMessage,\n  agent_confirmCancelRequestNo: agent_confirmCancelRequestNo,\n  agent_confirmCancelRequestYes: agent_confirmCancelRequestYes,\n  agent_confirmEndChat: agent_confirmEndChat,\n  agent_confirmEndChatNo: agent_confirmEndChatNo,\n  agent_confirmEndChatYes: agent_confirmEndChatYes,\n  agent_confirmEndSuspendedYes: agent_confirmEndSuspendedYes,\n  agent_botReturned: agent_botReturned,\n  agent_newMessage: agent_newMessage,\n  agent_cardButtonChatRequested: agent_cardButtonChatRequested,\n  agent_cardButtonConnected: agent_cardButtonConnected,\n  agent_cardButtonChatEnded: agent_cardButtonChatEnded,\n  agent_cardMessageChatEnded: agent_cardMessageChatEnded,\n  agent_cardMessageConnected: agent_cardMessageConnected,\n  agent_connectButtonCancel: agent_connectButtonCancel,\n  agent_connectedButtonEndChat: agent_connectedButtonEndChat,\n  agent_connectWaiting: agent_connectWaiting,\n  agent_defaultMessageToAgent: agent_defaultMessageToAgent,\n  agent_inputPlaceholderConnecting: agent_inputPlaceholderConnecting,\n  agent_inputPlaceholderReconnecting: agent_inputPlaceholderReconnecting,\n  agent_sharingStopSharingButton: agent_sharingStopSharingButton,\n  agent_sharingRequestTitle: agent_sharingRequestTitle,\n  agent_sharingRequestMessage: agent_sharingRequestMessage,\n  agent_sharingAcceptButton: agent_sharingAcceptButton,\n  agent_sharingDeclineButton: agent_sharingDeclineButton,\n  agent_sharingRequested: agent_sharingRequested,\n  agent_sharingAccepted: agent_sharingAccepted,\n  agent_sharingDeclined: agent_sharingDeclined,\n  agent_sharingCancelled: agent_sharingCancelled,\n  agent_sharingEnded: agent_sharingEnded,\n  agent_suspendedWarning: agent_suspendedWarning,\n  icon_ariaUnreadMessages: icon_ariaUnreadMessages,\n  showMore: showMore,\n  showMoreResults: showMoreResults,\n  disclaimer_title: disclaimer_title,\n  disclaimer_accept: disclaimer_accept,\n  general_ariaCloseInformationOverlay: general_ariaCloseInformationOverlay,\n  general_ariaAnnounceOpenedInformationOverlay: general_ariaAnnounceOpenedInformationOverlay,\n  general_ariaAnnounceClosedInformationOverlay: general_ariaAnnounceClosedInformationOverlay,\n  general_ariaAnnounceEscapeOverlay: general_ariaAnnounceEscapeOverlay,\n  general_returnToAssistant: general_returnToAssistant,\n  conversationalSearch_streamingIncomplete: conversationalSearch_streamingIncomplete,\n  conversationalSearch_viewSourceDocument: conversationalSearch_viewSourceDocument,\n  conversationalSearch_citationsLabel: conversationalSearch_citationsLabel,\n  conversationalSearch_toggleCitations: conversationalSearch_toggleCitations,\n  conversationalSearch_responseStopped: conversationalSearch_responseStopped,\n  launcher_chatNow: launcher_chatNow,\n  iframe_ariaSourceLoaded: iframe_ariaSourceLoaded,\n  iframe_ariaImageAltText: iframe_ariaImageAltText,\n  iframe_ariaClosePanel: iframe_ariaClosePanel,\n  iframe_ariaOpenedPanel: iframe_ariaOpenedPanel,\n  iframe_ariaClosedPanel: iframe_ariaClosedPanel,\n  iframe_ariaClickPreviewCard: iframe_ariaClickPreviewCard,\n  closeAndRestartModal_title: closeAndRestartModal_title,\n  closeAndRestartModal_message: closeAndRestartModal_message,\n  closeAndRestartModal_confirm: closeAndRestartModal_confirm,\n  closeAndRestartModal_cancel: closeAndRestartModal_cancel,\n  datePicker_chooseDate: datePicker_chooseDate,\n  datePicker_confirmDate: datePicker_confirmDate,\n  tour_resumeButton: tour_resumeButton,\n  tour_restartButton: tour_restartButton,\n  tour_startButton: tour_startButton,\n  tour_doneButton: tour_doneButton,\n  tour_ariaMinimizeButton: tour_ariaMinimizeButton,\n  tour_ariaCloseButton: tour_ariaCloseButton,\n  tour_ariaChatButton: tour_ariaChatButton,\n  tour_ariaPreviousButton: tour_ariaPreviousButton,\n  tour_ariaNextButton: tour_ariaNextButton,\n  tour_instructions: tour_instructions,\n  tour_errorFetchingStep: tour_errorFetchingStep,\n  tour_errorTitle: tour_errorTitle,\n  tour_errorBody: tour_errorBody,\n  fileSharing_fileTooLarge: fileSharing_fileTooLarge,\n  fileSharing_ariaAnnounceSuccess: fileSharing_ariaAnnounceSuccess,\n  fileSharing_fileIcon: fileSharing_fileIcon,\n  fileSharing_removeButtonTitle: fileSharing_removeButtonTitle,\n  fileSharing_statusUploading: fileSharing_statusUploading,\n  fileSharing_uploadFailed: fileSharing_uploadFailed,\n  fileSharing_agentMessageText: fileSharing_agentMessageText,\n  fileSharing_request: fileSharing_request,\n  carousel_prevNavButton: carousel_prevNavButton,\n  carousel_nextNavButton: carousel_nextNavButton,\n  input_completionsTagApp: input_completionsTagApp,\n  input_completionsTagAssistant: input_completionsTagAssistant,\n  table_filterPlaceholder: table_filterPlaceholder,\n  table_previousPage: table_previousPage,\n  table_nextPage: table_nextPage,\n  table_itemsPerPage: table_itemsPerPage,\n  table_paginationSupplementalText: table_paginationSupplementalText,\n  table_paginationStatus: table_paginationStatus,\n  feedback_positiveLabel: feedback_positiveLabel,\n  feedback_negativeLabel: feedback_negativeLabel,\n  feedback_defaultTitle: feedback_defaultTitle,\n  feedback_defaultPrompt: feedback_defaultPrompt,\n  feedback_defaultPlaceholder: feedback_defaultPlaceholder,\n  feedback_submitLabel: feedback_submitLabel,\n  feedback_cancelLabel: feedback_cancelLabel,\n  input_stopResponse: input_stopResponse,\n  messages_responseStopped: messages_responseStopped,\n  chainOfThought_stepTitle: chainOfThought_stepTitle,\n  chainOfThought_inputLabel: chainOfThought_inputLabel,\n  chainOfThought_outputLabel: chainOfThought_outputLabel,\n  chainOfThought_toolLabel: chainOfThought_toolLabel,\n  chainOfThought_statusSucceededLabel: chainOfThought_statusSucceededLabel,\n  chainOfThought_statusFailedLabel: chainOfThought_statusFailedLabel,\n  chainOfThought_statusProcessingLabel: chainOfThought_statusProcessingLabel,\n  chainOfThought_explainabilityLabel: chainOfThought_explainabilityLabel\n};\n\nexport { agent_agentEndedChat, agent_agentEndedChatNoName, agent_agentJoinedName, agent_agentJoinedNoName, agent_agentLeftChat, agent_agentLeftChatNoName, agent_agentNoNameTitle, agent_ariaAgentAvatar, agent_ariaGenericAvatar, agent_ariaGenericBotAvatar, agent_botReturned, agent_cardButtonChatEnded, agent_cardButtonChatRequested, agent_cardButtonConnected, agent_cardMessageChatEnded, agent_cardMessageConnected, agent_chatTitle, agent_confirmCancelRequestMessage, agent_confirmCancelRequestNo, agent_confirmCancelRequestTitle, agent_confirmCancelRequestYes, agent_confirmEndChat, agent_confirmEndChatNo, agent_confirmEndChatYes, agent_confirmEndSuspendedYes, agent_confirmSuspendedEndChatMessage, agent_confirmSuspendedEndChatTitle, agent_connectButtonCancel, agent_connectWaiting, agent_connectedButtonEndChat, agent_connecting, agent_connectingMinutes, agent_connectingQueue, agent_conversationWasEnded, agent_defaultMessageToAgent, agent_disconnected, agent_endChat, agent_inputPlaceholderConnecting, agent_inputPlaceholderReconnecting, agent_newMessage, agent_noName, agent_reason_error, agent_reconnected, agent_sdMissingWarning, agent_sharingAcceptButton, agent_sharingAccepted, agent_sharingCancelled, agent_sharingDeclineButton, agent_sharingDeclined, agent_sharingEnded, agent_sharingRequestMessage, agent_sharingRequestTitle, agent_sharingRequested, agent_sharingStopSharingButton, agent_startChat, agent_suspendedWarning, agent_transferring, agent_transferringNoName, agent_youConnectedWarning, agent_youEndedChat, ai_slug_description, ai_slug_title, buttons_cancel, buttons_restart, buttons_retry, carousel_nextNavButton, carousel_prevNavButton, chainOfThought_explainabilityLabel, chainOfThought_inputLabel, chainOfThought_outputLabel, chainOfThought_statusFailedLabel, chainOfThought_statusProcessingLabel, chainOfThought_statusSucceededLabel, chainOfThought_stepTitle, chainOfThought_toolLabel, closeAndRestartModal_cancel, closeAndRestartModal_confirm, closeAndRestartModal_message, closeAndRestartModal_title, components_overflow_ariaLabel, components_swiper_currentLabel, conversationalSearch_citationsLabel, conversationalSearch_responseStopped, conversationalSearch_streamingIncomplete, conversationalSearch_toggleCitations, conversationalSearch_viewSourceDocument, datePicker_chooseDate, datePicker_confirmDate, enLanguagePack as default, default_agent_availableMessage, default_agent_unavailableMessage, disclaimer_accept, disclaimer_title, errors_agentAppSessionExpired, errors_ariaMessageFailed, errors_ariaMessageRetrying, errors_audioSource, errors_busy, errors_communicating, errors_connectingToAgent, errors_generalContent, errors_iframeSource, errors_imageSource, errors_noAgentsAvailable, errors_noAgentsJoined, errors_singleMessage, errors_somethingWrong, errors_videoSource, feedback_cancelLabel, feedback_defaultPlaceholder, feedback_defaultPrompt, feedback_defaultTitle, feedback_negativeLabel, feedback_positiveLabel, feedback_submitLabel, fileSharing_agentMessageText, fileSharing_ariaAnnounceSuccess, fileSharing_fileIcon, fileSharing_fileTooLarge, fileSharing_removeButtonTitle, fileSharing_request, fileSharing_statusUploading, fileSharing_uploadFailed, general_ariaAnnounceClosedInformationOverlay, general_ariaAnnounceEscapeOverlay, general_ariaAnnounceOpenedInformationOverlay, general_ariaCloseInformationOverlay, general_returnToAssistant, header_ariaBotAvatar, header_ariaCloseRestart, header_overflowMenu_options, header_previewLinkTitle, homeScreen_ariaQuickStartListButton, homeScreen_ariaQuickStartListClosed, homeScreen_ariaQuickStartListOpened, homeScreen_overflowMenuHomeScreen, homeScreen_returnToAssistant, homeScreen_returnToHome, icon_ariaUnreadMessages, iframe_ariaClickPreviewCard, iframe_ariaClosePanel, iframe_ariaClosedPanel, iframe_ariaImageAltText, iframe_ariaOpenedPanel, iframe_ariaSourceLoaded, input_ariaLabel, input_buttonLabel, input_completionsTagApp, input_completionsTagAssistant, input_placeholder, input_stopResponse, input_uploadButtonLabel, launcher_ariaIsExpanded, launcher_chatNow, launcher_closeButton, launcher_desktopGreeting, launcher_isClosed, launcher_isOpen, launcher_isTourClosed, launcher_isTourOpen, launcher_mobileGreeting, message_labelBot, message_labelYou, messages_agentIsTyping, messages_agentSaid, messages_botIsLoading, messages_botIsTyping, messages_botSaid, messages_responseStopped, messages_scrollHandle, messages_scrollHandleDetailed, messages_scrollHandleEnd, messages_scrollHandleEndDetailed, messages_searchResults, messages_searchResultsCollapse, messages_searchResultsExpand, messages_searchResultsLink, messages_searchResultsOpenDocument, messages_searchResultsOpenDocumentWithLabel, messages_youSaid, notifications_toastClose, options_ariaOptionsDisabled, options_select, showMore, showMoreResults, table_filterPlaceholder, table_itemsPerPage, table_nextPage, table_paginationStatus, table_paginationSupplementalText, table_previousPage, tour_ariaChatButton, tour_ariaCloseButton, tour_ariaMinimizeButton, tour_ariaNextButton, tour_ariaPreviousButton, tour_doneButton, tour_errorBody, tour_errorFetchingStep, tour_errorTitle, tour_instructions, tour_restartButton, tour_resumeButton, tour_startButton, window_ariaChatRegion, window_ariaChatRegionNamespace, window_ariaTourRegion, window_ariaTourRegionNamespace, window_ariaWindowClosed, window_ariaWindowLoading, window_ariaWindowOpened, window_title };\n","import { PureComponent } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class MountChildrenOnDelay extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      showChildren: false\n    };\n  }\n  componentDidMount() {\n    this.onComponentDidMount = setTimeout(() => {\n      this.setState({\n        showChildren: true\n      });\n    }, this.props.delay);\n  }\n  componentWillUnmount() {\n    clearTimeout(this.onComponentDidMount);\n    this.onComponentDidMount = undefined;\n  }\n  render() {\n    if (!this.state.showChildren) {\n      return false;\n    }\n    return this.props.children;\n  }\n}\n\nMountChildrenOnDelay.defaultProps = {\n  delay: 500\n};\n\nexport { MountChildrenOnDelay };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction resolvablePromise() {\n  let resolveFunction;\n  let rejectFunction;\n  const promise = new Promise((resolve, reject) => {\n    resolveFunction = resolve;\n    rejectFunction = reject;\n  });\n  promise.doResolve = resolveValue => {\n    promise.isResolved = true;\n    promise.isComplete = true;\n    resolveFunction(resolveValue);\n  };\n  promise.doReject = rejectValue => {\n    promise.isRejected = true;\n    promise.isComplete = true;\n    rejectFunction(rejectValue);\n  };\n  promise.isResolved = false;\n  promise.isRejected = false;\n  promise.isComplete = false;\n  return promise;\n}\n\nexport { resolvablePromise };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function loadHAA() {\n  const {createService: createService} = await import(\"../shared/services/haa/HumanAgentServiceImpl.js\");\n  return createService;\n}\n\nfunction lazyWithPreload(factory) {\n  const Component = React.lazy(factory);\n  Component.preload = factory;\n  return Component;\n}\n\nfunction lazyChat() {\n  return lazyWithPreload(() => import(\"../shared/components/Chat.js\"));\n}\n\nfunction lazyCatastrophicError() {\n  return lazyWithPreload(() => import(\"../shared/components/CatastrophicError.js\").then(mod => ({\n    default: mod.CatastrophicError\n  })));\n}\n\nfunction lazyDisclaimer() {\n  return lazyWithPreload(() => import(\"../shared/components/Disclaimer.js\").then(mod => ({\n    default: mod.Disclaimer\n  })));\n}\n\nfunction lazyHomeScreenContainer() {\n  return lazyWithPreload(() => import(\"../shared/components/homeScreen/HomeScreenContainer.js\").then(mod => ({\n    default: mod.HomeScreenContainer\n  })));\n}\n\nfunction lazyIFramePanel() {\n  return lazyWithPreload(() => import(\"../shared/components/responseTypes/iframe/IFramePanel.js\").then(mod => ({\n    default: mod.IFramePanel\n  })));\n}\n\nfunction lazyViewSourcePanel() {\n  return lazyWithPreload(() => import(\"../shared/components/responseTypes/util/citations/ViewSourcePanel.js\").then(mod => ({\n    default: mod.ViewSourcePanel\n  })));\n}\n\nfunction lazyBodyAndFooterPanelComponent() {\n  return lazyWithPreload(() => import(\"../shared/components/panels/BodyAndFooterPanelComponent.js\").then(mod => ({\n    default: mod.BodyAndFooterPanelComponent\n  })));\n}\n\nfunction lazyTourComponent() {\n  return React.lazy(() => import(\"../shared/components/tour/TourContainer.js\"));\n}\n\nfunction lazyMediaPlayer() {\n  return React.lazy(() => import(\"../shared/components/responseTypes/util/ReactPlayer.js\"));\n}\n\nfunction lazyCarousel() {\n  return React.lazy(() => import(\"../shared/components/responseTypes/carousel/Carousel.js\"));\n}\n\nexport { lazyBodyAndFooterPanelComponent, lazyCarousel, lazyCatastrophicError, lazyChat, lazyDisclaimer, lazyHomeScreenContainer, lazyIFramePanel, lazyMediaPlayer, lazyTourComponent, lazyViewSourcePanel, loadHAA };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const VisuallyHidden = React.forwardRef((props, ref) => React.createElement(\"div\", {\n  ref: ref,\n  ...props,\n  className: `WACVisuallyHidden ${props.className || \"\"}`\n}, props.children));\n\nVisuallyHidden.displayName = \"VisuallyHidden\";\n\nexport { VisuallyHidden as default };\n","import { detect } from \"detect-browser\";\n\nimport memoizeOne from \"memoize-one\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const isClient = typeof window !== \"undefined\" && typeof navigator !== \"undefined\";\n\nconst browser = isClient ? detect() : undefined;\n\nlet screenWidth = 0;\n\nlet screenHeight = 0;\n\nif (isClient) {\n  screenWidth = window.screen.width;\n  screenHeight = window.screen.height;\n}\n\nconst IS_IOS = browser?.os === \"iOS\";\n\nconst IS_ANDROID = browser?.os === \"Android OS\";\n\nconst IS_MOBILE = IS_IOS || IS_ANDROID;\n\nconst IS_PHONE = IS_MOBILE && (screenWidth < 500 || screenHeight < 500);\n\nconst IS_PHONE_IN_PORTRAIT_MODE = IS_PHONE && screenWidth < 500;\n\nfunction isSessionStorageAvailable() {\n  if (!isClient || !window.sessionStorage) {\n    return false;\n  }\n  try {\n    window.sessionStorage.setItem(\"web-chat-test-item\", \"true\");\n    window.sessionStorage.getItem(\"web-chat-test-item\");\n    window.sessionStorage.removeItem(\"web-chat-test-item\");\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nconst IS_SESSION_STORAGE = memoizeOne(isSessionStorageAvailable);\n\nfunction getURLHostName(url) {\n  try {\n    return new URL(url).hostname;\n  } catch {\n    return url;\n  }\n}\n\nfunction conditionalSetTimeout(operation, timeout) {\n  if (timeout) {\n    return setTimeout(operation, timeout);\n  }\n  operation();\n  return null;\n}\n\nexport { IS_IOS, IS_MOBILE, IS_PHONE, IS_PHONE_IN_PORTRAIT_MODE, IS_SESSION_STORAGE, conditionalSetTimeout, getURLHostName };\n","import { useRef, useEffect } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport { usePrevious };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar ChatHeaderObjectType;\n\n(function(ChatHeaderObjectType) {\n  ChatHeaderObjectType[\"LINK\"] = \"link\";\n  ChatHeaderObjectType[\"MENU\"] = \"menu\";\n  ChatHeaderObjectType[\"BUTTON\"] = \"button\";\n  ChatHeaderObjectType[\"RADIO_GROUP\"] = \"radio-group\";\n})(ChatHeaderObjectType || (ChatHeaderObjectType = {}));\n\nexport { ChatHeaderObjectType };\n","import { __decorate } from \"tslib\";\n\nimport { bind } from \"bind-decorator\";\n\nimport { LitElement, unsafeCSS, css } from \"lit\";\n\nimport { property, state } from \"lit/decorators.js\";\n\nimport css_248z from \"./chatHeaderAvatarElement.scss.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class ChatHeaderAvatarElement extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isLoaded = false;\n  }\n  _handleOnError() {\n    this.onError?.();\n  }\n}\n\nChatHeaderAvatarElement.styles = css`\n    ${unsafeCSS(css_248z)}\n  `;\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"url\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"corners\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"alt\", void 0);\n\n__decorate([ property({\n  type: Object\n}) ], ChatHeaderAvatarElement.prototype, \"onError\", void 0);\n\n__decorate([ state() ], ChatHeaderAvatarElement.prototype, \"isLoaded\", void 0);\n\n__decorate([ bind ], ChatHeaderAvatarElement.prototype, \"_handleOnError\", null);\n\nexport { ChatHeaderAvatarElement };\n","var css_248z = \".cds--aichat-chat-header-avatar{\\n  display:block;\\n  block-size:20px;\\n  max-block-size:20px;\\n}\\n\\n.cds--aichat-chat-header-avatar--round{\\n  border-radius:10px;\\n}\";\n\nexport { css_248z as default };\n","import { __decorate } from \"tslib\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { chatHeaderAvatarTemplate } from \"./src/chatHeaderAvatar.template.js\";\n\nimport { ChatHeaderAvatarElement } from \"./src/chatHeaderAvatarElement.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CHAT_HEADER_AVATAR_TAG_NAME = \"cds-aichat-chat-header-avatar\";\n\nlet CDSChatHeaderAvatarElement = class CDSChatHeaderAvatarElement extends ChatHeaderAvatarElement {\n  render() {\n    return chatHeaderAvatarTemplate(this);\n  }\n};\n\nCDSChatHeaderAvatarElement = __decorate([ carbonElement(CHAT_HEADER_AVATAR_TAG_NAME) ], CDSChatHeaderAvatarElement);\n\nexport { CHAT_HEADER_AVATAR_TAG_NAME, CDSChatHeaderAvatarElement as default };\n","import \"@carbon/web-components/es-custom/components/skeleton-icon/index.js\";\n\nimport cx from \"classnames\";\n\nimport { html } from \"lit\";\n\nimport { CSS_CLASS_PREFIX } from \"../../../../settings.js\";\n\nimport { CornersType } from \"../../../../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderAvatarTemplate(classElement) {\n  const {url: url, corners: corners, alt: alt, onError: onError} = classElement;\n  return html`\n    <img\n      class=\"${cx(`${CSS_CLASS_PREFIX}-chat-header-avatar`, {\n    [`${CSS_CLASS_PREFIX}-chat-header-avatar--round`]: corners === CornersType.ROUND\n  })}\"\n      src=\"${url}\"\n      alt=\"${alt}\"\n      @error=\"${onError}\"\n    />\n  `;\n}\n\nexport { chatHeaderAvatarTemplate };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport CDSChatHeaderAvatarElement, { CHAT_HEADER_AVATAR_TAG_NAME } from \"../../../web-components/components/chatHeader/chatHeaderAvatar/cds-aichat-chat-header-avatar.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderAvatar = createComponent({\n  tagName: CHAT_HEADER_AVATAR_TAG_NAME,\n  elementClass: CDSChatHeaderAvatarElement,\n  react: React\n});\n\nexport { ChatHeaderAvatar };\n","import { __decorate } from \"tslib\";\n\nimport { LitElement } from \"lit\";\n\nimport { property } from \"lit/decorators.js\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../settings.js\";\n\nimport { chatHeaderLinkTemplate } from \"./src/chatHeaderLinkElement.template.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let ChatHeaderLinkElement = class ChatHeaderLinkElement extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isNewTab = true;\n  }\n  render() {\n    return chatHeaderLinkTemplate(this);\n  }\n};\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderLinkElement.prototype, \"url\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderLinkElement.prototype, \"label\", void 0);\n\n__decorate([ property({\n  type: Boolean\n}) ], ChatHeaderLinkElement.prototype, \"isNewTab\", void 0);\n\nChatHeaderLinkElement = __decorate([ carbonElement(`${WEB_COMPONENT_PREFIX}-chat-header-link`) ], ChatHeaderLinkElement);\n\nexport { ChatHeaderLinkElement };\n","import \"@carbon/web-components/es-custom/components/button/index.js\";\n\nimport \"@carbon/web-components/es-custom/components/overflow-menu/index.js\";\n\nimport { html } from \"lit\";\n\nimport { ButtonKindEnum } from \"../../../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderLinkTemplate(customElementClass) {\n  const {label: label, url: url, isNewTab: isNewTab} = customElementClass;\n  return html`<cds-custom-button\n    class=\"WACChatHeaderLink\"\n    href=\"${url}\"\n    target=\"${isNewTab ? \"_blank\" : \"_self\"}\"\n    kind=\"${ButtonKindEnum.GHOST}\"\n    size=\"md\"\n    >${label}</cds-custom-button\n  >`;\n}\n\nexport { chatHeaderLinkTemplate };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport { ChatHeaderLinkElement } from \"../../../web-components/components/chatHeader/chatHeaderLink/cds-aichat-chat-header-link.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../web-components/settings.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderLink = createComponent({\n  tagName: `${WEB_COMPONENT_PREFIX}-chat-header-link`,\n  elementClass: ChatHeaderLinkElement,\n  react: React\n});\n\nexport { ChatHeaderLink };\n","import { Menu } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenu({id: id, className: className, label: label, isOpen: isOpen, target: target, children: children, menuAlignment: menuAlignment, containerRef: containerRef}) {\n  return React.createElement(Menu, {\n    id: id,\n    className: className,\n    open: isOpen,\n    target: target,\n    label: label,\n    size: \"md\",\n    menuAlignment: menuAlignment,\n    mode: \"full\",\n    legacyAutoalign: false,\n    containerRef: containerRef\n  }, children);\n}\n\nexport { ChatHeaderMenu };\n","import ChevronDown from \"@carbon/icons-react/es/ChevronDown.js\";\n\nimport ChevronUp from \"@carbon/icons-react/es/ChevronUp.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport { useFloating, useInteractions, useClick, useDismiss } from \"@floating-ui/react\";\n\nimport React, { useState } from \"react\";\n\nimport { useUUID } from \"../../../shared/hooks/useUUID.js\";\n\nimport { ChatHeaderMenu } from \"./ChatHeaderMenu.js\";\n\nimport { ButtonKindEnum, ButtonSizeEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuButton(props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const {refs: menuRefs, context: menuContext} = useFloating({\n    open: isOpen,\n    onOpenChange: setIsOpen\n  });\n  const {getReferenceProps: getMenuReferenceProps, getFloatingProps: getMenuFloatingProps} = useInteractions([ useClick(menuContext), useDismiss(menuContext) ]);\n  const id = useUUID();\n  return React.createElement(\"div\", {\n    ref: menuRefs.setReference,\n    \"aria-owns\": id,\n    ...getMenuReferenceProps()\n  }, React.createElement(Button, {\n    size: ButtonSizeEnum.MEDIUM,\n    kind: ButtonKindEnum.GHOST,\n    onClick: () => setIsOpen(!isOpen),\n    renderIcon: isOpen ? ChevronUp : ChevronDown,\n    onMouseDown: event => event.preventDefault(),\n    \"aria-label\": props.ariaLabel,\n    \"aria-haspopup\": true,\n    \"aria-expanded\": isOpen,\n    \"aria-controls\": id\n  }, props.label), React.createElement(ChatHeaderMenu, {\n    id: id,\n    isOpen: isOpen,\n    target: menuRefs.floating.current,\n    label: props.label,\n    containerRef: props.containerRef,\n    menuAlignment: props.menuAlignment\n  }, props.children), React.createElement(\"div\", {\n    ref: menuRefs.setFloating,\n    className: \"WAChatHeaderMenuButton_HostElement\",\n    ...getMenuFloatingProps()\n  }));\n}\n\nexport { ChatHeaderMenuButton };\n","import { MenuItem } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuItem({label: label, url: url, isNewTab: isNewTab = true, onClick: onClick, children: children}) {\n  return React.createElement(MenuItem, {\n    label: label,\n    onClick: () => {\n      onClick?.();\n      if (url) {\n        window.open(url, isNewTab ? \"_blank\" : \"_self\");\n      }\n    }\n  }, children);\n}\n\nexport { ChatHeaderMenuItem };\n","import { MenuItemRadioGroup } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuItemRadioGroup(props) {\n  const {label: label, items: items, defaultSelectedItem: defaultSelectedItem, selectedItem: selectedItem, onChange: onChange} = props;\n  return React.createElement(MenuItemRadioGroup, {\n    label: label,\n    items: items,\n    defaultSelectedItem: defaultSelectedItem,\n    selectedItem: selectedItem,\n    onChange: selectedItem => {\n      if (!selectedItem.preventDefault) {\n        onChange(selectedItem);\n      }\n    },\n    itemToString: menuItem => typeof menuItem === \"string\" ? menuItem : menuItem.label || menuItem.value\n  });\n}\n\nexport { ChatHeaderMenuItemRadioGroup };\n","import { Button } from \"@carbon/react\";\n\nimport { useFloating, useInteractions, useClick, useDismiss } from \"@floating-ui/react\";\n\nimport cx from \"classnames\";\n\nimport React, { useState } from \"react\";\n\nimport { useUUID } from \"../../../shared/hooks/useUUID.js\";\n\nimport { ChatHeaderMenu } from \"./ChatHeaderMenu.js\";\n\nimport { ButtonKindEnum, ButtonSizeEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderOverflowMenu(props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const {refs: menuRefs, context: menuContext} = useFloating({\n    open: isOpen,\n    onOpenChange: isOpen => {\n      setIsOpen(isOpen);\n      if (isOpen) {\n        props.onOpen?.();\n      } else {\n        props.onClose?.();\n      }\n    }\n  });\n  const {getReferenceProps: getMenuReferenceProps, getFloatingProps: getMenuFloatingProps} = useInteractions([ useClick(menuContext), useDismiss(menuContext) ]);\n  const id = useUUID();\n  return React.createElement(\"div\", {\n    ref: menuRefs.setReference,\n    \"aria-owns\": id,\n    ...getMenuReferenceProps()\n  }, React.createElement(Button, {\n    className: cx(\"WACChatHeaderOverflowMenu__Button\", props.className),\n    size: ButtonSizeEnum.MEDIUM,\n    kind: ButtonKindEnum.GHOST,\n    onClick: () => setIsOpen(!isOpen),\n    tooltipPosition: props.tooltipPosition,\n    renderIcon: props.renderIcon,\n    onMouseDown: event => event.preventDefault(),\n    iconDescription: props.iconDescription,\n    hasIconOnly: true,\n    \"aria-label\": props.ariaLabel,\n    \"aria-haspopup\": true,\n    \"aria-expanded\": isOpen,\n    \"aria-controls\": id\n  }), React.createElement(ChatHeaderMenu, {\n    id: id,\n    label: props.ariaLabel,\n    isOpen: isOpen,\n    target: menuRefs.floating.current,\n    containerRef: props.containerRef,\n    menuAlignment: props.menuAlignment\n  }, props.children), React.createElement(\"div\", {\n    ref: menuRefs.setFloating,\n    className: \"WACChatHeaderOverflowMenu__HostElement\",\n    ...getMenuFloatingProps()\n  }));\n}\n\nexport { ChatHeaderOverflowMenu };\n","import { __decorate } from \"tslib\";\n\nimport { LitElement, unsafeCSS, css } from \"lit\";\n\nimport { property } from \"lit/decorators.js\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../settings.js\";\n\nimport css_248z from \"./src/chatHeaderTitle.scss.js\";\n\nimport { chatHeaderTitleTemplate } from \"./src/chatHeaderTitle.template.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let ChatHeaderTitleElement = class ChatHeaderTitleElement extends LitElement {\n  render() {\n    return chatHeaderTitleTemplate(this);\n  }\n};\n\nChatHeaderTitleElement.styles = css`\n    ${unsafeCSS(css_248z)}\n  `;\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderTitleElement.prototype, \"title\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderTitleElement.prototype, \"name\", void 0);\n\nChatHeaderTitleElement = __decorate([ carbonElement(`${WEB_COMPONENT_PREFIX}-chat-header-title`) ], ChatHeaderTitleElement);\n\nexport { ChatHeaderTitleElement };\n","import { html } from \"lit\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderTitleTemplate(customElementClass) {\n  const {title: title, name: name} = customElementClass;\n  return html`<div class=\"WACChatHeaderTitle\">\n    <span className=\"WACChatHeaderTitle__Title\" ?hidden=\"${!title}\"\n      >${title}</span\n    >\n    <span class=\"WACChatHeaderTitle__Name\">${name}</span>\n  </div>`;\n}\n\nexport { chatHeaderTitleTemplate };\n","var css_248z = \"cds-chat-header-title{\\n  text-align:center;\\n}\\n\\n.WACChatHeaderTitle{\\n  overflow:hidden;\\n  font-size:var(--cds-chat-BASE-font-size-med);\\n  font-weight:400;\\n  line-height:var(--cds-chat-BASE-line-height-med);\\n  overflow-wrap:break-word;\\n  text-overflow:ellipsis;\\n  white-space:nowrap;\\n  word-wrap:break-word;\\n}\\n\\n.WACChatHeaderTitle .WACChatHeaderTitle__Title:only-child{\\n  padding-inline-end:0.25rem;\\n}\\n\\n.WACChatHeaderTitle__Name{\\n  font-weight:var(--cds-chat-BASE-weight-semibold);\\n}\";\n\nexport { css_248z as default };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport { ChatHeaderTitleElement } from \"../../../web-components/components/chatHeader/chatHeaderTitle/cds-aichat-chat-header-title.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../web-components/settings.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderTitle = createComponent({\n  tagName: `${WEB_COMPONENT_PREFIX}-chat-header-title`,\n  elementClass: ChatHeaderTitleElement,\n  react: React\n});\n\nexport { ChatHeaderTitle };\n","import \"@carbon/web-components/es-custom/components/ai-label/ai-label-action-button.js\";\n\nimport CDSAILabel from \"@carbon/web-components/es-custom/components/ai-label/ai-label.js\";\n\nimport { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const AISlug = createComponent({\n  tagName: \"cds-custom-ai-label\",\n  elementClass: CDSAILabel,\n  react: React\n});\n\nexport { AISlug };\n","import \"@carbon/web-components/es-custom/components/slug/index.js\";\n\nimport Close from \"@carbon/icons-react/es/Close.js\";\n\nimport CloseLarge from \"@carbon/icons-react/es/CloseLarge.js\";\n\nimport DownToBottom from \"@carbon/icons-react/es/DownToBottom.js\";\n\nimport Menu from \"@carbon/icons-react/es/Menu.js\";\n\nimport Restart from \"@carbon/icons-react/es/Restart.js\";\n\nimport SidePanelClose from \"@carbon/icons-react/es/SidePanelClose.js\";\n\nimport SubtractLarge from \"@carbon/icons-react/es/SubtractLarge.js\";\n\nimport { MenuItem, Button, MenuItemDivider } from \"@carbon/react\";\n\nimport { AI_LABEL_SIZE } from \"@carbon/web-components/es-custom/components/ai-label/defs.js\";\n\nimport { POPOVER_ALIGNMENT } from \"@carbon/web-components/es-custom/components/popover/defs.js\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useRef, useState, useContext, useCallback, useImperativeHandle, useEffect, Fragment } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { ChatHeaderObjectType } from \"../../../../types/config/ChatHeaderConfig.js\";\n\nimport { ChatHeaderAvatar } from \"../../../react/components/chatHeader/ChatHeaderAvatar.js\";\n\nimport { ChatHeaderLink } from \"../../../react/components/chatHeader/ChatHeaderLink.js\";\n\nimport { ChatHeaderMenuButton } from \"../../../react/components/chatHeader/ChatHeaderMenuButton.js\";\n\nimport { ChatHeaderMenuItem } from \"../../../react/components/chatHeader/ChatHeaderMenuItem.js\";\n\nimport { ChatHeaderMenuItemRadioGroup } from \"../../../react/components/chatHeader/ChatHeaderMenuItemRadioGroup.js\";\n\nimport { ChatHeaderOverflowMenu } from \"../../../react/components/chatHeader/ChatHeaderOverflowMenu.js\";\n\nimport { ChatHeaderTitle } from \"../../../react/components/chatHeader/ChatHeaderTitle.js\";\n\nimport { HideComponentContext } from \"../../contexts/HideComponentContext.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { ChatWidthBreakpoint } from \"../../../../types/state/AppState.js\";\n\nimport \"../../utils/constants.js\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { ConfirmModal } from \"../modals/ConfirmModal.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\nimport { AISlug } from \"./AISlug.js\";\n\nimport { ButtonSizeEnum, ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\nimport { MinimizeButtonIconType } from \"../../../../types/config/PublicConfig.js\";\n\nimport { makeTestId, PageObjectId } from \"../../utils/PageObjectId.js\";\n\nimport { WriteableElementName } from \"../../../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst HEADER_OBJECTS_GAP_MIN_SIZE = 100;\n\nfunction Header(props, ref) {\n  const {displayName: displayName, backContent: backContent, showRestartButton: showRestartButton, showBackButton: showBackButton, useAITheme: useAITheme, labelBackButton: labelBackButton, onClickClose: onClickClose, onClickRestart: onClickRestart, onCloseAndRestart: onCloseAndRestart, onClickBack: onClickBack, overflowItems: overflowItems, overflowClicked: overflowClicked, backButtonType: backButtonType, showCenter: showCenter, hideCloseButton: hideCloseButton, hideCloseAndRestartButton: hideCloseAndRestartButton, brandColor: brandColor = \"primary\", enableChatHeaderConfig: enableChatHeaderConfig, headerAvatarConfig: headerAvatarConfig, testIdPrefix: testIdPrefix} = props;\n  const backButtonRef = useRef();\n  const restartButtonRef = useRef();\n  const closeAndRestartButtonRef = useRef();\n  const closeButtonRef = useRef();\n  const centerObjectsRef = useRef();\n  const centerGapRef = useRef();\n  const overflowRef = useRef();\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const publicConfig = useSelector(state => state.config.public);\n  const chatHeaderConfig = useSelector(state => state.chatHeaderState.config);\n  const chatWidthBreakpoint = useSelector(state => state.chatWidthBreakpoint);\n  const maxVisibleHeaderObjects = useSelector(state => state.chatHeaderState.maxVisibleHeaderObjects);\n  const [overflowIsOpen, setOverflowIsOpen] = useState(false);\n  const [confirmModelOpen, setConfirmModelOpen] = useState(false);\n  const [selectedGroupMenuitems, setSelectedGroupMenuItems] = useState({});\n  const [isImageError, setIsImageError] = useState(false);\n  const hasHeaderAvatar = Boolean(headerAvatarConfig) && !isImageError;\n  const isHidden = useContext(HideComponentContext);\n  const prevChatHeaderAvatarURL = usePrevious(headerAvatarConfig?.url);\n  const {headerConfig: headerConfig} = publicConfig;\n  const isWideWidth = chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n  const chatHeaderTitle = enableChatHeaderConfig ? chatHeaderConfig?.headerTitle?.title : undefined;\n  const chatHeaderName = enableChatHeaderConfig ? chatHeaderConfig?.headerTitle?.name : undefined;\n  const chatHeaderDisplayName = chatHeaderName || displayName;\n  const closeConfirmModel = useCallback(() => {\n    setConfirmModelOpen(false);\n  }, []);\n  const showCloseAndRestartButton = headerConfig?.showCloseAndRestartButton && !hideCloseAndRestartButton && onCloseAndRestart;\n  const useHideCloseButton = headerConfig?.hideMinimizeButton || hideCloseButton;\n  let closeIcon;\n  let closeReverseIcon = false;\n  let closeIsReversible = true;\n  const minimizeButtonIconType = headerConfig?.minimizeButtonIconType;\n  switch (minimizeButtonIconType) {\n   case MinimizeButtonIconType.CLOSE:\n    closeIcon = React.createElement(CloseLarge, {\n      className: \"WACIcon__Close\",\n      size: 16\n    });\n    break;\n\n   case MinimizeButtonIconType.MINIMIZE:\n    closeIcon = React.createElement(SubtractLarge, {\n      className: \"WACIcon__Subtract\",\n      size: 16\n    });\n    break;\n\n   case MinimizeButtonIconType.SIDE_PANEL_LEFT:\n    closeIsReversible = false;\n    closeIcon = React.createElement(SidePanelClose, {\n      className: \"WACIcon__SidePanelClose\"\n    });\n    break;\n\n   case MinimizeButtonIconType.SIDE_PANEL_RIGHT:\n    closeIsReversible = false;\n    closeReverseIcon = true;\n    closeIcon = React.createElement(SidePanelClose, {\n      className: \"WACIcon__SidePanelClose\"\n    });\n    break;\n\n   default:\n    {\n      closeIcon = React.createElement(SubtractLarge, {\n        className: \"WACIcon__Subtract\",\n        size: 16\n      });\n      break;\n    }\n  }\n  if (showCloseAndRestartButton && showRestartButton) {\n    throw new Error(\"You cannot enable both the restart button and the close-and-restart buttons.\");\n  }\n  const onConfirm = useCallback(() => {\n    setConfirmModelOpen(false);\n    onCloseAndRestart();\n  }, [ onCloseAndRestart ]);\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      if (closeButtonRef.current) {\n        doFocusRef(closeButtonRef, false, true);\n        return true;\n      }\n      if (backButtonRef.current) {\n        doFocusRef(backButtonRef, false, true);\n        return true;\n      }\n      if (restartButtonRef.current) {\n        doFocusRef(restartButtonRef, false, true);\n        return true;\n      }\n      return false;\n    }\n  }));\n  function getComponentInMenu(item, index, list) {\n    switch (item.type) {\n     case ChatHeaderObjectType.LINK:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label,\n        url: item.url,\n        isNewTab: item.isNewTab,\n        onClick: () => {\n          doFocusRef(overflowRef);\n        }\n      });\n\n     case ChatHeaderObjectType.BUTTON:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label,\n        onClick: () => {\n          item.onClick?.();\n          doFocusRef(overflowRef);\n        }\n      });\n\n     case ChatHeaderObjectType.RADIO_GROUP:\n      {\n        const nextObject = list[index + 1];\n        return React.createElement(Fragment, {\n          key: index\n        }, index !== 0 && React.createElement(MenuItemDivider, null), React.createElement(ChatHeaderMenuItemRadioGroup, {\n          label: item.label,\n          items: item.items,\n          defaultSelectedItem: item.defaultSelectedItem,\n          selectedItem: selectedGroupMenuitems[item.label],\n          onChange: selectedItem => {\n            setSelectedGroupMenuItems(prevState => ({\n              ...prevState,\n              [item.label]: selectedItem\n            }));\n            item.onChange?.(selectedItem);\n          }\n        }), Boolean(nextObject) && nextObject.type !== ChatHeaderObjectType.RADIO_GROUP && React.createElement(MenuItemDivider, null));\n      }\n\n     case ChatHeaderObjectType.MENU:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label\n      }, item.items.filter(menuItem => menuItem.type !== ChatHeaderObjectType.MENU).map(getComponentInMenu));\n\n     default:\n      return null;\n    }\n  }\n  function getComponentInChatHeader(headerObject, index) {\n    switch (headerObject.type) {\n     case ChatHeaderObjectType.LINK:\n      return React.createElement(ChatHeaderLink, {\n        key: index,\n        label: headerObject.label,\n        url: headerObject.url,\n        isNewTab: headerObject.isNewTab\n      });\n\n     case ChatHeaderObjectType.MENU:\n      return React.createElement(ChatHeaderMenuButton, {\n        key: index,\n        label: headerObject.label,\n        menuAlignment: \"bottom-start\"\n      }, headerObject.items.map(getComponentInMenu));\n\n     case ChatHeaderObjectType.BUTTON:\n      return React.createElement(Button, {\n        key: index,\n        kind: ButtonKindEnum.GHOST,\n        size: ButtonSizeEnum.MEDIUM,\n        onClick: headerObject.onClick\n      }, headerObject.label);\n\n     default:\n      return null;\n    }\n  }\n  let leftObjectsLength = 0;\n  let rightObjectsLength = 0;\n  if (enableChatHeaderConfig) {\n    leftObjectsLength = chatHeaderConfig?.left?.length ?? 0;\n    rightObjectsLength = chatHeaderConfig?.right?.length ?? 0;\n  }\n  const isLeftObjectsInOverflow = leftObjectsLength > maxVisibleHeaderObjects;\n  const isRightObjectsInOverflow = rightObjectsLength > maxVisibleHeaderObjects;\n  const hasChatHeaderObjects = leftObjectsLength || rightObjectsLength;\n  const renderChatHeaderObjectsInOverflow = hasChatHeaderObjects && (!isWideWidth || isLeftObjectsInOverflow || isRightObjectsInOverflow);\n  const hasOverflow = Boolean(overflowItems?.length) || renderChatHeaderObjectsInOverflow;\n  const isRTL = document.dir === \"rtl\";\n  let leftChatHeaderComponents = null;\n  let rightChatHeaderComponents = null;\n  let leftChatHeaderMenuComponents = null;\n  let rightChatHeaderMenuComponents = null;\n  if (enableChatHeaderConfig) {\n    leftChatHeaderComponents = chatHeaderConfig?.left?.slice(0, isLeftObjectsInOverflow ? maxVisibleHeaderObjects : undefined).map(getComponentInChatHeader);\n    rightChatHeaderComponents = chatHeaderConfig?.right?.slice(0, isRightObjectsInOverflow ? maxVisibleHeaderObjects : undefined).map(getComponentInChatHeader);\n    leftChatHeaderMenuComponents = isLeftObjectsInOverflow && chatHeaderConfig?.left?.slice(maxVisibleHeaderObjects).map(getComponentInMenu);\n    rightChatHeaderMenuComponents = isRightObjectsInOverflow && chatHeaderConfig?.right?.slice(maxVisibleHeaderObjects).map(getComponentInMenu);\n  }\n  let leftContent;\n  if (hasOverflow) {\n    leftContent = React.createElement(ChatHeaderOverflowMenu, {\n      className: \"WACHeader__OverflowMenu\",\n      renderIcon: overflowIsOpen ? Close : Menu,\n      iconDescription: languagePack.header_overflowMenu_options,\n      ariaLabel: languagePack.components_overflow_ariaLabel,\n      containerRef: overflowRef,\n      tooltipPosition: isRTL ? \"left\" : \"right\",\n      menuAlignment: \"bottom-start\",\n      onOpen: () => {\n        setTimeout(() => {\n          setOverflowIsOpen(true);\n        });\n      },\n      onClose: () => {\n        setOverflowIsOpen(false);\n      }\n    }, overflowItems?.map((item, index) => React.createElement(MenuItem, {\n      key: item,\n      label: item,\n      onClick: () => {\n        doFocusRef(overflowRef);\n        overflowClicked(index);\n      }\n    })), leftChatHeaderMenuComponents, rightChatHeaderMenuComponents);\n  } else if (showBackButton) {\n    leftContent = React.createElement(HeaderButton, {\n      className: \"WACHeader__BackButton\",\n      label: labelBackButton,\n      onClick: onClickBack,\n      buttonRef: backButtonRef,\n      buttonKind: backButtonType,\n      tooltipPosition: isRTL ? \"left\" : \"right\"\n    }, backContent || React.createElement(DownToBottom, null));\n  }\n  useEffect(() => {\n    if (!isWideWidth) {\n      serviceManager.store.dispatch(actions.setMaxVisibleHeaderObjects(0));\n      return undefined;\n    }\n    if (!enableChatHeaderConfig) {\n      return undefined;\n    }\n    const centerResizeObserver = new ResizeObserver(() => {\n      const centerGapElement = centerGapRef.current;\n      if (centerGapElement) {\n        if (centerGapElement.offsetWidth > HEADER_OBJECTS_GAP_MIN_SIZE || centerGapElement.offsetWidth === 0) {\n          let newTotal = Math.floor((centerObjectsRef.current.offsetWidth - HEADER_OBJECTS_GAP_MIN_SIZE) / (HEADER_OBJECTS_GAP_MIN_SIZE * 2));\n          if (newTotal < 0) {\n            newTotal = 0;\n          }\n          setTimeout(() => {\n            serviceManager.store.dispatch(actions.setMaxVisibleHeaderObjects(newTotal));\n          });\n        }\n      }\n    });\n    centerResizeObserver.observe(centerObjectsRef.current);\n    return () => {\n      centerResizeObserver.disconnect();\n    };\n  }, [ isWideWidth, enableChatHeaderConfig, serviceManager ]);\n  useEffect(() => {\n    if (isImageError && prevChatHeaderAvatarURL !== headerAvatarConfig?.url) {\n      setIsImageError(false);\n    }\n  }, [ prevChatHeaderAvatarURL, headerAvatarConfig?.url, isImageError ]);\n  return React.createElement(\"div\", {\n    className: cx(\"WACHeader\", `WAC--${brandColor}Color`, {\n      \"WACHeader--withAvatar\": hasHeaderAvatar\n    })\n  }, React.createElement(\"div\", {\n    className: cx(\"WACHeader--content\", `WAC--${brandColor}Color`),\n    \"data-floating-menu-container\": true\n  }, leftContent && React.createElement(\"div\", {\n    className: \"WACHeader__Buttons WACHeader__LeftButtons\"\n  }, leftContent), showCenter && React.createElement(\"div\", {\n    className: \"WACHeader__CenterContainer\"\n  }, hasHeaderAvatar && React.createElement(ChatHeaderAvatar, {\n    url: headerAvatarConfig.url,\n    corners: headerAvatarConfig.corners,\n    alt: languagePack.header_ariaBotAvatar,\n    onError: () => setIsImageError(true)\n  }), (chatHeaderTitle || chatHeaderDisplayName) && React.createElement(\"div\", {\n    className: \"WACHeader__TitleContainer\"\n  }, React.createElement(ChatHeaderTitle, {\n    title: chatHeaderTitle,\n    name: chatHeaderDisplayName\n  })), isWideWidth && Boolean(leftObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__Separator\"\n  }), React.createElement(\"div\", {\n    ref: centerObjectsRef,\n    className: \"WACHeader__HeaderObjects\"\n  }, isWideWidth && Boolean(leftObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__LeftItems\"\n  }, leftChatHeaderComponents), React.createElement(\"div\", {\n    ref: centerGapRef,\n    className: \"WACHeader__CenterGap\"\n  }), isWideWidth && Boolean(rightObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__RightItems\"\n  }, rightChatHeaderComponents))), React.createElement(\"div\", {\n    className: \"WACHeader__Buttons WACHeader__RightButtons\"\n  }, useAITheme && React.createElement(AISlug, {\n    className: \"WACHeader__Slug\",\n    size: AI_LABEL_SIZE.EXTRA_SMALL,\n    alignment: isRTL ? POPOVER_ALIGNMENT.BOTTOM_LEFT : POPOVER_ALIGNMENT.BOTTOM_RIGHT\n  }, React.createElement(\"div\", {\n    slot: \"body-text\"\n  }, React.createElement(\"h4\", {\n    className: \"WACHeader__Slug-title\"\n  }, languagePack.ai_slug_title), React.createElement(\"div\", {\n    className: \"WACHeader__Slug-description\"\n  }, React.createElement(\"div\", null, languagePack.ai_slug_description), !isHidden && React.createElement(WriteableElement, {\n    slotName: WriteableElementName.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT,\n    id: `aiTooltipAfterDescription${serviceManager.namespace.suffix}`\n  })))), showRestartButton && React.createElement(HeaderButton, {\n    className: \"WACHeader__RestartButton\",\n    label: languagePack.buttons_restart,\n    onClick: onClickRestart,\n    buttonRef: restartButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\"\n  }, React.createElement(Restart, null)), !useHideCloseButton && React.createElement(HeaderButton, {\n    className: cx(\"WACHeader__CloseButton\", {\n      WACReverseIcon: closeReverseIcon\n    }),\n    isReversible: closeIsReversible,\n    label: languagePack.launcher_isOpen,\n    onClick: async () => {\n      onClickClose();\n    },\n    buttonRef: closeButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\",\n    testId: makeTestId(PageObjectId.CLOSE_CHAT, testIdPrefix)\n  }, closeIcon), showCloseAndRestartButton && React.createElement(HeaderButton, {\n    className: \"WACHeader__CloseAndRestartButton\",\n    label: languagePack.header_ariaCloseRestart,\n    onClick: () => setConfirmModelOpen(true),\n    buttonRef: closeAndRestartButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\"\n  }, React.createElement(CloseLarge, {\n    className: \"WACIcon__Close\"\n  }))), confirmModelOpen && React.createElement(ConfirmModal, {\n    title: languagePack.closeAndRestartModal_title,\n    message: languagePack.closeAndRestartModal_message,\n    onConfirm: onConfirm,\n    onCancel: closeConfirmModel,\n    cancelButtonLabel: languagePack.closeAndRestartModal_cancel,\n    confirmButtonLabel: languagePack.closeAndRestartModal_confirm,\n    modalAnnounceMessage: languagePack.closeAndRestartModal_message,\n    serviceManager: serviceManager\n  })));\n}\n\nfunction HeaderButton({onClick: onClick, buttonRef: buttonRef, label: label, className: className, children: children, buttonKind: buttonKind, isReversible: isReversible = true, tooltipPosition: tooltipPosition, testId: testId}) {\n  return React.createElement(Button, {\n    ref: buttonRef,\n    className: cx(className, {\n      WACDirectionHasReversibleSVG: isReversible\n    }),\n    onClick: onClick,\n    hasIconOnly: true,\n    iconDescription: label,\n    size: ButtonSizeEnum.MEDIUM,\n    kind: buttonKind || ButtonKindEnum.GHOST,\n    tooltipPosition: tooltipPosition,\n    \"data-testid\": testId\n  }, children);\n}\n\nconst HeaderExport = React.memo(forwardRef(Header));\n\nexport { HeaderExport as Header };\n","import React from \"react\";\n\nimport { isElement, isInputNode, isTextAreaNode, isImageNode, isTextNode } from \"../../utils/domUtils.js\";\n\nimport VisuallyHidden from \"../util/VisuallyHidden.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst ANNOUNCE_INPUT_TYPES = new Set([ \"button\", \"date\", \"datetime-local\", \"email\", \"file\", \"month\", \"number\", \"range\", \"reset\", \"search\", \"submit\", \"tel\", \"text\", \"time\", \"url\", \"week\" ]);\n\nconst ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE = \"data-wac-exclude-node-read\";\n\nclass AriaAnnouncerComponent extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.ref1 = React.createRef();\n    this.ref2 = React.createRef();\n    this.useRef1 = true;\n    this.doAnnouncements = () => {\n      const strings = [];\n      this.pendingValues.forEach(elementToAnnounce => {\n        if (typeof elementToAnnounce === \"string\") {\n          strings.push(elementToAnnounce);\n        } else {\n          nodeToText(elementToAnnounce, strings);\n        }\n      });\n      const useElement = this.useRef1 ? this.ref1.current : this.ref2.current;\n      if (useElement) {\n        useElement.innerText = strings.join(\" \");\n        const clearElement = this.useRef1 ? this.ref2.current : this.ref1.current;\n        clearElement.innerHTML = \"\";\n      }\n      this.useRef1 = !this.useRef1;\n      this.pendingValues = null;\n    };\n  }\n  announceValue(value) {\n    if (!value) {\n      return;\n    }\n    if (!this.pendingValues) {\n      this.pendingValues = [];\n      setTimeout(this.doAnnouncements, 250);\n    }\n    if (typeof value === \"string\" || hasNodeType(value)) {\n      this.pendingValues.push(value);\n    } else if (value.messageID) {\n      const formattedMessage = this.props.intl.formatMessage({\n        id: value.messageID\n      }, value.messageValues);\n      this.pendingValues.push(formattedMessage);\n    } else {\n      this.pendingValues.push(value.messageText);\n    }\n  }\n  render() {\n    return React.createElement(VisuallyHidden, {\n      className: \"WACAriaAnnouncer\"\n    }, React.createElement(\"div\", {\n      ref: this.ref1,\n      \"aria-live\": \"polite\"\n    }), React.createElement(\"div\", {\n      ref: this.ref2,\n      \"aria-live\": \"polite\"\n    }));\n  }\n}\n\nfunction nodeToText(node, strings) {\n  if (isElement(node)) {\n    if (window.getComputedStyle(node).display !== \"none\" && node.getAttribute(\"aria-hidden\") !== \"true\" && !node.hasAttribute(ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE)) {\n      trimAndPush(node.getAttribute(\"aria-label\"), strings);\n      if (isInputNode(node) && ANNOUNCE_INPUT_TYPES.has(node.type.toLowerCase())) {\n        if (node.value === \"\") {\n          trimAndPush(node.placeholder, strings);\n        } else {\n          trimAndPush(node.value, strings);\n        }\n      } else if (isTextAreaNode(node)) {\n        if (node.value === \"\") {\n          trimAndPush(node.placeholder, strings);\n        }\n      } else if (isImageNode(node)) {\n        trimAndPush(node.alt, strings);\n      }\n      if (node.shadowRoot) {\n        node.shadowRoot.childNodes?.forEach(childNode => {\n          nodeToText(childNode, strings);\n        });\n      }\n      if (node.childNodes) {\n        node.childNodes.forEach(childNode => {\n          nodeToText(childNode, strings);\n        });\n      }\n    }\n  } else if (isTextNode(node)) {\n    trimAndPush(node.data, strings);\n  }\n}\n\nfunction trimAndPush(value, strings) {\n  if (value) {\n    value = value.trim();\n    if (value) {\n      strings.push(value.replaceAll(\"\\n\", \" \"));\n    }\n  }\n}\n\nfunction hasNodeType(value) {\n  return value.nodeType !== undefined;\n}\n\nexport { AriaAnnouncerComponent, nodeToText };\n","import React, { forwardRef, useRef, useImperativeHandle, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { Header as HeaderExport } from \"../header/Header.js\";\n\nimport { OverlayPanelName } from \"../OverlayPanel.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HomeScreenHeader(props, ref) {\n  const {brandColor: brandColor, onClose: onClose, onRestart: onRestart, onCloseAndRestart: onCloseAndRestart} = props;\n  const showRestartButton = useSelector(state => state.config.public.showRestartButton || state.config.public.headerConfig?.showRestartButton);\n  const showBackButton = useSelector(state => state.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot);\n  const displayName = useSelector(state => state.headerDisplayName);\n  const customMenuOptions = useSelector(state => state.customMenuOptions);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const headerRef = useRef();\n  useImperativeHandle(ref, () => headerRef.current);\n  const hideCloseAndRestartButton = !showBackButton;\n  const overflowClicked = useCallback(index => {\n    const {handler: handler} = customMenuOptions[index];\n    handler();\n  }, [ customMenuOptions ]);\n  const overflowItems = customMenuOptions?.map(option => option.text);\n  return React.createElement(\"div\", {\n    className: \"WACHomeScreenHeader\"\n  }, React.createElement(HeaderExport, {\n    ref: headerRef,\n    displayName: displayName,\n    showCenter: true,\n    showRestartButton: showRestartButton,\n    hideCloseAndRestartButton: hideCloseAndRestartButton,\n    onClickRestart: onRestart,\n    onClickClose: onClose,\n    onCloseAndRestart: onCloseAndRestart,\n    overflowClicked: overflowClicked,\n    overflowItems: overflowItems,\n    useAITheme: useAITheme,\n    brandColor: brandColor,\n    testIdPrefix: OverlayPanelName.HOME_SCREEN\n  }));\n}\n\nconst HomeScreenHeaderExport = React.memo(forwardRef(HomeScreenHeader));\n\nexport { HomeScreenHeaderExport as HomeScreenHeader };\n","import dayjs from \"dayjs\";\n\nimport enLocaleData from \"dayjs/locale/en.js\";\n\nimport IntlMessageFormat from \"intl-messageformat\";\n\nimport React from \"react\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\nimport \"../../../types/instance/apiTypes.js\";\n\nimport enLanguagePack from \"../../languages/en.json.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const locales = {\n  ar: () => import(\"dayjs/locale/ar.js\"),\n  \"ar-dz\": () => import(\"dayjs/locale/ar-dz.js\"),\n  \"ar-kw\": () => import(\"dayjs/locale/ar-kw.js\"),\n  \"ar-ly\": () => import(\"dayjs/locale/ar-ly.js\"),\n  \"ar-ma\": () => import(\"dayjs/locale/ar-ma.js\"),\n  \"ar-sa\": () => import(\"dayjs/locale/ar-sa.js\"),\n  \"ar-tn\": () => import(\"dayjs/locale/ar-tn.js\"),\n  cs: () => import(\"dayjs/locale/cs.js\"),\n  de: () => import(\"dayjs/locale/de.js\"),\n  \"de-at\": () => import(\"dayjs/locale/de-at.js\"),\n  \"de-ch\": () => import(\"dayjs/locale/de-ch.js\"),\n  en: () => import(\"dayjs/locale/en.js\"),\n  \"en-au\": () => import(\"dayjs/locale/en-au.js\"),\n  \"en-ca\": () => import(\"dayjs/locale/en-ca.js\"),\n  \"en-gb\": () => import(\"dayjs/locale/en-gb.js\"),\n  \"en-ie\": () => import(\"dayjs/locale/en-ie.js\"),\n  \"en-il\": () => import(\"dayjs/locale/en-il.js\"),\n  \"en-nz\": () => import(\"dayjs/locale/en-nz.js\"),\n  es: () => import(\"dayjs/locale/es.js\"),\n  \"es-do\": () => import(\"dayjs/locale/es-do.js\"),\n  \"es-us\": () => import(\"dayjs/locale/es-us.js\"),\n  nl: () => import(\"dayjs/locale/nl.js\"),\n  fr: () => import(\"dayjs/locale/fr.js\"),\n  \"fr-ca\": () => import(\"dayjs/locale/fr-ca.js\"),\n  \"fr-ch\": () => import(\"dayjs/locale/fr-ch.js\"),\n  it: () => import(\"dayjs/locale/it.js\"),\n  \"it-ch\": () => import(\"dayjs/locale/it-ch.js\"),\n  ja: () => import(\"dayjs/locale/ja.js\"),\n  ko: () => import(\"dayjs/locale/ko.js\"),\n  pt: () => import(\"dayjs/locale/pt.js\"),\n  \"pt-br\": () => import(\"dayjs/locale/pt-br.js\"),\n  zh: () => import(\"dayjs/locale/zh-cn.js\"),\n  \"zh-cn\": () => import(\"dayjs/locale/zh-cn.js\"),\n  \"zh-tw\": () => import(\"dayjs/locale/zh-tw.js\"),\n  \"zh-mo\": () => import(\"dayjs/locale/zh-tw.js\"),\n  \"zh-hk\": () => import(\"dayjs/locale/zh-tw.js\")\n};\n\nfunction isSupportedLocale(locale, object) {\n  if (!locale) {\n    return null;\n  }\n  locale = locale.toLowerCase().replace(/_/g, \"-\");\n  if (object[locale]) {\n    return locale;\n  }\n  const language = locale.substring(0, 2);\n  if (object[language]) {\n    return language;\n  }\n  return null;\n}\n\nfunction findSupportedKey(requestedLocale, object, objectType) {\n  const requestedSupported = isSupportedLocale(requestedLocale, object);\n  if (requestedSupported) {\n    return requestedSupported;\n  }\n  if (requestedLocale) {\n    const keyList = JSON.stringify(Object.keys(object));\n    consoleError(`The requested locale \"${requestedLocale}\" does not contain a supported ${objectType}. We are defaulting to \"en\". The supported values are ${keyList}.`);\n  }\n  return \"en\";\n}\n\nasync function loadLocale(requestedLocale) {\n  try {\n    const localeKey = findSupportedKey(requestedLocale, locales, \"locale\");\n    const localeModule = await locales[localeKey]();\n    if (localeModule) {\n      return localeModule.default;\n    }\n    consoleError(`The locale data for \"${localeKey}\" did not load. The application will default to \"en\".`);\n  } catch (error) {\n    consoleError(`An error occurred loading the locale data for \"${requestedLocale}\". The application will default to \"en\".`, error);\n  }\n  return enLocaleData;\n}\n\nasync function loadLanguagePack(providedLanguagePack) {\n  if (providedLanguagePack) {\n    return fillWithEnglish(providedLanguagePack);\n  }\n  return enLanguagePack;\n}\n\nfunction fillWithEnglish(languagePack) {\n  return {\n    ...enLanguagePack,\n    ...languagePack\n  };\n}\n\nfunction handleBTag(chunks) {\n  return React.createElement(\"b\", null, chunks);\n}\n\nfunction handleBRTag() {\n  return React.createElement(\"br\", null);\n}\n\nfunction addHTMLSupport(values) {\n  values.b = handleBTag;\n  values.br = handleBRTag;\n  return values;\n}\n\nasync function loadDayjsLocale(locale) {\n  if (!dayjs.Ls[locale]) {\n    const previousLocale = dayjs.locale();\n    const localePack = await loadLocale(locale);\n    dayjs.locale(localePack);\n    dayjs.locale(previousLocale);\n    const isLoaded = Boolean(dayjs.Ls[locale]);\n    if (!isLoaded && locale.length === 2) {\n      throw Error(\"Locale is not recognized.\");\n    } else if (!isLoaded) {\n      return loadDayjsLocale(locale.substring(0, 2));\n    }\n  }\n  return locale;\n}\n\nfunction formatMessage(intl, id, values) {\n  return intl.formatMessage({\n    id: id\n  }, values);\n}\n\nfunction createEnglishFormat(key) {\n  return new IntlMessageFormat(enLanguagePack[key], \"en-US\");\n}\n\nexport { addHTMLSupport, createEnglishFormat, formatMessage, loadDayjsLocale, loadLanguagePack, loadLocale };\n","import { useContext } from \"react\";\n\nimport { LanguagePackContext } from \"../contexts/LanguagePackContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useLanguagePack() {\n  return useContext(LanguagePackContext);\n}\n\nexport { useLanguagePack };\n","import cx from \"classnames\";\n\nimport React from \"react\";\n\nimport { HideComponentContext } from \"../../contexts/HideComponentContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HideComponent(props) {\n  const {hidden: hidden, children: children, className: className, ...htmlAttributes} = props;\n  return React.createElement(HideComponentContext.Provider, {\n    value: hidden\n  }, React.createElement(\"div\", {\n    className: cx(className, {\n      WAC__hidden: hidden\n    }),\n    ...htmlAttributes\n  }, children));\n}\n\nexport { HideComponent };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const WindowSizeContext = React.createContext(null);\n\nexport { WindowSizeContext };\n","export { CarbonTheme } from \"../config/PublicConfig.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var CarbonThemeClassNames;\n\n(function(CarbonThemeClassNames) {\n  CarbonThemeClassNames[\"WHITE\"] = \"cds--white\";\n  CarbonThemeClassNames[\"G10\"] = \"cds--g10\";\n  CarbonThemeClassNames[\"G90\"] = \"cds--g90\";\n  CarbonThemeClassNames[\"G100\"] = \"cds--g100\";\n})(CarbonThemeClassNames || (CarbonThemeClassNames = {}));\n\nvar ButtonKindEnum;\n\n(function(ButtonKindEnum) {\n  ButtonKindEnum[\"PRIMARY\"] = \"primary\";\n  ButtonKindEnum[\"SECONDARY\"] = \"secondary\";\n  ButtonKindEnum[\"DANGER\"] = \"danger\";\n  ButtonKindEnum[\"GHOST\"] = \"ghost\";\n  ButtonKindEnum[\"DANGER_PRIMARY\"] = \"danger--primary\";\n  ButtonKindEnum[\"DANGER_GHOST\"] = \"danger--ghost\";\n  ButtonKindEnum[\"DANGER_TERTIARY\"] = \"danger--tertiary\";\n  ButtonKindEnum[\"TERTIARY\"] = \"tertiary\";\n})(ButtonKindEnum || (ButtonKindEnum = {}));\n\nvar ButtonSizeEnum;\n\n(function(ButtonSizeEnum) {\n  ButtonSizeEnum[\"SMALL\"] = \"sm\";\n  ButtonSizeEnum[\"MEDIUM\"] = \"md\";\n  ButtonSizeEnum[\"LARGE\"] = \"lg\";\n  ButtonSizeEnum[\"XLARGE\"] = \"xl\";\n  ButtonSizeEnum[\"XXLARGE\"] = \"2xl\";\n})(ButtonSizeEnum || (ButtonSizeEnum = {}));\n\nexport { ButtonKindEnum, ButtonSizeEnum, CarbonThemeClassNames };\n","import { useContext } from \"react\";\n\nimport { ServiceManagerContext } from \"../contexts/ServiceManagerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useServiceManager() {\n  return useContext(ServiceManagerContext);\n}\n\nexport { useServiceManager };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ModalPortalRootContext = React.createContext(null);\n\nexport { ModalPortalRootContext };\n","import { v4 } from \"uuid\";\n\nexport { UUIDType } from \"./UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function uuid(_type) {\n  return v4();\n}\n\nexport { uuid };\n","import React, { useContext, useEffect } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AriaLiveMessage(props) {\n  const ariaAnnouncer = useContext(AriaAnnouncerContext);\n  useEffect(() => {\n    ariaAnnouncer(props.message);\n  }, [ ariaAnnouncer, props.message ]);\n  return React.createElement(\"div\", null);\n}\n\nconst AriaLiveMessageExport = React.memo(AriaLiveMessage);\n\nexport { AriaLiveMessageExport as AriaLiveMessage };\n","import { compute } from \"compute-scroll-into-view\";\n\nimport memoizeOne from \"memoize-one\";\n\nimport { tabbable } from \"tabbable\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const SCROLLBAR_WIDTH = memoizeOne(getScrollbarWidth);\n\nfunction doScrollElementIntoView(element, animate = false, boundary) {\n  if (element) {\n    const actions = compute(element, {\n      boundary: boundary,\n      scrollMode: \"if-needed\",\n      block: \"nearest\",\n      inline: \"nearest\"\n    });\n    actions.forEach(({el: el, top: top, left: left}) => {\n      doScrollElement(el, Math.round(top), Math.round(left), animate);\n    });\n  }\n}\n\nfunction doScrollElement(element, scrollTop, scrollLeft, animate = false) {\n  setTimeout(() => {\n    if (element) {\n      if (animate && element.scroll) {\n        element.scroll({\n          top: scrollTop,\n          left: scrollLeft,\n          behavior: \"smooth\"\n        });\n      } else {\n        element.scrollTop = scrollTop;\n        element.scrollLeft = scrollLeft;\n      }\n    }\n  });\n}\n\nfunction getScrollbarWidth() {\n  const outer = document.createElement(\"div\");\n  outer.style.visibility = \"hidden\";\n  outer.style.overflow = \"scroll\";\n  document.body.appendChild(outer);\n  const inner = document.createElement(\"div\");\n  outer.appendChild(inner);\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n  outer.parentNode.removeChild(outer);\n  return scrollbarWidth;\n}\n\nfunction doFocus(element, preventScroll = false) {\n  if (element && document.activeElement !== element && tabbable(element, {\n    getShadowRoot: true\n  })) {\n    element.focus({\n      preventScroll: preventScroll\n    });\n  }\n}\n\nfunction doFocusRef(ref, defer = false, preventScroll = false) {\n  if (ref) {\n    if (defer) {\n      setTimeout(() => {\n        doFocusRef(ref);\n      });\n    } else if (ref.current) {\n      doFocus(ref.current, preventScroll);\n    }\n  }\n}\n\nfunction isElement(node) {\n  return node?.nodeType === 1;\n}\n\nfunction isTextNode(node) {\n  return node?.nodeType === 3;\n}\n\nfunction isInputNode(node) {\n  return node?.tagName === \"INPUT\";\n}\n\nfunction isImageNode(node) {\n  return node?.tagName === \"IMG\";\n}\n\nfunction isTextAreaNode(node) {\n  return node?.tagName === \"TEXTAREA\";\n}\n\nfunction focusOnFirstFocusableItemInArrayOfElements(elements) {\n  for (let index = 0; index < elements.length; index++) {\n    if (focusOnFirstFocusableElement(elements[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction focusOnFirstFocusableElement(parentElement) {\n  const focusableElements = tabbable(parentElement, {\n    getShadowRoot: true\n  });\n  if (focusableElements?.length) {\n    doFocus(focusableElements[0]);\n    return true;\n  }\n  return false;\n}\n\nfunction isEnterKey(event) {\n  if (event.key === \"Enter\" && !hasModifiers(event)) {\n    return !(event.isComposing || event.keyCode === 229);\n  }\n  return false;\n}\n\nfunction hasModifiers(event) {\n  return event.shiftKey || event.altKey || event.metaKey || event.ctrlKey;\n}\n\nfunction getScrollBottom(element) {\n  if (element) {\n    return element.scrollHeight - element.offsetHeight - element.scrollTop;\n  }\n  return 0;\n}\n\nexport { SCROLLBAR_WIDTH, doFocusRef, doScrollElement, doScrollElementIntoView, focusOnFirstFocusableItemInArrayOfElements, getScrollBottom, isElement, isEnterKey, isImageNode, isInputNode, isTextAreaNode, isTextNode };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport \"./constants.js\";\n\nimport { findLastWithMap } from \"./lang/arrayUtils.js\";\n\nimport { uuid } from \"./lang/uuid.js\";\n\nimport { MessageResponseTypes, MessageInputType, ButtonItemType, AgentMessageType, InternalMessageRequestType } from \"../../../types/messaging/Messages.js\";\n\nimport { UUIDType } from \"./lang/UUIDType.js\";\n\nimport { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const THREAD_ID_MAIN = \"main\";\n\nfunction isResponse(message) {\n  return message && message.output !== undefined;\n}\n\nfunction isDateResponseType(localMessage) {\n  return localMessage?.item.response_type === MessageResponseTypes.DATE;\n}\n\nfunction addDefaultsToMessage(fullMessage) {\n  if (!fullMessage.id) {\n    fullMessage.id = uuid(UUIDType.MESSAGE);\n  }\n  if (!fullMessage.thread_id) {\n    fullMessage.thread_id = THREAD_ID_MAIN;\n  }\n  if (!fullMessage.history) {\n    fullMessage.history = {};\n  }\n  if (!fullMessage.history.timestamp) {\n    fullMessage.history.timestamp = Date.now();\n  }\n  if (fullMessage.history.from_history === undefined) {\n    fullMessage.history.from_history = false;\n  }\n  return fullMessage;\n}\n\nfunction isRequest(message) {\n  return message?.input !== undefined;\n}\n\nfunction isLiveAgentMessage(message) {\n  return Boolean(message.item.agent_message_type);\n}\n\nfunction hasLiveAgentMessage(message) {\n  return isResponse(message) && Boolean(message.output.generic?.find(item => item?.agent_message_type)) || isRequest(message) && Boolean(message.input.agent_message_type);\n}\n\nfunction isEventRequest(message) {\n  return message?.input?.message_type === MessageInputType.EVENT;\n}\n\nfunction isTextItem(item) {\n  return item && item.response_type === \"text\" && item.text !== undefined;\n}\n\nfunction isTyping(message) {\n  return message.response_type === MessageResponseTypes.PAUSE && message.typing == true;\n}\n\nfunction isPause(message) {\n  return message.response_type === MessageResponseTypes.PAUSE;\n}\n\nfunction isOptionItem(item) {\n  return item?.response_type === MessageResponseTypes.OPTION && item.options !== undefined;\n}\n\nfunction isChannelTransferToAgent(message) {\n  const {generic: generic} = message.output;\n  return generic.some(isConnectToAgent);\n}\n\nfunction createMessageRequestForChoice(choice, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    ...cloneDeep(choice.value)\n  };\n  messageRequest.history = {\n    label: choice.label,\n    relatedMessageID: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageRequestForButtonItemOption(buttonItem, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    input: null\n  };\n  if (buttonItem.value?.input?.text) {\n    messageRequest.input = cloneDeep(buttonItem.value.input);\n  } else {\n    messageRequest.input = {\n      text: buttonItem.label\n    };\n  }\n  messageRequest.history = {\n    relatedMessageID: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createWelcomeRequest() {\n  return addDefaultsToMessage({\n    id: uuid(UUIDType.MESSAGE),\n    input: {\n      text: \"\"\n    },\n    history: {\n      silent: true,\n      is_welcome_request: true\n    },\n    thread_id: THREAD_ID_MAIN\n  });\n}\n\nfunction createMessageRequestForText(text) {\n  return addDefaultsToMessage({\n    input: {\n      text: text,\n      message_type: MessageInputType.TEXT\n    }\n  });\n}\n\nfunction createMessageRequestForFileUpload(upload) {\n  return addDefaultsToMessage({\n    id: upload.id,\n    input: {\n      text: upload.file.name,\n      message_type: InternalMessageRequestType.FILE,\n      agent_message_type: AgentMessageType.FROM_USER\n    },\n    history: {\n      file_upload_status: FileStatusValue.UPLOADING\n    }\n  });\n}\n\nfunction createMessageRequestForDate(inputString, userString, relatedResponseID) {\n  const messageRequest = createMessageRequestForText(inputString);\n  messageRequest.history = {\n    label: userString,\n    relatedMessageID: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageResponseForText(text, threadID = THREAD_ID_MAIN, responseType = MessageResponseTypes.TEXT, context) {\n  const textItem = {\n    response_type: responseType,\n    text: text\n  };\n  const messageResponse = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: threadID,\n    output: {\n      generic: [ textItem ]\n    }\n  };\n  return messageResponse;\n}\n\nfunction createMessageResponseForItem(item, context) {\n  const messageResponse = {\n    output: {\n      generic: [ item ]\n    }\n  };\n  return addDefaultsToMessage(messageResponse);\n}\n\nfunction isConnectToAgent(response) {\n  return response?.response_type === MessageResponseTypes.CONNECT_TO_AGENT;\n}\n\nfunction isCardResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CARD;\n}\n\nfunction isCarouselResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CAROUSEL;\n}\n\nfunction isButtonResponseType(response) {\n  return response?.response_type === MessageResponseTypes.BUTTON;\n}\n\nfunction isShowPanelButtonType(response) {\n  return isButtonResponseType(response) && response.button_type === ButtonItemType.SHOW_PANEL;\n}\n\nfunction isResponseWithNestedItems(item) {\n  if (isButtonResponseType(item)) {\n    return hasBodyOrFooter(item.panel);\n  }\n  if (isCardResponseType(item)) {\n    return hasBodyOrFooter(item);\n  }\n  if (isCarouselResponseType(item)) {\n    return item.items !== undefined;\n  }\n  return isGridResponseType(item);\n}\n\nfunction hasBodyOrFooter(item) {\n  return item?.body !== undefined || item?.footer !== undefined;\n}\n\nfunction renderAsUserDefinedMessage(messageItem) {\n  const responseType = messageItem.response_type;\n  switch (responseType) {\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.OPTION:\n   case MessageResponseTypes.CONNECT_TO_AGENT:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.DATE:\n   case MessageResponseTypes.CONVERSATIONAL_SEARCH:\n   case MessageResponseTypes.TABLE:\n   case MessageResponseTypes.INLINE_ERROR:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.CAROUSEL:\n   case MessageResponseTypes.BUTTON:\n   case MessageResponseTypes.GRID:\n    return false;\n\n   default:\n    return !renderAsTour(messageItem);\n  }\n}\n\nfunction renderAsTour(messageItem) {\n  return hasTourUserDefinedType(messageItem);\n}\n\nfunction hasTourUserDefinedType(message) {\n  return message?.user_defined?.user_defined_type === \"IBM_BETA_JOURNEYS_TOUR\";\n}\n\nfunction hasServiceDesk(config) {\n  return Boolean(config.public.serviceDeskFactory);\n}\n\nfunction isItemSupportedInResponseBody(item) {\n  switch (item.response_type) {\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.USER_DEFINED:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.GRID:\n    return true;\n\n   default:\n    return false;\n  }\n}\n\nfunction isSingleItemCarousel(messageItem) {\n  return isCarouselResponseType(messageItem) && messageItem.items.length === 1;\n}\n\nfunction isGridResponseType(item) {\n  return item?.response_type === MessageResponseTypes.GRID;\n}\n\nfunction getOptionType(preference, totalOptions) {\n  let type = \"button\";\n  if (preference && preference === \"button\") {\n    type = \"button\";\n  } else if (preference && preference === \"dropdown\") {\n    type = \"dropdown\";\n  } else if (totalOptions > 4) {\n    type = \"dropdown\";\n  }\n  return type;\n}\n\nfunction isStreamPartialItem(chunk) {\n  return Boolean(chunk.partial_item);\n}\n\nfunction isStreamCompleteItem(chunk) {\n  return Boolean(chunk.complete_item);\n}\n\nfunction isStreamFinalResponse(chunk) {\n  return Boolean(chunk.final_response);\n}\n\nfunction streamItemID(messageID, item) {\n  const itemID = item?.streaming_metadata?.id;\n  if (!itemID) {\n    return null;\n  }\n  return `${messageID}-${itemID}`;\n}\n\nfunction getMediaDimensions(item) {\n  return item.dimensions;\n}\n\nfunction getLastBotResponseWithContext(state) {\n  const messageIDs = state.botMessageState.messageIDs || [];\n  return findLastWithMap(messageIDs, state.allMessagesByID, message => isResponse(message) && !hasLiveAgentMessage(message) && Boolean(message.context));\n}\n\nexport { THREAD_ID_MAIN, addDefaultsToMessage, createMessageRequestForButtonItemOption, createMessageRequestForChoice, createMessageRequestForDate, createMessageRequestForFileUpload, createMessageRequestForText, createMessageResponseForItem, createMessageResponseForText, createWelcomeRequest, getLastBotResponseWithContext, getMediaDimensions, getOptionType, hasServiceDesk, hasTourUserDefinedType, isButtonResponseType, isCardResponseType, isCarouselResponseType, isChannelTransferToAgent, isConnectToAgent, isDateResponseType, isEventRequest, isGridResponseType, isItemSupportedInResponseBody, isLiveAgentMessage, isOptionItem, isPause, isRequest, isResponse, isResponseWithNestedItems, isShowPanelButtonType, isSingleItemCarousel, isStreamCompleteItem, isStreamFinalResponse, isStreamPartialItem, isTextItem, isTyping, renderAsTour, renderAsUserDefinedMessage, streamItemID };\n","import React, { PureComponent } from \"react\";\n\nimport { withAriaAnnouncer } from \"../../hocs/withAriaAnnouncer.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class AnnounceOnMountComponent extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isMounted: false\n    };\n    this.onceAnnounced = false;\n  }\n  componentDidMount() {\n    this.setState({\n      isMounted: true\n    });\n    if (!this.onceAnnounced) {\n      if (this.props.announceOnce) {\n        setTimeout(() => {\n          this.props.ariaAnnouncer(this.props.announceOnce);\n        });\n      }\n      this.onceAnnounced = true;\n    }\n  }\n  render() {\n    return React.createElement(\"div\", {\n      \"aria-live\": \"polite\"\n    }, this.state.isMounted && this.props.children);\n  }\n}\n\nconst AnnounceOnMountComponentExport = withAriaAnnouncer(AnnounceOnMountComponent);\n\nexport { AnnounceOnMountComponentExport as AnnounceOnMountComponent };\n","export { ViewType } from \"../instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var ChatWidthBreakpoint;\n\n(function(ChatWidthBreakpoint) {\n  ChatWidthBreakpoint[\"NARROW\"] = \"narrow\";\n  ChatWidthBreakpoint[\"STANDARD\"] = \"standard\";\n  ChatWidthBreakpoint[\"WIDE\"] = \"wide\";\n})(ChatWidthBreakpoint || (ChatWidthBreakpoint = {}));\n\nexport { ChatWidthBreakpoint };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function WriteableElement({slotName: slotName, id: id, className: className}) {\n  return React.createElement(\"div\", {\n    className: className,\n    id: id,\n    \"data-floating-menu-container\": true\n  }, React.createElement(\"slot\", {\n    name: slotName\n  }));\n}\n\nvar WriteableElement$1 = React.memo(WriteableElement);\n\nexport { WriteableElement$1 as default };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ServiceManagerContext = React.createContext(null);\n\nexport { ServiceManagerContext };\n","import { Component } from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\nimport { ModalPortalRootContext } from \"../contexts/ModalPortalRootContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass ModalPortal extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      attachedToHost: null\n    };\n    this.modalElement = document.createElement(\"div\");\n  }\n  componentDidMount() {\n    this.attachIfNeeded();\n  }\n  componentDidUpdate() {\n    this.attachIfNeeded();\n  }\n  componentWillUnmount() {\n    if (this.state.attachedToHost) {\n      this.state.attachedToHost.removeChild(this.modalElement);\n    }\n  }\n  attachIfNeeded() {\n    const hostElement = this.context;\n    if (hostElement && !this.state.attachedToHost) {\n      this.setState({\n        attachedToHost: hostElement\n      });\n      hostElement.appendChild(this.modalElement);\n    }\n  }\n  render() {\n    if (!this.state.attachedToHost) {\n      return null;\n    }\n    return ReactDOM.createPortal(this.props.children, this.modalElement);\n  }\n}\n\nModalPortal.contextType = ModalPortalRootContext;\n\nexport { ModalPortal };\n","import { Button } from \"@carbon/react\";\n\nimport FocusTrap from \"focus-trap-react\";\n\nimport React, { Component } from \"react\";\n\nimport { ModalPortal } from \"../../containers/ModalPortal.js\";\n\nimport { AriaLiveMessage as AriaLiveMessageExport } from \"../aria/AriaLiveMessage.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class ConfirmModal extends Component {\n  constructor() {\n    super(...arguments);\n    this.onYesClick = () => {\n      this.props.onConfirm();\n    };\n    this.onNoClick = () => {\n      this.props.onCancel();\n    };\n    this.onKeyDown = event => {\n      if (event.key === \"Escape\") {\n        this.props.onCancel();\n      }\n    };\n  }\n  render() {\n    const {title: title, message: message, cancelButtonLabel: cancelButtonLabel, confirmButtonLabel: confirmButtonLabel, modalAnnounceMessage: modalAnnounceMessage, serviceManager: serviceManager} = this.props;\n    return React.createElement(ModalPortal, null, React.createElement(FocusTrap, null, React.createElement(\"div\", {\n      className: \"WACConfirmModal\",\n      role: \"dialog\",\n      \"aria-labelledby\": `WACConfirmModal__title${serviceManager.namespace.suffix}`,\n      \"aria-describedby\": `WACConfirmModal__message${serviceManager.namespace.suffix}`\n    }, React.createElement(\"div\", {\n      className: \"WACConfirmModal__container\"\n    }, React.createElement(AriaLiveMessageExport, {\n      message: modalAnnounceMessage\n    }), React.createElement(\"div\", {\n      className: \"WACConfirmModal__title\",\n      id: `WACConfirmModal__title${serviceManager.namespace.suffix}`\n    }, title), React.createElement(\"div\", {\n      className: \"WACConfirmModal__message\",\n      id: `WACConfirmModal__message${serviceManager.namespace.suffix}`\n    }, message), React.createElement(\"div\", {\n      className: \"WACConfirmModal__buttonContainer\"\n    }, React.createElement(Button, {\n      className: \"WACConfirmModal__NoButton\",\n      kind: \"secondary\",\n      onClick: this.onNoClick,\n      onKeyDown: this.onKeyDown,\n      size: \"md\"\n    }, cancelButtonLabel), React.createElement(Button, {\n      className: \"WACConfirmModal__YesButton\",\n      onClick: this.onYesClick,\n      onKeyDown: this.onKeyDown,\n      size: \"md\"\n    }, confirmButtonLabel))))));\n  }\n}\n\nexport { ConfirmModal };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar WriteableElementName;\n\n(function(WriteableElementName) {\n  WriteableElementName[\"AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT\"] = \"aiTooltipAfterDescriptionElement\";\n  WriteableElementName[\"WELCOME_NODE_BEFORE_ELEMENT\"] = \"welcomeNodeBeforeElement\";\n  WriteableElementName[\"HEADER_BOTTOM_ELEMENT\"] = \"headerBottomElement\";\n  WriteableElementName[\"BEFORE_INPUT_ELEMENT\"] = \"beforeInputElement\";\n  WriteableElementName[\"HOME_SCREEN_BEFORE_INPUT_ELEMENT\"] = \"homeScreenBeforeInputElement\";\n  WriteableElementName[\"HOME_SCREEN_AFTER_STARTERS_ELEMENT\"] = \"homeScreenAfterStartersElement\";\n  WriteableElementName[\"HOME_SCREEN_HEADER_BOTTOM_ELEMENT\"] = \"homeScreenHeaderBottomElement\";\n  WriteableElementName[\"CUSTOM_PANEL_ELEMENT\"] = \"customPanelElement\";\n})(WriteableElementName || (WriteableElementName = {}));\n\nexport { WriteableElementName };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst getBotInputState = state => state.botInputState;\n\nconst getAgentInputState = state => state.agentState.inputState;\n\nconst getAgentState = state => state.agentState;\n\nconst getPersistedAgent = state => state.persistedToBrowserStorage.chatState.agentState;\n\nfunction selectAgentDisplayState(state) {\n  const agentState = getAgentState(state);\n  const persisted = getPersistedAgent(state);\n  if (persisted.isSuspended) {\n    return {\n      isConnectingOrConnected: false,\n      disableInput: false,\n      isAgentTyping: false,\n      inputPlaceholderKey: null\n    };\n  }\n  const {isReconnecting: isReconnecting, isConnecting: isConnecting, isAgentTyping: isAgentTyping} = agentState;\n  const {isConnected: isConnected} = persisted;\n  let inputPlaceholderKey;\n  if (isConnecting) {\n    inputPlaceholderKey = \"agent_inputPlaceholderConnecting\";\n  } else if (isReconnecting) {\n    inputPlaceholderKey = \"agent_inputPlaceholderReconnecting\";\n  } else {\n    inputPlaceholderKey = null;\n  }\n  return {\n    isAgentTyping: isAgentTyping,\n    isConnectingOrConnected: isConnecting || isConnected,\n    disableInput: isConnecting || isReconnecting,\n    inputPlaceholderKey: inputPlaceholderKey\n  };\n}\n\nfunction selectIsInputToAgent(state) {\n  return selectAgentDisplayState(state).isConnectingOrConnected;\n}\n\nfunction selectInputState(state) {\n  return selectIsInputToAgent(state) ? getAgentInputState(state) : getBotInputState(state);\n}\n\nexport { selectAgentDisplayState, selectInputState, selectIsInputToAgent };\n","import Home from \"@carbon/icons-react/es/Home.js\";\n\nimport React, { forwardRef, useRef, useCallback, useImperativeHandle } from \"react\";\n\nimport { useSelector, shallowEqual } from \"react-redux\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport { selectAgentDisplayState } from \"../../store/selectors.js\";\n\nimport \"../../utils/constants.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\nimport { Header as HeaderExport } from \"./Header.js\";\n\nimport { WriteableElementName } from \"../../../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function BotHeader(props, ref) {\n  const {onClose: onClose, onCloseAndRestart: onCloseAndRestart, onRestart: onRestart, onToggleHomeScreen: onToggleHomeScreen, headerDisplayName: headerDisplayName, includeWriteableElement: includeWriteableElement, enableChatHeaderConfig: enableChatHeaderConfig, headerAvatarConfig: headerAvatarConfig, testIdPrefix: testIdPrefix} = props;\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const homeScreenIsOn = useSelector(state => state.homeScreenConfig.is_on && state.homeScreenConfig.allow_return);\n  const publicConfig = useSelector(state => state.config.public);\n  const customMenuOptions = useSelector(state => state.customMenuOptions);\n  const {isConnectingOrConnected: isConnectingOrConnected} = useSelector(selectAgentDisplayState, shallowEqual);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const maxVisibleHeaderObjects = useSelector(state => state.chatHeaderState.maxVisibleHeaderObjects);\n  const leftObjectsLength = useSelector(state => state.chatHeaderState.config?.left?.length || 0);\n  const rightObjectsLength = useSelector(state => state.chatHeaderState.config?.right?.length || 0);\n  const headerRef = useRef();\n  const isHeaderObjectsInOverflow = leftObjectsLength > maxVisibleHeaderObjects || rightObjectsLength > maxVisibleHeaderObjects;\n  const hasChatHeaderObjects = enableChatHeaderConfig && isHeaderObjectsInOverflow;\n  const showRestartButton = publicConfig.showRestartButton || publicConfig.headerConfig?.showRestartButton;\n  const allowHomeScreen = homeScreenIsOn && !isConnectingOrConnected;\n  const overflowClicked = useCallback(index => {\n    if (index === 0 && allowHomeScreen) {\n      onToggleHomeScreen?.();\n    } else {\n      const {handler: handler} = customMenuOptions[allowHomeScreen ? index - 1 : index];\n      handler();\n    }\n  }, [ customMenuOptions, onToggleHomeScreen, allowHomeScreen ]);\n  let overflowItems = customMenuOptions?.map(option => option.text);\n  if (overflowItems && allowHomeScreen) {\n    overflowItems.splice(0, 0, languagePack.homeScreen_overflowMenuHomeScreen);\n  } else if (!overflowItems && allowHomeScreen && hasChatHeaderObjects) {\n    overflowItems = [ languagePack.homeScreen_overflowMenuHomeScreen ];\n  }\n  useImperativeHandle(ref, () => headerRef.current);\n  return React.createElement(\"div\", {\n    className: \"WACHeader__Container\"\n  }, React.createElement(HeaderExport, {\n    ref: headerRef,\n    showCenter: true,\n    headerAvatarConfig: headerAvatarConfig,\n    displayName: headerDisplayName,\n    showBackButton: Boolean(allowHomeScreen && onToggleHomeScreen),\n    showRestartButton: showRestartButton,\n    useAITheme: useAITheme,\n    backContent: React.createElement(Home, null),\n    labelBackButton: languagePack.homeScreen_returnToHome,\n    onClickRestart: onRestart,\n    onClickClose: onClose,\n    onCloseAndRestart: onCloseAndRestart,\n    onClickBack: onToggleHomeScreen,\n    overflowItems: overflowItems,\n    overflowClicked: overflowClicked,\n    enableChatHeaderConfig: enableChatHeaderConfig,\n    testIdPrefix: testIdPrefix\n  }), includeWriteableElement && React.createElement(WriteableElement, {\n    slotName: WriteableElementName.HEADER_BOTTOM_ELEMENT,\n    id: `headerBottomElement${serviceManager.namespace.suffix}`,\n    className: \"WACHeader__HeaderBottomElement\"\n  }));\n}\n\nconst BotHeaderExport = React.memo(forwardRef(BotHeader));\n\nexport { BotHeaderExport as BotHeader };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction deepFreeze(object) {\n  Object.freeze(object);\n  Object.getOwnPropertyNames(object).forEach(prop => {\n    if (Object.prototype.hasOwnProperty.call(object, prop) && object[prop] !== null && (typeof object[prop] === \"object\" || typeof object[prop] === \"function\") && !Object.isFrozen(object[prop])) {\n      deepFreeze(object[prop]);\n    }\n  });\n  return object;\n}\n\nexport { deepFreeze };\n","import { MessageResponseTypes } from \"../../../types/messaging/Messages.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function inputItemToLocalItem(message, originalUserText, id = uuid(UUIDType.LOCAL_MESSAGE)) {\n  const localMessage = {\n    item: {\n      response_type: MessageResponseTypes.TEXT,\n      ...message.input\n    },\n    ui_state: {\n      id: id,\n      originalUserText: originalUserText,\n      needsAnnouncement: false\n    },\n    fullMessageID: message.id\n  };\n  return localMessage;\n}\n\nexport { inputItemToLocalItem as default };\n","import { useContext } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useAriaAnnouncer() {\n  return useContext(AriaAnnouncerContext);\n}\n\nexport { useAriaAnnouncer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst HA_SET_AGENT_AVAILABILITY = \"HA_SET_AGENT_AVAILABILITY\";\n\nconst HA_SET_IS_CONNECTING = \"HA_SET_IS_CONNECTING\";\n\nconst HA_SET_IS_RECONNECTING = \"HA_SET_IS_RECONNECTING\";\n\nconst HA_SET_AGENT_JOINED = \"HA_SET_AGENT_JOINED\";\n\nconst HA_SET_AGENT_LEFT_CHAT = \"HA_SET_AGENT_LEFT_CHAT\";\n\nconst HA_END_CHAT = \"HA_END_CHAT\";\n\nconst HA_UPDATE_CAPABILITIES = \"HA_UPDATE_CAPABILITIES\";\n\nconst HA_UPDATE_FILE_UPLOAD_IN_PROGRESS = \"HA_UPDATE_FILE_UPLOAD_IN_PROGRESS\";\n\nconst HA_SET_SHOW_SCREEN_SHARE_REQUEST = \"HA_SET_SHOW_SCREEN_SHARE_REQUEST\";\n\nconst HA_SET_IS_SCREEN_SHARING = \"HA_SET_IS_SCREEN_SHARING\";\n\nconst HA_SET_PERSISTED_STATE = \"HA_SET_PERSISTED_STATE\";\n\nconst HA_UPDATE_IS_SUSPENDED = \"HA_UPDATE_IS_SUSPENDED\";\n\nconst HA_UPDATE_IS_TYPING = \"HA_UPDATE_IS_TYPING\";\n\nfunction setIsConnecting(isConnecting, localMessageID) {\n  return {\n    type: HA_SET_IS_CONNECTING,\n    isConnecting: isConnecting,\n    localMessageID: localMessageID\n  };\n}\n\nfunction setIsReconnecting(isReconnecting) {\n  return {\n    type: HA_SET_IS_RECONNECTING,\n    isReconnecting: isReconnecting\n  };\n}\n\nfunction setAgentLeftChat() {\n  return {\n    type: HA_SET_AGENT_LEFT_CHAT\n  };\n}\n\nfunction endChat() {\n  return {\n    type: HA_END_CHAT\n  };\n}\n\nfunction setAgentAvailability(availability) {\n  return {\n    type: HA_SET_AGENT_AVAILABILITY,\n    availability: availability\n  };\n}\n\nfunction setAgentJoined(agentProfile) {\n  return {\n    type: HA_SET_AGENT_JOINED,\n    agentProfile: agentProfile\n  };\n}\n\nfunction updateCapabilities(capabilities) {\n  return {\n    type: HA_UPDATE_CAPABILITIES,\n    capabilities: capabilities\n  };\n}\n\nfunction updateFilesUploadInProgress(fileUploadInProgress) {\n  return {\n    type: HA_UPDATE_FILE_UPLOAD_IN_PROGRESS,\n    fileUploadInProgress: fileUploadInProgress\n  };\n}\n\nfunction setShowScreenShareRequest(showRequest) {\n  return {\n    type: HA_SET_SHOW_SCREEN_SHARE_REQUEST,\n    showRequest: showRequest\n  };\n}\n\nfunction setIsScreenSharing(isSharing) {\n  return {\n    type: HA_SET_IS_SCREEN_SHARING,\n    isSharing: isSharing\n  };\n}\n\nfunction setPersistedServiceDeskState(state) {\n  return {\n    type: HA_SET_PERSISTED_STATE,\n    state: state\n  };\n}\n\nfunction agentUpdateIsSuspended(isSuspended) {\n  return {\n    type: HA_UPDATE_IS_SUSPENDED,\n    isSuspended: isSuspended\n  };\n}\n\nfunction agentUpdateIsTyping(isTyping) {\n  return {\n    type: HA_UPDATE_IS_TYPING,\n    isTyping: isTyping\n  };\n}\n\nexport { HA_END_CHAT, HA_SET_AGENT_AVAILABILITY, HA_SET_AGENT_JOINED, HA_SET_AGENT_LEFT_CHAT, HA_SET_IS_CONNECTING, HA_SET_IS_RECONNECTING, HA_SET_IS_SCREEN_SHARING, HA_SET_PERSISTED_STATE, HA_SET_SHOW_SCREEN_SHARE_REQUEST, HA_UPDATE_CAPABILITIES, HA_UPDATE_FILE_UPLOAD_IN_PROGRESS, HA_UPDATE_IS_SUSPENDED, HA_UPDATE_IS_TYPING, agentUpdateIsSuspended, agentUpdateIsTyping, endChat, setAgentAvailability, setAgentJoined, setAgentLeftChat, setIsConnecting, setIsReconnecting, setIsScreenSharing, setPersistedServiceDeskState, setShowScreenShareRequest, updateCapabilities, updateFilesUploadInProgress };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const LanguagePackContext = React.createContext(null);\n\nexport { LanguagePackContext };\n"],"names":["useUUID","ref","useRef","undefined","current","uuid","UUIDType","COMPONENT","withoutEmptyStarters","config","newConfig","starters","buttons","length","allow_return","filter","button","Boolean","label","trim","is_on","setIntl","serviceManager","locale","messages","intl","createIntl","store","dispatch","actions","setAppStateValue","createWriteableElementsProxy","elementSet","Set","handler","get","target","element","has","add","Proxy","writeableElements","VERSION","NotificationType","BOUNCING_ANIMATION_TIMEOUTS","DEFAULT_LAUNCHER","mobile","title","time_to_expand","new_expand_time","time_to_reduce","notification_type","TEXT_NOTIFICATION","desktop","deepFreeze","DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS","hideBackButton","hidePanelHeader","disableAnimation","DEFAULT_CUSTOM_PANEL_STATE","isOpen","panelID","DEFAULT_CUSTOM_PANEL_ID","options","DEFAULT_IFRAME_PANEL_STATE","messageItem","DEFAULT_CITATION_PANEL_STATE","citationItem","DEFAULT_TOUR_STATE","activeTourStepItems","DEFAULT_MESSAGE_PANEL_STATE","localMessageItem","isMessageForInput","VIEW_STATE_ALL_CLOSED","launcher","mainWindow","tour","VIEW_STATE_LAUNCHER_OPEN","VIEW_STATE_MAIN_WINDOW_OPEN","DEFAULT_PERSISTED_TO_BROWSER","chatState","version","disclaimersAccepted","homeScreenState","isHomeScreenOpen","showBackToBot","hasSentNonWelcomeMessage","persistedTourState","activeTourID","activeTourCurrentStepIndex","agentState","isConnected","isSuspended","agentProfiles","launcherState","wasLoadedFromBrowser","viewState","activeTour","showUnreadIndicator","mobileLauncherIsExtended","mobileLauncherWasReduced","mobileLauncherDisableBounce","desktopLauncherIsExpanded","desktopLauncherWasMinimized","bounceTurn","DEFAULT_CHAT_MESSAGES_STATE","localMessageIDs","messageIDs","isTypingCounter","isLoadingCounter","isHydratingCounter","isScrollAnchored","DEFAULT_MESSAGE_STATE","allMessageItemsByID","allMessagesByID","botMessageState","DEFAULT_AGENT_STATE","isConnecting","isReconnecting","numUnreadMessages","fileUploadInProgress","showScreenShareRequest","isScreenSharing","isAgentTyping","inputState","fieldVisible","isReadonly","files","allowFileUploads","allowMultipleFileUploads","allowedFileUploadTypes","stopStreamingButtonState","currentStreamID","isVisible","isDisabled","DEFAULT_THEME_STATE","carbonTheme","CarbonTheme","G10","useAITheme","corners","CornersType","ROUND","DEFAULT_LAYOUT_STATE","showFrame","hasContentMaxWidth","applyBotMessageState","state","newState","setHomeScreenOpenState","persistedToBrowserStorage","applyLocalMessageUIState","localMessageID","propertyName","propertyValue","oldMessage","ui_state","applyFullMessage","message","id","NoteType","MIN_CONTRAST","hexCodeToRGB","color","red","substring","blue","green","parseInt","consoleError","calculateContrast","color1","color2","rgb1","rgb2","luminance1","calculateRelativeLuminance","luminance2","contrast","r8","g8","b8","rRGB","gRGB","bRGB","whiteOrBlackText","background","gray100","white","adjustLightness","token","shift","original","Color","hsl","object","l","round","hex","toLowerCase","CSS_VAR_PREFIX","HEXADECIMAL_REGEX","INTERNAL_OVERRIDES_LIGHT_THEME_MAP","INTERNAL_OVERRIDES_DARK_THEME_MAP","ACCENT_COLOR_MAPS","blue20","blue60","blue60Hover","blue80","g10","g90","g100","fillValues","styles","propertyNames","value","forEach","mergeCSSVariables","publicVars","whiteLabelVariables","internalOverrides","internalOverridesMap","WHITE","includes","G90","G100","createInternalCSSOverridesMap","result","Object","entries","key","startsWith","match","console","warn","WA_CONSOLE_PREFIX","remoteVars","cssOverrides","primaryColor","secondaryColor","accentColor","useAccentColor","tryFocusColor","useFocusColor","colorMap","accentBlue20","accentBlue60Hover","accentBlue80","accentColorRGB","toString","accentColorBW","gray80","gray10","remoteStylesToCSSVars","getThemeClassNames","themeState","themeClassnames","CarbonThemeClassNames","validateViewState","appState","VALID_PUBLIC_VARS_IN_AI_THEME_LIST","VALID_PUBLIC_VARS_IN_AI_THEME_SET","UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE","join","ChatActionsImpl","constructor","this","hydrating","restarting","alreadyHydrated","chunkQueue","hydrateChat","alternateWelcomeRequest","alternateWelcomeRequestSource","alternateOptions","fireReady","hydrationPromise","doHydrateChat","fire","type","BusEventType","CHAT_READY","history","debugLog","addIsHydratingCounter","historyService","loadHistory","humanAgentService","initialize","getState","hydrateMessageHistory","messageHistory","createElementsForUserDefinedResponses","latestPanelLocalMessageItem","openResponsePanel","homeScreenConfig","setHomeScreenIsOpen","public","messaging","skipWelcome","send","createWelcomeRequest","MessageSendSource","WELCOME_REQUEST","returnBeforeStreaming","chatWasHydrated","lastMessageID","arrayLastValue","lastMessage","lastOriginalMessage","fullMessageID","isLiveAgentMessage","isRequest","messageService","resendMessage","allowReconnect","serviceDesk","handleHydration","getPublicWebChatState","isConnectedWithHumanAgent","isWebChatOpen","isConnectingWithHumanAgent","isDebugEnabled","isEnableDebugLog","hasUserSentMessage","isTourActive","sendWithCatch","source","ignoreHydration","error","messageRequest","createMessageRequestForText","responsePanelState","setResponsePanelIsOpen","doSend","addDefaultsToMessage","originalUserText","input","text","silent","localMessage","inputItemToLocalItem","addMessage","addLocalMessageItem","setValueSelectedForMessageID","messageSetOptionSelected","cloneDeep","receive","isLatestWelcomeNode","requestMessage","requestOptions","restartCount","initialRestartCount","MESSAGE","preReceiveEvent","PRE_RECEIVE","data","updateHasSentNonWelcomeMessage","languagePack","isResponse","processMessageResponse","catch","inlineError","createMessageResponseForText","errors_singleMessage","thread_id","MessageResponseTypes","INLINE_ERROR","RECEIVE","removeMessages","insertHistory","scrollBottom","getMessagesScrollBottom","notes","HISTORY","body","currentAppStateMessages","newAppStateMessages","merge","doAutoScroll","scrollToBottom","receiveChunk","chunk","messageID","chunkPromise","resolvablePromise","push","processChunkQueue","isCompleteItem","isStreamCompleteItem","isPartialItem","isStreamPartialItem","isStopGeneratingVisible","botInputState","partial_item","streaming_metadata","cancellable","setStopStreamingButtonVisible","response_id","streamingStart","item","complete_item","streamingAddChunk","disableFadeAnimation","partial_response","keys","Error","streamingMergeHistory","handleUserDefinedResponseItemsChunk","isStreamFinalResponse","final_response","setStopStreamingButtonDisabled","doResolve","getOrCreateUserDefinedElement","messageItemID","userDefinedItem","userDefinedElementRegistry","document","createElement","slotName","setAttribute","set","handleUserDefinedResponseItems","originalMessage","renderAsUserDefinedMessage","user_defined","userDefinedResponseEvent","USER_DEFINED_RESPONSE","fullMessage","slot","fullWidth","setMessageUIProperty","isResponseWithNestedItems","itemsLocalMessageItemIDs","bodyLocalMessageItemIDs","footerLocalMessageItemIDs","gridLocalMessageItemIDs","createElementForNestedUserDefinedResponse","localMessageItemID","nestedLocalMessage","asyncForEach","row","cell","itemID","streamItemID","CHUNK_USER_DEFINED_RESPONSE","isProvidedFromTransfer","output","generic","request_id","previousItemID","index","pause","isPause","agent","isConnectToAgent","hasTourUserDefinedType","outputItemToLocalItem","skipTourCard","skip_card","startTourReason","TourStartReason","START_TOUR_METHOD","SKIP_CARD","mainWindowCloseReason","MainWindowCloseReason","CALLED_START_TOUR","TOUR_SKIP_CARD","startTour","viewChangeReason","ViewChangeReason","nestedLocalMessageItems","createLocalMessageItemsForNestedMessageItems","addNestedMessages","addIsTypingCounter","hasServiceDesk","errorOccurred","errorType","OnErrorType","INTEGRATION_ERROR","setMessageHistoryProperty","agentAvailability","checkAreAnyAgentsOnline","shouldAutoRequestAgent","isChannelTransferToAgent","skipConnectAgentCard","AgentsOnlineStatus","ONLINE","startChat","showIsTyping","isTyping","sleep","time","setResponsePanelContent","insertLocalMessageResponse","updateLanguagePack","changes","addNotification","notification","removeNotification","groupID","removeNotifications","removeAllNotifications","updateCSSVariables","theme","usePublicVars","variable","consoleWarn","allVariables","updateBotName","name","updateMainHeaderTitle","updateBotAvatarURL","url","updateHomeScreenConfig","updateLauncherConfig","launcherConfig","changeView","newView","reason","tryHydrating","forceViewChange","newViewState","constructViewState","isEqual","fireViewChangeEventsAndChangeView","isHydrated","viewChanging","setViewChanging","oldViewState","preViewChangeEvent","VIEW_PRE_CHANGE","cancelViewChange","setViewState","viewChangeEvent","VIEW_CHANGE","changeViewReason","setTourData","ViewType","TOUR","TOUR_START","TOUR_STEP","step","tourState","endTour","LAUNCHER","clearTourData","goToSpecificTourStep","stepId","newStepIndex","findIndex","stepItem","step_id","changeStepInTour","changeStepOptions","nextStep","previousStep","actualNewStepIndex","catastrophicErrorType","callOnError","additionalChatParameters","onError","restartConversation","skipHydration","endAgentConversation","fireEvents","PRE_RESTART_CONVERSATION","currentState","endChat","MAIN_WINDOW","mainWindowOpenReason","MainWindowOpenReason","CALLED_RESTART_CONVERSATION","instance","updateAssistantInputFieldVisibility","cancelAllMessageRequests","RESTART_CONVERSATION","destroySession","keepOpenState","originalViewState","newPersistedToBrowserStorage","userSessionStorageService","clearLauncherSession","clearChatSession","agentEndConversation","endedByUser","agentUpdateIsSuspended","values","HANDLER_NOT_FUNCTION","EventBus","handlersByType","Map","eventsTypesRunning","eventsRunningCount","busEvent","logEvent","JSON","stringify","handlersForType","handlersCopy","slice","Promise","delete","waitForEmptyPromise","fireSync","waitForEmpty","on","handlers","asArray","debugStackTrace","off","indexOf","removed","splice","once","onceHandler","event","logListeners","listeners","group","listener","consoleLog","groupEnd","clear","eventCopy","createCustomPanelInstance","customPanelInstance","open","setCustomPanelConfigOptions","setCustomPanelOpen","close","freeze","HistoryService","useHistory","publicConfig","resultData","customLoadHistory","items","historyNotes","async","allLocalMessagesByID","loadingState","allMessages","threadMessagesByThreadID","responsesByRequestID","relatedMessageByID","localMessagesByOriginalMessageID","lastThreadID","loadedHistory","latestTransferToAgentResponse","note","pushAndPrepareMessage","historyItem","isEventRequest","from_history","timestamp","Date","getTime","THREAD_ID_MAIN","file_upload_status","FileStatusValue","UPLOADING","COMPLETE","error_state","MessageErrorState","FAILED","relatedMessageID","beginEvent","HISTORY_BEGIN","eventBus","HISTORY_END","notesToMessages","getResponseItems","thread","addMessageToThread","createLocalMessages","localMessagesByFullMessageID","toChatMessageState","createChatStates","mainThreadMessages","welcomeRequest","findLast","is_welcome_request","welcomeResponse","isWelcomeResponse","markIsLatestWelcomeNode","isOptionItem","relatedRequest","optionSelected","isDateResponseType","markSelectedOptions","notesToLoadedHistory","SESSION_HISTORY","MessageLoadingManager","start","onExceededMaxSilentLoading","onEnd","onTimeout","msMaxSilentLoading","msMaxAttempt","hasExceededMaxSilentLoading","onSilentLoading","setTimeout","onMaxAttempt","end","clearTimeout","MS_BETWEEN_RETRIES","RetryType","MessageService","pendingLocale","localeIsExplicit","messageLoadingManager","queue","waiting","timeoutOverride","messageTimeoutSecs","timeoutMS","processSuccess","received","isProcessed","isWelcomeNode","setMessageErrorState","NONE","message_type","MessageInputType","EVENT","now","trackData","lastRequestTime","timeLastRequest","totalRequestTime","timeFirstRequest","sendMessagePromise","moveToNextQueueItem","addErrorMessage","errorMessage","createLocalMessageForInlineError","HYDRATE_RESEND","skipQueue","sendToAssistantAndUpdateErrorState","sendToAssistant","SILENT","VISIBLE","RETRYING","waitingMessage","WAITING","processError","pendingRequest","resultText","allowRetry","tryCount","isWelcome","msSinceStarted","isInAttemptWindow","numErrors","retryDelay","MESSAGE_COMMUNICATION","otherData","rejectFinalErrorOnMessage","doReject","customSendMessage","updateMessage","controller","AbortController","sendMessageController","signal","runQueueIfReady","clearCurrentQueueItem","getLastBotResponseWithContext","LOADING_INDICATOR_TIMER","messageLoadingIndicatorTimeoutSecs","addIsLoadingCounter","didExceedMaxLoading","cancelMessageRequestByID","PRE_SEND","updateLocalMessageItem","SEND","addToMessageQueue","newPendingMessage","errorState","messageToUpdate","announceMessageID","announceMessage","TEXT","logError","lastResponse","abort","safeFetchTextWithTimeout","NamespaceService","namespace","originalName","attributeSafe","suffix","computedName","computeNamespaceName","getSuffix","ServiceManager","innerStorage","storage","getItem","setItem","removeItem","IS_SESSION_STORAGE","window","sessionStorage","storage$1","UserSessionStorageService","prefix","loadChatSession","chatSessionString","getChatSessionKey","chatSession","parse","loadLauncherSession","launcherSessionString","getLauncherSessionKey","launcherSession","persistChatSession","session","persistLauncherSession","replaceCurrentArrayValue","currentValue","newValue","Array","isArray","agentReducers","HA_SET_IS_CONNECTING","action","activeLocalMessageID","HA_SET_IS_RECONNECTING","HA_SET_AGENT_AVAILABILITY","availability","HA_SET_SHOW_SCREEN_SHARE_REQUEST","showRequest","HA_SET_AGENT_JOINED","agentProfile","HA_SET_PERSISTED_STATE","serviceDeskState","HA_UPDATE_IS_SUSPENDED","HA_UPDATE_IS_TYPING","HA_SET_AGENT_LEFT_CHAT","HA_UPDATE_CAPABILITIES","newInputState","capabilities","HA_SET_IS_SCREEN_SHARING","isSharing","HA_UPDATE_FILE_UPLOAD_IN_PROGRESS","HA_END_CHAT","populateTourStepItems","tourMessageItem","find","steps","clearTourState","EXCLUDE_AGENT_UNREAD","AgentMessageType","USER_ENDED_CHAT","CHAT_WAS_ENDED","RELOAD_WARNING","reducers","CHANGE_STATE","partialState","HYDRATE_CHAT","iFramePanelState","viewSourcePanelState","customPanelState","HYDRATE_MESSAGE_HISTORY","ADD_LOCAL_MESSAGE_ITEM","addAfterID","isSilent","currentIndex","existingID","newLocalMessageIDs","insertAtIndex","afterIDIndex","isBotMessage","agent_message_type","isMainWindowOpen","isBrowserPageVisible","REMOVE_MESSAGES","idsSet","newAllMessages","newAllMessageItems","newMessageIDs","newMessageItemsIDs","UPDATE_LOCAL_MESSAGE_ITEM","UPDATE_MESSAGE","ADD_MESSAGE","itemIDsInNewMessage","newAllMessageItemsByID","existingItemIDs","firstFoundIndex","isItemInMessage","itemIDsToInsert","MESSAGE_SET_OPTION_SELECTED","newMessagesByID","sentMessage","ADD_IS_TYPING_COUNTER","Math","max","addToIsTyping","ADD_IS_LOADING_COUNTER","addToIsLoading","ADD_IS_HYDRATING_COUNTER","addToIsHydrating","SET_APP_STATE_VALUE","UPDATE_PERSISTED_CHAT_STATE","UPDATE_HAS_SENT_NON_WELCOME_MESSAGE","SET_VIEW_STATE","previousState","handleViewStateChange","SET_VIEW_CHANGING","SET_INITIAL_VIEW_CHANGE_COMPLETE","initialViewChangeComplete","changeComplete","UPDATE_BOT_NAME","botName","headerDisplayName","UPDATE_BOT_AVATAR_URL","botAvatarURL","UPDATE_LAUNCHER_AVATAR_URL","avatar_url_override","UPDATE_MAIN_HEADER_TITLE","UPDATE_CSS_VARIABLES","variables","cssVariableOverrides","UPDATE_HOME_SCREEN_CONFIG","newHomeScreenConfig","mergeWith","SET_MESSAGE_UI_PROPERTY","SET_MESSAGE_HISTORY_PROPERTY","MERGE_HISTORY","ANNOUNCE_MESSAGE","ACCEPTED_DISCLAIMER","location","hostname","SET_HOME_SCREEN_IS_OPEN","TOGGLE_HOME_SCREEN","UPDATE_LAUNCHER_CONFIG","SET_LAUNCHER_PROPERTY","SET_LAUNCHER_CONFIG_PROPERTY","launcherType","LauncherType","DESKTOP","MOBILE","SET_CHAT_MESSAGES_PROPERTY","SET_LAUNCHER_MINIMIZED","OPEN_IFRAME_CONTENT","CLOSE_IFRAME_PANEL","SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN","relatedSearchResult","SET_CUSTOM_PANEL_OPEN","SET_CUSTOM_PANEL_OPTIONS","SET_TOUR_DATA","newActiveTourMessageID","CLEAR_TOUR_DATA","CHANGE_STEP_IN_TOUR","min","newStepNumber","UPDATE_INPUT_STATE","applyInputState","getInputState","isInputToAgent","SET_IS_BROWSER_PAGE_VISIBLE","ADD_INPUT_FILE","file","currentInputState","REMOVE_INPUT_FILE","fileID","newUploads","REMOVE_LOCAL_MESSAGE_ITEM","ADD_NOTIFICATION","notificationID","notifications","concat","REMOVE_NOTIFICATIONS","REMOVE_ALL_NOTIFICATIONS","CLEAR_INPUT_FILES","FILE_UPLOAD_INPUT_ERROR","currentInputSate","isError","status","ADD_NESTED_MESSAGES","localMessageItems","SET_RESPONSE_PANEL_IS_OPEN","SET_RESPONSE_PANEL_CONTENT","STREAMING_START","STREAMING_MERGE_HISTORY","existingMessage","newMessage","STREAMING_ADD_CHUNK","chunkItem","localItemID","existingLocalMessageItem","newItem","needsAnnouncement","streamingState","chunks","isDone","isIntermediateStreaming","response_type","UPDATE_CHAT_HEADER_CONFIG","chatHeaderConfig","chatHeaderState","UPDATE_MAX_VISIBLE_HEADER_OBJECTS","maxTotal","maxVisibleHeaderObjects","SET_STOP_STREAMING_BUTTON_VISIBLE","SET_STOP_STREAMING_BUTTON_DISABLED","SET_STREAM_ID","UPDATE_MAIN_HEADER_AVATAR","headerAvatarConfig","assign","getThemeCornersType","getLayoutState","IS_PHONE","themeConfig","SQUARE","layout","reducerFunction","DEFAULT_PUBLIC_CONFIG","openChatByDefault","showLauncher","shouldTakeFocusIfOpensAutomatically","dayjs","LocalizedFormat","Chat","publicConfigProvided","customHostElement","additionalChatParametersProvided","debug","consoleDebug","appConfig","startInternal","doesHaveServiceDesk","getBotName","initialState","chatWidthBreakpoint","chatWidth","chatHeight","enLanguagePack","originalConfig","suspendScrollDetection","isDestroyed","targetViewState","customMenuOptions","showNonHeaderBackgroundCover","sessionStorageLauncherState","enhancer","__REDUX_DEVTOOLS_EXTENSION__","instanceId","createStore","doCreateStore","subscribe","previousPersistedToBrowserStorage","copyToSessionStorage","disableWindowTitleChanges","originalTitle","changeTitleTimer","agent_newMessage","createHandleWindowTitle","customPanelManager","serviceManger","panels","getPanel","createCustomPanelManager","WriteableElementName","AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT","WELCOME_NODE_BEFORE_ELEMENT","HEADER_BOTTOM_ELEMENT","BEFORE_INPUT_ELEMENT","HOME_SCREEN_HEADER_BOTTOM_ELEMENT","HOME_SCREEN_AFTER_STARTERS_ELEMENT","HOME_SCREEN_BEFORE_INPUT_ELEMENT","CUSTOM_PANEL_ELEMENT","setEnableDebugLog","debugStackTraces","setEnableDebugStackTracesLog","createServiceManager","localePack","render","createHumanAgentService","all","loadLanguagePack","loadLocale","resolve","loadHAA","reallyRenderAndReturnInstance","OPEN_BY_DEFAULT","WEB_CHAT_LOADED","setInitialViewChangeComplete","callRender","wasRendered","newPack","updateLocale","newLocale","localePromise","languagePackPromise","then","selectInputState","INSTANCE_SEND","destroy","container","remove","updateInputState","updateInputIsDisabled","updateBotUnreadIndicatorVisibility","setLauncherProperty","issueWithNewView","viewTypeValues","CALLED_CHANGE_VIEW","homeScreenConfigClone","scrollToMessage","animate","doScrollToMessage","customPanels","updateCustomMenuOptions","updateIsTypingCounter","direction","updateIsLoadingCounter","updateIsChatLoadingCounter","updateHeaderConfig","configCopy","updateChatHeaderConfig","updateMainHeaderAvatar","elements","getMainWindow","addClassName","removeClassName","getMessageInput","getHTMLElement","setValue","setEnableEnterKey","addChangeListener","removeChangeListener","getHomeScreenInput","tours","CALLED_END_TOUR","goToNextStep","goToStep","addMessageChunk","clearConversation","requestFocus","appWindow","endConversation","updateIsSuspended","createChatInstance","renderAndReturnInstance","promise","renderPromise","AriaAnnouncerProvider","props","useIntl","useServiceManager","announcerRef","announcerFunction","useCallback","announceValue","previousAnnounceMessageRef","useEffect","currentAnnounceMessage","React","AriaAnnouncerContext","Provider","children","AriaAnnouncerComponent","getLauncherButtonAriaLabel","isLauncherHidden","launcher_isTourOpen","launcher_isTourClosed","launcher_isOpen","launcher_isClosed","Launcher","onToggleOpen","unreadAgentCount","className","tabIndex","launcherHidden","launcherAvatarURL","useSelector","buttonRef","useImperativeHandle","doFocusRef","ariaLabel","formatMessage","count","launcherAvatar","AiLaunch","size","ChatLaunch","src","alt","cx","Button","WACLauncher__TourButton","PageObjectId","kind","ButtonKindEnum","PRIMARY","onClick","ArrowUpLeft","LauncherExport","forwardRef","LauncherComplex","launcherComplexRef","launcherRef","onOpen","onMinimize","launcher_desktopGreeting","launcher_closeButton","launcher_ariaIsExpanded","disabled","WACLauncherComplex__Text","Tag","Close","LauncherDesktopContainer","onDoToggle","useLanguagePack","browserLauncherState","isExpandedLauncherEnabled","smallLauncherClassName","setSmallLauncherClassName","useState","complexLauncherClassName","setComplexLauncherClassName","launcherHiddenRef","animateOnceVisible","bounceTurnRef","animationStartTimerRef","animationFinishedTimerRef","firstBounceAnimationStartTimerRef","firstBounceAnimationFinishedTimerRef","secondBounceAnimationStartTimerRef","secondBounceAnimationFinishedTimerRef","determineLauncherHeight","expandedLauncherHeight","offsetHeight","style","setProperty","startExpandLauncher","setExpandAnimationTimers","clearExpandAnimationTimers","startBounceAnimation","finishBounceAnimation","setBounceAnimationTimers","clearBounceAnimationTimers","setDefaultLauncherState","setLauncherMinimized","useOnMount","setLauncherConfigProperty","prevLauncherTitle","usePrevious","animateWithClass","endAnimationNameOrDelay","endAnimationCallback","classList","animationName","removeEventListener","addEventListener","LauncherExtended","isExtended","playExtendAnimation","onSwipeRight","onReduceEnd","ariaAnnouncer","useAriaAnnouncer","animateExtendedState","setAnimateExtendedState","showGreetingMessage","setShowGreetingMessage","prevIsExtended","extendedContainerRef","greetingMessageRef","textHolderRef","touchStartRef","touchStartX","touchStartY","shouldReduceExtendedLauncher","extendWithAnimation","extendWithoutAnimation","launcherGreetingMessage","launcher_mobileGreeting","launcherContainerElement","textHolderEl","greetingMessageEl","extendedContainerEl","maxTextHolderWidth","launcherPosition","IS_MOBILE","width","height","screen","extendedWidth","getMaxLauncherExtendedWidth","clientWidth","querySelector","launcherExtendedWidth","removeAttribute","calculateAndSetMaxExtendedLauncherWidth","doFadeAnimationForElements","fadeInElement","fadeInTime","buttonEl","handleTouchMove","touchList","touchStartCoordinates","callback","clientX","touchEndX","clientY","touchEndY","differenceX","differenceY","abs","checkIfUserSwipedRight","touches","handleTouchStart","touchStart","reduceAnimationEndListener","fadeOutElement","GHOST","LauncherExtendedExport","LauncherMobileContainer","wasReduced","disableBounce","isStartingBounceAnimation","setIsStartingBounceAnimation","prevWasReduced","initialBounceTurn","previouslyPlayedExtendAnimation","extendLauncherTimeoutIDRef","reduceLauncherTimeoutIDRef","endBounceAnimationRef","shouldBounceRef","isExtending","disableIntroAnimation","setLauncherStateAsReduced","reduceLauncher","extendLauncherTimeoutID","reduceLauncherTimeoutID","clearTimeouts","setExpandAnimationTimeout","endBounceAnimation","startRecurringBounceAnimation","turnCounter","animation","timeouts","startingIndex","beforeAll","afterAll","beforeEach","afterEach","terminate","timeoutID","playAnimation","isComplete","setAnimationListener","replayAnimation","setAnimationTimeouts","handleToggleOpen","handleSwipeRight","LauncherContainer","LAUNCHER_CLICKED","launcherContainer","effect","deps","hasRunRef","useEffectDidUpdate","HydrationPanel","onClose","useHomeScreenVersion","isHidden","useContext","HideComponentContext","header","HomeScreenHeaderExport","BotHeaderExport","onToggleHomeScreen","includeWriteableElement","testIdPrefix","OverlayPanelName","HYDRATING","MountChildrenOnDelay","delay","AnnounceOnMountComponentExport","announceOnce","window_ariaWindowLoading","Loading","withOverlay","CustomPanel","onPanelOpenEnd","onPanelCloseEnd","onPanelOpenStart","onPanelCloseStart","onCloseAndRestart","onClickRestart","disableDefaultCloseAction","onClickBack","onClickClose","onClickCloseAndRestart","prevIsOpen","openAnimation","AnimationInType","SLIDE_IN_FROM_BOTTOM","closeAnimation","AnimationOutType","SLIDE_OUT_TO_BOTTOM","onClickBackLocal","onClickCloseLocal","checkAllowClose","onCloseAndRestartLocal","OverlayPanel","onOpenStart","CUSTOM_PANEL_PRE_OPEN","onOpenEnd","CUSTOM_PANEL_OPEN","onCloseStart","CUSTOM_PANEL_PRE_CLOSE","onCloseEnd","CUSTOM_PANEL_CLOSE","animationOnOpen","animationOnClose","shouldOpen","overlayPanelName","CUSTOM","BasePanelComponentExport","eventName","eventDescription","labelBackButton","general_returnToAssistant","hideCloseButton","hideCloseAndRestartButton","WriteableElement","CustomPanelExport","lazyChat","CatastrophicError","lazyCatastrophicError","Disclaimer","lazyDisclaimer","HomeScreenContainer","lazyHomeScreenContainer","IFramePanel","lazyIFramePanel","ViewSourcePanel","lazyViewSourcePanel","BodyAndFooterPanelComponent","lazyBodyAndFooterPanelComponent","WIDTH_BREAKPOINT_STANDARD","WIDTH_BREAKPOINT_NARROW","WIDTH_BREAKPOINT_WIDE","MainWindow","Component","super","arguments","closing","modalPortalHostElement","numPanelsOpen","numPanelsAnimating","numPanelsCovering","isHydrationAnimationComplete","shouldAutoFocus","extraClassNames","areModulesLoaded","mainWindowRef","containerRef","botChatRef","homeScreenInputRef","disclaimerRef","brandingRef","animationContainerRef","iframePanelRef","viewSourcePanelRef","previousBodyVisibility","previousBodyPosition","onResize","appChatWidthBreakpoint","offsetWidth","ChatWidthBreakpoint","WIDE","STANDARD","NARROW","onVisualViewportResize","updateFromVisualViewport","visualViewport","offsetTop","offsetLeft","setModalPortalHostElement","setState","onSendInput","selectIsInputToAgent","sendMessageToAgent","clearInputFiles","onSendHomeButtonInput","createMessageRequestForChoice","HOME_SCREEN_STARTER","removeChatFromDom","onRestart","doClose","toggleHomeScreen","getShowDisclaimer","getShowHomeScreen","takeFocus","requestInputFocus","onUserTyping","userTyping","onAcceptDisclaimer","acceptDisclaimer","coverBackground","prevState","onHydrationPanelClose","componentDidMount","mainWindowObserver","ResizeObserver","observe","disableCustomElementMobileEnhancements","updateBody","SCROLLBAR_WIDTH","loadPanels","componentWillUnmount","unobserve","componentDidUpdate","oldProps","oldState","newProps","useCustomHostElement","prevViewState","requestAnimationFrame","newLastItemID","lastMessageItem","componentDidCatch","errorInfo","createDidCatchErrorData","preload","unmounting","IS_IOS","getPropertyValue","fromCloseAndRestart","MAIN_WINDOW_CLOSED_AND_RESTARTED","DEFAULT_MINIMIZE","disclaimer","addClassNameToState","removeClassNameFromState","renderChat","showCovering","renderCustomPanel","renderHydrationPanel","renderDisclaimerPanel","renderResponsePanel","renderHomeScreenPanel","renderIFramePanel","renderViewSourcePanel","renderBotChat","headerAvatar","agentDisplayState","selectAgentDisplayState","showDisclaimer","hideBotContainer","HideComponent","hidden","Suspense","fallback","messageState","MESSAGE_INPUT","renderInnerHydrationPanel","shouldHide","renderCatastrophicPanel","CATASTROPHIC","showHeader","FADE_IN","FADE_OUT","DISCLAIMER","disclaimerHTML","disclaimerAcceptButtonRef","showHomeScreen","onSendBotInput","HOME_SCREEN_INPUT","onSendButtonInput","IFRAME","CONVERSATIONAL_SEARCH_CITATION","panelOptions","panel","PANEL_RESPONSE","showAnimations","show_animations","renderWidget","localeClassName","showGlass","enableFocusTrap","headerConfig","hideMinimizeButton","trapActive","isWideWidth","FocusTrap","active","VisuallyHidden","window_title","onScroll","scrollTop","ModalPortalRootContext","MainWindow$1","connect","TourContainerLazy","lazyTourComponent","App","hostElement","applicationStyles","fontStyles","combinedStyles","AppContainer","useDispatch","windowSize","setWindowSize","innerWidth","innerHeight","cssVariableOverrideString","useMemo","cssVariables","cssVariablesString","allValues","map","replace","convertCSSVariablesToString","dir","windowListener","visibilityListener","setIsBrowserPageVisible","visibilityState","node","nonce","cspNonce","IS_PHONE_IN_PORTRAIT_MODE","WindowSizeContext","ServiceManagerContext","RawIntlProvider","LanguagePackContext","MainContainer","tourContainerRef","showTour","showedTourOnce","languageKey","regionLabel","role","UserDefinedResponsePortalsContainer","chatInstance","renderUserDefinedResponse","userDefinedResponseEventsBySlot","slotState","UserDefinedResponseComponentPortal","ReactDOM","UserDefinedResponsePortalsContainerExport","WriteableElementsPortalsContainer","renderResponseMap","responseItem","WriteableElementsComponentPortal","WriteableElementsPortalsContainerExport","onBeforeRender","onAfterRender","renderWriteableElements","setParentInstance","setInstance","renderProps","setRenderProps","setApplicationStyles","setInstances","setUserDefinedResponseEventsBySlot","managedWebChatRef","previousConfigRef","previousConfig","managedWebChat","shouldDestroy","destroyWebChat","widget","pagePublicConfig","chatConstructorPromise","protocol","compatMode","instantiateWidget","webChatInstance","log","userDefinedEventsBySlot","itemChunk","partialItems","addUserDefinedResponseHandler","loadChat","carbonStyles","loadBaseStyles","loadCarbon","loadStyles","AppContainerExport","default","carbon","CSS_CLASS_PREFIX","WEB_COMPONENT_PREFIX","array","callbackFunction","predicate","startAt","lastIndex","findLastIndex","findLastWithMap","LOCAL_MESSAGE","createMessageResponseForItem","createLocalMessageForItem","fromHistory","allowFooter","isGridResponseType","rows","cells","cellLocalMessageItemIDs","createLocalMessageItemsForNestedType","nestedMessageItem","isSupportedMessageItemInBody","isCarouselResponseType","bodyItems","isShowPanelButtonType","footerItems","footer","rootMessageItem","isButtonResponseType","isSupportedMessageItemInFooter","nestedMessageItemIDs","isSupported","nestedLocalMessageItem","CARD","isCardResponseType","isItemSupportedInResponseBody","CAROUSEL","BUTTON","button_type","ButtonItemType","SHOW_PANEL","GRID","BasePanelComponent","headerProps","showRestartButton","headerRef","focusTrapOptions","clickOutsideDeactivates","returnFocusOnDeactivate","preventScroll","HeaderExport","showBackButton","displayName","showCenter","changeState","updatePersistedChatState","mergeMessageHistory","setMessageWasAnnounced","setChatMessagesStateProperty","closeIFramePanel","setIFrameContent","setViewSourcePanelIsOpen","addInputFile","removeFileUpload","removeLocalMessageItem","fileUploadInputError","setMaxVisibleHeaderObjects","setStreamID","withAriaAnnouncer","Wrapped","makeTestId","PureComponent","isClosing","isOpening","openPanelTimeout","closePanelTimeout","openPanel","animationDurationOpen","durationInMS","conditionalSetTimeout","closePanel","animationDurationClose","prevProps","ai_slug_title","ai_slug_description","components_overflow_ariaLabel","components_swiper_currentLabel","errors_communicating","errors_imageSource","errors_videoSource","errors_audioSource","errors_iframeSource","errors_ariaMessageRetrying","errors_ariaMessageFailed","errors_noAgentsAvailable","errors_noAgentsJoined","errors_connectingToAgent","errors_busy","errors_agentAppSessionExpired","errors_generalContent","errors_somethingWrong","input_ariaLabel","input_placeholder","input_buttonLabel","input_uploadButtonLabel","window_ariaTourRegion","window_ariaTourRegionNamespace","window_ariaChatRegion","window_ariaChatRegionNamespace","window_ariaWindowOpened","window_ariaWindowClosed","messages_youSaid","messages_botSaid","messages_agentSaid","messages_searchResults","messages_searchResultsLink","messages_searchResultsOpenDocument","messages_searchResultsOpenDocumentWithLabel","messages_searchResultsExpand","messages_searchResultsCollapse","messages_botIsLoading","messages_botIsTyping","messages_agentIsTyping","messages_scrollHandle","messages_scrollHandleDetailed","messages_scrollHandleEnd","messages_scrollHandleEndDetailed","message_labelBot","message_labelYou","notifications_toastClose","buttons_restart","buttons_cancel","buttons_retry","options_select","options_ariaOptionsDisabled","header_previewLinkTitle","header_ariaCloseRestart","header_ariaBotAvatar","header_overflowMenu_options","homeScreen_returnToAssistant","homeScreen_returnToHome","homeScreen_overflowMenuHomeScreen","homeScreen_ariaQuickStartListButton","homeScreen_ariaQuickStartListOpened","homeScreen_ariaQuickStartListClosed","default_agent_availableMessage","default_agent_unavailableMessage","agent_reason_error","agent_sdMissingWarning","agent_noName","agent_chatTitle","agent_startChat","agent_connecting","agent_agentNoNameTitle","agent_agentJoinedName","agent_agentJoinedNoName","agent_youConnectedWarning","agent_connectingMinutes","agent_connectingQueue","agent_ariaAgentAvatar","agent_ariaGenericAvatar","agent_ariaGenericBotAvatar","agent_youEndedChat","agent_conversationWasEnded","agent_disconnected","agent_reconnected","agent_agentLeftChat","agent_agentLeftChatNoName","agent_agentEndedChat","agent_agentEndedChatNoName","agent_transferring","agent_transferringNoName","agent_endChat","agent_confirmSuspendedEndChatTitle","agent_confirmSuspendedEndChatMessage","agent_confirmCancelRequestTitle","agent_confirmCancelRequestMessage","agent_confirmCancelRequestNo","agent_confirmCancelRequestYes","agent_confirmEndChat","agent_confirmEndChatNo","agent_confirmEndChatYes","agent_confirmEndSuspendedYes","agent_botReturned","agent_cardButtonChatRequested","agent_cardButtonConnected","agent_cardButtonChatEnded","agent_cardMessageChatEnded","agent_cardMessageConnected","agent_connectButtonCancel","agent_connectedButtonEndChat","agent_connectWaiting","agent_defaultMessageToAgent","agent_inputPlaceholderConnecting","agent_inputPlaceholderReconnecting","agent_sharingStopSharingButton","agent_sharingRequestTitle","agent_sharingRequestMessage","agent_sharingAcceptButton","agent_sharingDeclineButton","agent_sharingRequested","agent_sharingAccepted","agent_sharingDeclined","agent_sharingCancelled","agent_sharingEnded","agent_suspendedWarning","icon_ariaUnreadMessages","showMore","showMoreResults","disclaimer_title","disclaimer_accept","general_ariaCloseInformationOverlay","general_ariaAnnounceOpenedInformationOverlay","general_ariaAnnounceClosedInformationOverlay","general_ariaAnnounceEscapeOverlay","conversationalSearch_streamingIncomplete","conversationalSearch_viewSourceDocument","conversationalSearch_citationsLabel","conversationalSearch_toggleCitations","conversationalSearch_responseStopped","launcher_chatNow","iframe_ariaSourceLoaded","iframe_ariaImageAltText","iframe_ariaClosePanel","iframe_ariaOpenedPanel","iframe_ariaClosedPanel","iframe_ariaClickPreviewCard","closeAndRestartModal_title","closeAndRestartModal_message","closeAndRestartModal_confirm","closeAndRestartModal_cancel","datePicker_chooseDate","datePicker_confirmDate","tour_resumeButton","tour_restartButton","tour_startButton","tour_doneButton","tour_ariaMinimizeButton","tour_ariaCloseButton","tour_ariaChatButton","tour_ariaPreviousButton","tour_ariaNextButton","tour_instructions","tour_errorFetchingStep","tour_errorTitle","tour_errorBody","fileSharing_fileTooLarge","fileSharing_ariaAnnounceSuccess","fileSharing_fileIcon","fileSharing_removeButtonTitle","fileSharing_statusUploading","fileSharing_uploadFailed","fileSharing_agentMessageText","fileSharing_request","carousel_prevNavButton","carousel_nextNavButton","input_completionsTagApp","input_completionsTagAssistant","table_filterPlaceholder","table_previousPage","table_nextPage","table_itemsPerPage","table_paginationSupplementalText","table_paginationStatus","feedback_positiveLabel","feedback_negativeLabel","feedback_defaultTitle","feedback_defaultPrompt","feedback_defaultPlaceholder","feedback_submitLabel","feedback_cancelLabel","input_stopResponse","messages_responseStopped","chainOfThought_stepTitle","chainOfThought_inputLabel","chainOfThought_outputLabel","chainOfThought_toolLabel","chainOfThought_statusSucceededLabel","chainOfThought_statusFailedLabel","chainOfThought_statusProcessingLabel","chainOfThought_explainabilityLabel","showChildren","onComponentDidMount","defaultProps","resolveFunction","rejectFunction","reject","resolveValue","isResolved","rejectValue","isRejected","createService","lazyWithPreload","factory","mod","lazyMediaPlayer","lazyCarousel","isClient","navigator","browser","detect","screenWidth","screenHeight","os","memoizeOne","getURLHostName","URL","operation","timeout","ChatHeaderObjectType","ChatHeaderAvatarElement","LitElement","isLoaded","_handleOnError","css","unsafeCSS","__decorate","property","String","prototype","bind","CHAT_HEADER_AVATAR_TAG_NAME","CDSChatHeaderAvatarElement","classElement","html","chatHeaderAvatarTemplate","carbonElement","ChatHeaderAvatar","createComponent","tagName","elementClass","react","ChatHeaderLinkElement","isNewTab","customElementClass","chatHeaderLinkTemplate","ChatHeaderLink","ChatHeaderMenu","menuAlignment","Menu","mode","legacyAutoalign","ChatHeaderMenuButton","setIsOpen","refs","menuRefs","context","menuContext","useFloating","onOpenChange","getReferenceProps","getMenuReferenceProps","getFloatingProps","getMenuFloatingProps","useInteractions","useClick","useDismiss","setReference","ButtonSizeEnum","MEDIUM","renderIcon","ChevronUp","ChevronDown","onMouseDown","preventDefault","floating","setFloating","ChatHeaderMenuItem","MenuItem","ChatHeaderMenuItemRadioGroup","defaultSelectedItem","selectedItem","onChange","MenuItemRadioGroup","itemToString","menuItem","ChatHeaderOverflowMenu","tooltipPosition","iconDescription","hasIconOnly","ChatHeaderTitleElement","chatHeaderTitleTemplate","ChatHeaderTitle","AISlug","CDSAILabel","Header","backContent","overflowItems","overflowClicked","backButtonType","brandColor","enableChatHeaderConfig","backButtonRef","restartButtonRef","closeAndRestartButtonRef","closeButtonRef","centerObjectsRef","centerGapRef","overflowRef","overflowIsOpen","setOverflowIsOpen","confirmModelOpen","setConfirmModelOpen","selectedGroupMenuitems","setSelectedGroupMenuItems","isImageError","setIsImageError","hasHeaderAvatar","prevChatHeaderAvatarURL","chatHeaderTitle","headerTitle","chatHeaderDisplayName","closeConfirmModel","showCloseAndRestartButton","useHideCloseButton","closeIcon","closeReverseIcon","closeIsReversible","minimizeButtonIconType","MinimizeButtonIconType","CLOSE","CloseLarge","MINIMIZE","SubtractLarge","SIDE_PANEL_LEFT","SidePanelClose","SIDE_PANEL_RIGHT","onConfirm","getComponentInMenu","list","LINK","RADIO_GROUP","nextObject","Fragment","MenuItemDivider","MENU","getComponentInChatHeader","headerObject","leftObjectsLength","rightObjectsLength","left","right","isLeftObjectsInOverflow","isRightObjectsInOverflow","renderChatHeaderObjectsInOverflow","hasOverflow","isRTL","leftContent","leftChatHeaderComponents","rightChatHeaderComponents","leftChatHeaderMenuComponents","rightChatHeaderMenuComponents","HeaderButton","buttonKind","DownToBottom","centerResizeObserver","centerGapElement","newTotal","floor","disconnect","AI_LABEL_SIZE","EXTRA_SMALL","alignment","POPOVER_ALIGNMENT","BOTTOM_LEFT","BOTTOM_RIGHT","Restart","WACReverseIcon","isReversible","testId","CLOSE_CHAT","ConfirmModal","onCancel","cancelButtonLabel","confirmButtonLabel","modalAnnounceMessage","WACDirectionHasReversibleSVG","ANNOUNCE_INPUT_TYPES","ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE","ref1","ref2","useRef1","doAnnouncements","strings","pendingValues","elementToAnnounce","nodeToText","useElement","innerText","innerHTML","nodeType","hasNodeType","formattedMessage","messageValues","messageText","isElement","getComputedStyle","display","getAttribute","hasAttribute","trimAndPush","isInputNode","placeholder","isTextAreaNode","isImageNode","shadowRoot","childNodes","childNode","isTextNode","replaceAll","HomeScreenHeader","option","HOME_SCREEN","locales","ar","ar-dz","ar-kw","ar-ly","ar-ma","ar-sa","ar-tn","cs","de","de-at","de-ch","en","en-au","en-ca","en-gb","en-ie","en-il","en-nz","es","es-do","es-us","nl","fr","fr-ca","fr-ch","it","it-ch","ja","ko","pt","pt-br","zh","zh-cn","zh-tw","zh-mo","zh-hk","requestedLocale","localeKey","requestedSupported","language","isSupportedLocale","keyList","findSupportedKey","localeModule","enLocaleData","providedLanguagePack","handleBTag","handleBRTag","addHTMLSupport","b","br","loadDayjsLocale","previousLocale","createEnglishFormat","IntlMessageFormat","htmlAttributes","WAC__hidden","_type","v4","AriaLiveMessage","AriaLiveMessageExport","outer","visibility","overflow","appendChild","inner","scrollbarWidth","parentNode","removeChild","doScrollElementIntoView","boundary","compute","scrollMode","block","inline","el","top","doScrollElement","scrollLeft","scroll","behavior","doFocus","activeElement","tabbable","getShadowRoot","focus","defer","focusOnFirstFocusableItemInArrayOfElements","focusOnFirstFocusableElement","parentElement","focusableElements","isEnterKey","shiftKey","altKey","metaKey","ctrlKey","hasModifiers","isComposing","keyCode","getScrollBottom","scrollHeight","DATE","isTextItem","PAUSE","typing","OPTION","some","choice","relatedResponseID","createMessageRequestForButtonItemOption","buttonItem","createMessageRequestForFileUpload","upload","InternalMessageRequestType","FILE","FROM_USER","createMessageRequestForDate","inputString","userString","threadID","responseType","textItem","response","CONNECT_TO_AGENT","hasBodyOrFooter","IMAGE","VIDEO","AUDIO","CONVERSATIONAL_SEARCH","TABLE","renderAsTour","user_defined_type","serviceDeskFactory","USER_DEFINED","isSingleItemCarousel","getOptionType","preference","totalOptions","getMediaDimensions","dimensions","hasLiveAgentMessage","AnnounceOnMountComponent","isMounted","onceAnnounced","WriteableElement$1","ModalPortal","attachedToHost","modalElement","attachIfNeeded","contextType","onYesClick","onNoClick","onKeyDown","getBotInputState","getAgentInputState","getAgentState","getPersistedAgent","persisted","isConnectingOrConnected","disableInput","inputPlaceholderKey","BotHeader","homeScreenIsOn","shallowEqual","hasChatHeaderObjects","allowHomeScreen","Home","getOwnPropertyNames","prop","hasOwnProperty","call","isFrozen","setIsConnecting","setIsReconnecting","setAgentLeftChat","setAgentAvailability","setAgentJoined","updateCapabilities","updateFilesUploadInProgress","setShowScreenShareRequest","setIsScreenSharing","setPersistedServiceDeskState","agentUpdateIsTyping"],"sourceRoot":""}