/*! For license information please see 4803.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_carbon_ai_chat_examples_demo=self.webpackChunk_carbon_ai_chat_examples_demo||[]).push([[4803],{158:function(e,t,n){n.d(t,{A:function(){return pe},E:function(){return ze},M:function(){return ln},W:function(){return rt},a:function(){return ve},c:function(){return Qe},n:function(){return Ce}});var a=n(3696),s=n(3744),i=n(6874),o=n(2417),r=n(4869),c=n(8710),l=n(5022),d=n(3539),u=n(3210),m=n(4629),g=n(3192),h=n(619),p=(n(7454),n(1200),n(1523)),b=n(8976),f=n(7190),v=n(8715),C=n(8761),_=n(4574),y=n(2865),E=n(1536),x=(n(65),n(2769),n(5222)),S=n(9890),M=(n(236),n(7826),n(4452)),T=n(9708),I=n(307),A=n(4431),w=n(7052),k=n(2634),$=n(6158),N=n(5127),P=n(5569),L=n(893),R=n(5564),W=n(9629),D=n(6854),F=n(1517),B=n(3167),z=n(4859),O=n(2117),q=n(9927),U=n(9112),V=n(7472),Z=n(3233),H=n(5550),j=n(2428),G=n(5010),K=n(1468),Y=n(7073),X=n(112),Q=n(9473),J=n(5285),ee=n(7687),te=n(171),ne=n(9124),ae=n(481),se=n(4665),ie=n(4720),oe=n(9624),re=(n(4833),n(6073),n(7118)),ce=n(3967),le=(n(644),n(6379),n(533),n(2629)),de=(n(540),n(3777)),ue=n(9133),me=n(6608),ge=n(788);function he(e){return null==e}function pe({availability:e,fallbackText:t}){let n,s,o;return he(e?.estimated_wait_time)?he(e?.position_in_queue)?o=e?.message?e.message:t:(n="agent_connectingQueue",s={position:e.position_in_queue}):(n="agent_connectingMinutes",s={time:e.estimated_wait_time}),o?a.createElement(L.R,{overrideSanitize:!0,text:o}):a.createElement(r.A,{id:n,values:(0,i.c)(s)})}const be=new Set(["button","date","datetime-local","email","file","month","number","range","reset","search","submit","tel","text","time","url","week"]),fe="data-wac-exclude-node-read";class ve extends a.PureComponent{constructor(){super(...arguments),this.ref1=a.createRef(),this.ref2=a.createRef(),this.useRef1=!0,this.doAnnouncements=()=>{const e=[];this.pendingValues.forEach(t=>{"string"==typeof t?e.push(t):Ce(t,e)});const t=this.useRef1?this.ref1.current:this.ref2.current;t&&(t.innerText=e.join(" "),(this.useRef1?this.ref2.current:this.ref1.current).innerHTML=""),this.useRef1=!this.useRef1,this.pendingValues=null}}announceValue(e){if(e)if(this.pendingValues||(this.pendingValues=[],setTimeout(this.doAnnouncements,250)),"string"==typeof e||function(e){return void 0!==e.nodeType}(e))this.pendingValues.push(e);else if(e.messageID){const t=this.props.intl.formatMessage({id:e.messageID},e.messageValues);this.pendingValues.push(t)}else this.pendingValues.push(e.messageText)}render(){return a.createElement(i.V,{className:"WACAriaAnnouncer"},a.createElement("div",{ref:this.ref1,"aria-live":"polite"}),a.createElement("div",{ref:this.ref2,"aria-live":"polite"}))}}function Ce(e,t){(0,s.e)(e)?"none"===window.getComputedStyle(e).display||"true"===e.getAttribute("aria-hidden")||e.hasAttribute(fe)||(_e(e.getAttribute("aria-label"),t),(0,s.h)(e)&&be.has(e.type.toLowerCase())?""===e.value?_e(e.placeholder,t):_e(e.value,t):(0,s.j)(e)?""===e.value&&_e(e.placeholder,t):(0,s.k)(e)&&_e(e.alt,t),e.shadowRoot&&e.shadowRoot.childNodes?.forEach(e=>{Ce(e,t)}),e.childNodes&&e.childNodes.forEach(e=>{Ce(e,t)})):(0,s.l)(e)&&_e(e.data,t)}function _e(e,t){e&&(e=e.trim())&&t.push(e.replaceAll("\n"," "))}class ye extends g.WF{}ye.styles=g.AH`
    ${(0,g.iz)(".cds--aichat-feedback-buttons{\n  display:flex;\n  margin-block-start:0.5rem;\n}")}
  `,(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"is-positive-open",reflect:!0})],ye.prototype,"isPositiveOpen",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"is-negative-open",reflect:!0})],ye.prototype,"isNegativeOpen",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"is-positive-selected",reflect:!0})],ye.prototype,"isPositiveSelected",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"has-positive-details",reflect:!0})],ye.prototype,"hasPositiveDetails",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"has-negative-details",reflect:!0})],ye.prototype,"hasNegativeDetails",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"is-negative-selected",reflect:!0})],ye.prototype,"isNegativeSelected",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"is-positive-disabled",reflect:!0})],ye.prototype,"isPositiveDisabled",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"is-negative-disabled",reflect:!0})],ye.prototype,"isNegativeDisabled",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"positive-label",reflect:!0})],ye.prototype,"positiveLabel",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"negative-label",reflect:!0})],ye.prototype,"negativeLabel",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"panel-id",reflect:!0})],ye.prototype,"panelID",void 0),(0,m.Cg)([(0,h.MZ)({type:Object,attribute:"on-click"})],ye.prototype,"onClick",void 0);const Ee=(0,p.dI)(b.A),xe=(0,p.dI)(f.A),Se=(0,p.dI)(v.A),Me=(0,p.dI)(C.A),Te="cds-aichat-feedback-buttons";let Ie=class extends ye{render(){return function(e){const{isPositiveOpen:t,isNegativeOpen:n,isPositiveSelected:a,isNegativeSelected:s,hasPositiveDetails:o,hasNegativeDetails:r,isPositiveDisabled:c,isNegativeDisabled:l,positiveLabel:d,negativeLabel:u,panelID:m,onClick:h}=e;return g.qy`<div class="${y.b}-feedback-buttons">
    <cds-custom-icon-button
      class="${y.b}-feedback-buttons-positive"
      size="sm"
      align="top-left"
      kind="ghost"
      role="button"
      disabled="${c||g.s6}"
      aria-expanded="${c||!o?g.s6:t}"
      aria-pressed="${a||g.s6}"
      aria-controls="${m}-feedback-positive"
      @click="${()=>h(!0)}"
    >
      <span slot="icon"
        >${(0,_.T)(a?Me:Se)}</span
      >
      <span slot="tooltip-content"
        >${d||i.e.feedback_positiveLabel}</span
      >
    </cds-custom-icon-button>
    <cds-custom-icon-button
      class="${y.b}-feedback-buttons-negative"
      size="sm"
      align="top-left"
      kind="ghost"
      role="button"
      disabled="${l||g.s6}"
      aria-expanded="${l||!r?g.s6:n}"
      aria-pressed="${s||g.s6}"
      aria-controls="${m}-feedback-positive"
      @click="${()=>h(!1)}"
    >
      <span slot="icon"
        >${(0,_.T)(s?xe:Ee)}</span
      >
      <span slot="tooltip-content"
        >${u||i.e.feedback_negativeLabel}</span
      >
    </cds-custom-icon-button>
  </div>`}(this)}};Ie=(0,m.Cg)([(0,d.c)(Te)],Ie);const Ae=(0,u.a)({tagName:Te,elementClass:Ie,react:a});class we extends g.WF{constructor(){super(...arguments),this.selectedTags=new Set}updated(e){e.has("initialSelectedTags")&&this._setInitialValues(this.initialSelectedTags)}_setInitialValues(e){e&&(this.selectedTags=new Set(this.initialSelectedTags))}_handleTagClick(e){const t=e.target.getAttribute("data-content");this.selectedTags.has(t)?this.selectedTags.delete(t):this.selectedTags.add(t),this.onTagsChanged?.(Array.from(this.selectedTags)),this.requestUpdate()}}we.styles=g.AH`
    ${(0,g.iz)(".cds--aichat-tag-list-container{\n  display:flex;\n  flex-wrap:wrap;\n  align-items:center;\n  padding:0;\n  margin:0;\n  gap:0.5rem;\n  list-style:none;\n}\n\n.cds--aichat-tag-list-item{\n  box-sizing:border-box;\n  padding:0.125rem;\n  animation:fade-in 600ms forwards;\n  font-size:var(--cds-chat-BASE-font-size-small);\n  opacity:0;\n}\n\n@keyframes fade-in{\n  from{\n    opacity:0;\n  }\n  to{\n    opacity:1;\n  }\n}")}
  `,(0,m.Cg)([(0,h.MZ)({type:Array,attribute:"tags"})],we.prototype,"tags",void 0),(0,m.Cg)([(0,h.MZ)({type:Array,attribute:"initial-selected-tags"})],we.prototype,"initialSelectedTags",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"multi-select"})],we.prototype,"multiSelect",void 0),(0,m.Cg)([(0,h.MZ)({type:Object,attribute:"on-tags-changed"})],we.prototype,"onTagsChanged",void 0),(0,m.Cg)([(0,h.wk)()],we.prototype,"selectedTags",void 0);const ke=`${y.W}-tag-list`;let $e=class extends we{render(){return function(e){const{selectedTags:t,tags:n,_handleTagClick:a}=e;return g.qy`<div class="${y.b}-tag-list">
    ${g.qy`<ul class="${y.b}-tag-list-container">
      ${n.map(e=>g.qy`<li class="${y.b}-tag-list-item}">
            <cds-custom-chat-button
              class="${y.b}-tag-list-button"
              kind="primary"
              size="sm"
              type="button"
              is-quick-action
              role="option"
              aria-pressed="${t.has(e)}"
              ?is-selected="${t.has(e)}"
              data-content="${e}"
              @click="${a}"
            >
              ${e}
            </cds-custom-chat-button>
          </li>`)}
    </div>`}
  </div>`}(this)}};$e=(0,m.Cg)([(0,d.c)(ke)],$e);const Ne="cds-aichat-rounded-button",Pe=`\n  .cds-custom--btn {\n    border-start-start-radius: var(--${Ne}-top-left);\n    border-start-end-radius: var(--${Ne}-top-right);\n    border-end-start-radius: var(--${Ne}-bottom-left);\n    border-end-end-radius: var(--${Ne}-bottom-right);\n    width: var(--${Ne}-width);\n    max-width: var(--${Ne}-max-width);\n  }`;let Le=class extends x.Ay{};Le.styles=g.AH`
    ${x.Ay.styles}
    ${(0,g.iz)(Pe)}
  `,Le=(0,m.Cg)([(0,d.c)(Ne)],Le);class Re extends g.WF{constructor(){super(...arguments),this.showTextArea=!0,this.showPrompt=!0}updated(e){e.has("initialValues")&&this._setInitialValues(this.initialValues)}_setInitialValues(e){e&&(this._textInput=e.text,this._initialSelectedCategories=e.selectedCategories)}_handleTextInput(e){this._textInput=e.currentTarget.value}_handleSubmit(){this.onSubmit?.({text:this._textInput,selectedCategories:this._selectedCategories})}_handleCancel(){this.onClose?.()}_handleCategoryChange(e){this._selectedCategories=e}}Re.styles=g.AH`
    ${(0,g.iz)(".cds--aichat-container{\n  box-sizing:border-box;\n  border:1px solid var(--cds-chat-bubble-border, #e0e0e0);\n  border-radius:var(--cds-chat-BASE-border-radius-med);\n  animation:fade-in 600ms forwards;\n  background-color:var(--cds-chat-shell-background, #ffffff);\n  container-type:inline-size;\n  inline-size:100%;\n  margin-block-start:0.25rem;\n}\n\n.cds--aichat-is-closed{\n  display:none;\n}\n\n.cds--aichat-title-row{\n  display:flex;\n  margin-block-start:0.75rem;\n  margin-inline:1rem 0.5rem;\n}\n\n.cds--aichat-title{\n  flex:1;\n  font-size:var(--cds-chat-BASE-font-size-xlarge);\n  line-height:var(--cds-chat-BASE-line-height-xlarge);\n}\n\n.cds--aichat-close{\n  margin-inline-start:0.5rem;\n}\n\n.cds--aichat-disclaimer,\n.cds--aichat-prompt{\n  color:var(--cds-text-secondary, #525252);\n  font-size:var(--cds-chat-BASE-font-size-small);\n  line-height:var(--cds-chat-BASE-line-height-small);\n  margin-block-start:0.5rem;\n  margin-inline:1rem;\n}\n\n.cds--aichat-categories{\n  margin-block-start:0.5rem;\n  margin-inline:1rem;\n}\n\n.cds--aichat-feedback-text{\n  margin-block-start:0.5rem;\n  margin-inline:1rem;\n}\n\n.cds--aichat-buttons{\n  display:flex;\n  inline-size:100%;\n  margin-block-start:1rem;\n}\n\n.cds--aichat-submit{\n  flex:1;\n  --cds-aichat-rounded-button-bottom-right:var(\n    --cds-chat-BASE-border-radius-med\n  );\n  --cds-aichat-rounded-button-width:100%;\n  --cds-aichat-rounded-button-max-width:100%;\n}\n\n.cds--aichat-cancel{\n  flex:1;\n  --cds-aichat-rounded-button-bottom-left:var(\n    --cds-chat-BASE-border-radius-med\n  );\n  --cds-aichat-rounded-button-width:100%;\n  --cds-aichat-rounded-button-max-width:100%;\n}\n\n@keyframes fade-in{\n  from{\n    opacity:0;\n  }\n  to{\n    opacity:1;\n  }\n}")}
  `,(0,m.Cg)([(0,h.MZ)({type:String,attribute:"class",reflect:!0})],Re.prototype,"class",void 0),(0,m.Cg)([(0,h.MZ)({type:String,reflect:!0})],Re.prototype,"id",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"is-open",reflect:!0})],Re.prototype,"isOpen",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"is-readonly",reflect:!0})],Re.prototype,"isReadonly",void 0),(0,m.Cg)([(0,h.MZ)({type:Object,attribute:"on-close"})],Re.prototype,"onClose",void 0),(0,m.Cg)([(0,h.MZ)({type:Object,attribute:"on-submit"})],Re.prototype,"onSubmit",void 0),(0,m.Cg)([(0,h.MZ)({type:Object,attribute:"initial-values",reflect:!0})],Re.prototype,"initialValues",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"title",reflect:!0})],Re.prototype,"title",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"prompt",reflect:!0})],Re.prototype,"prompt",void 0),(0,m.Cg)([(0,h.MZ)({type:Object,attribute:"categories",reflect:!0})],Re.prototype,"categories",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"disclaimer",reflect:!0})],Re.prototype,"disclaimer",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"text-area-placeholder",reflect:!0})],Re.prototype,"placeholder",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"cancel-label",reflect:!0})],Re.prototype,"cancelLabel",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"submit-label",reflect:!0})],Re.prototype,"submitLabel",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"show-text-area",reflect:!0})],Re.prototype,"showTextArea",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"show-prompt",reflect:!0})],Re.prototype,"showPrompt",void 0),(0,m.Cg)([(0,h.wk)()],Re.prototype,"_textInput",void 0),(0,m.Cg)([(0,h.wk)()],Re.prototype,"_initialSelectedCategories",void 0),(0,m.Cg)([(0,h.wk)()],Re.prototype,"_selectedCategories",void 0),(0,m.Cg)([S.oI],Re.prototype,"_handleCategoryChange",null);const We="cds-aichat-feedback";let De=class extends Re{render(){return function(e){const{_handleCancel:t,_handleSubmit:n,_handleTextInput:a,_initialSelectedCategories:s,_textInput:o,_handleCategoryChange:r,id:c,isReadonly:l,isOpen:d,title:u,prompt:m,placeholder:h,categories:p,disclaimer:b,showTextArea:f,showPrompt:v,submitLabel:C,cancelLabel:_}=e;return g.qy`<div
    class="${M(`${y.b}-container`,{[`${y.b}-is-closed`]:!d})}"
  >
    <div class="${y.b}-title-row">
      <div class="${y.b}-title">
        ${u||i.e.feedback_defaultTitle}
      </div>
    </div>
    ${v?g.qy`<div class="${y.b}-prompt">
          ${m||i.e.feedback_defaultPrompt}
        </div>`:""}
    ${p?.length?g.qy`<div class="${y.b}-categories">
          <cds-aichat-tag-list
            .tags=${p}
            .initialSelectedTags=${s}
            .onTagsChanged=${r}
          >
          </cds-aichat-tag-list>
        </div>`:""}
    ${f?g.qy`<div class="${y.b}-feedback-text">
          <cds-custom-layer level="1">
            <cds-custom-textarea
              id="${c}-text-area"
              value="${o}"
              class="${y.b}-feedback-text-area"
              ?disabled="${l}"
              placeholder="${h||i.e.feedback_defaultPlaceholder}"
              rows="3"
              max-count="${1e3}"
              @input=${a}
            ></cds-custom-textarea>
          </cds-custom-layer>
        </div>`:""}
    ${b?g.qy`<div class="${y.b}-disclaimer">
          <cds-aichat-markdown-text
            markdown="${b}"
          ></cds-aichat-markdown-text>
        </div>`:""}
    <div class="${y.b}-buttons">
      <cds-aichat-rounded-button
        class="${y.b}-cancel"
        disabled=${l||g.s6}
        size="lg"
        kind="secondary"
        @click=${t}
      >
        ${_||i.e.feedback_cancelLabel}
      </cds-aichat-rounded-button>
      <cds-aichat-rounded-button
        class="${y.b}-submit"
        disabled=${l||g.s6}
        size="lg"
        @click=${n}
      >
        ${C||i.e.feedback_submitLabel}
      </cds-aichat-rounded-button>
    </div>
  </div>`}(this)}};De=(0,m.Cg)([(0,d.c)(We)],De);const Fe=(0,u.a)({tagName:We,elementClass:De,react:a});function Be(){const{messages_responseStopped:e}=(0,T.u)();return a.createElement("div",{className:"WACResponseStopped"},e)}function ze(e){const{onConfirm:t,onCancel:n,title:i,message:o}=e,r=(0,T.u)(),c=(0,s.u)(),{isConnected:d,isSuspended:u}=(0,l.d4)(e=>e.persistedToBrowserStorage.chatState.agentState),m=i||(d?r.agent_endChat:r.agent_confirmCancelRequestTitle),g=o||(d?r.agent_confirmEndChat:r.agent_confirmCancelRequestMessage),h=r.agent_confirmEndChatNo;let p;return p=u?r.agent_confirmEndSuspendedYes:d?r.agent_confirmEndChatYes:r.agent_confirmCancelRequestYes,a.createElement(y.C,{title:m,message:g,onConfirm:t,onCancel:n,cancelButtonLabel:h,confirmButtonLabel:p,modalAnnounceMessage:g,serviceManager:c})}function Oe(e){const{languagePack:t,localMessage:n,originalMessage:s,disableUserInputs:i,serviceManager:o,agentState:r,requestFocus:c,agentDisplayState:l,persistedAgentState:d}=e,{activeLocalMessageID:u,availability:m,isConnecting:g}=r,{isSuspended:h}=d,[p,b]=(0,a.useState)(!1);function f(){h&&!p?b(!0):(b(!1),o.humanAgentService.startChat(n,s),setTimeout(c))}if(!h&&p&&b(!1),s.history.agent_availability===P.A.OFFLINE){const e=n.item.agent_unavailable?.message||t.default_agent_unavailableMessage;return a.createElement("div",null,e)}const v=n.item.agent_available?.message||t.default_agent_availableMessage;let C,_,y=i||l.isConnectingOrConnected,E=v;return n.ui_state.id===u?(y=!0,g?(C=A.A,_=t.agent_cardButtonChatRequested,E=a.createElement(pe,{availability:m,fallbackText:t.agent_connectWaiting})):(C=w.A,_=t.agent_cardButtonConnected,E=t.agent_cardMessageConnected)):i?n.ui_state.wasAgentChatEnded?(C=$.A,_=t.agent_cardButtonChatEnded,E=t.agent_cardMessageChatEnded):(C=w.A,_=t.agent_startChat):(C=k.A,_=t.agent_startChat),a.createElement(N.FAs,{className:"WACConnectToAgent"},a.createElement("div",{className:"WACConnectToAgent__Title"},a.createElement("span",null,t.agent_chatTitle)),a.createElement("div",{className:"WACConnectToAgent__Text"},E),a.createElement(N.$nd,{className:"WACConnectToAgent__RequestButton",size:"md",disabled:y,onClick:f,renderIcon:C},_),!y&&h&&a.createElement("div",{className:"WACConnectToAgent__SuspendedWarning"},t.agent_suspendedWarning),p&&a.createElement(ze,{title:t.agent_confirmSuspendedEndChatTitle,message:t.agent_confirmSuspendedEndChatMessage,onConfirm:f,onCancel:()=>b(!1)}))}function qe(e){const{languagePack:t,localMessage:n,originalMessage:s,config:i,serviceManager:o,disableUserInputs:r,agentState:c,requestFocus:l,agentDisplayState:d,persistedAgentState:u}=e,m=r||!(0,I.w)(i);return a.createElement("div",null,a.createElement(Oe,{localMessage:n,originalMessage:s,languagePack:t,serviceManager:o,disableUserInputs:m,agentState:c,persistedAgentState:u,agentDisplayState:d,requestFocus:l}))}function Ue({source:e,...t}){const n=e?.startsWith("https://www.mixcloud.com");return a.createElement(i.M,{type:R.b.AUDIO,source:e,isMixcloud:n,...t})}const Ve=a.memo(Ue);function Ze({buttonAltText:e,isLink:t,target:n,disabled:s,onClick:o,...r}){return t?a.createElement("a",{className:"WACClickableImage",href:r.displayURL,rel:"noopener noreferrer",target:n,onClick:o},a.createElement(i.I,{...r}),e&&a.createElement(i.V,null,e)):a.createElement("button",{className:"WACClickableImage",type:"button",onClick:o,disabled:s},a.createElement(i.I,{...r}),e&&a.createElement(i.V,null,e))}function He({className:e,label:t,kind:n,url:s,target:i="_blank",disabled:o,renderIcon:r,imageURL:c,altText:d,onClick:u}){const{errors_imageSource:m}=(0,T.u)(),g=(0,l.d4)(e=>e.theme.useAITheme),h=t||s,p=s?i:void 0;return c?a.createElement(Ze,{imageError:m,source:c,target:i,title:t,displayURL:s,altText:d,renderIcon:r,onClick:u,disabled:o,isLink:Boolean(s),useAITheme:g}):a.createElement(N.$nd,{className:M("WACButtonItem",e),as:s?"a":void 0,kind:je(n),href:s,target:p,rel:s?"noopener noreferrer":void 0,disabled:o,renderIcon:r,onClick:u},h)}function je(e){switch(e){case R.B.LINK:case R.B.TERTIARY:return"ghost";case R.B.DEFAULT:return"primary";default:return e}}function Ge({localMessageItem:e,fullMessage:t}){const n=(0,s.u)(),i=e.item,{ui_state:o}=e,{image_url:r,alt_text:c,label:l,kind:u,value:m}=i,g=Boolean(m&&o.optionSelected),h=(0,a.useCallback)(async()=>{await n.fire({type:d.B.MESSAGE_ITEM_CUSTOM,messageItem:i,fullMessage:t})},[i,n,t]);return a.createElement(He,{imageURL:r,altText:c,label:l,kind:u,disabled:g,renderIcon:r&&W.A||void 0,onClick:h})}function Ke({localMessageItem:e,requestFocus:t,isMessageForInput:n}){const i=(0,s.u)(),o=e.item,{ui_state:r,fullMessageID:c}=e,{image_url:l,alt_text:u,label:m,kind:g}=o,h=!n||Boolean(r.optionSelected),p=(0,a.useCallback)(()=>{if(Boolean(o.value?.input?.text||m)){const e=(0,I.E)(o,c);t(),i.store.dispatch(F.a.messageSetOptionSelected(r.id,e)),i.actions.sendWithCatch(e,d.M.POST_BACK_BUTTON)}else(0,z.b)(`${B.W} post_back button with label "${o.label}" has no input message to send.`)},[o,m,c,t,i.store,i.actions,r.id]);return a.createElement(He,{imageURL:l,altText:u,label:m,kind:g,onClick:p,renderIcon:l&&D.A||void 0,disabled:h})}function Ye({localMessageItem:e,isMessageForInput:t}){const n=(0,s.u)(),{image_url:i,alt_text:o,label:r,kind:c}=e.item,l=(0,a.useCallback)(async()=>{n.store.dispatch(F.a.setResponsePanelIsOpen(!0)),n.store.dispatch(F.a.setResponsePanelContent(e,t))},[e,t,n]);return a.createElement(He,{className:"BaseButtonItemComponent__ShowPanel",imageURL:i,altText:o,label:r,kind:c,renderIcon:i&&O.A||void 0,onClick:l})}const Xe=(0,u.a)({tagName:"cds-custom-link",elementClass:U.A,react:a});function Qe(e){return function(t={}){return(0,a.createElement)("svg",{...e.attrs,width:e.attrs.width||16,height:e.attrs.height||16,fill:e.attrs.fill||"currentColor",...t},e.content.map((e,t)=>(0,a.createElement)(e.elem,{key:t,...e.attrs})))}}const Je=Qe(q.A);function et({localMessageItem:e}){const{image_url:t,alt_text:n,url:s,target:i,label:o,kind:r}=e.item;return t||r!==R.B.LINK?a.createElement(He,{imageURL:t,altText:n,label:o,kind:r,url:s,target:i,renderIcon:Je}):a.createElement("div",{className:"WAC__received--textContent WACButtonItem"},a.createElement(Xe,{className:"WACWidget__breakWord",href:s,target:i,rel:"noopener noreferrer"},a.createElement(Je,{slot:"icon",className:"icon","aria-label":"Launch"}),o||s))}function tt(e){switch(e.localMessageItem.item.button_type){case R.a.URL:return a.createElement(et,{localMessageItem:e.localMessageItem});case R.a.SHOW_PANEL:return a.createElement(Ye,{localMessageItem:e.localMessageItem,isMessageForInput:e.isMessageForInput});case R.a.CUSTOM_EVENT:return a.createElement(Ge,{localMessageItem:e.localMessageItem,fullMessage:e.fullMessage});default:return a.createElement(Ke,{localMessageItem:e.localMessageItem,requestFocus:e.requestFocus,isMessageForInput:e.isMessageForInput})}}function nt(e){const{ignoreMaxWidth:t}=e,n=e.localMessageItem.item;return a.createElement(N.FAs,{className:M("WACCardMessageComponent",{WACMaxWidthSmall:!t&&n.max_width===R.W.SMALL,WACMaxWidthMedium:!t&&n.max_width===R.W.MEDIUM,WACMaxWidthLarge:!t&&n.max_width===R.W.LARGE})},a.createElement(V.B,{...e,renderMessageComponent:e.renderMessageComponent}))}const at=a.memo(nt),st=(0,E.k)();function it(e){const{localMessageItem:t,fullMessage:n,isMessageForInput:s,requestFocus:o,renderMessageComponent:r}=e,c=(0,l.d4)(e=>e.allMessageItemsByID),{itemsLocalMessageItemIDs:d}=t.ui_state;return a.createElement(a.Suspense,{fallback:a.createElement(i.S,null)},a.createElement(st,null,d.map(e=>{const t=c[e];return a.createElement(at,{key:e,localMessageItem:t,fullMessage:n,isMessageForInput:s,ignoreMaxWidth:!0,requestFocus:o,renderMessageComponent:r})})))}function ot(e,t){const n=(0,a.useMemo)(()=>t&&(0,Z.A)(t,100,{maxWait:100,leading:!0}),[t]);(0,s.b)(e)!==e&&t&&setTimeout(n)}const rt=a.createContext(null);var ct;function lt({citation:e,type:t,setIsExpandable:n,isExpandable:s}){const i=(0,T.u)(),{width:o}=(0,a.useContext)(rt),{conversationalSearch_viewSourceDocument:r}=i,c=(0,a.useRef)(null),{text:l}=e;let d,u;return(0,a.useLayoutEffect)(()=>{c.current&&!s&&n&&c.current.clientHeight&&c.current.scrollHeight&&n(c.current.clientHeight<c.current.scrollHeight)},[l,s,n,o]),t===ct.URL&&e.url?(d=new URL(e.url).hostname,u=a.createElement(j.A,{size:16})):s&&(u=a.createElement(G.A,{size:16}),d=r),a.createElement(a.Fragment,null,a.createElement("div",{className:"WACCitationCard_Header"},a.createElement("div",{className:"WACCitationCard_Title WACWidget__textEllipsis"},e.title),a.createElement("div",{ref:c,className:"WACCitationCard_Text"},l)),a.createElement("div",{className:"WACCitationCard_Footer"},(d||u)&&a.createElement(a.Fragment,null,a.createElement("div",{className:"WACCitationCard_Label WACWidget__textEllipsis"},d),a.createElement("div",{className:"WACCitationCard_Icon"},u))))}function dt({title:e,onClick:t,onSelectCitation:n,children:s,className:i}){return a.createElement("button",{type:"button",className:`${i} WACCitationCard--clickable`,"aria-label":e,onClick:()=>{t(),n?.()},onFocus:n},s)}function ut({className:e,citation:t,onSelectCitation:n,relatedSearchResult:i}){const o=(0,s.u)(),{title:r}=t,[c,l]=(0,a.useState)(Boolean(i?.body));function d(e){return a.createElement(N.FAs,{className:e},a.createElement(lt,{citation:t,type:ct.EXPAND_IF_NEEDED,setIsExpandable:l,isExpandable:c}))}return c?a.createElement(dt,{className:e,title:r,onClick:function(){o.store.dispatch(F.a.setViewSourcePanelIsOpen(!0,t,i))},onSelectCitation:n},d()):d(e)}function mt({citation:e,isSelected:t,onSelectCitation:n,relatedSearchResult:s}){const{url:i}=e,o=i&&(0,K.i)(i)?ct.URL:ct.EXPAND_IF_NEEDED,r=M("WACCitationCard",{"WACCitationCard--selected":t,"WACCitationCard--clickable":o===ct.URL,"WACCitationCard--url":o===ct.URL,"WACCitationCard--no-url":o!==ct.URL},"WACWidget__textEllipsis");return o===ct.URL?a.createElement("a",{className:r,href:i,target:"_blank",rel:"noopener noreferrer",onClick:n,onFocus:n},a.createElement(N.FAs,null,a.createElement(lt,{citation:e,type:o}))):a.createElement(ut,{citation:e,className:r,onSelectCitation:n,relatedSearchResult:s})}!function(e){e.URL="url",e.EXPAND_IF_NEEDED="expand"}(ct||(ct={}));const gt=a.memo(mt);function ht(e){const{highlightCitation:t,onToggleCitations:n,citationsOpen:i,searchItem:o,showCitationsToggle:r}=e,c=(0,T.u)(),l=(0,s.u)(),{streamingState:d}=o.ui_state,u=`WACConversationalSearchText-${(0,Q.u)()}${l.namespace.suffix}`,[m,h]=(0,a.useState)("");let p;return p=d&&!d.isDone?d.chunks.map(e=>e.text).join(""):o.item.text,(0,a.useEffect)(()=>{!async function(){const e=await async function(e,t){const n=t?.ranges;if(n?.length){const t=[];let a=0;n.forEach(n=>{const s=e.substring(a,n.start),i=e.substring(n.start,n.end);t.push(s),t.push(pt),t.push(i),t.push(bt),a=n.end});const s=e.substring(a,e.length);t.push(s),e=t.join("")}const a=await async function(e,t=!1){const n=await(0,L.g)(e,void 0);return function(e){const t=document.createElement("div");(0,g.XX)(e,t);const n=t.innerHTML;return(0,g.XX)(g.qy``,t),n}((0,L.r)(n,t))}(e),s=(0,K.s)(a);if(n)try{const e=document.createElement("div");return e.innerHTML=s,n&&vt(e,!1),e.innerHTML}catch(n){(0,z.b)("An error occurred processing source highlights.",e,t,n)}return s}(p,t);h(e)}()},[p,t,r]),a.createElement("div",{className:"WACConversationalSearchText"},a.createElement(L.M,{markdown:m,sanitizeHTML:!1}),r&&a.createElement("div",{className:"WACConversationalSearchText__CitationsToggleContainer"},a.createElement("div",{className:"WACConversationalSearchText__CitationsToggle"},a.createElement(N.jZg,{id:u,onClick:n,"aria-expanded":i,text:c.conversationalSearch_citationsLabel,renderIcon:i?X.A:Y.A,"aria-label":c.conversationalSearch_toggleCitations}))))}const pt="@@:wc-source:@@",bt="@@/:wc-source:@@",ft=/@@\/?:wc-source:@@/g;function vt(e,t){return Array.from(e.childNodes).forEach(n=>{if(n instanceof Text){const a=n.textContent,s=Array.from(a.matchAll(ft));if(s.length||t){let i=0;s.forEach(s=>{const o=s[0]===bt,r=a.substring(i,s.index);i=s.index+s[0].length,Ct(r,o,e,n),t=!o}),Ct(a.substring(i,a.length),t,e,n),n.remove()}}else n instanceof Element&&n.getAttributeNames().forEach(e=>{const t=n.getAttribute(e);t&&n.setAttribute(e,t.replaceAll(ft,""))});t=vt(n,t)}),t}function Ct(e,t,n,a){if(e){const s=document.createTextNode(e);if(t&&e.trim()){const e=document.createElement("span");e.className="WACConversationalSearchText--hasCitation",e.appendChild(s),n.insertBefore(e,a)}else n.insertBefore(s,a)}}const _t=a.memo(ht),yt=(0,E.k)();function Et({localMessageItem:e,scrollElementIntoView:t,isStreamingError:n,doAutoScroll:s}){const[o,r]=(0,a.useState)(0),[c,l]=(0,a.useState)(!1),d=(0,a.useRef)(),u=(0,a.useRef)(),m=(0,T.u)(),g=e.item,h=(0,a.useMemo)(()=>function(e){if(!e)return null;const t=e.filter(e=>e.ranges?.length),n=e.filter(e=>!e.ranges?.length);return t.concat(n)}(g.citations),[g.citations]);function p(){setTimeout(()=>t(d.current,32,64),50)}return ot(e.ui_state.streamingState?.chunks,s),a.createElement("div",{className:"WACConversationalSearch"},a.createElement(_t,{searchItem:e,showCitationsToggle:Boolean(h?.length),highlightCitation:c?h?.[o]:null,onToggleCitations:function(){l(!c),c||p()},citationsOpen:c}),n&&a.createElement(H.I,{text:m.conversationalSearch_streamingIncomplete}),a.createElement("div",{ref:d},c&&function(){const e=h?.map((e,t)=>a.createElement(gt,{key:t,citation:e,isSelected:t===o,onSelectCitation:()=>function(e){l(!0),r(e),setTimeout(()=>u.current?.swiper.slideTo(e)),p()}(t),relatedSearchResult:g.search_results?.[e.search_result_idx]}));return a.createElement("div",{className:"WACConversationalSearch_Citations"},a.createElement(a.Suspense,{fallback:a.createElement(i.S,null)},a.createElement(yt,{swiperRef:u,initialSlide:o,onSlideChange:r},e)))}()))}function xt(e){const{doAutoScroll:t,isStreamingError:n,streamingState:s,serviceManager:i}=e,o=(0,T.u)(),r=i.actions.getOrCreateUserDefinedElement(e.localMessageID);return ot(s?.chunks,t),a.createElement("div",{className:"WAC__message-userDefinedResponse","data-floating-menu-container":!0},a.createElement("slot",{name:r.slotName}),n&&a.createElement(H.I,{text:o.conversationalSearch_streamingIncomplete}))}var St=a.memo(xt);const Mt=new RegExp(`[ ${B.R}]|\\.$`,"g");function Tt(e){const{localMessage:t,disabled:n,scrollElementIntoView:o}=e,r=(0,s.u)(),u=(0,c.A)(),m=(0,l.d4)(e=>e.locale),g=(0,l.d4)(e=>e.allMessagesByID[t.fullMessageID]),h=(0,a.useRef)((0,te.u)(te.U.MISCELLANEOUS)),[p,b]=(0,a.useState)(!1),[f,v]=(0,a.useState)(),[C,_]=(0,a.useState)(),[y,E]=(0,a.useState)(),[x,S]=(0,a.useState)(),[M,T]=(0,a.useState)(),[w,k]=(0,a.useState)(),$=(0,a.useRef)(),P=(0,a.useRef)(!1),L=u.formatMessage({id:"datePicker_chooseDate"},{format:y}),R=u.formatMessage({id:"datePicker_confirmDate"}),W=Boolean(C&&y&&x&&M);function D(e){const t=function(e){let t=e.replace(Mt,"");return t.includes("mm")||(t=t.replace("m","mm")),t.includes("dd")||(t=t.replace("d","dd")),t}(J.Ls[e]?.formats?.L?.toLocaleLowerCase()||B.E);var n;T(e),S("zh-tw"===(n=e)?"zh_tw":n.includes("-")?n.split("-")[0]:n),E(t),_(function(e){const t=e.includes("-")?"-":"/",n=e.toLocaleLowerCase().trim()[0];if("m"===n)return`m${t}d${t}Y`;if("d"===n)return`d${t}m${t}Y`;if("y"===n)return`Y${t}m${t}d`;throw Error(`The provided format ${e} is invalid.`)}(t))}const F=(0,a.useCallback)(()=>{const{ui_state:e,fullMessageID:n}=t,a=e.id,s=(0,I.F)($.current,f,n);r.actions.sendWithCatch(s,d.M.DATE_PICKER,{setValueSelectedForMessageID:a})},[t,r,f]),O=(0,a.useCallback)(()=>{o(w,0,24)},[w,o]);return(0,ee.u)(()=>{const e=m,{originalUserText:n}=t.ui_state;g.history.from_history&&n&&v(n);try{J.Ls[e]?D(e):(0,i.d)(e).then(e=>{D(e)})}catch{(0,z.b)(`Locale ${M} is not recognized by Carbon AI chat. Defaulting to English(US).`),D("en")}}),a.createElement("div",{className:"WACDatePicker"},W&&w&&a.createElement(N.Wdr,null,a.createElement(N.lrV,{className:"WACDatePicker__Calendar",datePickerType:"single",allowInput:!1,locale:x,appendTo:w,onChange:e=>{if(e.length){const t=e[0];$.current=function(e){const t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return`${String(e.getFullYear())}-${n}-${t}`}(t),v(function(e,t){const n=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getFullYear());return t.replace("dd",n).replace("mm",a).replace("yyyy",s)}(t,y))}},dateFormat:C,onOpen:()=>{b(!0),P.current?P.current=!1:O()},onClose:()=>b(!1)},a.createElement(N.tKA,{id:h.current,labelText:L,placeholder:y,disabled:n,title:"",onPointerDown:()=>{P.current=!0},onClick:()=>O()}))),a.createElement("div",{className:"WACDatePicker__CalendarContainer",ref:k}),!n&&!p&&f&&a.createElement(N.$nd,{className:"WACDatePicker__ConfirmButton",onClick:F,renderIcon:e=>a.createElement(A.A,{size:32,...e})},R))}const It=a.memo(Tt),At=/^[0-9]*(px)?$/;function wt({localMessageItem:e,originalMessage:t,renderMessageComponent:n}){const i=(0,s.u)(),o=(0,T.u)(),r=(0,l.d4)(e=>e.config),c=(0,l.d4)(ne.a),d=(0,l.d4)(e=>e.allMessageItemsByID),{columns:u,horizontal_alignment:m,vertical_alignment:g,max_width:h}=e.item,p=u?.map(e=>e.width).join(" ")||"1";return a.createElement("div",{className:M("WACGrid",{WACMaxWidthSmall:h===R.W.SMALL,WACMaxWidthMedium:h===R.W.MEDIUM,WACMaxWidthLarge:h===R.W.LARGE}),style:{gridTemplateColumns:p}},e.ui_state.gridLocalMessageItemIDs.map((s,l)=>a.createElement("div",{key:`row-${l}`,className:"WACGrid__Row"},s.map((s,h)=>{const p=e.item.rows[l]?.cells[h];let b,f=u?.[h]?.width||"1";return f.match(At)?b=f.endsWith("px"):(f="1",b=!1),a.createElement("div",{className:"WACGrid__Cell",style:{width:b?f:void 0,flex:b?void 0:Number(f),alignItems:kt(p?.horizontal_alignment||m),justifyContent:kt(p?.vertical_alignment||g)},key:`cell-${l}-${h}`},s.map((e,s)=>{const u=d[e];return a.createElement(a.Fragment,{key:`item-${l}-${h}-${s}`},n({message:u,originalMessage:t,languagePack:o,requestInputFocus:B.T,disableUserInputs:c.isReadonly,config:r,isMessageForInput:!1,scrollElementIntoView:B.T,serviceManager:i,isNestedMessageItem:!0,hideFeedback:!0,allowNewFeedback:!1}))}))}))))}function kt(e){switch(e){case"bottom":case"right":return"flex-end";case"center":return"center";default:return"flex-start"}}const $t=a.memo(wt);function Nt({messageItem:e,doAutoScroll:t}){const{source:n,image_url:o,title:r,description:d}=e,u=(0,l.d4)(e=>e.theme.useAITheme),m=(0,ae.g)(n),{store:g}=(0,s.u)(),{iframe_ariaImageAltText:h}=(0,T.u)(),p=(0,c.A)().formatMessage({id:"iframe_ariaClickPreviewCard"},{source:m});return a.createElement("div",null,a.createElement(Ze,{title:r,description:d,source:o,displayURL:n,altText:h,onImageLoad:function(){t?.()},renderIcon:O.A,onClick:function(){n&&g.dispatch(F.a.setIFrameContent(e))},preventInlineError:!0,useAITheme:u}),a.createElement(i.V,null,p))}const Pt=a.memo(Nt);function Lt({messageItem:e,doAutoScroll:t}){const n=(0,H.u)(),{errors_iframeSource:s}=(0,T.u)(),[o,r]=(0,a.useState)(!1),{source:c,title:l}=e,d=(0,I.g)(e)?.base_height,u=(0,z.o)(d),m=(0,i.u)({paddingTop:u}),g=l||c,h=(0,a.useCallback)(()=>{r(!0),n(s)},[n,s]);return o?a.createElement(H.I,{text:s}):a.createElement("div",{className:"WACInlineIFrame",style:m},a.createElement(se.I,{source:c,title:g,onTimeoutOverride:h,onLoad:()=>t?.()}))}function Rt({doAutoScroll:e,localMessage:t,displayOverride:n}){const{item:s}=t;return s.display===R.I.INLINE||n===R.I.INLINE?a.createElement(Lt,{key:s.source,doAutoScroll:e,messageItem:s}):a.createElement(Pt,{doAutoScroll:e,messageItem:s})}function Wt({className:e,text:t,shouldRemoveHTMLBeforeMarkdownConversion:n=!1}){return a.createElement("div",{className:`WAC__description ${e}`},a.createElement(L.R,{text:t,shouldRemoveHTMLBeforeMarkdownConversion:n}))}function Dt({title:e=null,description:t=null,id:n=null,shouldRemoveHTMLBeforeMarkdownConversion:s=!1}){return e||t?a.createElement("div",{className:"WAC__received--metablock",id:n},e&&a.createElement(Wt,{className:"WAC__received--metablock-content WACMetablock__Title",text:e,shouldRemoveHTMLBeforeMarkdownConversion:s}),t&&a.createElement(Wt,{className:"WAC__received--metablock-content WACMetablock__Description",text:t,shouldRemoveHTMLBeforeMarkdownConversion:s})):null}function Ft(e){const{title:t,description:n,options:i,onChange:o,languagePack:r,disableUserInputs:c,serviceManager:l,shouldRemoveHTMLBeforeMarkdownConversion:d}=e,[u,m]=(0,a.useState)(!1),g=(0,a.useRef)(),h=`${(0,Q.u)()}${l.namespace.suffix}`,p=g.current?.getRootNode?function(e){const t={document:e.ownerDocument,addEventListener:e.ownerDocument.addEventListener.bind(e),removeEventListener:e.ownerDocument.removeEventListener.bind(e),Node:Node};return new Proxy(e,{get:(e,n)=>t[n]})}(g.current.getRootNode()):void 0;return a.createElement("div",{ref:g},a.createElement(Dt,{title:t,description:n,id:`WAC__selectUUID_${h}-label`,shouldRemoveHTMLBeforeMarkdownConversion:d}),a.createElement("div",{className:M("WAC__selectHolder",{WAC__customSelectTemporaryPadding:u})},a.createElement(N.Wdr,null,a.createElement(N.msM,{id:`WAC__selectUUID_${h}`,items:i,label:r.options_select,titleText:r.options_select,hideLabel:!0,"aria-label":c?r.options_ariaOptionsDisabled:t,disabled:c,onChange:o,selectedItem:function(){const{value:t,options:n}=e;return n.find(e=>e.value===t)}(),downshiftProps:{environment:p,onIsOpenChange:function(e){e.isOpen&&g.current&&setTimeout(()=>{g?.current&&(m(!0),(0,s.m)(g.current,!0),m(!1))},140)},id:`WACSelectComponent__Downshift-${h}`}}))))}class Bt extends a.Component{constructor(){super(...arguments),this.onOptionSelected=(e,t)=>{const{localMessage:n,serviceManager:a,originalMessage:s}=this.props,{id:i}=s,o=(0,I.D)(e,i),r=n.ui_state.id,c="button"===t?d.M.OPTION_BUTTON:d.M.OPTION_DROP_DOWN;a.actions.sendWithCatch(o,c,{setValueSelectedForMessageID:r}),this.props.requestInputFocus()},this.onButtonClick=(e,t)=>{this.onOptionSelected(t,"button")},this.onSelectChange=e=>{this.onOptionSelected(e.selectedItem,"dropdown")}}render(){const{localMessage:e,languagePack:t,disableUserInputs:n,serviceManager:s,shouldRemoveHTMLBeforeMarkdownConversion:i}=this.props,{options:o,title:r,description:c,preference:l}=e.item,{optionSelected:d}=e.ui_state;return"button"===(0,I.G)(l,o.length)?a.createElement(a.Fragment,null,a.createElement(Dt,{title:r,description:c,shouldRemoveHTMLBeforeMarkdownConversion:i}),a.createElement("div",{className:"WAC__button-holder"},a.createElement("ul",null,o.map((e,t)=>{const s=!!d&&e.value.input.text===d.input.text;return a.createElement("li",{key:e.label},a.createElement(N.bJ3,{kind:ie.a.TERTIARY,isQuickAction:!0,size:ie.B.SMALL,className:`WAC__button-${t}`,disabled:n,isSelected:s,onClick:t=>{this.onButtonClick(t,e)}},e.label))})))):a.createElement(Ft,{serviceManager:s,languagePack:t,title:r,description:c,options:o,disableUserInputs:n,onChange:this.onSelectChange,value:d,shouldRemoveHTMLBeforeMarkdownConversion:i})}}const zt=(0,p.dI)({...re.A,attrs:{...re.A.attrs,slot:"icon"}});function Ot(e){const{tableTitle:t,tableDescription:n,headers:a,containerWidth:s,filterPlaceholderText:i,locale:o,_handleDownload:r,_rowsWithIDs:c,_allowFiltering:l,_handleFilterEvent:d}=e;return g.qy`<cds-custom-table
    style="--cds-chat-table-width:${s}px"
    size="md"
    locale=${o}
    .isSortable=${l}
    .useZebraStyles=${!0}
    @cds-custom-table-filtered=${d}
  >
    ${t&&g.qy`<cds-custom-table-header-title slot="title"
      >${t}</cds-custom-table-header-title
    >`}
    ${n&&g.qy`<cds-custom-table-header-description slot="description"
      >${n}</cds-custom-table-header-description
    >`}
    ${g.qy`<cds-custom-table-toolbar slot="toolbar">
      <cds-custom-table-toolbar-content>
        ${l?g.qy`<cds-custom-table-toolbar-search
              persistent
              placeholder=${i}
            ></cds-custom-table-toolbar-search>`:""}
        <cds-custom-button @click=${r}
          >${(0,_.T)(zt)}</cds-custom-button
        >
      </cds-custom-table-toolbar-content>
    </cds-custom-table-toolbar>`} ${g.qy`<cds-custom-table-head>
      <cds-custom-table-header-row>
        ${a.map(e=>g.qy`<cds-custom-table-header-cell
              >${e}</cds-custom-table-header-cell
            >`)}
      </cds-custom-table-header-row>
    </cds-custom-table-head>`} ${g.qy`<cds-custom-table-body>
      ${(0,ce.u)(c,e=>e.id,e=>g.qy`<cds-custom-table-row id=${e.id}
            >${e.cells.map(e=>g.qy`<cds-custom-table-cell>${e}</cds-custom-table-cell>`)}</cds-custom-table-row
          >`)}
    </cds-custom-table-body>`}
  </cds-custom-table>`}const qt=[5,10,15,20,50],Ut="cds-aichat-table";let Vt=class extends g.WF{constructor(){super(...arguments),this._isValid=!0,this._currentPageNumber=1,this._rowsPerPageChanged=!1,this._rowsWithIDs=[]}updated(e){(e.has("headers")||e.has("rows"))&&void 0!==this.headers&&void 0!==this.rows&&this._calcIsTableValid(),e.has("rows")&&void 0!==this.rows&&this._initializeRowsArrays(),void 0===this._currentPageSize&&e.has("chatHeight")&&this.chatHeight!==e.get("chatHeight")&&this._initializePageSize()}_calcIsTableValid(){const e=this.headers.length;this._isValid=!this.rows.some(t=>t.cells.length!==e)}_initializeRowsArrays(){this._rowsWithIDs=[],this._filterVisibleRowIDs=new Set,this.rows.forEach((e,t)=>{const n=t.toString();this._rowsWithIDs.push({...e,id:n}),this._filterVisibleRowIDs.add(n)})}_initializePageSize(){this.chatHeight>850?this._currentPageSize=10:this._currentPageSize=5,this._allowFiltering=this.rows.length>this._currentPageSize,this._updateVisibleRows()}_handlePageChangeEvent(e){this._updateVisibleRows(e.detail?.page,e.detail?.pageSize),e.stopPropagation()}_handlePageSizeChangeEvent(e){this._rowsPerPageChanged=!0,this._currentPageSize=e.detail?.pageSize,this._updateVisibleRows(),e.stopPropagation()}_handleFilterEvent(e){this._filterVisibleRowIDs=new Set(e?.detail?.unfilteredRows.map(e=>e.id)),this._currentPageNumber=1,this._updateVisibleRows(),e.stopPropagation()}_updateVisibleRows(e=this._currentPageNumber,t=this._currentPageSize){this._currentPageNumber=e;const n=Array.from(this.renderRoot.querySelectorAll("cds-custom-table-row"));n.forEach(e=>e.style.setProperty("display","none"));const a=n.filter(e=>this._filterVisibleRowIDs.has(e.id)),s=e*t-1;for(let n=(e-1)*t;n<=s;n++)a[n]?.removeAttribute("style")}_handleDownload(){const e=[this.headers,...this.rows.map(e=>e.cells)],t=(0,oe.A)(e),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=URL.createObjectURL(n);a.setAttribute("href",s),a.setAttribute("download","table-data.csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}render(){return this.loading?g.qy`<cds-custom-table-skeleton row-count="3" column-count="2">
  </cds-custom-table-skeleton>`:this.rows.length>this._currentPageSize||this._rowsPerPageChanged?g.qy`${Ot(this)}
      ${function(e){const{_currentPageSize:t,_currentPageNumber:n,_filterVisibleRowIDs:a,rows:s,previousPageText:i,nextPageText:o,itemsPerPageText:r,getPaginationSupplementalText:c,getPaginationStatusText:l,_handlePageChangeEvent:d,_handlePageSizeChangeEvent:u}=e,m=a.size,h=s.length,p=qt.filter(e=>e<h);return g.qy`<cds-custom-pagination
    page-size=${t}
    page=${n}
    total-items=${m}
    totalPages=${Math.ceil(m/t)}
    backward-text=${i}
    forward-text=${o}
    items-per-page-text=${r}
    .formatSupplementalText=${c}
    .formatStatusWithDeterminateTotal=${l}
    @cds-custom-pagination-changed-current=${d}
    @cds-custom-page-sizes-select-changed=${u}
  >
    ${p.map(e=>g.qy`<cds-custom-select-item value="${e}"
          >${e}</cds-custom-select-item
        >`)}
    <cds-custom-select-item value="${h}"
      >${h}</cds-custom-select-item
    >
  </cds-custom-pagination>`}({_currentPageSize:this._currentPageSize,_currentPageNumber:this._currentPageNumber,_filterVisibleRowIDs:this._filterVisibleRowIDs,rows:this.rows,previousPageText:this.previousPageText,nextPageText:this.nextPageText,itemsPerPageText:this.itemsPerPageText,getPaginationSupplementalText:this.getPaginationSupplementalText,getPaginationStatusText:this.getPaginationStatusText,_handlePageChangeEvent:this._handlePageChangeEvent,_handlePageSizeChangeEvent:this._handlePageSizeChangeEvent})}`:g.qy`${Ot(this)}`}};Vt.styles=g.AH`
    ${(0,g.iz)("cds-custom-table-header-title,\ncds-custom-table-header-description,\ncds-custom-table-toolbar{\n  position:sticky;\n  inline-size:var(--cds-chat-table-width, auto);\n  inset-inline-start:0;\n}\n\n:dir(rtl) cds-custom-table-header-title,\n:dir(rtl) cds-custom-table-header-description,\n:dir(rtl) cds-custom-table-toolbar{\n  right:0;\n  left:unset;\n}\n\ncds-custom-table-header-title,\ncds-custom-table-header-description{\n  padding:0 1rem;\n  inline-size:calc(var(--cds-chat-table-width, auto) - 1rem - 1rem);\n  margin-inline:-1rem;\n}\n\ncds-custom-table-header-description{\n  margin-block-end:-0.5rem;\n}\n\ncds-custom-pagination{\n  inline-size:100%;\n}")}
  `,(0,m.Cg)([(0,h.MZ)({type:String,attribute:"table-title"})],Vt.prototype,"tableTitle",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"table-description"})],Vt.prototype,"tableDescription",void 0),(0,m.Cg)([(0,h.MZ)({type:Array})],Vt.prototype,"headers",void 0),(0,m.Cg)([(0,h.MZ)({type:Array})],Vt.prototype,"rows",void 0),(0,m.Cg)([(0,h.MZ)({type:Number,attribute:"container-width"})],Vt.prototype,"containerWidth",void 0),(0,m.Cg)([(0,h.MZ)({type:Number,attribute:"chat-height"})],Vt.prototype,"chatHeight",void 0),(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"loading"})],Vt.prototype,"loading",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"filter-placeholder-text"})],Vt.prototype,"filterPlaceholderText",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"previous-page-text"})],Vt.prototype,"previousPageText",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"next-page-text"})],Vt.prototype,"nextPageText",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"items-per-page-text"})],Vt.prototype,"itemsPerPageText",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"locale"})],Vt.prototype,"locale",void 0),(0,m.Cg)([(0,h.MZ)({type:Function,attribute:!1})],Vt.prototype,"getPaginationSupplementalText",void 0),(0,m.Cg)([(0,h.MZ)({type:Function,attribute:!1})],Vt.prototype,"getPaginationStatusText",void 0),(0,m.Cg)([(0,h.wk)()],Vt.prototype,"_isValid",void 0),(0,m.Cg)([(0,h.wk)()],Vt.prototype,"_currentPageNumber",void 0),(0,m.Cg)([(0,h.wk)()],Vt.prototype,"_currentPageSize",void 0),(0,m.Cg)([(0,h.wk)()],Vt.prototype,"_rowsPerPageChanged",void 0),(0,m.Cg)([(0,h.wk)()],Vt.prototype,"_filterVisibleRowIDs",void 0),(0,m.Cg)([(0,h.wk)()],Vt.prototype,"_rowsWithIDs",void 0),(0,m.Cg)([(0,h.wk)()],Vt.prototype,"_allowFiltering",void 0),(0,m.Cg)([S.oI],Vt.prototype,"_handlePageChangeEvent",null),(0,m.Cg)([S.oI],Vt.prototype,"_handlePageSizeChangeEvent",null),(0,m.Cg)([S.oI],Vt.prototype,"_handleFilterEvent",null),Vt=(0,m.Cg)([(0,d.c)(Ut)],Vt);const Zt=(0,u.a)({tagName:Ut,elementClass:Vt,react:a});function Ht(e){const{tableItem:t}=e,{title:n,description:s,headers:i,rows:o}=t,r=(0,l.d4)(e=>e.theme.carbonTheme),d=(0,l.d4)(e=>e.chatHeight),u=(0,l.d4)(e=>e.locale),m=(0,T.u)(),g=(0,c.A)(),h=(0,a.useRef)(null),[p,b]=(0,a.useState)();function f(){b(h.current?.clientWidth)}return(0,a.useLayoutEffect)(()=>{new ResizeObserver(f).observe(h.current)}),(0,a.useMemo)(()=>{const e=i.length,t=!o.some(t=>t.cells.length!==e);return t||(0,z.b)("Number of cells in the table header does not match the number of cells in one or more of the table rows. In order to render a table there needs to be the same number of columns in the table header and all of the table rows."),t},[o,i])?a.createElement(N.Sxu,{theme:B.L.includes(r)?"white":"g90"},a.createElement("div",{className:"WACTableContainer",ref:h},a.createElement(Zt,{tableTitle:n,tableDescription:s,headers:i,rows:o,containerWidth:p,chatHeight:d,filterPlaceholderText:m.table_filterPlaceholder,previousPageText:m.table_previousPage,nextPageText:m.table_nextPage,itemsPerPageText:m.table_itemsPerPage,getPaginationSupplementalText:function({count:e}){return g.formatMessage({id:"table_paginationSupplementalText"},{pagesCount:e})},getPaginationStatusText:function({start:e,end:t,count:n}){return g.formatMessage({id:"table_paginationStatus"},{start:e,end:t,count:n})},locale:u}))):a.createElement(H.I,null)}const jt=a.memo(Ht);function Gt({message:e,serviceManager:t}){const{tour_resumeButton:n,tour_restartButton:s,tour_startButton:i}=(0,T.u)(),{activeTourID:o}=(0,l.d4)(e=>e.persistedToBrowserStorage.chatState.persistedTourState),r=e.fullMessageID===o,c=e.item.user_defined?.card_title||"Guided journey",u=e.item.user_defined?.card_description||"Follow along as the assistant guides you to where you want to be.";return a.createElement(N.FAs,{className:"WACTourCard"},a.createElement("div",{className:"WACTourCard__Title"},c),a.createElement("div",{className:"WACTourCard__Description"},u),r&&a.createElement("div",null,a.createElement(N.$nd,{className:"WACTourCard__ResumeButton",renderIcon:O.A,onClick:async function(){await t.actions.changeView(E.V.TOUR,{mainWindowCloseReason:d.d.TOUR_CARD_RESUMED_TOUR})}},n),a.createElement(N.$nd,{className:"WACTourCard__RestartButton",kind:"ghost",renderIcon:le.A,onClick:async function(){(await t.actions.changeView(E.V.TOUR,{mainWindowCloseReason:d.d.TOUR_CARD_RESTARTED_TOUR})).tour&&t.actions.changeStepInTour({newStepIndex:0})}},s)),!r&&a.createElement(N.$nd,{className:"WACTourCard__StartButton",renderIcon:O.A,onClick:()=>t.actions.startTour(e,d.a.START_TOUR_CLICKED,{mainWindowCloseReason:d.d.TOUR_CARD_STARTED_TOUR})},i))}const Kt=a.memo(Gt);function Yt(e){const{text:t,streamingState:n,removeHTML:s,isStreamingError:i,doAutoScroll:o}=e,r=(0,T.u)();let c;return ot(n?.chunks,o),c=n&&!n.isDone?n.chunks.map(e=>e.text).join(""):t,a.createElement("div",{className:"WACStreamingRichText"},a.createElement(L.R,{text:c,shouldRemoveHTMLBeforeMarkdownConversion:s}),i&&a.createElement(H.I,{text:r.conversationalSearch_streamingIncomplete}))}const Xt=(0,i.g)("chainOfThought_stepTitle");class Qt extends g.WF{constructor(){super(...arguments),this.open=!1,this.formatStepLabelText=({stepNumber:e,stepTitle:t})=>Xt.format({stepNumber:e,stepTitle:t||""}),this.inputLabelText=i.e.chainOfThought_inputLabel,this.outputLabelText=i.e.chainOfThought_outputLabel,this.toolLabelText=i.e.chainOfThought_toolLabel,this.explainabilityText=i.e.chainOfThought_explainabilityLabel,this.statusSucceededLabelText=i.e.chainOfThought_statusSucceededLabel,this.statusFailedLabelText=i.e.chainOfThought_statusFailedLabel,this.statusProcessingLabelText=i.e.chainOfThought_statusProcessingLabel,this._chainOfThoughtPanelID=`${y.b}-chain-of-thought-panel-id-${(0,te.u)()}`}firstUpdated(e){this._steps=this.steps.map(e=>({...e,open:!1}))}}Qt.styles=g.AH`
    ${(0,g.iz)(":host{\n  display:block;\n  margin-block-start:1rem;\n}\n\n:host([open]) .cds--aichat-chain-of-thought-content{\n  display:block;\n  overflow:visible;\n  max-block-size:-moz-fit-content;\n  max-block-size:fit-content;\n  opacity:1;\n}\n:host([open]) .cds--aichat-chain-of-thought-button-chevron svg{\n  transform:rotate(-90deg);\n}\n\n.cds--aichat-chain-of-thought-button-chevron{\n  display:flex;\n  flex-basis:1.5rem;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .cds--aichat-chain-of-thought-button-chevron svg{\n    transform:rotate(-270deg);\n    transition:none;\n  }\n}\n.cds--aichat-chain-of-thought-button-chevron svg{\n  transform:rotate(-270deg);\n  transition:all 110ms cubic-bezier(0.2, 0, 0.38, 0.9);\n}\n\n.cds--aichat-chain-of-thought-content{\n  display:none;\n  overflow:hidden;\n  max-block-size:0;\n  opacity:0;\n  transition:all 110ms cubic-bezier(0, 0, 0.38, 0.9) allow-discrete;\n}\n\n.cds--aichat-chain-of-thought-inner-content{\n  border:1px solid var(--cds-border-subtle-01, #c6c6c6);\n  background-color:var(--cds-layer-01, #f4f4f4);\n  margin-block-start:0.5rem;\n}\n\n.cds--aichat-chain-of-thought-item:not(:last-child){\n  padding-block-end:0.75rem;\n}\n\n.cds--aichat-chain-of-thought-item cds-aichat-markdown-text:not(:first-child){\n  padding-block-start:0.5rem;\n}\n\n.cds--aichat-chain-of-thought-item-label{\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n}\n\nbutton.cds--aichat-chain-of-thought-button{\n  box-sizing:border-box;\n  padding:0;\n  border:0;\n  margin:0;\n  font-family:inherit;\n  font-size:100%;\n  vertical-align:baseline;\n  display:inline-block;\n  padding:0;\n  border:0;\n  -webkit-appearance:none;\n     -moz-appearance:none;\n          appearance:none;\n  background:none;\n  cursor:pointer;\n  text-align:start;\n  inline-size:100%;\n  font-size:var(--cds-heading-01-font-size, 0.875rem);\n  font-weight:var(--cds-heading-01-font-weight, 600);\n  line-height:var(--cds-heading-01-line-height, 1.42857);\n  letter-spacing:var(--cds-heading-01-letter-spacing, 0.16px);\n  display:flex;\n  align-items:center;\n  color:var(--cds-text-primary, #161616);\n}\nbutton.cds--aichat-chain-of-thought-button *,\nbutton.cds--aichat-chain-of-thought-button *::before,\nbutton.cds--aichat-chain-of-thought-button *::after{\n  box-sizing:inherit;\n}\nbutton.cds--aichat-chain-of-thought-button::-moz-focus-inner{\n  border:0;\n}\n\nbutton.cds--aichat-chain-of-thought-button:focus,\nbutton.cds--aichat-chain-of-thought-button:focus-visible{\n  outline:2px solid var(--cds-focus);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-content{\n  display:block;\n  overflow:visible;\n  background:var(--cds-layer-01, #f4f4f4);\n  color:var(--cds-text-primary, #161616);\n  max-block-size:-moz-fit-content;\n  max-block-size:fit-content;\n  opacity:1;\n  transition:all 110ms cubic-bezier(0, 0, 0.38, 0.9) allow-discrete;\n}\n\n.cds--aichat-chain-of-thought-item{\n  padding-block:1rem;\n  padding-inline:2rem 1rem;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-content[hidden]{\n  display:none;\n  overflow:hidden;\n  max-block-size:0;\n  opacity:0;\n  padding-block:0;\n  padding-inline:0;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-chevron{\n  display:flex;\n  flex:0 1 2rem;\n  justify-content:center;\n  color:var(--cds-text-primary, #161616);\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .cds--aichat-chain-of-thought-accordion-item-header-chevron svg{\n    fill:var(--cds-text-primary, #161616);\n    transform:rotate(-270deg);\n    transition:none;\n  }\n}\n.cds--aichat-chain-of-thought-accordion-item-header-chevron svg{\n  fill:var(--cds-text-primary, #161616);\n  transform:rotate(-270deg);\n  transition:all 110ms cubic-bezier(0.2, 0, 0.38, 0.9);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-chevron[data-open] svg{\n  transform:rotate(-90deg);\n}\n\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header{\n  box-sizing:border-box;\n  padding:0;\n  border:0;\n  margin:0;\n  font-family:inherit;\n  font-size:100%;\n  vertical-align:baseline;\n  display:inline-block;\n  padding:0;\n  border:0;\n  -webkit-appearance:none;\n     -moz-appearance:none;\n          appearance:none;\n  background:none;\n  cursor:pointer;\n  text-align:start;\n  inline-size:100%;\n  font-size:var(--cds-body-01-font-size, 0.875rem);\n  font-weight:var(--cds-body-01-font-weight, 400);\n  line-height:var(--cds-body-01-line-height, 1.42857);\n  letter-spacing:var(--cds-body-01-letter-spacing, 0.16px);\n  display:flex;\n  align-items:center;\n  padding:0.5rem 0;\n  background:var(--cds-layer-accent-02, #e0e0e0);\n  block-size:2rem;\n}\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header *,\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header *::before,\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header *::after{\n  box-sizing:inherit;\n}\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header::-moz-focus-inner{\n  border:0;\n}\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header:focus,\n.cds--aichat-chain-of-thought-accordion-item button.cds--aichat-chain-of-thought-accordion-item-header:focus-visible{\n  position:relative;\n  z-index:2;\n  box-shadow:0 -1px 0 0 var(--cds-focus, #0f62fe), inset 0 1px 0 0 var(--cds-focus, #0f62fe), inset 2px 0 0 0 var(--cds-focus, #0f62fe), 0 1px 0 0 var(--cds-focus, #0f62fe), inset 0 -1px 0 0 var(--cds-focus, #0f62fe), inset -2px 0 0 0 var(--cds-focus, #0f62fe);\n  outline:none;\n}\n\n.cds--aichat-chain-of-thought-accordion-item:nth-child(odd) button.cds--aichat-chain-of-thought-accordion-item-header{\n  background:var(--cds-layer-02, #ffffff);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-title{\n  overflow:hidden;\n  flex:1 1;\n  color:var(--cds-text-primary, #161616);\n  margin-inline-end:0.5rem;\n  text-overflow:ellipsis;\n  white-space:nowrap;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-status{\n  display:flex;\n  flex:0 0 1.5rem;\n  align-items:center;\n  justify-content:center;\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-status--failure{\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  margin-inline-end:0.5rem;\n}\n.cds--aichat-chain-of-thought-accordion-item-header-status--failure svg{\n  fill:var(--cds-support-error, #da1e28);\n}\n\n.cds--aichat-chain-of-thought-accordion-item-header-status--success{\n  display:flex;\n  align-items:center;\n  justify-content:center;\n  margin-inline-end:0.5rem;\n}\n.cds--aichat-chain-of-thought-accordion-item-header-status--success svg{\n  fill:var(--cds-support-success, #24a148);\n}")}
  `,(0,m.Cg)([(0,h.MZ)({type:Boolean,attribute:"open",reflect:!0})],Qt.prototype,"open",void 0),(0,m.Cg)([(0,h.MZ)({type:Array,attribute:"steps",reflect:!0})],Qt.prototype,"steps",void 0),(0,m.Cg)([(0,h.MZ)({type:Function,attribute:!1})],Qt.prototype,"formatStepLabelText",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"input-label-text",reflect:!0})],Qt.prototype,"inputLabelText",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"output-label-text",reflect:!0})],Qt.prototype,"outputLabelText",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"tool-label-text",reflect:!0})],Qt.prototype,"toolLabelText",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"explainability-text",reflect:!0})],Qt.prototype,"explainabilityText",void 0),(0,m.Cg)([(0,h.MZ)({type:Function,attribute:!1})],Qt.prototype,"onToggle",void 0),(0,m.Cg)([(0,h.MZ)({type:Function,attribute:!1})],Qt.prototype,"onStepToggle",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"status-succeeded-label-text",reflect:!0})],Qt.prototype,"statusSucceededLabelText",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"status-failed-label-text",reflect:!0})],Qt.prototype,"statusFailedLabelText",void 0),(0,m.Cg)([(0,h.MZ)({type:String,attribute:"status-processing-label-text",reflect:!0})],Qt.prototype,"statusProcessingLabelText",void 0),(0,m.Cg)([(0,h.wk)()],Qt.prototype,"_steps",void 0),(0,m.Cg)([(0,h.wk)()],Qt.prototype,"_chainOfThoughtPanelID",void 0);const Jt=`${y.b}-chain-of-thought-item`,en=`${y.b}-chain-of-thought-accordion-item-header-status`,tn=(0,p.dI)(ue.A),nn=(0,p.dI)(de.A),an=(0,p.dI)(me.A);function sn(e,t,n){const a=(0,ge.p)(e);return a?function(e,t,n){return g.qy`<div
    class="${Jt} ${Jt}-${n}"
  >
    <div class="${Jt}-label">${t}</div>
    <cds-aichat-markdown-text
      sanitize-html
      markdown=${e}
    ></cds-aichat-markdown-text>
  </div>`}(a,t,n):g.qy``}const on="cds-aichat-chain-of-thought";let rn=class extends Qt{render(){return function(e){const{_chainOfThoughtPanelID:t,explainabilityText:n,open:a}=e;return g.qy`<div class="${y.b}-chain-of-thought">
    <button
      class="${y.b}-chain-of-thought-button"
      @click=${function(){e.open=!e.open,e.onToggle?.(e.open,e)}}
      aria-expanded=${a}
      aria-controls=${t}
    >
      <span class="${y.b}-chain-of-thought-button-chevron"
        >${(0,_.T)(tn)}</span
      >
      ${n}
    </button>
    <div
      id=${t}
      class="${y.b}-chain-of-thought-content"
      ?hidden=${!a}
    >
      <div class="${y.b}-chain-of-thought-inner-content">
        ${function(e){const{_steps:t,open:n,_chainOfThoughtPanelID:a,onStepToggle:s,formatStepLabelText:i,statusSucceededLabelText:o,statusFailedLabelText:r,statusProcessingLabelText:c}=e;return n?g.qy`${t.map((t,n)=>{const l=n+1,d=`${a}-step-${l}-content`;return g.qy`<div
        class="${y.b}-chain-of-thought-accordion-item"
      >
        <button
          class="${y.b}-chain-of-thought-accordion-item-header"
          @click=${()=>{t.open=!t.open,e.requestUpdate();const n=e.shadowRoot.querySelector(`#${d}`);s?.(t.open,n)}}
          aria-expanded=${t.open}
          aria-controls=${d}
        >
          <span
            class="${y.b}-chain-of-thought-accordion-item-header-chevron"
            ?data-open=${t.open}
            >${(0,_.T)(tn)}</span
          >
          <span
            class="${y.b}-chain-of-thought-accordion-item-header-title"
            >${i({stepNumber:l,stepTitle:t.title})}</span
          >
          <span class="${en}"
            >${function(e,t,n,a){switch(e){case R.C.PROCESSING:return g.qy`<cds-custom-inline-loading
        status="active"
        aria-label="${a}"
      ></cds-custom-inline-loading>`;case R.C.FAILURE:return g.qy`<span
        class="${en}--${R.C.FAILURE}"
        aria-label="${n}"
        >${(0,_.T)(an)}</span
      >`;default:return g.qy`<span
        class="${en}--${R.C.SUCCESS}"
        aria-label="${t}"
        >${(0,_.T)(nn)}</span
      >`}}(t.status,o,r,c)}</span
          >
        </button>
        <div
          class="${y.b}-chain-of-thought-accordion-item-content"
          id=${d}
          ?hidden=${!t.open}
        >
          ${function(e,t){const{inputLabelText:n,outputLabelText:a,toolLabelText:s}=e;return t.open?g.qy` ${t.description?g.qy`<div
          class="${Jt} ${Jt}-description"
        >
          <cds-aichat-markdown-text
            sanitize-html
            markdown=${t.description}
          ></cds-aichat-markdown-text>
        </div>`:null}
    ${t.tool_name?g.qy`<div
          class="${Jt} ${Jt}-toolName"
        >
          <div class="${Jt}-label">${s}</div>
          ${t.tool_name}
        </div>`:null}
    ${sn(t.request?.args,n,"input")}
    ${sn(t.response?.content,a,"output")}`:g.qy``}(e,t)}
        </div>
      </div>`})}`:g.qy``}(e)}
      </div>
    </div>
  </div>`}(this)}};rn=(0,m.Cg)([(0,d.c)(on)],rn);const cn=(0,u.a)({tagName:on,elementClass:rn,react:a});function ln(e){const{allowNewFeedback:t,hideFeedback:n,serviceManager:s,originalMessage:r,message:u}=e,m=(0,c.A)(),g=(0,T.u)(),h=(0,a.useRef)(),p=(0,l.d4)(ne.s,l.bN),b=(0,l.d4)(e=>e.agentState),f=(0,l.d4)(e=>e.persistedToBrowserStorage.chatState.agentState),v=u.item.message_options?.feedback?.id,C=(0,y.u)(),_=r.history?.feedback?.[v],E=(0,a.useMemo)(()=>_?{text:_.text,selectedCategories:_.categories}:null,[_]),[x,S]=(0,a.useState)(!1),[M,A]=(0,a.useState)(_&&_.is_positive),[w,k]=(0,a.useState)(_&&!_.is_positive),[$,N]=(0,a.useState)(Boolean(_));function P(t,n,s){return a.createElement(Yt,{text:t.item.text,streamingState:t.ui_state.streamingState,isStreamingError:s?.history?.is_streaming_error,removeHTML:n,doAutoScroll:e.doAutoScroll})}function L(t,n){const{serviceManager:s}=e;return a.createElement(St,{streamingState:t.ui_state.streamingState,isStreamingError:n?.history?.is_streaming_error,doAutoScroll:e.doAutoScroll,localMessageID:t.ui_state.id,serviceManager:s})}function W(t,n){t&&setTimeout(()=>{e.scrollElementIntoView(n,64,64)})}function D({stepNumber:e,stepTitle:t}){return m.formatMessage({id:"chainOfThought_stepTitle"},{stepNumber:e,stepTitle:t})}return function(r,c){if((0,I.a)(c))return function(t,n){const s=t.item;if((0,I.H)(s)){const i=n.history?.label||s.text,r=t.ui_state.originalUserText||i;return a.createElement("div",{className:"WAC__sent--text"},n.input.message_type===R.c.FILE&&a.createElement(o.A,{className:"WAC__sent-fileIcon","aria-label":e.languagePack.fileSharing_fileIcon}),a.createElement("span",{role:"heading","aria-level":2},r))}return null}(r,c);if((0,I.b)(c)){const o=function(t,n){if((0,I.I)(t.item))return function(t){const{serviceManager:n}=e;return a.createElement(Kt,{message:t,serviceManager:n})}(t);if((0,I.r)(t.item))return L(t,n);const s=t.item.response_type,o=Boolean(t.item.agent_message_type);switch(s){case R.b.TEXT:return function(t,n,s){return e.isNestedMessageItem?P(t,s,n):a.createElement("div",{className:"WAC__received--textContent"},P(t,s,n))}(t,n,o);case R.b.IMAGE:return function(t){const{languagePack:n,serviceManager:s}=e,{useAITheme:o}=s.store.getState().theme;return a.createElement(i.I,{imageError:n.errors_imageSource,source:t.item.source,title:t.item.title,description:t.item.description,altText:t.item.alt_text,needsAnnouncement:t.ui_state.needsAnnouncement,useAITheme:o})}(t);case R.b.OPTION:return function(t,n){const{languagePack:s,requestInputFocus:i,serviceManager:o,disableUserInputs:r,isMessageForInput:c}=e,l=Boolean(t.item.agent_message_type);return a.createElement(Bt,{localMessage:t,originalMessage:n,languagePack:s,disableUserInputs:r||!c,requestInputFocus:i,serviceManager:o,shouldRemoveHTMLBeforeMarkdownConversion:l})}(t,n);case R.b.CONNECT_TO_AGENT:return function(t,n){const{languagePack:s,config:i,serviceManager:o,disableUserInputs:r,isMessageForInput:c}=e;return a.createElement(qe,{localMessage:t,originalMessage:n,languagePack:s,config:i,serviceManager:o,agentState:b,agentDisplayState:p,persistedAgentState:f,disableUserInputs:r||!c,requestFocus:e.requestInputFocus})}(t,n);case R.b.INLINE_ERROR:return function(e){return a.createElement(H.I,{text:e.item.text})}(t);case R.b.IFRAME:return function(t){const{doAutoScroll:n,isNestedMessageItem:s}=e,i=s?R.I.INLINE:void 0;return a.createElement(Rt,{localMessage:t,doAutoScroll:n,displayOverride:i})}(t);case R.b.VIDEO:return function(t){const{doAutoScroll:n}=e,{item:s}=t,{source:o,title:r,description:c,alt_text:l}=s;return a.createElement(i.a,{source:o,title:r,description:c,baseHeight:(0,I.g)(s)?.base_height,ariaLabel:l,doAutoScroll:n,needsAnnouncement:t.ui_state.needsAnnouncement})}(t);case R.b.AUDIO:return function(t){const{doAutoScroll:n}=e,{source:s,title:i,description:o,alt_text:r}=t.item;return a.createElement(Ve,{source:s,title:i,description:o,ariaLabel:r,doAutoScroll:n,needsAnnouncement:t.ui_state.needsAnnouncement})}(t);case R.b.DATE:return function(t){return a.createElement(It,{localMessage:t,disabled:!e.isMessageForInput,scrollElementIntoView:e.scrollElementIntoView})}(t);case R.b.CONVERSATIONAL_SEARCH:return function(t,n){const{scrollElementIntoView:s,doAutoScroll:i}=e;return a.createElement(Et,{localMessageItem:t,scrollElementIntoView:s,isStreamingError:n.history?.is_streaming_error,doAutoScroll:i})}(t,n);case R.b.TABLE:return function(e){return a.createElement(jt,{tableItem:e.item})}(t);case R.b.CARD:return function(t,n){const{isMessageForInput:s,requestInputFocus:i}=e;return a.createElement(at,{localMessageItem:t,fullMessage:n,isMessageForInput:s,requestFocus:i,renderMessageComponent:e=>a.createElement(ln,{...e})})}(t,n);case R.b.CAROUSEL:return function(t,n){const{isMessageForInput:s,requestInputFocus:i}=e;return a.createElement(it,{localMessageItem:t,fullMessage:n,isMessageForInput:s,requestFocus:i,renderMessageComponent:e=>a.createElement(ln,{...e})})}(t,n);case R.b.BUTTON:return function(t,n){const{isMessageForInput:s,requestInputFocus:i}=e;return a.createElement(tt,{localMessageItem:t,fullMessage:n,isMessageForInput:s,requestFocus:i})}(t,n);case R.b.GRID:return function(e,t){return a.createElement($t,{localMessageItem:e,originalMessage:t,renderMessageComponent:e=>a.createElement(ln,{...e})})}(t,n);default:return L(t,n)}}(r,c),l=r.item.streaming_metadata?.stream_stopped;return a.createElement(a.Fragment,null,o,l&&a.createElement(Be,null),function(t){const n=t.item.message_options?.chain_of_thought;return!(!n||e.isNestedMessageItem)&&a.createElement(cn,{steps:n,onToggle:W,onStepToggle:W,formatStepLabelText:D,explainabilityText:g.chainOfThought_explainabilityLabel,inputLabelText:g.chainOfThought_inputLabel,outputLabelText:g.chainOfThought_outputLabel,toolLabelText:g.chainOfThought_toolLabel})}(r),function(i,o){const r=i.item.message_options?.feedback||{},{id:c,is_on:l,show_positive_details:u=!0,show_negative_details:m=!0,show_text_area:p=!0,show_prompt:b=!0,title:f,prompt:v,categories:T,placeholder:I,disclaimer:P}=r;if(e.isNestedMessageItem||n||!t&&!_||!l)return!1;function L(e){if(c){const t={feedback:{[c]:e}};s.store.dispatch(F.a.mergeMessageHistory(i.fullMessageID,t))}}function R(t){const n=t?!M:!w,a=(t?u:m)&&n;n&&!a?(L({is_positive:t}),N(!0),s.fire({type:d.B.FEEDBACK,messageItem:i.item,message:o,interactionType:d.F.SUBMITTED,isPositive:t})):(S(a),a&&setTimeout(()=>{e.scrollElementIntoView(h.current,48,56)}),s.fire({type:d.B.FEEDBACK,messageItem:i.item,message:o,interactionType:a?d.F.DETAILS_OPENED:d.F.DETAILS_CLOSED,isPositive:t})),A(!!t&&n),k(!t&&n)}function W(e){const t=x&&(e?M:w);return a.createElement(Fe,{class:`${y.b}-feedbackDetails-${e?"positive":"negative"}`,id:`${C}-feedback-${e?"positive":"negative"}`,isOpen:t,isReadonly:$,onClose:()=>R(e),onSubmit:t=>function(e,t){N(!0),S(!1);const n={type:d.B.FEEDBACK,messageItem:i.item,message:o,interactionType:d.F.SUBMITTED,isPositive:e,text:t.text,categories:t.selectedCategories};s.fire(n),L({is_positive:n.isPositive,text:n.text,categories:n.categories})}(e,t),initialValues:_&&_?.is_positive===e?E:null,showTextArea:p,showPrompt:b,title:f||g.feedback_defaultTitle,prompt:v||g.feedback_defaultPrompt,categories:T,placeholder:I||g.feedback_defaultPlaceholder,disclaimer:P,submitLabel:g.feedback_submitLabel,cancelLabel:g.feedback_cancelLabel})}return a.createElement("div",{className:"WAC__received--feedback"},a.createElement(Ae,{isPositiveOpen:x&&M,isNegativeOpen:x&&w,isPositiveSelected:M,isNegativeSelected:w,hasPositiveDetails:u,hasNegativeDetails:m,isPositiveDisabled:w||$,isNegativeDisabled:M||$,positiveLabel:g.feedback_positiveLabel,negativeLabel:g.feedback_negativeLabel,panelID:C,onClick:R}),a.createElement("div",{ref:h},W(!0),W(!1)))}(r,c))}return!1}(e.message,e.originalMessage)}},4665:function(e,t,n){n.d(t,{I:function(){return d},L:function(){return l}});var a=n(3210),s=n(3696),i=(n(5244),n(1435)),o=n(5550),r=n(9708),c=n(3167);const l=(0,a.a)({tagName:"cds-custom-loading",elementClass:i.A,react:s});function d({title:e,source:t,onTimeoutOverride:n,onLoad:a}){const{errors_iframeSource:i,iframe_ariaSourceLoaded:d}=(0,r.u)(),u=(0,o.u)(),[m,g]=(0,s.useState)(!0),[h,p]=(0,s.useState)(!1),b=(0,s.useCallback)(()=>{g(!1),p(!0),u(i)},[u,i]),f=(0,s.useCallback)(()=>{g(!1),u(d),a?.()},[u,d,a]);return(0,s.useEffect)(()=>{let e=null;return m&&(e=setTimeout(n||b,c.b)),()=>{clearTimeout(e)}},[m,b,n]),s.createElement("div",{className:"WACIFrameComponent__Wrapper"},h&&(v=i,s.createElement("div",{className:"WACIFrameComponent__StatusContainer"},s.createElement(o.I,{text:v}))),!h&&s.createElement("iframe",{className:"WACIFrameComponent__IFrame",title:e,src:t,sandbox:"allow-scripts allow-downloads allow-forms allow-same-origin allow-popups",referrerPolicy:"origin",onLoad:f}),m&&s.createElement(o.M,{delay:1500},s.createElement("div",{className:"WACIFrameComponent__StatusContainer"},s.createElement(l,{active:!0,overlay:!1}))));var v}},7472:function(e,t,n){n.d(t,{B:function(){return p}});var a=n(3696),s=n(5022),i=n(9708),o=n(3744),r=n(9124),c=n(3167),l=n(4452),d=n(5564);function u(e){const{bodyLocalMessageItemIDs:t}=e.message.ui_state,n=(0,s.d4)(e=>e.allMessageItemsByID),i=t?.map((s,i)=>{const o=n[s],r=m(o.item.response_type),c=t[i+1],d=n[c],u=m(d?.item.response_type),g=!(i===t.length-1||r||u);return a.createElement("div",{key:s,className:l("WACBodyMessageComponents__MessageWrapper",{"WACBodyMessageComponents__MessageWrapper--fullWidth":r,"WACBodyMessageComponents__MessageWrapper--shortBottomPadding":g})},e.renderMessageComponent({...e,message:o,isNestedMessageItem:!0}))});return i?.length?a.createElement("div",{className:"WACBodyMessageComponents"},i):null}function m(e){switch(e){case d.b.IMAGE:case d.b.IFRAME:case d.b.VIDEO:case d.b.AUDIO:case d.b.USER_DEFINED:return!0;default:return!1}}const g=a.memo(u);function h(e){const t=(0,s.d4)(e=>e.allMessageItemsByID),n=e.message.ui_state.footerLocalMessageItemIDs?.map(n=>{const s=t[n];return a.createElement(a.Fragment,{key:n},e.renderMessageComponent({...e,message:s,isNestedMessageItem:!0}))}),i=n?.length??0,o=i>2;return i?a.createElement("div",{className:l("WACFooterButtonComponents",{"WACFooterButtonComponents--column":o})},n):null}function p({localMessageItem:e,fullMessage:t,isMessageForInput:n,requestFocus:l,renderMessageComponent:d}){const u=(0,o.u)(),m=(0,i.u)(),p=(0,s.d4)(e=>e.config),b=(0,s.d4)(r.a);return a.createElement(a.Fragment,null,a.createElement(g,{message:e,originalMessage:t,languagePack:m,requestInputFocus:l,disableUserInputs:b.isReadonly,config:p,isMessageForInput:n,scrollElementIntoView:c.T,serviceManager:u,hideFeedback:!0,allowNewFeedback:!1,renderMessageComponent:d}),a.createElement(h,{message:e,originalMessage:t,languagePack:m,requestInputFocus:l,disableUserInputs:b.isReadonly,config:p,isMessageForInput:n,scrollElementIntoView:c.T,serviceManager:u,hideFeedback:!0,allowNewFeedback:!1,renderMessageComponent:d}))}},9124:function(e,t,n){n.d(t,{a:function(){return l},b:function(){return c},s:function(){return r}});const a=e=>e.botInputState,s=e=>e.agentState.inputState,i=e=>e.agentState,o=e=>e.persistedToBrowserStorage.chatState.agentState;function r(e){const t=i(e),n=o(e);if(n.isSuspended)return{isConnectingOrConnected:!1,disableInput:!1,isAgentTyping:!1,inputPlaceholderKey:null};const{isReconnecting:a,isConnecting:s,isAgentTyping:r}=t,{isConnected:c}=n;let l;return l=s?"agent_inputPlaceholderConnecting":a?"agent_inputPlaceholderReconnecting":null,{isAgentTyping:r,isConnectingOrConnected:s||c,disableInput:s||a,inputPlaceholderKey:l}}function c(e){return r(e).isConnectingOrConnected}function l(e){return c(e)?s(e):a(e)}},9426:function(e,t,n){n.d(t,{B:function(){return m}});var a=n(1311),s=n(3696),i=n(5022),o=n(9708),r=n(3744),c=n(9124),l=n(2865),d=n(1536);function u(e,t){const{onClose:n,onCloseAndRestart:u,onRestart:m,onToggleHomeScreen:g,headerDisplayName:h,includeWriteableElement:p,enableChatHeaderConfig:b,headerAvatarConfig:f,testIdPrefix:v}=e,C=(0,r.u)(),_=(0,o.u)(),y=(0,i.d4)(e=>e.homeScreenConfig.is_on&&e.homeScreenConfig.allow_return),E=(0,i.d4)(e=>e.config.public),x=(0,i.d4)(e=>e.customMenuOptions),{isConnectingOrConnected:S}=(0,i.d4)(c.s,i.bN),M=(0,i.d4)(e=>e.theme.useAITheme),T=(0,i.d4)(e=>e.chatHeaderState.maxVisibleHeaderObjects),I=(0,i.d4)(e=>e.chatHeaderState.config?.left?.length||0),A=(0,i.d4)(e=>e.chatHeaderState.config?.right?.length||0),w=(0,s.useRef)(),k=b&&(I>T||A>T),$=E.showRestartButton||E.headerConfig?.showRestartButton,N=y&&!S,P=(0,s.useCallback)(e=>{if(0===e&&N)g?.();else{const{handler:t}=x[N?e-1:e];t()}},[x,g,N]);let L=x?.map(e=>e.text);return L&&N?L.splice(0,0,_.homeScreen_overflowMenuHomeScreen):!L&&N&&k&&(L=[_.homeScreen_overflowMenuHomeScreen]),(0,s.useImperativeHandle)(t,()=>w.current),s.createElement("div",{className:"WACHeader__Container"},s.createElement(l.H,{ref:w,showCenter:!0,headerAvatarConfig:f,displayName:h,showBackButton:Boolean(N&&g),showRestartButton:$,useAITheme:M,backContent:s.createElement(a.A,null),labelBackButton:_.homeScreen_returnToHome,onClickRestart:m,onClickClose:n,onCloseAndRestart:u,onClickBack:g,overflowItems:L,overflowClicked:P,enableChatHeaderConfig:b,testIdPrefix:v}),p&&s.createElement(l.a,{slotName:d.W.HEADER_BOTTOM_ELEMENT,id:`headerBottomElement${C.namespace.suffix}`,className:"WACHeader__HeaderBottomElement"}))}const m=s.memo((0,s.forwardRef)(u))},9473:function(e,t,n){n.d(t,{u:function(){return i}});var a=n(3696);let s=1;function i(){const e=(0,a.useRef)();return void 0===e.current&&(e.current=s++),e.current}}}]);
//# sourceMappingURL=4803.bundle.js.map