{"version":3,"file":"7588.bundle.js","mappings":"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","sources":["webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.stringUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.BasePanelComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.ViewSourcePanel.js"],"sourcesContent":["import { b as consoleError } from \"./chat.miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function isEmptyString(value) {\n  return !value || value === \"null\";\n}\n\nfunction isJsonString(data) {\n  try {\n    JSON.parse(data);\n  } catch (e) {\n    return false;\n  }\n  return true;\n}\n\nfunction parseUnknownDataToMarkdown(data) {\n  let content;\n  if (data) {\n    try {\n      if (typeof data === \"object\") {\n        content = `\\`\\`\\`\\n${JSON.stringify(data, null, 2)}\\n\\`\\`\\`\\n`;\n      } else if (typeof data === \"string\") {\n        if (isJsonString(data)) {\n          content = `\\`\\`\\`\\n${JSON.stringify(JSON.parse(data), null, 2)}\\n\\`\\`\\`\\n`;\n        } else {\n          content = data;\n        }\n      } else {\n        content = String(data);\n      }\n      return content;\n    } catch (e) {\n      consoleError(\"Cannot parse step content\", e);\n    }\n  }\n  return undefined;\n}\n\nfunction convertToEmptyStringIfStringifiedNull(str) {\n  return str === \"null\" ? null : str;\n}\n\nfunction convertPossibleStringifiedArrayToFirstString(str) {\n  if (typeof str === \"string\" && str.startsWith('[\"') && str.endsWith('\"]')) {\n    try {\n      [str] = JSON.parse(str);\n    } catch (error) {}\n  }\n  return str;\n}\n\nexport { convertToEmptyStringIfStringifiedNull as a, convertPossibleStringifiedArrayToFirstString as c, isEmptyString as i, parseUnknownDataToMarkdown as p };\n","import FocusTrap from \"focus-trap-react\";\n\nimport React, { useRef, useImperativeHandle } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { I as IS_MOBILE } from \"./chat.browserUtils.js\";\n\nimport { H as HeaderExport } from \"./chat.Header.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function BasePanelComponent({className: className, children: children, isOpen: isOpen, hidePanelHeader: hidePanelHeader, labelBackButton: labelBackButton, title: title, hideBackButton: hideBackButton, useAITheme: useAITheme, onClickCloseAndRestart: onClickCloseAndRestart, onClickRestart: onClickRestart, testIdPrefix: testIdPrefix, ...headerProps}, ref) {\n  const showRestartButton = useSelector(state => state.config.public.headerConfig?.showRestartButton);\n  const headerRef = useRef();\n  useImperativeHandle(ref, () => headerRef.current);\n  return React.createElement(FocusTrap, {\n    active: isOpen,\n    focusTrapOptions: {\n      clickOutsideDeactivates: true,\n      returnFocusOnDeactivate: !IS_MOBILE,\n      preventScroll: true\n    }\n  }, React.createElement(\"div\", {\n    className: className\n  }, !hidePanelHeader && React.createElement(HeaderExport, {\n    ...headerProps,\n    ref: headerRef,\n    showRestartButton: showRestartButton,\n    onClickRestart: onClickRestart,\n    onCloseAndRestart: onClickCloseAndRestart,\n    showBackButton: !hideBackButton,\n    labelBackButton: labelBackButton,\n    displayName: title,\n    useAITheme: useAITheme,\n    testIdPrefix: testIdPrefix,\n    showCenter: true\n  }), React.createElement(\"div\", {\n    className: \"WACPanelContent\"\n  }, children)));\n}\n\nconst BasePanelComponentExport = React.memo(React.forwardRef(BasePanelComponent));\n\nexport { BasePanelComponentExport as B };\n","import React, { forwardRef } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { u as useLanguagePack } from \"./chat.AppState.js\";\n\nimport { u as useServiceManager } from \"./chat.usePrevious.js\";\n\nimport { a as actions } from \"./chat.actions.js\";\n\nimport { B as BasePanelComponentExport } from \"./chat.BasePanelComponent.js\";\n\nimport { c as convertPossibleStringifiedArrayToFirstString, a as convertToEmptyStringIfStringifiedNull } from \"./chat.stringUtils.js\";\n\nimport { O as OverlayPanelName } from \"./chat.PageObjectId.js\";\n\nimport \"./chat.dynamic-imports.js\";\n\nimport \"compute-scroll-into-view\";\n\nimport \"memoize-one\";\n\nimport \"tabbable\";\n\nimport \"./chat.uuid.js\";\n\nimport \"uuid\";\n\nimport \"focus-trap-react\";\n\nimport \"./chat.browserUtils.js\";\n\nimport \"detect-browser\";\n\nimport \"./chat.Header.js\";\n\nimport \"@carbon/web-components/es-custom/components/slug/index.js\";\n\nimport \"@carbon/icons-react/es/Close.js\";\n\nimport \"@carbon/icons-react/es/CloseLarge.js\";\n\nimport \"@carbon/icons-react/es/DownToBottom.js\";\n\nimport \"@carbon/icons-react/es/Menu.js\";\n\nimport \"@carbon/icons-react/es/Restart.js\";\n\nimport \"@carbon/icons-react/es/SidePanelClose.js\";\n\nimport \"@carbon/icons-react/es/SubtractLarge.js\";\n\nimport \"@carbon/react\";\n\nimport \"@carbon/web-components/es-custom/components/ai-label/defs.js\";\n\nimport \"@carbon/web-components/es-custom/components/popover/defs.js\";\n\nimport \"classnames\";\n\nimport \"@lit/react\";\n\nimport \"tslib\";\n\nimport \"./chat.customElement.js\";\n\nimport \"@carbon/web-components/es-custom/components/skeleton-icon/index.js\";\n\nimport \"lit\";\n\nimport \"bind-decorator\";\n\nimport \"lit/decorators.js\";\n\nimport \"@carbon/web-components/es-custom/components/button/index.js\";\n\nimport \"@carbon/web-components/es-custom/components/overflow-menu/index.js\";\n\nimport \"@carbon/icons-react/es/ChevronDown.js\";\n\nimport \"@carbon/icons-react/es/ChevronUp.js\";\n\nimport \"@floating-ui/react\";\n\nimport \"./chat.HideComponent.js\";\n\nimport \"./chat.constants.js\";\n\nimport \"./chat.Button.js\";\n\nimport \"@carbon/web-components/es/components/button/defs.js\";\n\nimport \"@carbon/web-components/es-custom/components/button/button.js\";\n\nimport \"react-dom\";\n\nimport \"@carbon/web-components/es-custom/components/ai-label/ai-label-action-button.js\";\n\nimport \"@carbon/web-components/es-custom/components/ai-label/ai-label.js\";\n\nimport \"./chat.miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function SearchResultBodyWithCitationHighlighted({relatedSearchResult: relatedSearchResult, citationItem: citationItem}) {\n  const elementsArray = [];\n  let searchString;\n  let citationString;\n  if (relatedSearchResult?.body) {\n    const searchStringFromBody = convertPossibleStringifiedArrayToFirstString(convertToEmptyStringIfStringifiedNull(relatedSearchResult.body));\n    searchString = searchStringFromBody.replace(\"<em>\", \"\").replace(\"</em>\", \"\");\n  }\n  if (citationItem?.text) {\n    citationString = convertPossibleStringifiedArrayToFirstString(convertToEmptyStringIfStringifiedNull(citationItem.text));\n  }\n  if (searchString && citationString) {\n    const startOfCitation = searchString.indexOf(citationString);\n    if (startOfCitation !== -1) {\n      elementsArray.push(React.createElement(\"span\", {\n        key: 1\n      }, searchString.substring(0, startOfCitation)));\n      elementsArray.push(React.createElement(\"em\", {\n        key: 2,\n        className: \"WAC__highlight\"\n      }, searchString.substring(startOfCitation, startOfCitation + citationString.length)));\n      elementsArray.push(React.createElement(\"span\", {\n        key: 3\n      }, searchString.substring(startOfCitation + citationString.length)));\n    }\n  }\n  if (elementsArray.length) {\n    return elementsArray;\n  }\n  if (searchString.length) {\n    return [ React.createElement(\"span\", {\n      key: \"search-string\"\n    }, searchString) ];\n  }\n  return [ React.createElement(\"span\", {\n    key: \"citation-string\"\n  }, citationString) ];\n}\n\nconst SearchResultBodyWithCitationHighlightedExport = React.memo(SearchResultBodyWithCitationHighlighted);\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ViewSourcePanel(props, ref) {\n  const languagePack = useLanguagePack();\n  const {store: store} = useServiceManager();\n  const {isOpen: isOpen, citationItem: citationItem, relatedSearchResult: relatedSearchResult} = useSelector(state => state.viewSourcePanelState);\n  let content;\n  if (citationItem) {\n    if (relatedSearchResult) {\n      content = React.createElement(SearchResultBodyWithCitationHighlightedExport, {\n        relatedSearchResult: relatedSearchResult,\n        citationItem: citationItem\n      });\n    } else {\n      content = citationItem.text;\n    }\n  }\n  return React.createElement(BasePanelComponentExport, {\n    ...props,\n    ref: ref,\n    className: \"WACViewSourcePanel\",\n    isOpen: isOpen,\n    onClickBack: () => store.dispatch(actions.setViewSourcePanelIsOpen(false)),\n    title: citationItem?.title,\n    labelBackButton: languagePack.general_ariaCloseInformationOverlay,\n    eventName: \"Search citation panel opened\",\n    eventDescription: \"A user has opened the search citation panel\",\n    testIdPrefix: OverlayPanelName.CONVERSATIONAL_SEARCH_CITATION\n  }, React.createElement(\"div\", {\n    className: \"WACViewSourcePanel__Content\"\n  }, content));\n}\n\nconst ViewSourcePanelExport = forwardRef(ViewSourcePanel);\n\nexport { ViewSourcePanelExport as ViewSourcePanel, ViewSourcePanelExport as default };\n"],"names":["isEmptyString","value","parseUnknownDataToMarkdown","data","content","JSON","stringify","parse","e","isJsonString","String","consoleError","convertToEmptyStringIfStringifiedNull","str","convertPossibleStringifiedArrayToFirstString","startsWith","endsWith","error","BasePanelComponent","className","children","isOpen","hidePanelHeader","labelBackButton","title","hideBackButton","useAITheme","onClickCloseAndRestart","onClickRestart","testIdPrefix","headerProps","ref","showRestartButton","useSelector","state","config","public","headerConfig","headerRef","useRef","useImperativeHandle","current","React","FocusTrap","active","focusTrapOptions","clickOutsideDeactivates","returnFocusOnDeactivate","IS_MOBILE","preventScroll","HeaderExport","onCloseAndRestart","showBackButton","displayName","showCenter","BasePanelComponentExport","SearchResultBodyWithCitationHighlighted","relatedSearchResult","citationItem","elementsArray","searchString","citationString","body","replace","text","startOfCitation","indexOf","push","key","substring","length","SearchResultBodyWithCitationHighlightedExport","ViewSourcePanel","props","languagePack","useLanguagePack","store","useServiceManager","viewSourcePanelState","onClickBack","dispatch","actions","setViewSourcePanelIsOpen","general_ariaCloseInformationOverlay","eventName","eventDescription","OverlayPanelName","CONVERSATIONAL_SEARCH_CITATION","ViewSourcePanelExport","forwardRef"],"sourceRoot":""}