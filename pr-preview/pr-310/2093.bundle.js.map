{"version":3,"file":"2093.bundle.js","mappings":"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","sources":["webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.uuid.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.messageUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.browserUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.resolvablePromise.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.actions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat.HumanAgentServiceImpl.js"],"sourcesContent":["import { v4 } from \"uuid\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var UUIDType;\n\n(function(UUIDType) {\n  UUIDType[UUIDType[\"MISCELLANEOUS\"] = 1] = \"MISCELLANEOUS\";\n  UUIDType[UUIDType[\"LOCAL_MESSAGE\"] = 2] = \"LOCAL_MESSAGE\";\n  UUIDType[UUIDType[\"MESSAGE\"] = 3] = \"MESSAGE\";\n  UUIDType[UUIDType[\"COMPONENT\"] = 4] = \"COMPONENT\";\n  UUIDType[UUIDType[\"USER\"] = 6] = \"USER\";\n  UUIDType[UUIDType[\"DEVICE_ID\"] = 8] = \"DEVICE_ID\";\n  UUIDType[UUIDType[\"FILE\"] = 9] = \"FILE\";\n})(UUIDType || (UUIDType = {}));\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function uuid(_type) {\n  return v4();\n}\n\nexport { UUIDType as U, uuid as u };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport \"./chat.constants.js\";\n\nimport { u as uuid, U as UUIDType } from \"./chat.uuid.js\";\n\nimport { e as MessageResponseTypes, d as MessageInputType, F as FileStatusValue, H as HumanAgentMessageType, s as InternalMessageRequestType, c as ButtonItemType } from \"./chat.dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function asArray(value) {\n  return Array.isArray(value) ? value : [ value ];\n}\n\nasync function asyncForEach(array, callbackFunction) {\n  for (let index = 0; index < array.length; index++) {\n    const value = array[index];\n    await callbackFunction(value, index, array);\n  }\n}\n\nfunction findLast(array, predicate, startAt) {\n  const lastIndex = findLastIndex(array, predicate);\n  return lastIndex === -1 ? undefined : array[lastIndex];\n}\n\nfunction findLastIndex(array, predicate, startAt) {\n  if (array) {\n    const startingIndex = array.length - 1;\n    for (let index = startingIndex; index >= 0; index--) {\n      const value = array[index];\n      if (predicate(value, index, array)) {\n        return index;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction findLastWithMap(keys, map, predicate) {\n  for (let index = keys.length - 1; index >= 0; index--) {\n    const key = keys[index];\n    const value = map[key];\n    if (predicate(value, index, keys)) {\n      return value;\n    }\n  }\n  return undefined;\n}\n\nfunction arrayLastValue(array) {\n  return array && array.length ? array[array.length - 1] : null;\n}\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const THREAD_ID_MAIN = \"main\";\n\nfunction isResponse(message) {\n  return message && message.output !== undefined;\n}\n\nfunction isDateResponseType(localMessage) {\n  return localMessage?.item.response_type === MessageResponseTypes.DATE;\n}\n\nfunction addDefaultsToMessage(fullMessage) {\n  if (!fullMessage.id) {\n    fullMessage.id = uuid(UUIDType.MESSAGE);\n  }\n  if (!fullMessage.thread_id) {\n    fullMessage.thread_id = THREAD_ID_MAIN;\n  }\n  if (!fullMessage.history) {\n    fullMessage.history = {};\n  }\n  if (!fullMessage.ui_state_internal) {\n    fullMessage.ui_state_internal = {};\n  }\n  if (!fullMessage.history.timestamp) {\n    fullMessage.history.timestamp = Date.now();\n  }\n  if (fullMessage.ui_state_internal.from_history === undefined) {\n    fullMessage.ui_state_internal.from_history = false;\n  }\n  return fullMessage;\n}\n\nfunction isRequest(message) {\n  return message?.input !== undefined;\n}\n\nfunction isLiveHumanAgentMessage(message) {\n  return Boolean(message.item.agent_message_type);\n}\n\nfunction hasLiveHumanAgentMessage(message) {\n  return isResponse(message) && Boolean(message.output.generic?.find(item => item?.agent_message_type)) || isRequest(message) && Boolean(message.input.agent_message_type);\n}\n\nfunction isEventRequest(message) {\n  return message?.input?.message_type === MessageInputType.EVENT;\n}\n\nfunction isTextItem(item) {\n  return item && item.response_type === \"text\" && item.text !== undefined;\n}\n\nfunction isTyping(message) {\n  return message.response_type === MessageResponseTypes.PAUSE && message.typing == true;\n}\n\nfunction isPause(message) {\n  return message.response_type === MessageResponseTypes.PAUSE;\n}\n\nfunction isOptionItem(item) {\n  return item?.response_type === MessageResponseTypes.OPTION && item.options !== undefined;\n}\n\nfunction createMessageRequestForChoice(choice, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    ...cloneDeep(choice.value)\n  };\n  messageRequest.history = {\n    label: choice.label,\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageRequestForButtonItemOption(buttonItem, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    input: null\n  };\n  if (buttonItem.value?.input?.text) {\n    messageRequest.input = cloneDeep(buttonItem.value.input);\n  } else {\n    messageRequest.input = {\n      text: buttonItem.label\n    };\n  }\n  messageRequest.history = {\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createWelcomeRequest() {\n  return addDefaultsToMessage({\n    id: uuid(UUIDType.MESSAGE),\n    input: {\n      text: \"\"\n    },\n    history: {\n      silent: true,\n      is_welcome_request: true\n    },\n    thread_id: THREAD_ID_MAIN\n  });\n}\n\nfunction createMessageRequestForText(text) {\n  return addDefaultsToMessage({\n    input: {\n      text: text,\n      message_type: MessageInputType.TEXT\n    }\n  });\n}\n\nfunction createMessageRequestForFileUpload(upload) {\n  return addDefaultsToMessage({\n    id: upload.id,\n    input: {\n      text: upload.file.name,\n      message_type: InternalMessageRequestType.FILE,\n      agent_message_type: HumanAgentMessageType.FROM_USER\n    },\n    history: {\n      file_upload_status: FileStatusValue.UPLOADING\n    }\n  });\n}\n\nfunction createMessageRequestForDate(inputString, userString, relatedResponseID) {\n  const messageRequest = createMessageRequestForText(inputString);\n  messageRequest.history = {\n    label: userString,\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageResponseForText(text, threadID = THREAD_ID_MAIN, responseType = MessageResponseTypes.TEXT, context) {\n  const textItem = {\n    response_type: responseType,\n    text: text\n  };\n  const messageResponse = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: threadID,\n    output: {\n      generic: [ textItem ]\n    }\n  };\n  return messageResponse;\n}\n\nfunction createMessageResponseForItem(item, context) {\n  const messageResponse = {\n    output: {\n      generic: [ item ]\n    }\n  };\n  return addDefaultsToMessage(messageResponse);\n}\n\nfunction isConnectToHumanAgent(response) {\n  return response?.response_type === MessageResponseTypes.CONNECT_TO_HUMAN_AGENT;\n}\n\nfunction isCardResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CARD;\n}\n\nfunction isCarouselResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CAROUSEL;\n}\n\nfunction isButtonResponseType(response) {\n  return response?.response_type === MessageResponseTypes.BUTTON;\n}\n\nfunction isShowPanelButtonType(response) {\n  return isButtonResponseType(response) && response.button_type === ButtonItemType.SHOW_PANEL;\n}\n\nfunction isResponseWithNestedItems(item) {\n  if (isButtonResponseType(item)) {\n    return hasBodyOrFooter(item.panel);\n  }\n  if (isCardResponseType(item)) {\n    return hasBodyOrFooter(item);\n  }\n  if (isCarouselResponseType(item)) {\n    return item.items !== undefined;\n  }\n  return isGridResponseType(item);\n}\n\nfunction hasBodyOrFooter(item) {\n  return item?.body !== undefined || item?.footer !== undefined;\n}\n\nfunction renderAsUserDefinedMessage(messageItem) {\n  const responseType = messageItem.response_type;\n  switch (responseType) {\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.OPTION:\n   case MessageResponseTypes.CONNECT_TO_HUMAN_AGENT:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.DATE:\n   case MessageResponseTypes.CONVERSATIONAL_SEARCH:\n   case MessageResponseTypes.TABLE:\n   case MessageResponseTypes.INLINE_ERROR:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.CAROUSEL:\n   case MessageResponseTypes.BUTTON:\n   case MessageResponseTypes.GRID:\n    return false;\n\n   default:\n    return !renderAsTour(messageItem);\n  }\n}\n\nfunction renderAsTour(messageItem) {\n  return hasTourUserDefinedType(messageItem);\n}\n\nfunction hasTourUserDefinedType(message) {\n  return message?.user_defined?.user_defined_type === \"IBM_BETA_JOURNEYS_TOUR\";\n}\n\nfunction hasServiceDesk(config) {\n  return Boolean(config.public.serviceDeskFactory);\n}\n\nfunction isItemSupportedInResponseBody(item) {\n  switch (item.response_type) {\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.USER_DEFINED:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.GRID:\n    return true;\n\n   default:\n    return false;\n  }\n}\n\nfunction isSingleItemCarousel(messageItem) {\n  return isCarouselResponseType(messageItem) && messageItem.items.length === 1;\n}\n\nfunction isFullWidthUserDefined(messageItem) {\n  return isUserDefinedItem(messageItem) && messageItem.full_width;\n}\n\nfunction isUserDefinedItem(item) {\n  return item?.response_type === MessageResponseTypes.USER_DEFINED;\n}\n\nfunction isGridResponseType(item) {\n  return item?.response_type === MessageResponseTypes.GRID;\n}\n\nfunction getOptionType(preference, totalOptions) {\n  let type = \"button\";\n  if (preference && preference === \"button\") {\n    type = \"button\";\n  } else if (preference && preference === \"dropdown\") {\n    type = \"dropdown\";\n  } else if (totalOptions > 4) {\n    type = \"dropdown\";\n  }\n  return type;\n}\n\nfunction isStreamPartialItem(chunk) {\n  return Boolean(chunk.partial_item);\n}\n\nfunction isStreamCompleteItem(chunk) {\n  return Boolean(chunk.complete_item);\n}\n\nfunction isStreamFinalResponse(chunk) {\n  return Boolean(chunk.final_response);\n}\n\nfunction streamItemID(messageID, item) {\n  const itemID = item?.streaming_metadata?.id;\n  if (!itemID) {\n    return null;\n  }\n  return `${messageID}-${itemID}`;\n}\n\nfunction getMediaDimensions(item) {\n  return item.dimensions;\n}\n\nfunction getLastBotResponseWithContext(state) {\n  const messageIDs = state.botMessageState.messageIDs || [];\n  return findLastWithMap(messageIDs, state.allMessagesByID, message => isResponse(message) && !hasLiveHumanAgentMessage(message) && Boolean(message.context));\n}\n\nexport { isDateResponseType as A, isEventRequest as B, getLastBotResponseWithContext as C, createMessageRequestForChoice as D, createMessageRequestForButtonItemOption as E, createMessageRequestForDate as F, getOptionType as G, isTextItem as H, renderAsTour as I, createMessageResponseForItem as J, createMessageRequestForFileUpload as K, isGridResponseType as L, isCarouselResponseType as M, isShowPanelButtonType as N, isItemSupportedInResponseBody as O, isCardResponseType as P, isButtonResponseType as Q, THREAD_ID_MAIN as T, isRequest as a, isResponse as b, isOptionItem as c, isFullWidthUserDefined as d, isSingleItemCarousel as e, arrayLastValue as f, getMediaDimensions as g, createWelcomeRequest as h, isConnectToHumanAgent as i, isLiveHumanAgentMessage as j, createMessageRequestForText as k, addDefaultsToMessage as l, createMessageResponseForText as m, isStreamCompleteItem as n, isStreamPartialItem as o, isStreamFinalResponse as p, isResponseWithNestedItems as q, renderAsUserDefinedMessage as r, asyncForEach as s, streamItemID as t, isPause as u, hasTourUserDefinedType as v, hasServiceDesk as w, isTyping as x, asArray as y, findLast as z };\n","import { detect } from \"detect-browser\";\n\nimport memoizeOne from \"memoize-one\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const isClient = typeof window !== \"undefined\" && typeof navigator !== \"undefined\";\n\nconst browser = isClient ? detect() : undefined;\n\nlet screenWidth = 0;\n\nlet screenHeight = 0;\n\nif (isClient) {\n  screenWidth = window.screen.width;\n  screenHeight = window.screen.height;\n}\n\nconst IS_IOS = browser?.os === \"iOS\";\n\nconst IS_ANDROID = browser?.os === \"Android OS\";\n\nconst IS_MOBILE = IS_IOS || IS_ANDROID;\n\nconst IS_PHONE = IS_MOBILE && (screenWidth < 500 || screenHeight < 500);\n\nconst IS_PHONE_IN_PORTRAIT_MODE = IS_PHONE && screenWidth < 500;\n\nfunction isSessionStorageAvailable() {\n  if (!isClient || !window.sessionStorage) {\n    return false;\n  }\n  try {\n    window.sessionStorage.setItem(\"web-chat-test-item\", \"true\");\n    window.sessionStorage.getItem(\"web-chat-test-item\");\n    window.sessionStorage.removeItem(\"web-chat-test-item\");\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nconst IS_SESSION_STORAGE = memoizeOne(isSessionStorageAvailable);\n\nfunction getURLHostName(url) {\n  try {\n    return new URL(url).hostname;\n  } catch {\n    return url;\n  }\n}\n\nfunction conditionalSetTimeout(operation, timeout) {\n  if (timeout) {\n    return setTimeout(operation, timeout);\n  }\n  operation();\n  return null;\n}\n\nexport { IS_MOBILE as I, IS_SESSION_STORAGE as a, IS_PHONE as b, IS_IOS as c, IS_PHONE_IN_PORTRAIT_MODE as d, conditionalSetTimeout as e, getURLHostName as g };\n","import { e as MessageResponseTypes, c as ButtonItemType } from \"./chat.dynamic-imports.js\";\n\nimport { u as uuid, U as UUIDType } from \"./chat.uuid.js\";\n\nimport { t as streamItemID, J as createMessageResponseForItem, L as isGridResponseType, M as isCarouselResponseType, N as isShowPanelButtonType, q as isResponseWithNestedItems, O as isItemSupportedInResponseBody, P as isCardResponseType, Q as isButtonResponseType } from \"./chat.messageUtils.js\";\n\nimport { b as consoleError } from \"./chat.miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function inputItemToLocalItem(message, originalUserText, id = uuid(UUIDType.LOCAL_MESSAGE)) {\n  const localMessage = {\n    item: {\n      response_type: MessageResponseTypes.TEXT,\n      ...message.input\n    },\n    ui_state: {\n      id: id,\n      originalUserText: originalUserText,\n      needsAnnouncement: false\n    },\n    fullMessageID: message.id\n  };\n  return localMessage;\n}\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function outputItemToLocalItem(messageItem, fullMessage, isLatestWelcomeNode = false, disableFadeAnimation = false) {\n  const id = streamItemID(fullMessage.id, messageItem) || uuid(UUIDType.LOCAL_MESSAGE);\n  const localMessage = {\n    ui_state: {\n      id: id,\n      needsAnnouncement: !fullMessage.ui_state_internal?.from_history,\n      disableFadeAnimation: disableFadeAnimation\n    },\n    item: messageItem,\n    fullMessageID: fullMessage.id\n  };\n  if (isLatestWelcomeNode) {\n    localMessage.ui_state.isWelcomeResponse = true;\n  }\n  return localMessage;\n}\n\nfunction createLocalMessageForInlineError(text) {\n  const messageItem = {\n    response_type: MessageResponseTypes.INLINE_ERROR,\n    text: text\n  };\n  return createLocalMessageForItem(messageItem);\n}\n\nfunction createLocalMessageForItem(messageItem) {\n  const originalMessage = createMessageResponseForItem(messageItem);\n  const localMessage = outputItemToLocalItem(messageItem, originalMessage);\n  return {\n    originalMessage: originalMessage,\n    localMessage: localMessage\n  };\n}\n\nfunction createLocalMessageItemsForNestedMessageItems(localMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter) {\n  const {item: item} = localMessageItem;\n  if (isGridResponseType(item)) {\n    localMessageItem.ui_state.gridLocalMessageItemIDs = item.rows.map(row => row.cells.map(cell => {\n      const cellLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"items\", localMessageItem, cell.items, cellLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(localMessageItem.item, nestedMessageItem), false);\n      return cellLocalMessageItemIDs;\n    }));\n  } else if (isCarouselResponseType(item)) {\n    localMessageItem.ui_state.itemsLocalMessageItemIDs = [];\n    createLocalMessageItemsForNestedType(\"items\", localMessageItem, item.items, localMessageItem.ui_state.itemsLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), allowFooter);\n  } else {\n    const bodyItems = item.body || item.panel?.body;\n    if (bodyItems) {\n      localMessageItem.ui_state.bodyLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"body\", localMessageItem, bodyItems, localMessageItem.ui_state.bodyLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n    if (!allowFooter) {\n      return;\n    }\n    const footerItems = item.footer || item.panel?.footer;\n    if (footerItems) {\n      localMessageItem.ui_state.footerLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"footer\", localMessageItem, footerItems, localMessageItem.ui_state.footerLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInFooter(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n  }\n}\n\nfunction createLocalMessageItemsForNestedType(type, localMessageItem, items, nestedMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, isSupported, allowFooter) {\n  items.forEach(nestedMessageItem => {\n    if (isSupported(nestedMessageItem)) {\n      const nestedLocalMessageItem = outputItemToLocalItem(nestedMessageItem, originalMessage, false, true);\n      nestedMessageItemIDs.push(nestedLocalMessageItem.ui_state.id);\n      nestedLocalMessageItems.push(nestedLocalMessageItem);\n      if (isResponseWithNestedItems(nestedLocalMessageItem.item)) {\n        createLocalMessageItemsForNestedMessageItems(nestedLocalMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter);\n      }\n    } else {\n      consoleError(`The \"${localMessageItem.item.response_type}\" response type does not support \"${nestedMessageItem.response_type}\" in \"${type}\" array.`);\n    }\n  });\n}\n\nfunction isSupportedMessageItemInBody(rootMessageItem, nestedMessageItem) {\n  switch (rootMessageItem.response_type) {\n   case MessageResponseTypes.CARD:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.CAROUSEL:\n    return isCardResponseType(nestedMessageItem);\n\n   case MessageResponseTypes.BUTTON:\n    return rootMessageItem.button_type === ButtonItemType.SHOW_PANEL && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.GRID:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   default:\n    return false;\n  }\n}\n\nfunction isSupportedMessageItemInFooter(rootMessageItem, nestedMessageItem) {\n  if (isButtonResponseType(nestedMessageItem)) {\n    if (isShowPanelButtonType(rootMessageItem)) {\n      return !isShowPanelButtonType(nestedMessageItem);\n    }\n    return true;\n  }\n  return false;\n}\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const HA_SET_HUMAN_AGENT_AVAILABILITY = \"HA_SET_HUMAN_AGENT_AVAILABILITY\";\n\nconst HA_SET_IS_CONNECTING = \"HA_SET_IS_CONNECTING\";\n\nconst HA_SET_IS_RECONNECTING = \"HA_SET_IS_RECONNECTING\";\n\nconst HA_SET_HUMAN_AGENT_JOINED = \"HA_SET_HUMAN_AGENT_JOINED\";\n\nconst HA_SET_HUMAN_AGENT_LEFT_CHAT = \"HA_SET_HUMAN_AGENT_LEFT_CHAT\";\n\nconst HA_END_CHAT = \"HA_END_CHAT\";\n\nconst HA_UPDATE_CAPABILITIES = \"HA_UPDATE_CAPABILITIES\";\n\nconst HA_UPDATE_FILE_UPLOAD_IN_PROGRESS = \"HA_UPDATE_FILE_UPLOAD_IN_PROGRESS\";\n\nconst HA_SET_SHOW_SCREEN_SHARE_REQUEST = \"HA_SET_SHOW_SCREEN_SHARE_REQUEST\";\n\nconst HA_SET_IS_SCREEN_SHARING = \"HA_SET_IS_SCREEN_SHARING\";\n\nconst HA_SET_PERSISTED_STATE = \"HA_SET_PERSISTED_STATE\";\n\nconst HA_UPDATE_IS_SUSPENDED = \"HA_UPDATE_IS_SUSPENDED\";\n\nconst HA_UPDATE_IS_TYPING = \"HA_UPDATE_IS_TYPING\";\n\nfunction setIsConnecting(isConnecting, localMessageID) {\n  return {\n    type: HA_SET_IS_CONNECTING,\n    isConnecting: isConnecting,\n    localMessageID: localMessageID\n  };\n}\n\nfunction setIsReconnecting(isReconnecting) {\n  return {\n    type: HA_SET_IS_RECONNECTING,\n    isReconnecting: isReconnecting\n  };\n}\n\nfunction setHumanAgentLeftChat() {\n  return {\n    type: HA_SET_HUMAN_AGENT_LEFT_CHAT\n  };\n}\n\nfunction endChat() {\n  return {\n    type: HA_END_CHAT\n  };\n}\n\nfunction setAgentAvailability(availability) {\n  return {\n    type: HA_SET_HUMAN_AGENT_AVAILABILITY,\n    availability: availability\n  };\n}\n\nfunction setHumanAgentJoined(responseUserProfile) {\n  return {\n    type: HA_SET_HUMAN_AGENT_JOINED,\n    responseUserProfile: responseUserProfile\n  };\n}\n\nfunction updateCapabilities(capabilities) {\n  return {\n    type: HA_UPDATE_CAPABILITIES,\n    capabilities: capabilities\n  };\n}\n\nfunction updateFilesUploadInProgress(fileUploadInProgress) {\n  return {\n    type: HA_UPDATE_FILE_UPLOAD_IN_PROGRESS,\n    fileUploadInProgress: fileUploadInProgress\n  };\n}\n\nfunction setShowScreenShareRequest(showRequest) {\n  return {\n    type: HA_SET_SHOW_SCREEN_SHARE_REQUEST,\n    showRequest: showRequest\n  };\n}\n\nfunction setIsScreenSharing(isSharing) {\n  return {\n    type: HA_SET_IS_SCREEN_SHARING,\n    isSharing: isSharing\n  };\n}\n\nfunction setPersistedServiceDeskState(state) {\n  return {\n    type: HA_SET_PERSISTED_STATE,\n    state: state\n  };\n}\n\nfunction agentUpdateIsSuspended(isSuspended) {\n  return {\n    type: HA_UPDATE_IS_SUSPENDED,\n    isSuspended: isSuspended\n  };\n}\n\nfunction agentUpdateIsTyping(isTyping) {\n  return {\n    type: HA_UPDATE_IS_TYPING,\n    isTyping: isTyping\n  };\n}\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function deepFreeze(object) {\n  Object.freeze(object);\n  Object.getOwnPropertyNames(object).forEach(prop => {\n    if (Object.prototype.hasOwnProperty.call(object, prop) && object[prop] !== null && (typeof object[prop] === \"object\" || typeof object[prop] === \"function\") && !Object.isFrozen(object[prop])) {\n      deepFreeze(object[prop]);\n    }\n  });\n  return object;\n}\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function resolvablePromise() {\n  let resolveFunction;\n  let rejectFunction;\n  const promise = new Promise((resolve, reject) => {\n    resolveFunction = resolve;\n    rejectFunction = reject;\n  });\n  promise.doResolve = resolveValue => {\n    promise.isResolved = true;\n    promise.isComplete = true;\n    resolveFunction(resolveValue);\n  };\n  promise.doReject = rejectValue => {\n    promise.isRejected = true;\n    promise.isComplete = true;\n    rejectFunction(rejectValue);\n  };\n  promise.isResolved = false;\n  promise.isRejected = false;\n  promise.isComplete = false;\n  return promise;\n}\n\nexport { setAgentAvailability as A, setHumanAgentJoined as B, agentUpdateIsTyping as C, setHumanAgentLeftChat as D, setPersistedServiceDeskState as E, HA_END_CHAT as H, agentUpdateIsSuspended as a, createLocalMessageForInlineError as b, createLocalMessageItemsForNestedMessageItems as c, deepFreeze as d, HA_UPDATE_FILE_UPLOAD_IN_PROGRESS as e, HA_SET_IS_SCREEN_SHARING as f, HA_UPDATE_CAPABILITIES as g, HA_SET_HUMAN_AGENT_LEFT_CHAT as h, inputItemToLocalItem as i, HA_UPDATE_IS_TYPING as j, HA_UPDATE_IS_SUSPENDED as k, HA_SET_PERSISTED_STATE as l, HA_SET_HUMAN_AGENT_JOINED as m, HA_SET_SHOW_SCREEN_SHARE_REQUEST as n, outputItemToLocalItem as o, HA_SET_HUMAN_AGENT_AVAILABILITY as p, HA_SET_IS_RECONNECTING as q, resolvablePromise as r, HA_SET_IS_CONNECTING as s, setIsConnecting as t, updateFilesUploadInProgress as u, endChat as v, setIsScreenSharing as w, setIsReconnecting as x, setShowScreenShareRequest as y, updateCapabilities as z };\n","import { u as uuid } from \"./chat.uuid.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CHANGE_STATE = \"CHANGE_STATE\";\n\nconst UPDATE_BOT_NAME = \"UPDATE_BOT_NAME\";\n\nconst UPDATE_BOT_AVATAR_URL = \"UPDATE_BOT_AVATAR_URL\";\n\nconst UPDATE_LAUNCHER_AVATAR_URL = \"UPDATE_LAUNCHER_AVATAR_URL\";\n\nconst UPDATE_MAIN_HEADER_TITLE = \"UPDATE_MAIN_HEADER_TITLE\";\n\nconst HYDRATE_CHAT = \"HYDRATE_CHAT\";\n\nconst HYDRATE_MESSAGE_HISTORY = \"HYDRATE_MESSAGE_HISTORY\";\n\nconst ADD_LOCAL_MESSAGE_ITEM = \"ADD_LOCAL_MESSAGE_ITEM\";\n\nconst REMOVE_MESSAGES = \"REMOVE_MESSAGES\";\n\nconst UPDATE_LOCAL_MESSAGE_ITEM = \"UPDATE_LOCAL_MESSAGE_ITEM\";\n\nconst SET_APP_STATE_VALUE = \"SET_APP_STATE_VALUE\";\n\nconst ADD_IS_TYPING_COUNTER = \"ADD_IS_TYPING_COUNTER\";\n\nconst ADD_IS_LOADING_COUNTER = \"ADD_IS_LOADING_COUNTER\";\n\nconst ADD_IS_HYDRATING_COUNTER = \"ADD_IS_HYDRATING_COUNTER\";\n\nconst SET_VIEW_STATE = \"SET_VIEW_STATE\";\n\nconst SET_VIEW_CHANGING = \"SET_VIEW_CHANGING\";\n\nconst SET_INITIAL_VIEW_CHANGE_COMPLETE = \"SET_INITIAL_VIEW_CHANGE_COMPLETE\";\n\nconst UPDATE_CSS_VARIABLES = \"UPDATE_CSS_VARIABLES\";\n\nconst MESSAGE_SET_OPTION_SELECTED = \"MESSAGE_SET_OPTION_SELECTED\";\n\nconst SET_MESSAGE_UI_PROPERTY = \"SET_MESSAGE_UI_PROPERTY\";\n\nconst SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY = \"SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY\";\n\nconst SET_MESSAGE_HISTORY_PROPERTY = \"SET_MESSAGE_HISTORY_PROPERTY\";\n\nconst MERGE_HISTORY = \"MERGE_HISTORY\";\n\nconst SET_LAUNCHER_PROPERTY = \"SET_LAUNCHER_PROPERTY\";\n\nconst SET_LAUNCHER_CONFIG_PROPERTY = \"SET_LAUNCHER_CONFIG_PROPERTY\";\n\nconst ANNOUNCE_MESSAGE = \"ANNOUNCE_MESSAGE\";\n\nconst SET_CHAT_MESSAGES_PROPERTY = \"SET_CHAT_MESSAGES_PROPERTY\";\n\nconst RESTART_CONVERSATION = \"RESTART_CONVERSATION\";\n\nconst ACCEPTED_DISCLAIMER = \"ACCEPTED_DISCLAIMER\";\n\nconst ADD_MESSAGE = \"ADD_MESSAGE\";\n\nconst UPDATE_HOME_SCREEN_CONFIG = \"UPDATE_HOME_SCREEN_CONFIG\";\n\nconst UPDATE_HAS_SENT_NON_WELCOME_MESSAGE = \"UPDATE_HAS_SENT_NON_WELCOME_MESSAGE\";\n\nconst UPDATE_PERSISTED_CHAT_STATE = \"UPDATE_PERSISTED_CHAT_STATE\";\n\nconst SET_TOUR_DATA = \"SET_TOUR_DATA\";\n\nconst CLEAR_TOUR_DATA = \"CLEAR_TOUR_DATA\";\n\nconst CHANGE_STEP_IN_TOUR = \"CHANGE_STEP_IN_TOUR\";\n\nconst SET_HOME_SCREEN_IS_OPEN = \"SET_HOME_SCREEN_IS_OPEN\";\n\nconst UPDATE_LAUNCHER_CONFIG = \"UPDATE_LAUNCHER_CONFIG\";\n\nconst UPDATE_MESSAGE = \"UPDATE_MESSAGE\";\n\nconst SET_LAUNCHER_MINIMIZED = \"SET_LAUNCHER_MINIMIZED\";\n\nconst CLOSE_IFRAME_PANEL = \"CLOSE_IFRAME_PANEL\";\n\nconst OPEN_IFRAME_CONTENT = \"OPEN_IFRAME_CONTENT\";\n\nconst SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN = \"SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN\";\n\nconst SET_CUSTOM_PANEL_OPTIONS = \"SET_CUSTOM_PANEL_OPTIONS\";\n\nconst SET_CUSTOM_PANEL_OPEN = \"SET_CUSTOM_PANEL_OPEN\";\n\nconst TOGGLE_HOME_SCREEN = \"GO_BACK_TO_HOME\";\n\nconst UPDATE_INPUT_STATE = \"UPDATE_INPUT_STATE\";\n\nconst SET_IS_BROWSER_PAGE_VISIBLE = \"SET_IS_PAGE_VISIBLE\";\n\nconst ADD_INPUT_FILE = \"ADD_INPUT_FILE\";\n\nconst CLEAR_INPUT_FILES = \"CLEAR_INPUT_FILES\";\n\nconst REMOVE_INPUT_FILE = \"REMOVE_INPUT_FILE\";\n\nconst REMOVE_LOCAL_MESSAGE_ITEM = \"REMOVE_LOCAL_MESSAGE_ITEM\";\n\nconst FILE_UPLOAD_INPUT_ERROR = \"FILE_UPLOAD_INPUT_ERROR\";\n\nconst ADD_NESTED_MESSAGES = \"ADD_NESTED_MESSAGES\";\n\nconst SET_RESPONSE_PANEL_IS_OPEN = \"SET_RESPONSE_PANEL_IS_OPEN\";\n\nconst SET_RESPONSE_PANEL_CONTENT = \"SET_PANEL_RESPONSE_CONTENT\";\n\nconst STREAMING_ADD_CHUNK = \"STREAMING_ADD_CHUNK\";\n\nconst STREAMING_START = \"STREAMING_START\";\n\nconst STREAMING_MERGE_HISTORY = \"STREAMING_MERGE_HISTORY\";\n\nconst ADD_NOTIFICATION = \"ADD_NOTIFICATION\";\n\nconst REMOVE_ALL_NOTIFICATIONS = \"REMOVE_ALL_NOTIFICATIONS\";\n\nconst REMOVE_NOTIFICATIONS = \"REMOVE_NOTIFICATIONS\";\n\nconst UPDATE_CHAT_HEADER_CONFIG = \"UPDATE_CHAT_HEADER_CONFIG\";\n\nconst UPDATE_MAX_VISIBLE_HEADER_OBJECTS = \"UPDATE_MAX_VISIBLE_HEADER_OBJECTS\";\n\nconst SET_STOP_STREAMING_BUTTON_VISIBLE = \"SET_STOP_STREAMING_BUTTON_VISIBLE\";\n\nconst SET_STOP_STREAMING_BUTTON_DISABLED = \"SET_STOP_STREAMING_BUTTON_DISABLED\";\n\nconst SET_STREAM_ID = \"SET_STREAM_ID\";\n\nconst UPDATE_MAIN_HEADER_AVATAR = \"UPDATE_MAIN_HEADER_AVATAR\";\n\nconst actions = {\n  changeState(partialState) {\n    return {\n      type: CHANGE_STATE,\n      partialState: partialState\n    };\n  },\n  chatWasHydrated() {\n    return {\n      type: HYDRATE_CHAT\n    };\n  },\n  hydrateMessageHistory(messageHistory) {\n    return {\n      type: HYDRATE_MESSAGE_HISTORY,\n      messageHistory: messageHistory\n    };\n  },\n  removeMessages(messageIDs) {\n    return {\n      type: REMOVE_MESSAGES,\n      messageIDs: messageIDs\n    };\n  },\n  restartConversation() {\n    return {\n      type: RESTART_CONVERSATION\n    };\n  },\n  addLocalMessageItem(messageItem, message, addMessage, addAfterID) {\n    return {\n      type: ADD_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem,\n      message: message,\n      addMessage: addMessage,\n      addAfterID: addAfterID\n    };\n  },\n  addMessage(message) {\n    return {\n      type: ADD_MESSAGE,\n      message: message\n    };\n  },\n  updateLocalMessageItem(messageItem) {\n    return {\n      type: UPDATE_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem\n    };\n  },\n  updateMessage(message) {\n    return {\n      type: UPDATE_MESSAGE,\n      message: message\n    };\n  },\n  messageSetOptionSelected(messageID, sentMessage) {\n    return {\n      type: MESSAGE_SET_OPTION_SELECTED,\n      messageID: messageID,\n      sentMessage: sentMessage\n    };\n  },\n  updatePersistedChatState(chatState) {\n    return {\n      type: UPDATE_PERSISTED_CHAT_STATE,\n      chatState: chatState\n    };\n  },\n  setTourData(newActiveTourMessageID) {\n    return {\n      type: SET_TOUR_DATA,\n      newActiveTourMessageID: newActiveTourMessageID\n    };\n  },\n  clearTourData() {\n    return {\n      type: CLEAR_TOUR_DATA\n    };\n  },\n  changeStepInTour(newStepNumber) {\n    return {\n      type: CHANGE_STEP_IN_TOUR,\n      newStepNumber: newStepNumber\n    };\n  },\n  updateHasSentNonWelcomeMessage(hasSentNonWelcomeMessage) {\n    return {\n      type: UPDATE_HAS_SENT_NON_WELCOME_MESSAGE,\n      hasSentNonWelcomeMessage: hasSentNonWelcomeMessage\n    };\n  },\n  setAppStateValue(key, value) {\n    return {\n      type: SET_APP_STATE_VALUE,\n      key: key,\n      value: value\n    };\n  },\n  addIsTypingCounter(addToIsTyping) {\n    return {\n      type: ADD_IS_TYPING_COUNTER,\n      addToIsTyping: addToIsTyping\n    };\n  },\n  addIsLoadingCounter(addToIsLoading) {\n    return {\n      type: ADD_IS_LOADING_COUNTER,\n      addToIsLoading: addToIsLoading\n    };\n  },\n  addIsHydratingCounter(addToIsHydrating) {\n    return {\n      type: ADD_IS_HYDRATING_COUNTER,\n      addToIsHydrating: addToIsHydrating\n    };\n  },\n  updateBotName(name) {\n    return {\n      type: UPDATE_BOT_NAME,\n      name: name\n    };\n  },\n  updateMainHeaderTitle(title) {\n    return {\n      type: UPDATE_MAIN_HEADER_TITLE,\n      title: title\n    };\n  },\n  updateBotAvatarURL(url) {\n    return {\n      type: UPDATE_BOT_AVATAR_URL,\n      url: url\n    };\n  },\n  updateCSSVariables(variables, publicVars, whiteLabelVariables) {\n    return {\n      type: UPDATE_CSS_VARIABLES,\n      variables: variables,\n      publicVars: publicVars,\n      whiteLabelVariables: whiteLabelVariables\n    };\n  },\n  updateHomeScreenConfig(homeScreenConfig) {\n    return {\n      type: UPDATE_HOME_SCREEN_CONFIG,\n      homeScreenConfig: homeScreenConfig\n    };\n  },\n  setViewState(viewState) {\n    return {\n      type: SET_VIEW_STATE,\n      viewState: viewState\n    };\n  },\n  setViewChanging(viewChanging) {\n    return {\n      type: SET_VIEW_CHANGING,\n      viewChanging: viewChanging\n    };\n  },\n  setInitialViewChangeComplete(changeComplete) {\n    return {\n      type: SET_INITIAL_VIEW_CHANGE_COMPLETE,\n      changeComplete: changeComplete\n    };\n  },\n  setMessageUIProperty(localMessageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_UI_PROPERTY,\n      localMessageID: localMessageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherProperty(propertyName, propertyValue) {\n    return {\n      type: SET_LAUNCHER_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherConfigProperty(propertyName, propertyValue, launcherType) {\n    return {\n      type: SET_LAUNCHER_CONFIG_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue,\n      launcherType: launcherType\n    };\n  },\n  setMessageHistoryProperty(messageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_HISTORY_PROPERTY,\n      messageID: messageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setMessageUIStateInternalProperty(messageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY,\n      messageID: messageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  mergeMessageHistory(messageID, history) {\n    return {\n      type: MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  setMessageErrorState(messageID, errorState) {\n    return actions.setMessageHistoryProperty(messageID, \"error_state\", errorState);\n  },\n  setMessageWasAnnounced(messageID) {\n    return actions.setMessageUIProperty(messageID, \"needsAnnouncement\", false);\n  },\n  announceMessage(message) {\n    return {\n      type: ANNOUNCE_MESSAGE,\n      message: message\n    };\n  },\n  setChatMessagesStateProperty(propertyName, propertyValue) {\n    return {\n      type: SET_CHAT_MESSAGES_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  addNotification(notification) {\n    const notificationID = uuid();\n    return {\n      type: ADD_NOTIFICATION,\n      notificationID: notificationID,\n      notification: notification\n    };\n  },\n  removeNotifications({groupID: groupID, notificationID: notificationID}) {\n    return {\n      type: REMOVE_NOTIFICATIONS,\n      groupID: groupID,\n      notificationID: notificationID\n    };\n  },\n  removeAllNotifications() {\n    return {\n      type: REMOVE_ALL_NOTIFICATIONS\n    };\n  },\n  acceptDisclaimer() {\n    return {\n      type: ACCEPTED_DISCLAIMER\n    };\n  },\n  setHomeScreenIsOpen(isOpen) {\n    return {\n      type: SET_HOME_SCREEN_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  updateLauncherConfig(launcherConfig) {\n    return {\n      type: UPDATE_LAUNCHER_CONFIG,\n      launcherConfig: launcherConfig\n    };\n  },\n  setLauncherMinimized() {\n    return {\n      type: SET_LAUNCHER_MINIMIZED\n    };\n  },\n  closeIFramePanel() {\n    return {\n      type: CLOSE_IFRAME_PANEL\n    };\n  },\n  setIFrameContent(messageItem) {\n    return {\n      type: OPEN_IFRAME_CONTENT,\n      messageItem: messageItem\n    };\n  },\n  setViewSourcePanelIsOpen(isOpen, citationItem, relatedSearchResult) {\n    return {\n      type: SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN,\n      isOpen: isOpen,\n      citationItem: citationItem,\n      relatedSearchResult: relatedSearchResult\n    };\n  },\n  setCustomPanelConfigOptions(options) {\n    return {\n      type: SET_CUSTOM_PANEL_OPTIONS,\n      options: options\n    };\n  },\n  setCustomPanelOpen(isOpen) {\n    return {\n      type: SET_CUSTOM_PANEL_OPEN,\n      isOpen: isOpen\n    };\n  },\n  toggleHomeScreen() {\n    return {\n      type: TOGGLE_HOME_SCREEN\n    };\n  },\n  updateInputState(newState, isInputToHumanAgent) {\n    return {\n      type: UPDATE_INPUT_STATE,\n      newState: newState,\n      isInputToHumanAgent: isInputToHumanAgent\n    };\n  },\n  setIsBrowserPageVisible(isVisible) {\n    return {\n      type: SET_IS_BROWSER_PAGE_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  addInputFile(file, isInputToHumanAgent) {\n    return {\n      type: ADD_INPUT_FILE,\n      file: file,\n      isInputToHumanAgent: isInputToHumanAgent\n    };\n  },\n  removeFileUpload(fileID, isInputToHumanAgent) {\n    return {\n      type: REMOVE_INPUT_FILE,\n      fileID: fileID,\n      isInputToHumanAgent: isInputToHumanAgent\n    };\n  },\n  removeLocalMessageItem(localMessageItemID) {\n    return {\n      type: REMOVE_LOCAL_MESSAGE_ITEM,\n      localMessageItemID: localMessageItemID\n    };\n  },\n  fileUploadInputError(fileID, errorMessage, isInputToHumanAgent) {\n    return {\n      type: FILE_UPLOAD_INPUT_ERROR,\n      fileID: fileID,\n      errorMessage: errorMessage,\n      isInputToHumanAgent: isInputToHumanAgent\n    };\n  },\n  clearInputFiles(isInputToHumanAgent) {\n    return {\n      type: CLEAR_INPUT_FILES,\n      isInputToHumanAgent: isInputToHumanAgent\n    };\n  },\n  addNestedMessages(localMessageItems) {\n    return {\n      type: ADD_NESTED_MESSAGES,\n      localMessageItems: localMessageItems\n    };\n  },\n  setResponsePanelIsOpen(isOpen) {\n    return {\n      type: SET_RESPONSE_PANEL_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  setResponsePanelContent(localMessageItem, isMessageForInput = false) {\n    return {\n      type: SET_RESPONSE_PANEL_CONTENT,\n      localMessageItem: localMessageItem,\n      isMessageForInput: isMessageForInput\n    };\n  },\n  streamingStart(messageID) {\n    return {\n      type: STREAMING_START,\n      messageID: messageID\n    };\n  },\n  streamingMergeHistory(messageID, history) {\n    return {\n      type: STREAMING_MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  streamingAddChunk(fullMessageID, chunkItem, isCompleteItem, disableFadeAnimation) {\n    return {\n      type: STREAMING_ADD_CHUNK,\n      fullMessageID: fullMessageID,\n      chunkItem: chunkItem,\n      isCompleteItem: isCompleteItem,\n      disableFadeAnimation: disableFadeAnimation\n    };\n  },\n  updateChatHeaderConfig(chatHeaderConfig) {\n    return {\n      type: UPDATE_CHAT_HEADER_CONFIG,\n      chatHeaderConfig: chatHeaderConfig\n    };\n  },\n  setMaxVisibleHeaderObjects(maxTotal) {\n    return {\n      type: UPDATE_MAX_VISIBLE_HEADER_OBJECTS,\n      maxTotal: maxTotal\n    };\n  },\n  setStopStreamingButtonVisible(isVisible) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  setStopStreamingButtonDisabled(isDisabled) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_DISABLED,\n      isDisabled: isDisabled\n    };\n  },\n  setStreamID(currentStreamID) {\n    return {\n      type: SET_STREAM_ID,\n      currentStreamID: currentStreamID\n    };\n  },\n  updateMainHeaderAvatar(config) {\n    return {\n      type: UPDATE_MAIN_HEADER_AVATAR,\n      config: config\n    };\n  }\n};\n\nexport { UPDATE_HAS_SENT_NON_WELCOME_MESSAGE as $, ADD_NESTED_MESSAGES as A, SET_LAUNCHER_CONFIG_PROPERTY as B, CLEAR_INPUT_FILES as C, SET_LAUNCHER_PROPERTY as D, UPDATE_LAUNCHER_CONFIG as E, FILE_UPLOAD_INPUT_ERROR as F, SET_HOME_SCREEN_IS_OPEN as G, ACCEPTED_DISCLAIMER as H, ANNOUNCE_MESSAGE as I, SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY as J, SET_MESSAGE_HISTORY_PROPERTY as K, SET_MESSAGE_UI_PROPERTY as L, MERGE_HISTORY as M, UPDATE_HOME_SCREEN_CONFIG as N, OPEN_IFRAME_CONTENT as O, UPDATE_CSS_VARIABLES as P, UPDATE_MAIN_HEADER_TITLE as Q, REMOVE_ALL_NOTIFICATIONS as R, SET_STREAM_ID as S, TOGGLE_HOME_SCREEN as T, UPDATE_MAIN_HEADER_AVATAR as U, UPDATE_LAUNCHER_AVATAR_URL as V, UPDATE_BOT_AVATAR_URL as W, UPDATE_BOT_NAME as X, SET_INITIAL_VIEW_CHANGE_COMPLETE as Y, SET_VIEW_CHANGING as Z, SET_VIEW_STATE as _, actions as a, UPDATE_PERSISTED_CHAT_STATE as a0, SET_APP_STATE_VALUE as a1, ADD_IS_HYDRATING_COUNTER as a2, ADD_IS_LOADING_COUNTER as a3, ADD_IS_TYPING_COUNTER as a4, MESSAGE_SET_OPTION_SELECTED as a5, ADD_MESSAGE as a6, UPDATE_MESSAGE as a7, UPDATE_LOCAL_MESSAGE_ITEM as a8, REMOVE_MESSAGES as a9, ADD_LOCAL_MESSAGE_ITEM as aa, HYDRATE_MESSAGE_HISTORY as ab, RESTART_CONVERSATION as ac, HYDRATE_CHAT as ad, CHANGE_STATE as ae, SET_STOP_STREAMING_BUTTON_DISABLED as b, SET_STOP_STREAMING_BUTTON_VISIBLE as c, UPDATE_MAX_VISIBLE_HEADER_OBJECTS as d, UPDATE_CHAT_HEADER_CONFIG as e, STREAMING_ADD_CHUNK as f, STREAMING_MERGE_HISTORY as g, STREAMING_START as h, SET_RESPONSE_PANEL_CONTENT as i, SET_RESPONSE_PANEL_IS_OPEN as j, REMOVE_NOTIFICATIONS as k, ADD_NOTIFICATION as l, REMOVE_LOCAL_MESSAGE_ITEM as m, REMOVE_INPUT_FILE as n, ADD_INPUT_FILE as o, SET_IS_BROWSER_PAGE_VISIBLE as p, UPDATE_INPUT_STATE as q, CHANGE_STEP_IN_TOUR as r, CLEAR_TOUR_DATA as s, SET_TOUR_DATA as t, SET_CUSTOM_PANEL_OPTIONS as u, SET_CUSTOM_PANEL_OPEN as v, SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN as w, CLOSE_IFRAME_PANEL as x, SET_LAUNCHER_MINIMIZED as y, SET_CHAT_MESSAGES_PROPERTY as z };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport merge from \"lodash-es/merge.js\";\n\nimport { d as deepFreeze, o as outputItemToLocalItem, u as updateFilesUploadInProgress, t as setIsConnecting, v as endChat, i as inputItemToLocalItem, b as createLocalMessageForInlineError, w as setIsScreenSharing, x as setIsReconnecting, y as setShowScreenShareRequest, z as updateCapabilities, A as setAgentAvailability, B as setHumanAgentJoined, C as agentUpdateIsTyping, D as setHumanAgentLeftChat, r as resolvablePromise, E as setPersistedServiceDeskState } from \"./chat.resolvablePromise.js\";\n\nimport { a as actions } from \"./chat.actions.js\";\n\nimport { E as ErrorType, S as ScreenShareState, M as MessageErrorState, H as HumanAgentsOnlineStatus } from \"./chat.LocalMessageItem.js\";\n\nimport \"./chat.constants.js\";\n\nimport { e as debugLog, b as consoleError, r as resolveOrTimeout } from \"./chat.miscUtils.js\";\n\nimport { s as asyncForEach, J as createMessageResponseForItem, k as createMessageRequestForText, K as createMessageRequestForFileUpload, m as createMessageResponseForText, l as addDefaultsToMessage } from \"./chat.messageUtils.js\";\n\nimport { B as BusEventType } from \"./chat.customElement.js\";\n\nimport { e as conditionalSetTimeout } from \"./chat.browserUtils.js\";\n\nimport { H as HumanAgentMessageType, e as MessageResponseTypes, F as FileStatusValue } from \"./chat.dynamic-imports.js\";\n\nimport \"./chat.uuid.js\";\n\nimport \"uuid\";\n\nimport \"detect-browser\";\n\nimport \"memoize-one\";\n\nimport \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function getHumanAgentStatusMessageText(agentMessageType, responseUserProfile, intl) {\n  const name = responseUserProfile?.nickname;\n  let messageKey;\n  switch (agentMessageType) {\n   case HumanAgentMessageType.HUMAN_AGENT_JOINED:\n    {\n      messageKey = name ? \"agent_agentJoinedName\" : \"agent_agentJoinedNoName\";\n      break;\n    }\n\n   case HumanAgentMessageType.RELOAD_WARNING:\n    {\n      messageKey = \"agent_youConnectedWarning\";\n      break;\n    }\n\n   case HumanAgentMessageType.HUMAN_AGENT_LEFT_CHAT:\n    {\n      messageKey = name ? \"agent_agentLeftChat\" : \"agent_agentLeftChatNoName\";\n      break;\n    }\n\n   case HumanAgentMessageType.HUMAN_AGENT_ENDED_CHAT:\n    {\n      messageKey = name ? \"agent_agentEndedChat\" : \"agent_agentEndedChatNoName\";\n      break;\n    }\n\n   case HumanAgentMessageType.TRANSFER_TO_HUMAN_AGENT:\n    {\n      messageKey = name ? \"agent_transferring\" : \"agent_transferringNoName\";\n      break;\n    }\n\n   case HumanAgentMessageType.USER_ENDED_CHAT:\n    {\n      messageKey = \"agent_youEndedChat\";\n      break;\n    }\n\n   case HumanAgentMessageType.CHAT_WAS_ENDED:\n    {\n      messageKey = \"agent_conversationWasEnded\";\n      break;\n    }\n\n   case HumanAgentMessageType.DISCONNECTED:\n    {\n      messageKey = \"agent_disconnected\";\n      break;\n    }\n\n   case HumanAgentMessageType.RECONNECTED:\n    {\n      messageKey = \"agent_reconnected\";\n      break;\n    }\n\n   case HumanAgentMessageType.SHARING_REQUESTED:\n    {\n      messageKey = \"agent_sharingRequested\";\n      break;\n    }\n\n   case HumanAgentMessageType.SHARING_ACCEPTED:\n    {\n      messageKey = \"agent_sharingAccepted\";\n      break;\n    }\n\n   case HumanAgentMessageType.SHARING_DECLINED:\n    {\n      messageKey = \"agent_sharingDeclined\";\n      break;\n    }\n\n   case HumanAgentMessageType.SHARING_CANCELLED:\n    {\n      messageKey = \"agent_sharingCancelled\";\n      break;\n    }\n\n   case HumanAgentMessageType.SHARING_ENDED:\n    {\n      messageKey = \"agent_sharingEnded\";\n      break;\n    }\n\n   default:\n    return \"\";\n  }\n  return messageKey && intl.formatMessage({\n    id: messageKey\n  }, {\n    personName: name\n  });\n}\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function toPair(localMessages, originalMessage) {\n  return {\n    localMessages: localMessages,\n    originalMessage: originalMessage\n  };\n}\n\nasync function createHumanAgentLocalMessage(agentMessageType, serviceManager, responseUserProfile, fireEvents = true) {\n  const text = getHumanAgentStatusMessageText(agentMessageType, responseUserProfile, serviceManager.intl);\n  const result = createHumanAgentLocalMessageForType(agentMessageType);\n  const {originalMessage: originalMessage, localMessage: localMessage} = result;\n  localMessage.item.text = text;\n  if (responseUserProfile) {\n    if (!originalMessage.history) {\n      originalMessage.history = {};\n    }\n    originalMessage.history.response_user_profile = responseUserProfile;\n  }\n  if (fireEvents) {\n    await serviceManager.fire({\n      type: BusEventType.HUMAN_AGENT_PRE_RECEIVE,\n      data: originalMessage\n    });\n  }\n  deepFreeze(originalMessage);\n  if (fireEvents) {\n    await serviceManager.fire({\n      type: BusEventType.HUMAN_AGENT_RECEIVE,\n      data: originalMessage\n    });\n  }\n  return result;\n}\n\nfunction createHumanAgentLocalMessageForType(agentMessageType) {\n  const messageItem = {\n    response_type: MessageResponseTypes.TEXT,\n    agent_message_type: agentMessageType\n  };\n  const originalMessage = createMessageResponseForItem(messageItem);\n  const localMessage = outputItemToLocalItem(messageItem, originalMessage);\n  return {\n    localMessage: localMessage,\n    originalMessage: originalMessage\n  };\n}\n\nfunction createBotReturnMessage(languagePack) {\n  const {agent_botReturned: agent_botReturned} = languagePack;\n  if (!agent_botReturned) {\n    return null;\n  }\n  const {originalMessage: originalMessage, localMessage: localMessage} = createHumanAgentLocalMessageForType(null);\n  localMessage.item.text = agent_botReturned;\n  return {\n    originalMessage: originalMessage,\n    localMessage: localMessage\n  };\n}\n\nasync function addMessages(messagePairs, saveInHistory, fireHistoryEvent, showLiveMessages, serviceManager) {\n  if (showLiveMessages) {\n    await asyncForEach(messagePairs, async ({localMessages: localMessages, originalMessage: originalMessage}) => {\n      await asyncForEach(localMessages, async (localMessage, index) => {\n        await serviceManager.actions.handleUserDefinedResponseItems(localMessage, originalMessage);\n        serviceManager.store.dispatch(actions.addLocalMessageItem(localMessage, originalMessage, index === 0));\n      });\n    });\n  }\n}\n\nasync function addBotReturnMessage(botReturnDelay, wasSuspended, serviceManager) {\n  const botReturn = createBotReturnMessage(serviceManager.store.getState().languagePack);\n  if (botReturn) {\n    const initialRestartCount = serviceManager.restartCount;\n    conditionalSetTimeout(() => {\n      if (initialRestartCount === serviceManager.restartCount) {\n        addMessages([ toPair([ botReturn.localMessage ], botReturn.originalMessage) ], true, false, !wasSuspended, serviceManager);\n      }\n    }, botReturnDelay);\n  }\n}\n\nasync function addHumanAgentEndChatMessage(agentMessageType, responseUserProfile, fireEvents, wasSuspended, serviceManager) {\n  const endChatMessage = await createHumanAgentLocalMessage(agentMessageType, serviceManager, responseUserProfile, fireEvents);\n  await addMessages([ toPair([ endChatMessage.localMessage ], endChatMessage.originalMessage) ], true, false, !wasSuspended, serviceManager);\n}\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const SEND_TIMEOUT_WARNING_MS = 3e3;\n\nconst SEND_TIMEOUT_ERROR_MS = 2e4;\n\nconst END_CHAT_TIMEOUT_MS = 5e3;\n\nconst AVAILABILITY_TIMEOUT_MS = 5e3;\n\nconst BOT_RETURN_DELAY = 1500;\n\nconst {FROM_USER: FROM_USER, RECONNECTED: RECONNECTED, DISCONNECTED: DISCONNECTED, HUMAN_AGENT_ENDED_CHAT: HUMAN_AGENT_ENDED_CHAT, HUMAN_AGENT_JOINED: HUMAN_AGENT_JOINED, USER_ENDED_CHAT: USER_ENDED_CHAT, CHAT_WAS_ENDED: CHAT_WAS_ENDED, TRANSFER_TO_HUMAN_AGENT: TRANSFER_TO_HUMAN_AGENT, HUMAN_AGENT_LEFT_CHAT: HUMAN_AGENT_LEFT_CHAT, RELOAD_WARNING: RELOAD_WARNING, SHARING_CANCELLED: SHARING_CANCELLED, SHARING_DECLINED: SHARING_DECLINED, SHARING_ACCEPTED: SHARING_ACCEPTED, SHARING_REQUESTED: SHARING_REQUESTED, SHARING_ENDED: SHARING_ENDED} = HumanAgentMessageType;\n\nclass HumanAgentServiceImpl {\n  constructor(serviceManager) {\n    this.chatStarted = false;\n    this.showingDisconnectedError = false;\n    this.isHumanAgentTyping = false;\n    this.uploadingFiles = new Set;\n    this.showLeaveWarning = true;\n    this.serviceManager = serviceManager;\n  }\n  getCustomServiceDeskName() {\n    return this.serviceManager.store.getState().config.public.serviceDeskFactory ? this.serviceDesk.getName?.() : undefined;\n  }\n  async initialize() {\n    if (this.serviceDesk) {\n      throw new Error(\"A service desk has already been created!\");\n    }\n    const {store: store, instance: instance} = this.serviceManager;\n    const state = store.getState();\n    const {config: config, persistedToBrowserStorage: persistedToBrowserStorage} = state;\n    const serviceDeskState = cloneDeep(persistedToBrowserStorage.chatState.humanAgentState.serviceDeskState);\n    this.serviceDeskCallback = new ServiceDeskCallbackImpl(this.serviceManager, this);\n    if (config.public.serviceDeskFactory) {\n      const parameters = {\n        callback: this.serviceDeskCallback,\n        instance: instance,\n        persistedState: serviceDeskState\n      };\n      this.serviceDesk = await config.public.serviceDeskFactory(parameters);\n      validateCustomServiceDesk(this.serviceDesk);\n      debugLog(\"Initializing a custom service desk\");\n    }\n    this.showLeaveWarning = !this.serviceDesk?.reconnect;\n  }\n  async startChat(localConnectMessage, originalMessage) {\n    if (!this.serviceDesk) {\n      throw new Error(\"A service desk has not been configured.\");\n    }\n    if (this.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState.isSuspended) {\n      await this.endChat(true, true, false);\n    }\n    if (this.chatStarted) {\n      throw new Error(\"A chat is already running. A call to endChat must be made before a new chat can start.\");\n    }\n    const {serviceManager: serviceManager} = this;\n    try {\n      this.chatStarted = true;\n      this.isHumanAgentTyping = false;\n      this.uploadingFiles.clear();\n      this.serviceManager.store.dispatch(updateFilesUploadInProgress(this.uploadingFiles.size > 0));\n      const event = {\n        type: BusEventType.HUMAN_AGENT_PRE_START_CHAT,\n        message: originalMessage\n      };\n      await serviceManager.fire(event);\n      if (event.cancelStartChat) {\n        this.chatStarted = false;\n        await this.fireEndChat(false, true);\n        serviceManager.store.dispatch(setIsConnecting(false, null));\n        return;\n      }\n      const agentJoinTimeout = serviceManager.store.getState().config.public.serviceDesk?.agentJoinTimeoutSeconds;\n      if (agentJoinTimeout) {\n        this.waitingForHumanAgentJoinedTimer = setTimeout(() => this.handleHumanAgentJoinedTimeout(), agentJoinTimeout * 1e3);\n      }\n      serviceManager.store.dispatch(setIsConnecting(true, localConnectMessage.ui_state.id));\n      await this.serviceDesk.startChat(originalMessage, {\n        preStartChatPayload: event.preStartChatPayload\n      });\n    } catch (error) {\n      consoleError(\"[startChat] An error with the service desk occurred.\", error);\n      if (this.serviceDeskCallback) {\n        await this.serviceDeskCallback.setErrorStatus({\n          type: ErrorType.CONNECTING,\n          logInfo: error\n        });\n      }\n      serviceManager.store.dispatch(setIsConnecting(false, null));\n      this.chatStarted = false;\n      this.cancelHumanAgentJoinedTimer();\n      throw error;\n    }\n  }\n  async firePreEndChat(endedByHumanAgent) {\n    const event = {\n      type: BusEventType.HUMAN_AGENT_PRE_END_CHAT,\n      endedByHumanAgent: endedByHumanAgent,\n      preEndChatPayload: null,\n      cancelEndChat: false\n    };\n    await this.serviceManager.fire(event);\n    return event;\n  }\n  async fireEndChat(endedByHumanAgent, requestCancelled) {\n    await this.serviceManager.fire({\n      type: BusEventType.HUMAN_AGENT_END_CHAT,\n      endedByHumanAgent: endedByHumanAgent,\n      requestCancelled: requestCancelled\n    });\n  }\n  async endChat(endedByUser, showHumanAgentLeftMessage = true, showBotReturnMessage = true) {\n    if (!this.chatStarted || !this.serviceDesk) {\n      return;\n    }\n    const {isConnected: isConnected} = this.persistedHumanAgentState();\n    let event;\n    if (isConnected) {\n      event = await this.firePreEndChat(false);\n      if (event.cancelEndChat) {\n        return;\n      }\n    }\n    const endMessageType = endedByUser ? USER_ENDED_CHAT : CHAT_WAS_ENDED;\n    await this.doEndChat(false, event?.preEndChatPayload, showHumanAgentLeftMessage, showBotReturnMessage, endMessageType);\n  }\n  async doEndChat(endedByHumanAgent, preEndChatPayload, showHumanAgentLeftMessage, showBotReturnMessage, agentEndChatMessageType) {\n    const {isConnected: isConnected} = this.persistedHumanAgentState();\n    const wasSuspended = this.isSuspended();\n    this.cancelHumanAgentJoinedTimer();\n    this.closeScreenShareRequestModal(ScreenShareState.CANCELLED);\n    try {\n      await resolveOrTimeout(this.serviceDesk.endChat({\n        endedByHumanAgent: endedByHumanAgent,\n        preEndChatPayload: preEndChatPayload\n      }), END_CHAT_TIMEOUT_MS);\n    } catch (error) {\n      consoleError(\"[doEndChat] An error with the service desk occurred.\", error);\n    }\n    if (isConnected && showHumanAgentLeftMessage) {\n      const {responseUserProfile: responseUserProfile} = this.persistedHumanAgentState();\n      await addHumanAgentEndChatMessage(agentEndChatMessageType, responseUserProfile, true, wasSuspended, this.serviceManager);\n    }\n    this.chatStarted = false;\n    this.isHumanAgentTyping = false;\n    this.serviceManager.store.dispatch(endChat());\n    await this.fireEndChat(endedByHumanAgent, !isConnected);\n    if (isConnected && showBotReturnMessage) {\n      await addBotReturnMessage(BOT_RETURN_DELAY, wasSuspended, this.serviceManager);\n    }\n  }\n  async sendMessageToAgent(text, uploads) {\n    if (!this.serviceDesk || !this.chatStarted) {\n      return;\n    }\n    const {serviceManager: serviceManager} = this;\n    deepFreeze(uploads);\n    const originalMessage = createMessageRequestForText(text);\n    originalMessage.input.agent_message_type = FROM_USER;\n    await serviceManager.fire({\n      type: BusEventType.HUMAN_AGENT_PRE_SEND,\n      data: originalMessage,\n      files: uploads\n    });\n    const textMessage = inputItemToLocalItem(originalMessage, originalMessage.input.text);\n    const localMessageID = textMessage.ui_state.id;\n    const pairs = [];\n    if (textMessage.item.text) {\n      pairs.push(toPair([ textMessage ], originalMessage));\n    }\n    uploads.forEach(upload => {\n      const uploadOriginalMessage = createMessageRequestForFileUpload(upload);\n      const uploadLocalMessage = inputItemToLocalItem(uploadOriginalMessage, uploadOriginalMessage.input.text, upload.id);\n      pairs.push(toPair([ uploadLocalMessage ], uploadOriginalMessage));\n      this.uploadingFiles.add(upload.id);\n    });\n    this.serviceManager.store.dispatch(updateFilesUploadInProgress(this.uploadingFiles.size > 0));\n    await addMessages(pairs, true, true, !this.isSuspended(), serviceManager);\n    let messageSucceeded = false;\n    let messageFailed = false;\n    setTimeout(() => {\n      if (!messageSucceeded && !messageFailed) {\n        this.setMessageErrorState(textMessage.fullMessageID, MessageErrorState.RETRYING);\n      }\n    }, SEND_TIMEOUT_WARNING_MS);\n    setTimeout(() => {\n      if (!messageSucceeded) {\n        this.setMessageErrorState(textMessage.fullMessageID, MessageErrorState.FAILED);\n      }\n    }, SEND_TIMEOUT_ERROR_MS);\n    const additionalData = {\n      filesToUpload: uploads\n    };\n    try {\n      await this.serviceDesk.sendMessageToAgent(originalMessage, localMessageID, additionalData);\n      messageSucceeded = true;\n      this.setMessageErrorState(textMessage.fullMessageID, MessageErrorState.NONE);\n      await serviceManager.fire({\n        type: BusEventType.HUMAN_AGENT_SEND,\n        data: originalMessage,\n        files: uploads\n      });\n    } catch (error) {\n      messageFailed = true;\n      consoleError(\"[sendMessageToAgent] An error with the service desk occurred.\", error);\n      this.setMessageErrorState(textMessage.fullMessageID, MessageErrorState.FAILED);\n    }\n  }\n  filesSelectedForUpload(uploads) {\n    if (!this.serviceDesk || !this.chatStarted) {\n      return;\n    }\n    try {\n      this.serviceDesk.filesSelectedForUpload?.(uploads);\n    } catch (error) {\n      consoleError(\"[userReadMessages] An error with the service desk occurred.\", error);\n    }\n  }\n  async userReadMessages() {\n    if (!this.serviceDesk || !this.chatStarted) {\n      return;\n    }\n    try {\n      await this.serviceDesk.userReadMessages();\n    } catch (error) {\n      consoleError(\"[userReadMessages] An error with the service desk occurred.\", error);\n    }\n  }\n  async checkAreAnyHumanAgentsOnline(connectMessage) {\n    let resultValue;\n    const initialRestartCount = this.serviceManager.restartCount;\n    if (!this.serviceDesk?.areAnyAgentsOnline) {\n      resultValue = HumanAgentsOnlineStatus.UNKNOWN;\n    } else {\n      try {\n        const timeoutSeconds = this.serviceManager.store.getState().config.public.serviceDesk?.availabilityTimeoutSeconds;\n        const timeout = timeoutSeconds ? timeoutSeconds * 1e3 : AVAILABILITY_TIMEOUT_MS;\n        const result = await resolveOrTimeout(this.serviceDesk.areAnyAgentsOnline(connectMessage), timeout);\n        if (result === true) {\n          resultValue = HumanAgentsOnlineStatus.ONLINE;\n        } else if (result === false) {\n          resultValue = HumanAgentsOnlineStatus.OFFLINE;\n        } else {\n          resultValue = HumanAgentsOnlineStatus.UNKNOWN;\n        }\n      } catch (error) {\n        consoleError(\"Error attempting to get agent availability\", error);\n        resultValue = HumanAgentsOnlineStatus.OFFLINE;\n      }\n    }\n    if (initialRestartCount === this.serviceManager.restartCount) {\n      this.serviceManager.fire({\n        type: BusEventType.HUMAN_AGENT_ARE_ANY_AGENTS_ONLINE,\n        areAnyAgentsOnline: resultValue\n      });\n    }\n    return resultValue;\n  }\n  async userTyping(isTyping) {\n    if (!this.serviceDesk || !this.chatStarted) {\n      return;\n    }\n    try {\n      await (this.serviceDesk.userTyping?.(isTyping));\n    } catch (error) {\n      consoleError(\"[userTyping] An error with the service desk occurred.\", error);\n    }\n  }\n  setMessageErrorState(messageID, errorState) {\n    this.serviceManager.store.dispatch(actions.setMessageErrorState(messageID, errorState));\n  }\n  async handleHumanAgentJoinedTimeout() {\n    const message = this.serviceManager.store.getState().languagePack.errors_noHumanAgentsJoined;\n    const {originalMessage: originalMessage, localMessage: localMessage} = createLocalMessageForInlineError(message);\n    await addMessages([ toPair([ localMessage ], originalMessage) ], true, false, !this.isSuspended(), this.serviceManager);\n    this.endChat(false);\n  }\n  cancelHumanAgentJoinedTimer() {\n    if (this.waitingForHumanAgentJoinedTimer) {\n      clearTimeout(this.waitingForHumanAgentJoinedTimer);\n      this.waitingForHumanAgentJoinedTimer = null;\n    }\n  }\n  async screenShareUpdateRequestState(state) {\n    if (!this.persistedHumanAgentState().isConnected) {\n      return;\n    }\n    this.closeScreenShareRequestModal(state);\n    let agentMessageType;\n    switch (state) {\n     case ScreenShareState.ACCEPTED:\n      agentMessageType = SHARING_ACCEPTED;\n      break;\n\n     case ScreenShareState.DECLINED:\n      agentMessageType = SHARING_DECLINED;\n      break;\n\n     case ScreenShareState.CANCELLED:\n      agentMessageType = SHARING_CANCELLED;\n      break;\n\n     case ScreenShareState.ENDED:\n      agentMessageType = SHARING_ENDED;\n      break;\n\n     default:\n      return;\n    }\n    await this.addHumanAgentLocalMessage(agentMessageType);\n  }\n  async screenShareStop() {\n    this.serviceManager.store.dispatch(setIsScreenSharing(false));\n    await this.addHumanAgentLocalMessage(SHARING_ENDED);\n    await (this.serviceDesk?.screenShareStop?.());\n  }\n  async handleHydration(allowReconnect, allowEndChatMessages) {\n    const {store: store} = this.serviceManager;\n    let didReconnect = false;\n    const {isConnected: isConnected} = this.persistedHumanAgentState();\n    if (isConnected) {\n      this.chatStarted = true;\n      if (allowReconnect && this.serviceDesk?.reconnect) {\n        try {\n          store.dispatch(setIsReconnecting(true));\n          setTimeout(this.serviceManager.appWindow.requestFocus);\n          didReconnect = await this.serviceDesk.reconnect();\n        } catch (error) {\n          consoleError(`Error while trying to reconnect to an agent.`, error);\n        }\n      }\n      store.dispatch(setIsReconnecting(false));\n      if (!this.persistedHumanAgentState().isConnected) {\n        this.chatStarted = false;\n        return;\n      }\n      setTimeout(this.serviceManager.appWindow.requestFocus);\n      if (!didReconnect) {\n        this.chatStarted = false;\n        const wasSuspended = this.isSuspended();\n        store.dispatch(endChat());\n        if (allowEndChatMessages) {\n          const {responseUserProfile: responseUserProfile} = this.persistedHumanAgentState();\n          await addHumanAgentEndChatMessage(HumanAgentMessageType.CHAT_WAS_ENDED, responseUserProfile, false, wasSuspended, this.serviceManager);\n          await addBotReturnMessage(0, wasSuspended, this.serviceManager);\n        }\n      } else {\n        this.showLeaveWarning = false;\n      }\n    }\n  }\n  closeScreenShareRequestModal(state) {\n    this.serviceManager.store.dispatch(setShowScreenShareRequest(false));\n    if (this.screenShareRequestPromise) {\n      this.screenShareRequestPromise.doResolve(state);\n      this.screenShareRequestPromise = null;\n    }\n    this.serviceManager.store.dispatch(setIsScreenSharing(state === ScreenShareState.ACCEPTED));\n  }\n  async addHumanAgentLocalMessage(agentMessageType, responseUserProfile, fireEvents = true, saveInHistory = true) {\n    if (!responseUserProfile) {\n      responseUserProfile = this.persistedHumanAgentState().responseUserProfile;\n    }\n    const {localMessage: localMessage, originalMessage: originalMessage} = await createHumanAgentLocalMessage(agentMessageType, this.serviceManager, responseUserProfile, fireEvents);\n    await addMessages([ toPair([ localMessage ], originalMessage) ], saveInHistory, false, !this.isSuspended(), this.serviceManager);\n  }\n  persistedHumanAgentState() {\n    return this.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState;\n  }\n  isSuspended() {\n    return this.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState.isSuspended;\n  }\n}\n\nclass ServiceDeskCallbackImpl {\n  constructor(serviceManager, service) {\n    this.serviceManager = serviceManager;\n    this.service = service;\n  }\n  updateCapabilities(capabilities) {\n    this.serviceManager.store.dispatch(updateCapabilities(cloneDeep(capabilities)));\n  }\n  async updateAgentAvailability(availability) {\n    if (!this.service.chatStarted) {\n      return;\n    }\n    this.serviceManager.store.dispatch(setAgentAvailability(availability));\n  }\n  async agentJoined(profile) {\n    if (!this.service.chatStarted) {\n      return;\n    }\n    this.service.cancelHumanAgentJoinedTimer();\n    this.serviceManager.store.dispatch(setHumanAgentJoined(profile));\n    await this.service.addHumanAgentLocalMessage(HUMAN_AGENT_JOINED, profile);\n    if (this.service.showLeaveWarning) {\n      await this.service.addHumanAgentLocalMessage(RELOAD_WARNING, null, false, false);\n      this.service.showLeaveWarning = false;\n    }\n  }\n  async agentReadMessages() {\n    if (!this.service.chatStarted) {\n      return;\n    }\n    debugLog(\"[ServiceDeskCallbackImpl] agentReadMessages\");\n  }\n  async agentTyping(isTyping) {\n    if (this.persistedHumanAgentState().isConnected && isTyping !== this.service.isHumanAgentTyping) {\n      this.serviceManager.store.dispatch(agentUpdateIsTyping(isTyping));\n      this.service.isHumanAgentTyping = isTyping;\n    }\n  }\n  async sendMessageToUser(message, agentID) {\n    if (!this.service.chatStarted || !message) {\n      return;\n    }\n    const messageResponse = typeof message === \"string\" ? createMessageResponseForText(message) : message;\n    addDefaultsToMessage(messageResponse);\n    if (messageResponse.output?.generic?.length) {\n      messageResponse.output.generic.forEach(messageItem => {\n        if (!messageItem.agent_message_type) {\n          messageItem.agent_message_type = HumanAgentMessageType.FROM_HUMAN_AGENT;\n        }\n      });\n    }\n    const {serviceManager: serviceManager} = this;\n    let responseUserProfile;\n    if (agentID === undefined) {\n      responseUserProfile = this.persistedHumanAgentState().responseUserProfile;\n    } else {\n      responseUserProfile = this.persistedHumanAgentState().responseUserProfiles[agentID];\n      if (!responseUserProfile) {\n        responseUserProfile = this.persistedHumanAgentState().responseUserProfile;\n        if (responseUserProfile) {\n          consoleError(`Got agent ID ${agentID} but no agent with that ID joined the conversation. Using the current agent instead.`);\n        }\n      }\n    }\n    await serviceManager.fire({\n      type: BusEventType.HUMAN_AGENT_PRE_RECEIVE,\n      data: messageResponse,\n      responseUserProfile: responseUserProfile\n    });\n    messageResponse.history.response_user_profile = responseUserProfile;\n    const localMessages = messageResponse.output.generic.map(item => outputItemToLocalItem(item, messageResponse));\n    await addMessages([ toPair(localMessages, messageResponse) ], true, true, !this.service.isSuspended(), this.serviceManager);\n    await serviceManager.fire({\n      type: BusEventType.HUMAN_AGENT_RECEIVE,\n      data: messageResponse,\n      responseUserProfile: responseUserProfile\n    });\n  }\n  async beginTransferToAnotherAgent(profile) {\n    if (!this.service.chatStarted) {\n      return;\n    }\n    if (profile) {\n      this.serviceManager.store.dispatch(setHumanAgentJoined(profile));\n    }\n    await this.service.addHumanAgentLocalMessage(TRANSFER_TO_HUMAN_AGENT, profile);\n  }\n  async agentLeftChat() {\n    if (!this.service.chatStarted) {\n      return;\n    }\n    await this.service.addHumanAgentLocalMessage(HUMAN_AGENT_LEFT_CHAT);\n    this.service.isHumanAgentTyping = false;\n    this.serviceManager.store.dispatch(setHumanAgentLeftChat());\n  }\n  async agentEndedChat() {\n    if (!this.service.chatStarted) {\n      return;\n    }\n    const event = await this.service.firePreEndChat(true);\n    if (event.cancelEndChat) {\n      return;\n    }\n    await this.service.doEndChat(true, event.preEndChatPayload, true, true, HUMAN_AGENT_ENDED_CHAT);\n  }\n  async setErrorStatus(errorInfo) {\n    if (!this.service.chatStarted) {\n      return;\n    }\n    const {type: type, logInfo: logInfo} = errorInfo;\n    const {store: store} = this.serviceManager;\n    const {isConnecting: isConnecting} = store.getState().humanAgentState;\n    if (logInfo) {\n      consoleError(`An error occurred in the service desk (type=${type})`, logInfo);\n    }\n    if (isConnecting && errorInfo.type === ErrorType.DISCONNECTED && errorInfo.isDisconnected) {\n      errorInfo = {\n        type: ErrorType.CONNECTING\n      };\n    }\n    switch (errorInfo.type) {\n     case ErrorType.DISCONNECTED:\n      {\n        if (errorInfo.isDisconnected) {\n          this.service.showingDisconnectedError = true;\n          await this.service.addHumanAgentLocalMessage(DISCONNECTED, null, true, false);\n          store.dispatch(actions.updateInputState({\n            isReadonly: true\n          }, true));\n        } else if (this.service.showingDisconnectedError) {\n          this.service.showingDisconnectedError = false;\n          await this.service.addHumanAgentLocalMessage(RECONNECTED, null, true, false);\n          store.dispatch(actions.updateInputState({\n            isReadonly: false\n          }, true));\n        }\n        break;\n      }\n\n     case ErrorType.CONNECTING:\n      {\n        const {languagePack: languagePack} = this.serviceManager.store.getState();\n        const message = errorInfo.messageToUser || languagePack.errors_connectingToHumanAgent;\n        const {originalMessage: originalMessage, localMessage: localMessage} = createLocalMessageForInlineError(message);\n        await addMessages([ toPair([ localMessage ], originalMessage) ], true, false, !this.service.isSuspended(), this.serviceManager);\n        this.serviceManager.store.dispatch(setIsConnecting(false, null));\n        this.service.chatStarted = false;\n        this.service.cancelHumanAgentJoinedTimer();\n        await this.service.fireEndChat(false, isConnecting);\n        break;\n      }\n\n     case ErrorType.USER_MESSAGE:\n      {\n        this.service.setMessageErrorState(errorInfo.messageID, MessageErrorState.FAILED);\n        break;\n      }\n    }\n  }\n  async setFileUploadStatus(fileID, isError, errorMessage) {\n    const {store: store} = this.serviceManager;\n    const uploadMessage = store.getState().allMessagesByID[fileID];\n    if (uploadMessage) {\n      ({\n        history: {\n          file_upload_status: FileStatusValue.COMPLETE\n        }\n      });\n      if (isError) {\n        store.dispatch(actions.setMessageHistoryProperty(fileID, \"file_upload_status\", FileStatusValue.COMPLETE));\n        store.dispatch(actions.setMessageHistoryProperty(fileID, \"error_state\", MessageErrorState.FAILED));\n        MessageErrorState.FAILED;\n        if (errorMessage) {\n          const {originalMessage: originalMessage, localMessage: localMessage} = createLocalMessageForInlineError(errorMessage);\n          localMessage.item.agent_message_type = HumanAgentMessageType.INLINE_ERROR;\n          await addMessages([ toPair([ localMessage ], originalMessage) ], true, true, !this.service.isSuspended(), this.serviceManager);\n        }\n      } else {\n        store.dispatch(actions.setMessageHistoryProperty(fileID, \"file_upload_status\", FileStatusValue.SUCCESS));\n        store.dispatch(actions.announceMessage({\n          messageID: \"fileSharing_ariaAnnounceSuccess\"\n        }));\n      }\n    } else if (isError) {\n      store.dispatch(actions.fileUploadInputError(fileID, errorMessage, true));\n    }\n    this.service.uploadingFiles.delete(fileID);\n    this.serviceManager.store.dispatch(updateFilesUploadInProgress(this.service.uploadingFiles.size > 0));\n  }\n  async screenShareRequest() {\n    if (!this.persistedHumanAgentState().isConnected) {\n      return Promise.reject(new Error(\"Cannot request screen sharing if no chat is in progress.\"));\n    }\n    if (!this.service.screenShareRequestPromise) {\n      this.service.screenShareRequestPromise = resolvablePromise();\n      this.serviceManager.store.dispatch(setShowScreenShareRequest(true));\n      await this.service.addHumanAgentLocalMessage(SHARING_REQUESTED);\n    }\n    return this.service.screenShareRequestPromise;\n  }\n  async screenShareEnded() {\n    const wasScreenSharing = this.serviceManager.store.getState().humanAgentState.isScreenSharing;\n    const requestPending = this.service.screenShareRequestPromise;\n    this.service.closeScreenShareRequestModal(ScreenShareState.CANCELLED);\n    if (wasScreenSharing) {\n      this.serviceManager.store.dispatch(setIsScreenSharing(false));\n      await this.service.addHumanAgentLocalMessage(SHARING_ENDED);\n    } else if (requestPending) {\n      await this.service.addHumanAgentLocalMessage(SHARING_CANCELLED);\n    }\n  }\n  persistedHumanAgentState() {\n    return this.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState;\n  }\n  persistedState() {\n    return this.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState.serviceDeskState;\n  }\n  updatePersistedState(state, mergeWithCurrent = true) {\n    const {store: store} = this.serviceManager;\n    let newState;\n    if (mergeWithCurrent) {\n      newState = merge({}, store.getState().persistedToBrowserStorage.chatState.humanAgentState.serviceDeskState, state);\n    } else {\n      newState = cloneDeep(state);\n    }\n    store.dispatch(setPersistedServiceDeskState(deepFreeze(newState)));\n  }\n}\n\nfunction createService(serviceManager) {\n  return new HumanAgentServiceImpl(serviceManager);\n}\n\nfunction validateCustomServiceDesk(serviceDesk) {\n  if (!serviceDesk) {\n    consoleError(\"The custom service desk does not appear to be valid. No service desk was provided.\", serviceDesk);\n  } else if (typeof serviceDesk !== \"object\") {\n    consoleError(`The custom service desk does not appear to be valid. The type should be \"object\" but is \"${typeof serviceDesk}\"`, serviceDesk);\n  } else {\n    const propertyNames = [ \"startChat\", \"endChat\", \"sendMessageToAgent\" ];\n    propertyNames.forEach(propertyName => {\n      const value = serviceDesk[propertyName];\n      if (typeof value !== \"function\") {\n        consoleError(`The custom service desk does not appear to be valid. The type of property \"${propertyName}\"should be \"function\" but is \"${typeof value}\"`, value, serviceDesk);\n      }\n    });\n    const name = serviceDesk.getName?.();\n    if (!name) {\n      throw Error(\"The custom service desk does not have a name.\");\n    }\n    if (name && (typeof name !== \"string\" || name.length > 40)) {\n      throw new Error(`The custom service desk name \"${name}\" is not valid.`);\n    }\n  }\n}\n\nexport { HumanAgentServiceImpl, createService, createService as default, validateCustomServiceDesk };\n"],"names":["UUIDType","uuid","_type","v4","asArray","value","Array","isArray","async","asyncForEach","array","callbackFunction","index","length","findLast","predicate","startAt","lastIndex","findLastIndex","undefined","arrayLastValue","THREAD_ID_MAIN","isResponse","message","output","isDateResponseType","localMessage","item","response_type","MessageResponseTypes","DATE","addDefaultsToMessage","fullMessage","id","MESSAGE","thread_id","history","ui_state_internal","timestamp","Date","now","from_history","isRequest","input","isLiveHumanAgentMessage","Boolean","agent_message_type","isEventRequest","message_type","MessageInputType","EVENT","isTextItem","text","isTyping","PAUSE","typing","isPause","isOptionItem","OPTION","options","createMessageRequestForChoice","choice","relatedResponseID","messageRequest","cloneDeep","label","related_message_id","createMessageRequestForButtonItemOption","buttonItem","createWelcomeRequest","silent","is_welcome_request","createMessageRequestForText","TEXT","createMessageRequestForFileUpload","upload","file","name","InternalMessageRequestType","FILE","HumanAgentMessageType","FROM_USER","file_upload_status","FileStatusValue","UPLOADING","createMessageRequestForDate","inputString","userString","createMessageResponseForText","threadID","responseType","context","textItem","generic","createMessageResponseForItem","isConnectToHumanAgent","response","CONNECT_TO_HUMAN_AGENT","isCardResponseType","CARD","isCarouselResponseType","CAROUSEL","isButtonResponseType","BUTTON","isShowPanelButtonType","button_type","ButtonItemType","SHOW_PANEL","isResponseWithNestedItems","hasBodyOrFooter","panel","items","isGridResponseType","body","footer","renderAsUserDefinedMessage","messageItem","IMAGE","IFRAME","VIDEO","AUDIO","CONVERSATIONAL_SEARCH","TABLE","INLINE_ERROR","GRID","renderAsTour","hasTourUserDefinedType","user_defined","user_defined_type","hasServiceDesk","config","public","serviceDeskFactory","isItemSupportedInResponseBody","USER_DEFINED","isSingleItemCarousel","isFullWidthUserDefined","full_width","getOptionType","preference","totalOptions","type","isStreamPartialItem","chunk","partial_item","isStreamCompleteItem","complete_item","isStreamFinalResponse","final_response","streamItemID","messageID","itemID","streaming_metadata","getMediaDimensions","dimensions","getLastBotResponseWithContext","state","keys","map","findLastWithMap","botMessageState","messageIDs","allMessagesByID","find","hasLiveHumanAgentMessage","isClient","window","navigator","browser","detect","screenWidth","screenHeight","screen","width","height","IS_IOS","os","IS_MOBILE","IS_PHONE","IS_PHONE_IN_PORTRAIT_MODE","IS_SESSION_STORAGE","memoizeOne","sessionStorage","setItem","getItem","removeItem","getURLHostName","url","URL","hostname","conditionalSetTimeout","operation","timeout","setTimeout","inputItemToLocalItem","originalUserText","LOCAL_MESSAGE","ui_state","needsAnnouncement","fullMessageID","outputItemToLocalItem","isLatestWelcomeNode","disableFadeAnimation","isWelcomeResponse","createLocalMessageForInlineError","originalMessage","createLocalMessageForItem","createLocalMessageItemsForNestedMessageItems","localMessageItem","fromHistory","nestedLocalMessageItems","allowFooter","gridLocalMessageItemIDs","rows","row","cells","cell","cellLocalMessageItemIDs","createLocalMessageItemsForNestedType","nestedMessageItem","isSupportedMessageItemInBody","itemsLocalMessageItemIDs","bodyItems","bodyLocalMessageItemIDs","footerItems","footerLocalMessageItemIDs","rootMessageItem","isSupportedMessageItemInFooter","nestedMessageItemIDs","isSupported","forEach","nestedLocalMessageItem","push","consoleError","HA_SET_HUMAN_AGENT_AVAILABILITY","HA_SET_IS_CONNECTING","HA_SET_IS_RECONNECTING","HA_SET_HUMAN_AGENT_JOINED","HA_SET_HUMAN_AGENT_LEFT_CHAT","HA_END_CHAT","HA_UPDATE_CAPABILITIES","HA_UPDATE_FILE_UPLOAD_IN_PROGRESS","HA_SET_SHOW_SCREEN_SHARE_REQUEST","HA_SET_IS_SCREEN_SHARING","HA_SET_PERSISTED_STATE","HA_UPDATE_IS_SUSPENDED","HA_UPDATE_IS_TYPING","setIsConnecting","isConnecting","localMessageID","setIsReconnecting","isReconnecting","setHumanAgentLeftChat","endChat","setAgentAvailability","availability","setHumanAgentJoined","responseUserProfile","updateCapabilities","capabilities","updateFilesUploadInProgress","fileUploadInProgress","setShowScreenShareRequest","showRequest","setIsScreenSharing","isSharing","setPersistedServiceDeskState","agentUpdateIsSuspended","isSuspended","agentUpdateIsTyping","deepFreeze","object","Object","freeze","getOwnPropertyNames","prop","prototype","hasOwnProperty","call","isFrozen","resolvablePromise","resolveFunction","rejectFunction","promise","Promise","resolve","reject","doResolve","resolveValue","isResolved","isComplete","doReject","rejectValue","isRejected","CHANGE_STATE","UPDATE_BOT_NAME","UPDATE_BOT_AVATAR_URL","UPDATE_LAUNCHER_AVATAR_URL","UPDATE_MAIN_HEADER_TITLE","HYDRATE_CHAT","HYDRATE_MESSAGE_HISTORY","ADD_LOCAL_MESSAGE_ITEM","REMOVE_MESSAGES","UPDATE_LOCAL_MESSAGE_ITEM","SET_APP_STATE_VALUE","ADD_IS_TYPING_COUNTER","ADD_IS_LOADING_COUNTER","ADD_IS_HYDRATING_COUNTER","SET_VIEW_STATE","SET_VIEW_CHANGING","SET_INITIAL_VIEW_CHANGE_COMPLETE","UPDATE_CSS_VARIABLES","MESSAGE_SET_OPTION_SELECTED","SET_MESSAGE_UI_PROPERTY","SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY","SET_MESSAGE_HISTORY_PROPERTY","MERGE_HISTORY","SET_LAUNCHER_PROPERTY","SET_LAUNCHER_CONFIG_PROPERTY","ANNOUNCE_MESSAGE","SET_CHAT_MESSAGES_PROPERTY","RESTART_CONVERSATION","ACCEPTED_DISCLAIMER","ADD_MESSAGE","UPDATE_HOME_SCREEN_CONFIG","UPDATE_HAS_SENT_NON_WELCOME_MESSAGE","UPDATE_PERSISTED_CHAT_STATE","SET_TOUR_DATA","CLEAR_TOUR_DATA","CHANGE_STEP_IN_TOUR","SET_HOME_SCREEN_IS_OPEN","UPDATE_LAUNCHER_CONFIG","UPDATE_MESSAGE","SET_LAUNCHER_MINIMIZED","CLOSE_IFRAME_PANEL","OPEN_IFRAME_CONTENT","SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN","SET_CUSTOM_PANEL_OPTIONS","SET_CUSTOM_PANEL_OPEN","TOGGLE_HOME_SCREEN","UPDATE_INPUT_STATE","SET_IS_BROWSER_PAGE_VISIBLE","ADD_INPUT_FILE","CLEAR_INPUT_FILES","REMOVE_INPUT_FILE","REMOVE_LOCAL_MESSAGE_ITEM","FILE_UPLOAD_INPUT_ERROR","ADD_NESTED_MESSAGES","SET_RESPONSE_PANEL_IS_OPEN","SET_RESPONSE_PANEL_CONTENT","STREAMING_ADD_CHUNK","STREAMING_START","STREAMING_MERGE_HISTORY","ADD_NOTIFICATION","REMOVE_ALL_NOTIFICATIONS","REMOVE_NOTIFICATIONS","UPDATE_CHAT_HEADER_CONFIG","UPDATE_MAX_VISIBLE_HEADER_OBJECTS","SET_STOP_STREAMING_BUTTON_VISIBLE","SET_STOP_STREAMING_BUTTON_DISABLED","SET_STREAM_ID","UPDATE_MAIN_HEADER_AVATAR","actions","changeState","partialState","chatWasHydrated","hydrateMessageHistory","messageHistory","removeMessages","restartConversation","addLocalMessageItem","addMessage","addAfterID","updateLocalMessageItem","updateMessage","messageSetOptionSelected","sentMessage","updatePersistedChatState","chatState","setTourData","newActiveTourMessageID","clearTourData","changeStepInTour","newStepNumber","updateHasSentNonWelcomeMessage","hasSentNonWelcomeMessage","setAppStateValue","key","addIsTypingCounter","addToIsTyping","addIsLoadingCounter","addToIsLoading","addIsHydratingCounter","addToIsHydrating","updateBotName","updateMainHeaderTitle","title","updateBotAvatarURL","updateCSSVariables","variables","publicVars","whiteLabelVariables","updateHomeScreenConfig","homeScreenConfig","setViewState","viewState","setViewChanging","viewChanging","setInitialViewChangeComplete","changeComplete","setMessageUIProperty","propertyName","propertyValue","setLauncherProperty","setLauncherConfigProperty","launcherType","setMessageHistoryProperty","setMessageUIStateInternalProperty","mergeMessageHistory","setMessageErrorState","errorState","setMessageWasAnnounced","announceMessage","setChatMessagesStateProperty","addNotification","notification","notificationID","removeNotifications","groupID","removeAllNotifications","acceptDisclaimer","setHomeScreenIsOpen","isOpen","updateLauncherConfig","launcherConfig","setLauncherMinimized","closeIFramePanel","setIFrameContent","setViewSourcePanelIsOpen","citationItem","relatedSearchResult","setCustomPanelConfigOptions","setCustomPanelOpen","toggleHomeScreen","updateInputState","newState","isInputToHumanAgent","setIsBrowserPageVisible","isVisible","addInputFile","removeFileUpload","fileID","removeLocalMessageItem","localMessageItemID","fileUploadInputError","errorMessage","clearInputFiles","addNestedMessages","localMessageItems","setResponsePanelIsOpen","setResponsePanelContent","isMessageForInput","streamingStart","streamingMergeHistory","streamingAddChunk","chunkItem","isCompleteItem","updateChatHeaderConfig","chatHeaderConfig","setMaxVisibleHeaderObjects","maxTotal","setStopStreamingButtonVisible","setStopStreamingButtonDisabled","isDisabled","setStreamID","currentStreamID","updateMainHeaderAvatar","toPair","localMessages","createHumanAgentLocalMessage","agentMessageType","serviceManager","fireEvents","intl","nickname","messageKey","HUMAN_AGENT_JOINED","RELOAD_WARNING","HUMAN_AGENT_LEFT_CHAT","HUMAN_AGENT_ENDED_CHAT","TRANSFER_TO_HUMAN_AGENT","USER_ENDED_CHAT","CHAT_WAS_ENDED","DISCONNECTED","RECONNECTED","SHARING_REQUESTED","SHARING_ACCEPTED","SHARING_DECLINED","SHARING_CANCELLED","SHARING_ENDED","formatMessage","personName","getHumanAgentStatusMessageText","result","createHumanAgentLocalMessageForType","response_user_profile","fire","BusEventType","HUMAN_AGENT_PRE_RECEIVE","data","HUMAN_AGENT_RECEIVE","addMessages","messagePairs","saveInHistory","fireHistoryEvent","showLiveMessages","handleUserDefinedResponseItems","store","dispatch","addBotReturnMessage","botReturnDelay","wasSuspended","botReturn","languagePack","agent_botReturned","createBotReturnMessage","getState","initialRestartCount","restartCount","addHumanAgentEndChatMessage","endChatMessage","HumanAgentServiceImpl","constructor","this","chatStarted","showingDisconnectedError","isHumanAgentTyping","uploadingFiles","Set","showLeaveWarning","getCustomServiceDeskName","serviceDesk","getName","initialize","Error","instance","persistedToBrowserStorage","serviceDeskState","humanAgentState","serviceDeskCallback","ServiceDeskCallbackImpl","parameters","callback","persistedState","validateCustomServiceDesk","debugLog","reconnect","startChat","localConnectMessage","clear","size","event","HUMAN_AGENT_PRE_START_CHAT","cancelStartChat","fireEndChat","agentJoinTimeout","agentJoinTimeoutSeconds","waitingForHumanAgentJoinedTimer","handleHumanAgentJoinedTimeout","preStartChatPayload","error","setErrorStatus","ErrorType","CONNECTING","logInfo","cancelHumanAgentJoinedTimer","firePreEndChat","endedByHumanAgent","HUMAN_AGENT_PRE_END_CHAT","preEndChatPayload","cancelEndChat","requestCancelled","HUMAN_AGENT_END_CHAT","endedByUser","showHumanAgentLeftMessage","showBotReturnMessage","isConnected","persistedHumanAgentState","endMessageType","doEndChat","agentEndChatMessageType","closeScreenShareRequestModal","ScreenShareState","CANCELLED","resolveOrTimeout","sendMessageToAgent","uploads","HUMAN_AGENT_PRE_SEND","files","textMessage","pairs","uploadOriginalMessage","uploadLocalMessage","add","messageSucceeded","messageFailed","MessageErrorState","RETRYING","FAILED","additionalData","filesToUpload","NONE","HUMAN_AGENT_SEND","filesSelectedForUpload","userReadMessages","checkAreAnyHumanAgentsOnline","connectMessage","resultValue","areAnyAgentsOnline","timeoutSeconds","availabilityTimeoutSeconds","HumanAgentsOnlineStatus","ONLINE","OFFLINE","UNKNOWN","HUMAN_AGENT_ARE_ANY_AGENTS_ONLINE","userTyping","errors_noHumanAgentsJoined","clearTimeout","screenShareUpdateRequestState","ACCEPTED","DECLINED","ENDED","addHumanAgentLocalMessage","screenShareStop","handleHydration","allowReconnect","allowEndChatMessages","didReconnect","appWindow","requestFocus","screenShareRequestPromise","service","updateAgentAvailability","agentJoined","profile","agentReadMessages","agentTyping","sendMessageToUser","agentID","messageResponse","FROM_HUMAN_AGENT","responseUserProfiles","beginTransferToAnotherAgent","agentLeftChat","agentEndedChat","errorInfo","isDisconnected","isReadonly","messageToUser","errors_connectingToHumanAgent","USER_MESSAGE","setFileUploadStatus","isError","COMPLETE","SUCCESS","delete","screenShareRequest","screenShareEnded","wasScreenSharing","isScreenSharing","requestPending","updatePersistedState","mergeWithCurrent","merge","createService"],"sourceRoot":""}