/*! For license information please see 9818.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_carbon_ai_chat_examples_demo=self.webpackChunk_carbon_ai_chat_examples_demo||[]).push([[9818],{3403:function(e,t,n){n.d(t,{I:function(){return U}});var a,s=n(2417),r=n(6854),i=n(3696),o=n(1709);const l=i.forwardRef(function({children:e,size:t=16,...n},s){return i.createElement(o.A,{width:t,height:t,ref:s,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...n},a||(a=i.createElement("path",{d:"M27.45,15.11l-22-11a1,1,0,0,0-1.08.12,1,1,0,0,0-.33,1L6.69,15H18v2H6.69L4,26.74A1,1,0,0,0,5,28a1,1,0,0,0,.45-.11l22-11a1,1,0,0,0,0-1.78Z"})),e)});var c=n(2663),d=n(4452),m=n(3210),u=n(4629),g=n(3539),p=(n(1200),n(1523)),f=n(7924),h=n(3192),C=n(4574),E=n(2865),A=n(4720),_=n(9890),v=n(619),b=n(9473),y=n(1517),S=n(9124),M=n(481),I=n(3744),w=n(171),W=n(4859),N=n(8241),R=n(1536);const k=(0,p.dI)(f.A);class x extends h.WF{_handleOnClick(){this.onClick()}}x.styles=h.AH`
    ${(0,h.iz)(".cds--aichat-stop-icon svg{\n  fill:var(--cds-icon-disabled, rgba(22, 22, 22, 0.25));\n}")}
  `,(0,u.Cg)([(0,v.MZ)({type:String,attribute:"label"})],x.prototype,"label",void 0),(0,u.Cg)([(0,v.MZ)({type:String,attribute:"tooltip-alignment"})],x.prototype,"tooltipAlignment",void 0),(0,u.Cg)([(0,v.MZ)({type:Boolean,attribute:"disabled"})],x.prototype,"disabled",void 0),(0,u.Cg)([(0,v.MZ)({type:Object})],x.prototype,"onClick",void 0),(0,u.Cg)([_.oI],x.prototype,"_handleOnClick",null);let T=class extends x{render(){return function({label:e,disabled:t,tooltipAlignment:n,onClick:a}){return h.qy`
    <cds-custom-icon-button
      class="${E.b}-stop-streaming-button"
      align="${n}"
      kind="${A.a.GHOST}"
      size="${A.B.SMALL}"
      ?disabled=${t}
      @click="${a}"
    >
      <span
        class="${t?`${E.b}-stop-icon`:""}"
        slot="icon"
        >${(0,C.T)(k)}</span
      >
      <span slot="tooltip-content">${e}</span>
    </cds-custom-icon-button>
  `}(this)}};T=(0,u.Cg)([(0,g.c)("cds-aichat-stop-streaming-button")],T);const B=(0,m.a)({tagName:"cds-aichat-stop-streaming-button",elementClass:T,react:i});class H{constructor(){this.listeners=[]}addListener(e){this.listeners=[...this.listeners,e]}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}fireListeners(...e){this.listeners.length&&this.listeners.forEach(t=>t(...e))}}class F extends i.PureComponent{constructor(){super(...arguments),this.textAreaRef=i.createRef()}getHTMLElement(){return this.textAreaRef.current}takeFocus(){(0,I.d)(this.textAreaRef,!1,!0)}doBlur(){this.textAreaRef.current.blur()}render(){const{isRequired:e,name:t,id:n,onFocus:a,onBlur:s,onClick:r,onChange:o,onKeyDown:l,rows:c,value:m,autoSize:u,maxLength:g,disabled:p,placeholder:f,ariaLabel:h,testId:C,onSelect:E}=this.props;return i.createElement("div",{className:d("WAC__TextArea",{"WAC__TextArea--autoSize":u,"WAC__TextArea--disabled":p})},i.createElement("textarea",{ref:this.textAreaRef,"aria-label":h,"aria-required":e,className:"WAC__TextArea-textarea",disabled:p,id:n||C,maxLength:g,name:t,onFocus:a,onBlur:s,onClick:r,onChange:o,onKeyDown:l,onSelect:E,placeholder:f,rows:c,value:m||"","data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false","data-testid":C}),u&&i.createElement("div",{className:"WAC__TextArea-sizer"},m||f||" "))}}function L(e,t){const{isInputVisible:n,placeholder:a,disableInput:o,disableSend:m,disableUploadButton:u,pendingUploads:p,allowedFileUploadTypes:f,allowMultipleFileUploads:h,showUploadButton:C,onFilesSelectedForUpload:E,onSendInput:_,blurOnSend:v,serviceManager:k,onUserTyping:x,languagePack:T,isStopStreamingButtonVisible:L,isStopStreamingButtonDisabled:U,testIdPrefix:O}=e,D=`${k.namespace.suffix}-${(0,b.u)()}`,[z,$]=(0,i.useState)(!1),[P,V]=(0,i.useState)(""),q=(0,i.useRef)(!0),G=(0,i.useRef)(null),Z=(0,i.useRef)(),K=(0,i.useRef)(),X=(0,i.useRef)(new H),j=(0,i.useRef)(""),Y=(0,i.useRef)({getHTMLElement:()=>Z?.current?.getHTMLElement(),setValue:e=>V(e),setEnableEnterKey:e=>{q.current=e},addChangeListener:e=>X.current.addListener(e),removeChangeListener:e=>X.current.removeListener(e)});function J(){G.current&&(clearTimeout(G.current),G.current=null,x?.(!1))}function Q(e){if(te()){e.preventDefault(),J();const t=P.trim();_(t),V(""),v?Z.current.doBlur():Z.current.takeFocus()}}function ee(){!M.I&&n&&Z.current.takeFocus()}function te(){const e=Boolean(p?.length);return(!e||!p.find(e=>!(0,W.i)(e)))&&(Boolean(P.trim())||e)}z&&o&&$(!1),(0,i.useImperativeHandle)(t,()=>({takeFocus:ee,getMessageInput:()=>Y.current}));const{input_buttonLabel:ne,input_placeholder:ae,input_ariaLabel:se,input_uploadButtonLabel:re,input_stopResponse:ie}=T,oe=o?"":P,le=te(),ce=!le||o||m,de=u||o,me=`WACInputContainer__UploadInput-${D}`,ue="rtl"===document.dir,ge=a||(o?void 0:ae);return j.current!==P&&(j.current=P,X.current.fireListeners(P)),n&&i.createElement("div",{className:"WACInputAndCompletions"},i.createElement("div",{className:d("WACInputContainer",{"WACInputContainer--hasFocus":z,"WACInputContainer--showUploadButton":C})},i.createElement("div",{className:"WACInputContainer__LeftContainer"},i.createElement("div",{className:"WACInputContainer__TextAndUpload"},C&&i.createElement("div",{className:"WACInputContainer__UploadButtonContainer"},i.createElement("input",{ref:K,accept:f,id:me,className:"WACVisuallyHidden WACInputContainer__UploadInput",type:"file","aria-label":re,onChange:function(e){const t=(0,S.b)(k.store.getState()),{dispatch:n}=k.store,{files:a}=e.target,s=[];for(let e=0;e<a.length;e++){const r={id:(0,w.u)(w.U.FILE),status:R.F.EDIT,file:a[e]};s.push(r),n(y.a.addInputFile(r,t))}E?.(s),K.current.value=null},multiple:h,disabled:de}),i.createElement("label",{className:d("WACInputContainer__UploadButton",{"WACInputContainer__UploadButton--disabled":de}),htmlFor:me},i.createElement(s.A,null))),i.createElement(F,{autoSize:!0,ariaLabel:se,disabled:o,maxLength:2048,onChange:function(e){const t=e.target.value;x&&(G.current?clearTimeout(G.current):x(!0),G.current=setTimeout(J,5e3)),V(t)},onKeyDown:function(e){(0,I.i)(e)&&(m||!q.current?e.preventDefault():Q(e))},placeholder:ge,value:oe,ref:Z,onFocus:function(){$(!0)},onBlur:function(){$(!1)},testId:(0,N.m)(N.P.INPUT,O)})),Boolean(p?.length)&&i.createElement("div",{className:"WACInputContainer__FilesContainer"},p.map((e,t)=>i.createElement(c.ssm,{key:t,iconDescription:T.fileSharing_removeButtonTitle,name:e.file.name,status:R.F.EDIT,errorSubject:e.errorMessage,invalid:e.isError,size:A.B.SMALL,onDelete:()=>function(e){const t=(0,S.b)(k.store.getState());k.store.dispatch(y.a.removeFileUpload(e,t)),Z.current.takeFocus()}(e.id)})))),i.createElement("div",{className:"WACInputContainer__SendButtonContainer"},L&&i.createElement(B,{label:ie,disabled:U,tooltipAlignment:"top",onClick:()=>{const{store:e}=k;e.dispatch(y.a.setStopStreamingButtonDisabled(!0)),k.fire({type:g.B.STOP_STREAMING})}}),i.createElement(c.$nd,{className:"WACInputContainer__SendButton",kind:A.a.GHOST,size:A.B.SMALL,type:"button",onClick:Q,"aria-label":ne,disabled:ce,renderIcon:le?l:r.A,iconDescription:ne,tooltipAlignment:ue?"start":"end",tooltipPosition:"top",hasIconOnly:!0,"data-testid":(0,N.m)(N.P.INPUT_SEND,O)}))))}F.defaultProps={isRequired:!1,maxLength:1e4};const U=i.memo((0,i.forwardRef)(L))},7924:function(e,t,n){n.d(t,{A:function(){return a}});var a={elem:"svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",width:16,height:16},content:[{elem:"path",attrs:{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M11,10c0,0.6-0.4,1-1,1H6c-0.6,0-1-0.4-1-1V6c0-0.6,0.4-1,1-1h4\tc0.6,0,1,0.4,1,1V10z"}}],name:"stop--filled",size:16}},9065:function(e,t,n){n.r(t),n.d(t,{CatastrophicError:function(){return E},default:function(){return E}});var a=n(2629),s=n(2663),r=n(4452),i=n(3696),o=n(8710),l=n(5022),c=n(171),d=n(9426),m=n(893),u=n(4720),g=n(8241),p=n(1536);function f(){const e=(0,c.u)();return i.createElement("svg",{viewBox:"0 0 80 80"},i.createElement("defs",null,i.createElement("linearGradient",{id:`${e}-1`,x1:"38.91",y1:"4.92",x2:"38.91",y2:"73.85",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#262626"}),i.createElement("stop",{offset:"1",stopColor:"#393939"})),i.createElement("linearGradient",{id:`${e}-2`,x1:"12.44",y1:"71.21",x2:"76.34",y2:"34.31",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#525252"}),i.createElement("stop",{offset:"0.52",stopColor:"#393939"}),i.createElement("stop",{offset:"0.61",stopColor:"#393939"}),i.createElement("stop",{offset:"0.99",stopColor:"#161616"})),i.createElement("linearGradient",{id:`${e}-3`,x1:"39.38",y1:"50.63",x2:"52.04",y2:"72.55",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0.11",stopColor:"#6f6f6f",stopOpacity:"0"}),i.createElement("stop",{offset:"0.94",stopColor:"#6f6f6f"}))),i.createElement("rect",{width:"80",height:"80",fill:"none"}),i.createElement("polygon",{points:"59.91 78.34 16.91 53.51 21.77 50.7 64.77 75.53 59.91 78.34",opacity:"0.25",className:"error_message_isolate"}),i.createElement("path",{d:"M39,6.92c12.15,7,22,24,21.92,38S51,64.49,38.83,57.48s-22-24-21.92-38S26.83-.09,39,6.92Z",fill:`url(#${e}-1)`}),i.createElement("path",{d:"M42.85,4.68C36.74,1.15,31.2.82,27.2,3.15L23.54,5.28C27.52,3.08,33,3.45,39,6.92c12.15,7,22,24,21.92,38,0,6.77-2.35,11.58-6.13,13.94h-.07c-.32.2,3.66-2.1,3.66-2.1,4-2.3,6.39-7.18,6.41-14.12C64.81,28.7,55,11.69,42.85,4.68Z",fill:`url(#${e}-2)`}),i.createElement("path",{d:"M29.11,3.91v.36a19.59,19.59,0,0,1,9.68,3c12,6.94,21.78,23.84,21.74,37.65,0,9.4-4.56,15.23-11.83,15.23a19.59,19.59,0,0,1-9.68-3C27,50.21,17.24,33.32,17.28,19.5c0-9.39,4.56-15.23,11.83-15.23V3.91m0,0c-7.21,0-12.17,5.71-12.2,15.59,0,14,9.77,31,21.92,38a20.18,20.18,0,0,0,9.87,3c7.21,0,12.17-5.71,12.2-15.6C60.9,31,51.13,14,39,6.9a19.94,19.94,0,0,0-9.87-3Z",fill:`url(#${e}-3)`}),i.createElement("path",{className:"cls-6",d:"M38.93,49.79a6.83,6.83,0,0,1-2.66-2.51,6.19,6.19,0,0,1-.81-3v-1a2.26,2.26,0,0,1,.81-2c.54-.35,1.43-.17,2.66.54a6.67,6.67,0,0,1,2.61,2.5,6,6,0,0,1,.81,3v1a2.23,2.23,0,0,1-.81,2C41,50.66,40.13,50.49,38.93,49.79ZM37.77,38.16,36,22.77V13l5.81,3.36v9.73L40.17,39.55Z",fill:"#525252"}))}function h(){const e=(0,c.u)();return i.createElement("svg",{viewBox:"0 0 80 80"},i.createElement("defs",null,i.createElement("linearGradient",{id:`${e}-1`,x1:"29.96",y1:"36.32",x2:"53.15",y2:"-3.84",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#525252",stopOpacity:"0.05"}),i.createElement("stop",{offset:"1",stopOpacity:"0.1"})),i.createElement("linearGradient",{id:`${e}-2`,x1:"38.91",y1:"29.41",x2:"38.91",y2:"78.7",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#c6c6c6"}),i.createElement("stop",{offset:"0.78",stopColor:"#e0e0e0"})),i.createElement("linearGradient",{id:`${e}-3`,x1:"18.08",y1:"67.95",x2:"71.65",y2:"37.02",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#e0e0e0"}),i.createElement("stop",{offset:"0.13",stopColor:"#f4f4f4"}),i.createElement("stop",{offset:"0.56",stopColor:"#e0e0e0"}),i.createElement("stop",{offset:"0.62",stopColor:"#d8d8d8"}),i.createElement("stop",{offset:"0.7",stopColor:"#c6c6c6"}),i.createElement("stop",{offset:"0.89",stopColor:"#a8a8a8"}),i.createElement("stop",{offset:"1",stopColor:"#8d8d8d"})),i.createElement("linearGradient",{id:`${e}-4`,x1:"27.93",y1:"30.78",x2:"49.86",y2:"68.76",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0.54",stopColor:"#d0d0d0",stopOpacity:"0"}),i.createElement("stop",{offset:"0.82",stopColor:"#f1f1f1",stopOpacity:"0.7"}),i.createElement("stop",{offset:"0.94",stopColor:"#fff"})),i.createElement("linearGradient",{id:`${e}-5`,x1:"28.67",y1:"55.68",x2:"47.16",y2:"45.01",gradientTransform:"matrix(1, 0, 0, -1, 0, 82)",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:"0",stopColor:"#fff"}),i.createElement("stop",{offset:"0.05",stopColor:"#fdfdfd"}),i.createElement("stop",{offset:"0.3",stopColor:"#f6f6f6"}),i.createElement("stop",{offset:"1",stopColor:"#f4f4f4"}))),i.createElement("rect",{width:"80",height:"80",fill:"none"}),i.createElement("polygon",{points:"59.91 78.34 16.91 53.51 21.77 50.7 64.77 75.53 59.91 78.34",fill:`url(#${e}-1)`}),i.createElement("path",{d:"M39,6.92c12.15,7,22,24,21.92,38S51,64.49,38.83,57.48s-22-24-21.92-38S26.83-.09,39,6.92Z",fill:`url(#${e}-2)`}),i.createElement("path",{d:"M42.85,4.68C36.74,1.15,31.2.82,27.2,3.15L23.54,5.28C27.52,3.08,33,3.45,39,6.92c12.15,7,22,24,21.92,38,0,6.77-2.35,11.58-6.13,13.94h-.07c-.32.2,3.66-2.1,3.66-2.1,4-2.3,6.39-7.18,6.41-14.12C64.81,28.7,55,11.69,42.85,4.68Z",fill:`url(#${e}-3)`}),i.createElement("path",{d:"M29.11,3.91v.36a19.59,19.59,0,0,1,9.68,3c12,6.94,21.78,23.84,21.74,37.65,0,9.4-4.56,15.23-11.83,15.23a19.59,19.59,0,0,1-9.68-3C27,50.21,17.24,33.32,17.28,19.5c0-9.39,4.56-15.23,11.83-15.23V3.91m0,0c-7.21,0-12.17,5.71-12.2,15.59,0,14,9.77,31,21.92,38a20.18,20.18,0,0,0,9.87,3c7.21,0,12.17-5.71,12.2-15.6C60.9,31,51.13,14,39,6.9a19.94,19.94,0,0,0-9.87-3Z",fill:`url(#${e}-4)`}),i.createElement("path",{d:"M38.93,49.79a6.83,6.83,0,0,1-2.66-2.51,6.19,6.19,0,0,1-.81-3v-1a2.26,2.26,0,0,1,.81-2c.54-.35,1.43-.17,2.66.54a6.67,6.67,0,0,1,2.61,2.5,6,6,0,0,1,.81,3v1a2.23,2.23,0,0,1-.81,2C41,50.66,40.13,50.49,38.93,49.79ZM37.77,38.16,36,22.77V13l5.81,3.36v9.73L40.17,39.55Z",fill:`url(#${e}-5)`}))}function C({onClose:e,languagePack:t,onRestart:n,showHeader:c,botName:C,headerDisplayName:E}){const A=(0,o.A)(),_=(0,l.d4)(e=>e.theme.carbonTheme),v=_===p.b.G90||_===p.b.G100,b=A.formatMessage({id:"errors_communicating"},{botName:C});return i.createElement("div",{className:"WAC"},c&&i.createElement(d.B,{headerDisplayName:E,onClose:e,onToggleHomeScreen:null,includeWriteableElement:!1,testIdPrefix:g.O.CATASTROPHIC}),i.createElement("div",{className:r("WACCatastrophicError","WACPanelContent",{"WACCatastrophicError--withHeader":c})},i.createElement("div",{className:"WACCatastrophicError__ErrorTextContainer"},v&&i.createElement(f,null),!v&&i.createElement(h,null),i.createElement("div",{className:"WACCatastrophicError__ErrorHeading"},t.errors_somethingWrong),i.createElement("div",{className:"WACCatastrophicError__ErrorBody"},i.createElement(m.R,{text:b})),n&&i.createElement(s.bJ3,{className:"WACCatastrophicError__RestartButton",kind:u.a.TERTIARY,size:u.B.SMALL,"aria-label":t.buttons_restart,onClick:n,renderIcon:a.A,type:"button"},t.buttons_retry))))}n(712),n(9417),n(445),n(3210),n(6677),n(3192),n(9890),n(619),n(236),n(1162),n(4544),n(8325),n(4776),n(3716),n(1264),n(7323),n(3082);const E=i.memo(C)},9818:function(e,t,n){n.r(t),n.d(t,{ChatClass:function(){return We},default:function(){return Re}});var a,s=n(3696),r=n(4869),i=n(2986),o=n(5022),l=n(4452),c=n(2896),d=n(3210),m=n(4629),u=n(3192),g=n(619),p=n(3539),f=n(2865),h=n(9124),C=n(1709);const E=s.forwardRef(function({children:e,size:t=16,...n},r){return s.createElement(C.A,{width:t,height:t,ref:r,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...n},a||(a=s.createElement("path",{d:"M28,22H11.41L30,3.41,28.59,2l-2,2H4A2,2,0,0,0,2,6V22H4V6H24.59L2,28.59,3.41,30l6-6H12v4H8v2H24V28H20V24h8a2,2,0,0,0,2-2V9H28ZM18,28H14V24h4Z"})),e)});var A,_,v,b,y=n(2663),S=n(9708),M=n(3744),I=n(6874);const w=s.forwardRef(function({children:e,size:t=16,...n},a){return 16===t||"16"===t||"16px"===t?s.createElement(C.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...n},A||(A=s.createElement("path",{d:"M8,1C4.1,1,1,4.1,1,8s3.1,7,7,7s7-3.1,7-7S11.9,1,8,1z M5,13.2v-1.5c0-0.9,0.6-1.6,1.5-1.7h3c0.9,0.1,1.5,0.8,1.5,1.7v1.5 C9.1,14.3,6.9,14.3,5,13.2L5,13.2z M12,12l0-0.8c0-0.9-1.1-2.1-2.5-2.2h-3C5.1,9.1,4,10.3,4,11.7l0,0.5v0.3c-2.5-2.2-2.7-6-0.5-8.5 s6-2.7,8.5-0.5s2.7,6,0.5,8.5c-0.1,0.2-0.3,0.3-0.5,0.5V12z"})),_||(_=s.createElement("path",{d:"M8,3C6.6,3,5.5,4.1,5.5,5.5S6.6,8,8,8s2.5-1.1,2.5-2.5S9.4,3,8,3z M8,7C7.2,7,6.5,6.3,6.5,5.5S7.2,4,8,4s1.5,0.7,1.5,1.5 S8.8,7,8,7z"})),e):s.createElement(C.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...n},v||(v=s.createElement("path",{d:"M16,8a5,5,0,1,0,5,5A5,5,0,0,0,16,8Zm0,8a3,3,0,1,1,3-3A3.0034,3.0034,0,0,1,16,16Z"})),b||(b=s.createElement("path",{d:"M16,2A14,14,0,1,0,30,16,14.0158,14.0158,0,0,0,16,2ZM10,26.3765V25a3.0033,3.0033,0,0,1,3-3h6a3.0033,3.0033,0,0,1,3,3v1.3765a11.8989,11.8989,0,0,1-12,0Zm13.9925-1.4507A5.0016,5.0016,0,0,0,19,20H13a5.0016,5.0016,0,0,0-4.9925,4.9258,12,12,0,1,1,15.985,0Z"})),e)});var W,N,R=n(158),k=n(1536),x=n(1517),T=n(5569),B=n(481),H=n(3167),F=n(307),L=n(4859);const U=s.forwardRef(function({children:e,size:t=16,...n},a){return s.createElement(C.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...n},W||(W=s.createElement("path",{d:"M16 19a6.9908 6.9908 0 01-5.833-3.1287l1.666-1.1074a5.0007 5.0007 0 008.334 0l1.666 1.1074A6.9908 6.9908 0 0116 19zM20 8a2 2 0 102 2A1.9806 1.9806 0 0020 8zM12 8a2 2 0 102 2A1.9806 1.9806 0 0012 8z"})),N||(N=s.createElement("path",{d:"M17.7358,30,16,29l4-7h6a1.9966,1.9966,0,0,0,2-2V6a1.9966,1.9966,0,0,0-2-2H6A1.9966,1.9966,0,0,0,4,6V20a1.9966,1.9966,0,0,0,2,2h9v2H6a3.9993,3.9993,0,0,1-4-4V6A3.9988,3.9988,0,0,1,6,2H26a3.9988,3.9988,0,0,1,4,4V20a3.9993,3.9993,0,0,1-4,4H21.1646Z"})),e)});var O,D,z,$,P,V,q,G;const Z=s.forwardRef(function({children:e,size:t=16,...n},a){return 16===t||"16"===t||"16px"===t?s.createElement(C.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",...n},O||(O=s.createElement("path",{d:"M8,1C4.1,1,1,4.1,1,8c0,3.9,3.1,7,7,7s7-3.1,7-7C15,4.1,11.9,1,8,1z M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z"})),D||(D=s.createElement("path",{d:"M7,11L4.3,8.3l0.9-0.8L7,9.3l4-3.9l0.9,0.8L7,11z","data-icon-path":"inner-path",opacity:"0"})),e):20===t||"20"===t||"20px"===t?s.createElement(C.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",...n},z||(z=s.createElement("path",{d:"M10,1c-4.9,0-9,4.1-9,9s4.1,9,9,9s9-4,9-9S15,1,10,1z M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z"})),$||($=s.createElement("path",{fill:"none",d:"M8.7,13.5l-3.2-3.2l1-1l2.2,2.2l4.8-4.8l1,1L8.7,13.5z","data-icon-path":"inner-path",opacity:"0"})),e):24===t||"24"===t||"24px"===t?s.createElement(C.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n},P||(P=s.createElement("path",{d:"M12,1C6,1,1,6,1,12s5,11,11,11s11-4.9,11-11S18.1,1,12,1z M10.4,16.3l-3.9-3.9l1.3-1.2l2.7,2.7l5.8-5.8l1.3,1.3L10.4,16.3z"})),V||(V=s.createElement("path",{fill:"none",d:"M10.4,16.3l-3.9-3.9l1.3-1.2l2.7,2.7l5.8-5.8l1.3,1.3L10.4,16.3z","data-icon-path":"inner-path",opacity:"0"})),e):s.createElement(C.A,{width:t,height:t,ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",fill:"currentColor",...n},q||(q=s.createElement("path",{d:"M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2ZM14,21.5908l-5-5L10.5906,15,14,18.4092,21.41,11l1.5957,1.5859Z"})),G||(G=s.createElement("path",{fill:"none",d:"M14 21.591L9 16.591 10.591 15 14 18.409 21.41 11 23.005 12.585 14 21.591z","data-icon-path":"inner-path"})),e)});var K=n(7052),X=n(4665),j=n(171),Y=n(5550),J=n(5285),Q=n(5564),ee=n(711),te=n(9065),ne=n(9426),ae=n(3403),se=n(8241);n(712),n(9417),n(445),n(6677),n(9890),n(236),n(1162),n(4544),n(8325),n(4776),n(3716),n(8142),n(3820),n(8586),n(3150),n(700),n(7454),n(1200),n(8976),n(7190),n(8715),n(8761),n(4574),n(65),n(2769),n(5222),n(7826),n(1264),n(7323),n(3082),n(9927),n(9112),n(9624),n(4833),n(6073),n(7118),n(3967),n(644),n(6379),n(533),n(540),n(3777),n(9133),n(6608),n(5244),n(1435),n(7924);const re=`${f.W}-inline-loading`;let ie=class extends u.WF{constructor(){super(...arguments),this.bounce=!1,this.loop=!1,this.quickLoad=!1,this.carbonTheme="g10"}getAnimationEffect(){const e=[];return!0===this.quickLoad&&e.push("quick-load"),!0===this.bounce&&!0===this.loop&&e.push("vertical"),!1===this.bounce&&!0===this.loop&&e.push("linear"),!0===this.bounce&&!1===this.loop&&e.push("vertical--no-loop"),e.length?e.join(" "):"linear--no-loop"}render(){return u.qy`<div
      data-carbon-theme=${this.carbonTheme}
      class=${this.getAnimationEffect()}
    >
      <svg class="dots" viewBox="0 0 32 32">
        <circle class="dot dot--left" cx="8" cy="16" />
        <circle class="dot dot--center" cx="16" cy="16" r="2" />
        <circle class="dot dot--right" cx="24" cy="16" r="2" />
      </svg>
    </div>`}};ie.styles=u.AH`
    ${(0,u.iz)(".dots{\n  block-size:32px;\n  inline-size:32px;\n}\n\n.dot{\n  fill:none;\n  r:0;\n  stroke-width:0;\n  transform:translateY(0);\n}\n\n[data-carbon-theme=white] .dot,\n[data-carbon-theme=g10] .dot{\n  stroke:#001d6c;\n}\n\n[data-carbon-theme=g90] .dot,\n[data-carbon-theme=g100] .dot{\n  stroke:#f4f4f4;\n}\n\n@media screen and (prefers-reduced-motion: reduce){\n  .linear .dot--left{\n    animation:none;\n    animation-delay:1s, 1s, 2s, 2s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1, 1, infinite, infinite;\n    transform-origin:25% 50%;\n  }\n}\n.linear .dot--left{\n  animation:linear-load-size, linear-load-stroke, linear-loop-size, linear-loop-stroke;\n  animation-delay:1s, 1s, 2s, 2s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1, 1, infinite, infinite;\n  transform-origin:25% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear .dot--center{\n    animation:none;\n    animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1, 1, infinite, infinite;\n    transform-origin:50% 50%;\n  }\n}\n.linear .dot--center{\n  animation:linear-load-size, linear-load-stroke, linear-loop-size, linear-loop-stroke;\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1, 1, infinite, infinite;\n  transform-origin:50% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear .dot--right{\n    animation:none;\n    animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1, 1, infinite, infinite;\n    transform-origin:75% 50%;\n  }\n}\n.linear .dot--right{\n  animation:linear-load-size, linear-load-stroke, linear-loop-size, linear-loop-stroke;\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1, 1, infinite, infinite;\n  transform-origin:75% 50%;\n}\n\n[dir=rtl] .linear .dot--left{\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s, 7.334s, 7.334s;\n}\n[dir=rtl] .linear .dot--center{\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s, 7.167s, 7.167s;\n}\n[dir=rtl] .linear .dot--right{\n  animation-delay:1s, 1s, 2s, 2s, 7s, 7s;\n}\n\n@media screen and (prefers-reduced-motion: reduce){\n  .linear--no-loop .dot--left{\n    animation:none;\n    animation-delay:1s, 1s, 2s, 2s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1;\n    transform-origin:25% 50%;\n  }\n}\n.linear--no-loop .dot--left{\n  animation:linear-load-size, linear-load-stroke, linear-unload-size, linear-unload-stroke;\n  animation-delay:1s, 1s, 2s, 2s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1;\n  transform-origin:25% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear--no-loop .dot--center{\n    animation:none;\n    animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1;\n    transform-origin:50% 50%;\n  }\n}\n.linear--no-loop .dot--center{\n  animation:linear-load-size, linear-load-stroke, linear-unload-size, linear-unload-stroke;\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1;\n  transform-origin:50% 50%;\n}\n@media screen and (prefers-reduced-motion: reduce){\n  .linear--no-loop .dot--right{\n    animation:none;\n    animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n    animation-duration:1s;\n    animation-fill-mode:forwards;\n    animation-iteration-count:1;\n    transform-origin:75% 50%;\n  }\n}\n.linear--no-loop .dot--right{\n  animation:linear-load-size, linear-load-stroke, linear-unload-size, linear-unload-stroke;\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n  animation-duration:1s;\n  animation-fill-mode:forwards;\n  animation-iteration-count:1;\n  transform-origin:75% 50%;\n}\n\n[dir=rtl] .linear--no-loop .dot--left{\n  animation-delay:1.334s, 1.334s, 2.334s, 2.334s;\n}\n[dir=rtl] .linear--no-loop .dot--center{\n  animation-delay:1.167s, 1.167s, 2.167s, 2.167s;\n}\n[dir=rtl] .linear--no-loop .dot--right{\n  animation-delay:1s, 1s, 2s, 2s;\n}\n\n@keyframes linear-load-size{\n  0%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:0;\n  }\n  25%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:2.5px;\n  }\n  83.3%{\n    r:0.875px;\n  }\n  100%{\n    r:0.875px;\n  }\n}\n@keyframes linear-load-stroke{\n  0%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    stroke-width:0;\n  }\n  8.33%{\n    stroke-width:1.72;\n  }\n  100%{\n    stroke-width:1.72;\n  }\n}\n@keyframes linear-loop-size{\n  0%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:0.875px;\n  }\n  25%{\n    animation-timing-function:cubic-bezier(0, 0, 0.3, 1);\n    r:2.5px;\n  }\n  91.66%{\n    r:0.875px;\n  }\n  100%{\n    r:0.875px;\n  }\n}\n@keyframes linear-loop-stroke{\n  0%{\n    animation-timing-function:cubic-bezier(0.4, 0.14, 1, 1);\n    stroke-width:1.72;\n  }\n  100%{\n    stroke-width:1.72;\n  }\n}\n@keyframes linear-unload-size{\n  0%{\n    r:0.875px;\n  }\n  8.33%{\n    r:0.875px;\n  }\n  33.33%{\n    animation-timing-function:cubic-bezier(0.4, 0.14, 1, 1);\n    r:2.5px;\n  }\n  58.33%{\n    r:0;\n  }\n  100%{\n    r:0;\n  }\n}\n@keyframes linear-unload-stroke{\n  0%{\n    stroke-width:1.72;\n  }\n  50%{\n    stroke-width:1.72;\n  }\n  58.33%{\n    stroke-width:0;\n  }\n  100%{\n    stroke-width:0;\n  }\n}\n@media (prefers-reduced-motion: reduce){\n  .dot--left,\n  .dot--center,\n  .dot--right{\n    animation:none;\n    transition:none;\n  }\n}")}
  `,(0,m.Cg)([(0,g.MZ)({type:Boolean})],ie.prototype,"bounce",void 0),(0,m.Cg)([(0,g.MZ)({type:Boolean})],ie.prototype,"loop",void 0),(0,m.Cg)([(0,g.MZ)({type:Boolean})],ie.prototype,"quickLoad",void 0),(0,m.Cg)([(0,g.MZ)({type:String})],ie.prototype,"carbonTheme",void 0),ie=(0,m.Cg)([(0,p.c)(re)],ie);const oe=(0,d.a)({tagName:re,elementClass:ie,react:s});function le(e){const{agentProfile:t,languagePack:n,width:a,height:r}=e,i=t?.nickname,o=(0,I.u)({width:a,height:r}),l=t?.profile_picture_url,[c,d]=(0,s.useState)(!1);let m;return(0,s.useEffect)(()=>{d(!1)},[l]),m=!c&&l?s.createElement("img",{src:l,alt:n.agent_ariaAgentAvatar,onError:()=>d(!0)}):i?.match(/^[\x20-\xFE]+$/)?s.createElement("div",{"aria-label":n.agent_ariaAgentAvatar,className:"WACAgentAvatar__Circle",style:o},s.createElement("div",{className:"WACAgentAvatar__Letter"},i.charAt(0))):s.createElement(w,{size:32,width:a?Number(a.replace("px","")):void 0,height:r?Number(r.replace("px","")):void 0,"aria-label":n.agent_ariaAgentAvatar}),s.createElement("div",{className:"WACAgentAvatar"},m)}function ce(e,t){const{onButtonClick:n}=e,a=(0,S.u)(),r=(0,M.u)(),i=(0,o.d4)(e=>e.persistedToBrowserStorage.chatState.agentState),c=(0,o.d4)(e=>e.agentState),{isConnecting:d,availability:m,isScreenSharing:u}=c,g=(0,o.d4)(h.s,o.bN),{agentProfile:p}=i,f=(0,s.useRef)();let C,A,_,v,b;return d?(b=s.createElement("div",{className:"WACLoadingBar__ConnectingAnimation"}),C=a.agent_connecting,A=s.createElement(I.A,{announceOnce:a.agent_connecting},s.createElement(R.A,{availability:m,fallbackText:a.agent_connectWaiting})),v=a.agent_connectButtonCancel):(C=p?.nickname||a.agent_noName,v=a.agent_connectedButtonEndChat,_=s.createElement(le,{agentProfile:p,languagePack:a,width:"32px",height:"32px"})),(0,s.useImperativeHandle)(t,()=>({requestFocus:()=>!!f.current&&((0,M.d)(f),!0)})),s.createElement("div",{className:l("WACAgentBanner",{"WACAgentBanner--connected":!d})},g.isConnectingOrConnected&&s.createElement("div",{className:"WACAgentBanner__Body"},_,s.createElement("div",{className:"WACAgentBanner__AgentInfo"},s.createElement("div",{className:"WACAgentBanner__AgentLine1"},C),A&&s.createElement("div",{className:"WACAgentBanner__AgentLine2"},A)),s.createElement(y.$nd,{ref:f,className:"WACAgentBanner__Button WACAgentBanner__CancelButton",onClick:n,size:"sm"},v)),u&&s.createElement(y.$nd,{className:"WACAgentBanner__Button WACAgentBanner__StopSharingButton",kind:"danger",size:"sm",renderIcon:E,onClick:()=>{r.humanAgentService.screenShareStop()}},a.agent_sharingStopSharingButton),b)}const de=s.memo((0,s.forwardRef)(ce));function me({onButtonClick:e,bannerRef:t}){const n=(0,o.d4)(e=>e.agentState);return(0,o.d4)(h.s,o.bN).isConnectingOrConnected||n.isScreenSharing?s.createElement(de,{ref:t,onButtonClick:e}):null}function ue({children:e}){const{namespace:t}=(0,M.u)();return s.createElement(s.Fragment,null,s.createElement(f.a,{slotName:k.W.WELCOME_NODE_BEFORE_ELEMENT,id:`welcomeNodeBeforeElement${t.suffix}`}),e)}var ge=s.memo(ue);function pe({notifications:e,serviceManager:t}){const n=(0,S.u)();return e.length?s.createElement("div",{className:"WACNotifications"},e.map(e=>{const a=e.notification,r=()=>{t.store.dispatch(x.a.removeNotifications({notificationID:e.id}))};let i,o;return a.actionButtonLabel&&a.onActionButtonClick&&(i=()=>{a.onActionButtonClick(),r()},o=a.actionButtonLabel),s.createElement("div",{className:"WACNotifications__Notification",key:e.id},s.createElement(y.kZS,{"aria-label":n.notifications_toastClose,actionButtonLabel:o,onActionButtonClick:i,kind:a.kind,onClose:()=>{r(),a.onCloseButtonClick?.()},subtitle:a.message,title:a.title,hasFocus:!1}))})):null}function fe({theme:e}){const t=`a-${(0,j.u)()}`,n=`b-${(0,j.u)()}`,a=`c-${(0,j.u)()}`,r=`d-${(0,j.u)()}`,i=`e-${(0,j.u)()}`;return e===k.b.WHITE||e===k.b.G10?s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"cds--watsonx-avatar","aria-hidden":"true"},s.createElement("defs",null,s.createElement("linearGradient",{id:t,x1:"1186.526",y1:"2863.168",x2:"1199.825",y2:"2845.109",gradientTransform:"matrix(.8312 .55596 -.27409 .40979 -198.894 -1827.398)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".3"}),s.createElement("stop",{offset:"1",stopOpacity:"0"})),s.createElement("linearGradient",{id:n,x1:"1189.388",y1:"2911.794",x2:"1200.478",y2:"2896.735",gradientTransform:"rotate(146.223 380.87 -882.286) scale(1 -.493)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".3"}),s.createElement("stop",{offset:".9",stopOpacity:"0"})),s.createElement("linearGradient",{id:a,x1:"-4995.033",y1:"-20162.835",x2:"-4981.733",y2:"-20180.895",gradientTransform:"rotate(-146.223 -971.422 -5714.55) scale(1 .493)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".32"}),s.createElement("stop",{offset:".354",stopOpacity:".798"}),s.createElement("stop",{offset:".7",stopOpacity:"0"})),s.createElement("linearGradient",{id:r,x1:"0",y1:"32",x2:"32",y2:"0",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".1",stopColor:"#a56eff"}),s.createElement("stop",{offset:".9",stopColor:"#0f62fe"})),s.createElement("mask",{id:i,x:"0",y:"0",width:"32",height:"32",maskUnits:"userSpaceOnUse"},s.createElement("path",{d:"M16 1A14.915 14.915 0 0 0 5.502 5.286l1.4 1.429A12.922 12.922 0 0 1 16 3.001c.977 0 1.929.109 2.845.315-3.402.921-5.916 4.026-5.916 7.715 0 .782.118 1.537.328 2.252a7.978 7.978 0 0 0-2.188-.312c-3.704 0-6.819 2.534-7.726 5.957a12.954 12.954 0 0 1-.345-2.927c0-2.117.492-4.134 1.462-5.996l-1.773-.924A15.037 15.037 0 0 0 .999 16c0 8.271 6.729 15 15 15 3.949 0 7.678-1.522 10.498-4.286l-1.4-1.428A12.926 12.926 0 0 1 15.999 29c-3.648 0-6.945-1.516-9.309-3.945a5.959 5.959 0 0 1-1.621-4.086c0-3.309 2.691-6 6-6a6.006 6.006 0 0 1 5.897 7.107l1.967.367a7.971 7.971 0 0 0-.192-3.726 7.976 7.976 0 0 0 2.187.312c3.71 0 6.829-2.542 7.73-5.974.22.947.34 1.931.34 2.944 0 2.117-.492 4.134-1.462 5.995l1.773.924a15.034 15.034 0 0 0 1.688-6.919C31 7.729 24.272 1 16 1zm4.93 16.03c-3.309 0-6-2.692-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z",style:{fill:"#fff",strokeWidth:0}}),s.createElement("path",{style:{fill:`url(#${t})`,strokeWidth:0},d:"M8 9 0 0h16l2.305 3.304L8 9z"}),s.createElement("path",{style:{fill:`url(#${n})`,strokeWidth:0},d:"m12 31 4.386-9L6 21 2 31h10z"}),s.createElement("path",{style:{fill:`url(#${a})`,strokeWidth:0},d:"m24 23 8 9H16l-2.304-3.305L24 23z"}),s.createElement("path",{style:{strokeWidth:0},d:"M16 31h-4.283L15 22h2l-1 9z"}))),s.createElement("g",{style:{mask:`url(#${i})`}},s.createElement("path",{style:{fill:`url(#${r})`,strokeWidth:0},d:"M0 0h32v32H0z"})),s.createElement("circle",{cx:"6",cy:"6",r:"2",style:{fill:"#001d6c",strokeWidth:0}}),s.createElement("circle",{cx:"26",cy:"26",r:"2",style:{fill:"#001d6c",strokeWidth:0}}),s.createElement("path",{d:"M16 31c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5zm0-8c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3z",style:{fill:"#001d6c",strokeWidth:0}})):s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",className:"cds--watsonx-avatar","aria-hidden":"true"},s.createElement("defs",null,s.createElement("linearGradient",{id:t,x1:"1196.653",y1:"2930.892",x2:"1209.953",y2:"2912.832",gradientTransform:"matrix(.8312 .55596 -.27409 .40979 -188.767 -1860.755)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".3"}),s.createElement("stop",{offset:"1",stopOpacity:"0"})),s.createElement("linearGradient",{id:n,x1:"1299.261",y1:"2844.072",x2:"1310.351",y2:"2829.012",gradientTransform:"rotate(146.223 440.869 -882.286) scale(1 -.493)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".3"}),s.createElement("stop",{offset:".9",stopOpacity:"0"})),s.createElement("linearGradient",{id:a,x1:"-4885.16",y1:"-20230.559",x2:"-4871.86",y2:"-20248.618",gradientTransform:"rotate(-146.223 -911.421 -5714.55) scale(1 .493)",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".32"}),s.createElement("stop",{offset:".354",stopOpacity:".798"}),s.createElement("stop",{offset:".7",stopOpacity:"0"})),s.createElement("linearGradient",{id:r,x1:"0",y1:"32",x2:"32",y2:"0",gradientUnits:"userSpaceOnUse"},s.createElement("stop",{offset:".1",stopColor:"#be95ff"}),s.createElement("stop",{offset:".9",stopColor:"#4589ff"})),s.createElement("mask",{id:i,x:"0",y:"0",width:"32",height:"32",maskUnits:"userSpaceOnUse"},s.createElement("path",{d:"M16 1A14.915 14.915 0 0 0 5.502 5.286l1.4 1.429A12.922 12.922 0 0 1 16 3.001c.977 0 1.929.109 2.845.315-3.402.921-5.916 4.026-5.916 7.715 0 .782.118 1.537.328 2.252a7.978 7.978 0 0 0-2.188-.312c-3.704 0-6.819 2.534-7.726 5.957a12.954 12.954 0 0 1-.345-2.927c0-2.117.492-4.134 1.462-5.996l-1.773-.924A15.037 15.037 0 0 0 .999 16c0 8.271 6.729 15 15 15 3.949 0 7.678-1.522 10.498-4.286l-1.4-1.428A12.926 12.926 0 0 1 15.999 29c-3.648 0-6.945-1.516-9.309-3.945a5.959 5.959 0 0 1-1.621-4.086c0-3.309 2.691-6 6-6a6.006 6.006 0 0 1 5.897 7.107l1.967.367a7.971 7.971 0 0 0-.192-3.726 7.976 7.976 0 0 0 2.187.312c3.71 0 6.829-2.542 7.73-5.974.22.947.34 1.931.34 2.944 0 2.117-.492 4.134-1.462 5.995l1.773.924a15.034 15.034 0 0 0 1.688-6.919c0-8.271-6.729-15-15-15zm4.93 16.03c-3.309 0-6-2.692-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z",style:{fill:"#fff",strokeWidth:0}}),s.createElement("path",{style:{fill:`url(#${t})`,strokeWidth:0},d:"M8 9 0 0h16l2.305 3.305L8 9z"}),s.createElement("path",{style:{fill:`url(#${n})`,strokeWidth:0},d:"m12 31 4.386-9L6 21 2 31h10z"}),s.createElement("path",{style:{fill:`url(#${a})`,strokeWidth:0},d:"m24 23 8 9H16l-2.305-3.305L24 23z"}),s.createElement("path",{style:{strokeWidth:0},d:"M16 31h-4.283L15 22h2l-1 9z"}))),s.createElement("g",{style:{mask:`url(#${i})`}},s.createElement("path",{style:{fill:`url(#${r})`,strokeWidth:0},d:"M0 0h32v32H0z"})),s.createElement("circle",{cx:"6",cy:"6",r:"2",style:{fill:"#f4f4f4",strokeWidth:0}}),s.createElement("circle",{cx:"26",cy:"26",r:"2",style:{fill:"#f4f4f4",strokeWidth:0}}),s.createElement("path",{d:"M16 31c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5zm0-8c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3z",style:{fill:"#f4f4f4",strokeWidth:0}}))}const he=s.memo(fe);function Ce(e){return s.createElement("div",{className:"WACIconHolder"},e.icon)}function Ee(e){const{url:t,alt:n,fallback:a}=e,[r,i]=(0,s.useState)(!1);let o;return(0,s.useEffect)(()=>{i(!1)},[t]),o=!r&&t?s.createElement("img",{src:t,alt:n,onError:()=>i(!0)}):a,s.createElement("div",{className:"WACImageWithFallback"},o)}var Ae;!function(e){e[e.FIRST=1]="FIRST",e[e.LAST=2]="LAST",e[e.NEXT=3]="NEXT",e[e.PREVIOUS=4]="PREVIOUS",e[e.INPUT=5]="INPUT"}(Ae||(Ae={}));class _e extends s.PureComponent{constructor(){super(...arguments),this.state={didRenderErrorOccur:!1,focusHandleHasFocus:!1},this.ref=s.createRef(),this.messageRef=s.createRef(),this.focusHandleRef=s.createRef(),this.getLocalMessage=()=>this.props.localMessageItem,this.onHandleFocus=()=>{this.setState({focusHandleHasFocus:!0})},this.onHandleBlur=()=>{this.setState({focusHandleHasFocus:!1})},this.onHandleKeyDown=e=>{if(e.altKey||e.metaKey||e.ctrlKey||e.shiftKey)return;let t;if("ArrowUp"===e.key)t=Ae.PREVIOUS;else if("ArrowDown"===e.key)t=Ae.NEXT;else if("Home"===e.key)t=Ae.FIRST;else if("End"===e.key)t=Ae.LAST;else if("Escape"===e.key)t=Ae.INPUT;else if("Enter"===e.key||" "===e.key)return e.preventDefault(),void this.reAnnounceFocusHandle();t&&(e.preventDefault(),this.props.requestMoveFocus(t,this.props.messagesIndex))}}getWidgetSaidMessage(){const{intl:e,botName:t,localMessageItem:n}=this.props;let a;return n.item.agent_message_type?n.item.response_type===Q.b.TEXT&&(a="messages_agentSaid"):a="messages_botSaid",a?e.formatMessage({id:a},{botName:t}):null}componentDidCatch(e,t){this.props.serviceManager.actions.errorOccurred((0,L.a)("Message",e,t)),this.setState({didRenderErrorOccur:!0})}componentDidMount(){const e=this.props.localMessageItem.ui_state;e.needsAnnouncement&&(this.props.ariaAnnouncer(this.ref.current),this.props.serviceManager.store.dispatch(x.a.setMessageWasAnnounced(e.id)))}componentDidUpdate(){const e=this.props.localMessageItem.ui_state;e.needsAnnouncement&&(this.props.ariaAnnouncer(this.ref.current),this.props.serviceManager.store.dispatch(x.a.setMessageWasAnnounced(e.id)))}shouldRenderFailedMessage(){if(this.state.didRenderErrorOccur)return!0;const{localMessageItem:e,message:t}=this.props;return(0,F.i)(e.item)&&t.history?.agent_no_service_desk}reAnnounceFocusHandle(){const e=this.focusHandleRef.current;e&&this.props.ariaAnnouncer(e.getAttribute("aria-label"))}requestHandleFocus(){const{languagePack:e,intl:t,message:n,botName:a}=this.props,s=[(0,F.a)(n)?e.messages_youSaid:t.formatMessage({id:"messages_botSaid"},{botName:a})];(0,R.n)(this.messageRef.current,s),this.focusHandleRef.current.setAttribute("aria-label",s.join(" ")),(0,M.d)(this.focusHandleRef,!0)}renderFailedRenderMessage(){const{messagesIndex:e}=this.props;return s.createElement("div",{className:`WAC__message WAC__message--inlineError WAC__message-${e} ${this.props.className||""}`,ref:this.ref},s.createElement("div",{className:"WAC__message--padding"},s.createElement("div",{className:"WAC__bot-message"},s.createElement(I.V,null,this.getWidgetSaidMessage()),s.createElement("div",{className:"WAC__received WAC__message-vertical-padding WAC__received--text"},s.createElement(Y.I,{text:this.props.languagePack.errors_singleMessage})))))}renderAvatarLine(e,t){let n;const{languagePack:a,botAvatarURL:i,useAITheme:o,carbonTheme:l}=this.props,c=function(e){return J(e).format("LT")}(t.history.timestamp);let d,m,u="";if((0,F.b)(t)){const g=e.item.agent_message_type,p=t.history.agent_profile;if(ve(g))return null;const f=g===Q.A.FROM_AGENT;if(f||p?.profile_picture_url)n=s.createElement(Ee,{url:p?.profile_picture_url,alt:f?a.agent_ariaAgentAvatar:a.agent_ariaGenericAvatar,fallback:s.createElement(Ce,{icon:s.createElement(K.A,null)})}),u="WACMessage__Avatar--agent";else{const e=o?s.createElement(he,{theme:l}):s.createElement(Ce,{icon:s.createElement(U,null)}),t=o?void 0:i;n=s.createElement(Ee,{url:t,alt:a.agent_ariaGenericBotAvatar,fallback:e}),u="WACMessage__Avatar--bot"}f||p?.nickname?m=p?.nickname||a.agent_agentNoNameTitle:o&&(m="watsonx"),d=s.createElement("span",{"data-wac-exclude-node-read":!0},s.createElement(r.A,{id:"message_labelBot",values:{timestamp:c,actorName:m}}))}else d=s.createElement(r.A,{id:"message_labelYou",values:{timestamp:c}});return s.createElement("div",{className:"WACMessage__AvatarLine",key:`${t.id}-avatar-line`},n&&s.createElement("div",{className:`WACMessage__Avatar ${u}`},n),s.createElement("div",{className:"WACMessage__Label"},d))}renderMessageState(e){const{languagePack:t}=this.props;let n,a,r=!1;const i=e.history?.error_state,o=e.history?.file_upload_status;return i===T.M.FAILED?(n=s.createElement(Y.I,{text:t.errors_singleMessage}),a="WAC__message-error-failed",r=!0):o===k.F.UPLOADING?(n=s.createElement(X.L,{active:!0,overlay:!1,small:!0,assistiveText:t.fileSharing_statusUploading}),a="WAC__message-status-file-uploading"):"success"===o&&(n=s.createElement(Z,{"aria-label":t.fileSharing_statusUploading}),a="WAC__message-status-file-success"),n&&{element:s.createElement("div",{className:`WAC__message-status ${a}`},n),showBelowMessage:r}}renderFocusHandle(){return s.createElement("div",{className:"WACMessage--focusHandle",ref:this.focusHandleRef,tabIndex:-1,onFocus:this.onHandleFocus,onBlur:this.onHandleBlur,onKeyDown:e=>this.onHandleKeyDown(e),onClick:()=>this.reAnnounceFocusHandle(),role:"button"})}render(){if(this.shouldRenderFailedMessage())return this.renderFailedRenderMessage();const{serviceManager:e,config:t,localMessageItem:n,message:a,languagePack:r,requestInputFocus:i,messagesIndex:o,disableUserInputs:c,showAvatarLine:d,className:m,doAutoScroll:u,isMessageForInput:g,scrollElementIntoView:p,isFirstMessageItem:f,hideFeedback:h,allowNewFeedback:C}=this.props,{isIntermediateStreaming:E,isWelcomeResponse:A,disableFadeAnimation:_}=n.ui_state,v=n.item,b=v.response_type,y=v.agent_message_type,S=a.history.from_history,M=f;if(E&&!function(e){switch(e){case Q.b.IMAGE:case Q.b.VIDEO:case Q.b.AUDIO:case Q.b.OPTION:case Q.b.IFRAME:case Q.b.INLINE_ERROR:case Q.b.CONVERSATIONAL_SEARCH:case Q.b.USER_DEFINED:case Q.b.TEXT:return!0;default:return!1}}(v.response_type))return!1;const w=s.createElement(R.M,{serviceManager:e,languagePack:r,requestInputFocus:i,message:n,originalMessage:a,disableUserInputs:c,isMessageForInput:g,config:t,doAutoScroll:u,scrollElementIntoView:p,hideFeedback:h,allowNewFeedback:C}),W=(0,F.r)(n.item),N=A||_,k=function(e,t,n){if(n)return"WAC__received--agentCustom";if(!t||t!==Q.b.TEXT&&t!==Q.b.BUTTON)return"";switch(e){case null:case void 0:case Q.A.FROM_USER:return null;case Q.A.RELOAD_WARNING:case Q.A.DISCONNECTED:return"WAC__received--chatStatusMessage";case Q.A.FROM_AGENT:return"WAC__received--fromAgent";default:return"WAC__received--agentStatusMessage"}}(y,b,W),x=(0,F.a)(a),T=ve(n.item.agent_message_type);let B,H=!1;return(0,F.c)(n.item)&&(n.item.title||n.item.description||(H=!0)),x&&(B=this.renderMessageState(a)),s.createElement("div",{id:`WAC__message-${o}${e.namespace.suffix}`,className:l(`WAC__message WAC__message-${o}`,m,y&&"WAC__message--agentMessage",{"WAC__message--withAvatarLine":d,"WAC__message--request":x,"WAC__message--systemMessage":T,"WAC__message--response":!x,"WAC__message--no-animation":N,"WAC__message--custom":W,"WAC__message--disabled-inputs":c,"WAC__message--has-focus":this.state.focusHandleHasFocus,"WAC__message--option-response-without-title-or-description":H}),ref:this.ref},this.renderFocusHandle(),d&&this.renderAvatarLine(n,a),s.createElement("div",{className:"WAC__message--padding"},(0,F.b)(a)&&s.createElement("div",{className:"WAC__bot-message"},M&&s.createElement(I.V,null,this.getWidgetSaidMessage()),s.createElement("div",{className:l("WAC__received","WAC__message-vertical-padding",k,{"WAC__received--text":b===Q.b.TEXT,"WAC__received--image":b===Q.b.IMAGE,"WAC__received--options":b===Q.b.OPTION,"WAC__received--inlineError":b===Q.b.INLINE_ERROR,"WAC__received--iframePreviewCard":b===Q.b.IFRAME,"WAC__received--video":b===Q.b.VIDEO,"WAC__received--audio":b===Q.b.AUDIO,"WAC__received--date":b===Q.b.DATE,"WAC__received--card":b===Q.b.CARD,"WAC__received--carousel":b===Q.b.CAROUSEL,"WAC__received--conversationalSearch":b===Q.b.CONVERSATIONAL_SEARCH,"WAC__received--carouselSingle":(0,F.e)(n.item),"WAC__received--button":b===Q.b.BUTTON,"WAC__received--grid":b===Q.b.GRID,"WAC__received--fullWidth":(0,F.d)(n.item),"WAC__message--historical":S}),ref:this.messageRef},s.createElement("div",{className:"WAC__received--inner"},w))),x&&s.createElement("div",{className:"WAC__sent-container"},s.createElement("div",{className:l("WAC__sentAndMessageState-container","WAC__message-vertical-padding",{"WAC__sentAndMessageState--belowMessage":B?.showBelowMessage})},!B?.showBelowMessage&&B?.element,s.createElement("div",{className:"WAC__sent"},s.createElement(I.V,null,r.messages_youSaid),s.createElement("div",{className:"WAC__sent--bubble"},s.createElement("div",{ref:this.messageRef},w))),B?.showBelowMessage&&B?.element))))}}function ve(e){switch(e){case null:case void 0:case Q.A.FROM_USER:case Q.A.RELOAD_WARNING:case Q.A.DISCONNECTED:case Q.A.FROM_AGENT:case Q.A.INLINE_ERROR:return!1;default:return!0}}var be=(0,I.w)((0,i.Ay)(_e,{forwardRef:!0}));class ye extends s.PureComponent{constructor(){super(...arguments),this.state={scrollHandleHasFocus:!1},this.messageRefs=new Map,this.messagesContainerWithScrollingRef=s.createRef(),this.scrollHandleRef=s.createRef(),this.agentBannerRef=s.createRef(),this.onResize=()=>{if(this.props.messageState.isScrollAnchored){const e=this.messagesContainerWithScrollingRef.current;e&&(e.scrollTop=e.scrollHeight)}},this.doAutoScroll=(0,c.A)((e={})=>{try{const{scrollToTop:t,scrollToBottom:n}=e,{localMessageItems:a,messageState:s,allMessagesByID:r}=this.props,{isTypingCounter:i,isLoadingCounter:o}=s,{isAgentTyping:l}=(0,h.s)(this.props),c=this.messagesContainerWithScrollingRef.current;if(void 0!==t)return void(0,M.a)(c,t,0,!1);if(void 0!==n){const e=c.scrollHeight-c.offsetHeight-n;return void(0,M.a)(c,e,0,!1)}let d,m=!0;const u=a.length-1,g=a.length?a[u]:null,p=r[g?.fullMessageID];if(g)if(i>0||o>0||l)d=c.scrollHeight;else{const e=(e,t)=>{if((0,F.b)(t)){const e=r[t?.request_id];return e?.history?.silent&&""!==e.input?.text}return(0,F.a)(t)};let t=a.length-1,n=a[t],s=this.messageRefs.get(n?.ui_state.id);for(;t>=1;){n=a[t];const i=r[n?.fullMessageID];if(e(n,i)){s=this.messageRefs.get(n?.ui_state.id),Se(0,a[t]);break}t--}if(s){const e=s.ref.current?.offsetTop;d=e+H.A}else d=-1}else m=!1,d=0;-1!==d&&d>=c.scrollTop&&(p?.history?.from_history&&(m=!1),(0,M.a)(c,d,0,m),this.checkScrollAnchor(!0,d))}catch(e){(0,L.b)("An error occurred while attempting to scroll.",e)}},H.a),this.getContainerScrollBottom=()=>(0,M.g)(this.messagesContainerWithScrollingRef?.current),this.scrollElementIntoView=(e,t=8,n=8)=>{const a=this.messagesContainerWithScrollingRef.current,s=a.getBoundingClientRect(),r=e.getBoundingClientRect(),i=r.top-s.top+a.scrollTop-t,o=r.bottom-s.top+a.scrollTop+n,l=e.offsetHeight+t+n;i<a.scrollTop||l>a.offsetHeight?(0,M.a)(a,i,0):o>a.scrollTop+a.offsetHeight&&(0,M.a)(a,o-a.offsetHeight,0)},this.requestMoveFocus=(e,t)=>{if(e===Ae.INPUT)this.props.requestInputFocus();else{const{localMessageItems:n}=this.props;let a;switch(e){case Ae.LAST:a=n.length-1;break;case Ae.NEXT:a=t+1,a>=n.length&&(a=0);break;case Ae.PREVIOUS:a=t-1,a<0&&(a=n.length-1);break;default:a=0}const s=n[a],r=this.messageRefs.get(s?.ui_state.id);r&&r.requestHandleFocus()}}}componentDidMount(){this.scrollPanelObserver=new ResizeObserver(this.onResize),this.scrollPanelObserver.observe(this.messagesContainerWithScrollingRef.current),this.previousScrollOffsetHeight=this.messagesContainerWithScrollingRef.current.offsetHeight}componentDidUpdate(e){const t=this.props,n=e.localMessageItems.length!==t.localMessageItems.length,a=(0,h.s)(e),s=(0,h.s)(t),r=e.messageState.isTypingCounter!==t.messageState.isTypingCounter||e.messageState.isLoadingCounter!==t.messageState.isLoadingCounter||a.isAgentTyping!==s.isAgentTyping;(n||r)&&((0,F.f)(t.localMessageItems)!==(0,F.f)(e.localMessageItems)||r)&&this.doAutoScroll()}componentWillUnmount(){this.scrollPanelObserver.unobserve(this.messagesContainerWithScrollingRef.current)}checkScrollAnchor(e,t){const n=this.messagesContainerWithScrollingRef.current;if(e||this.previousScrollOffsetHeight===n.offsetHeight&&!this.props.suspendScrollDetection){const e=(void 0!==t?t:n.scrollTop)>=n.scrollHeight-n.offsetHeight;e!==this.props.messageState.isScrollAnchored&&this.props.serviceManager.store.dispatch(x.a.setChatMessagesStateProperty("isScrollAnchored",e))}this.previousScrollOffsetHeight=n.offsetHeight}requestAgentBannerFocus(){return!!this.agentBannerRef.current&&this.agentBannerRef.current.requestFocus()}doScrollToMessage(e,t=!0){try{const{localMessageItems:n}=this.props;let a;for(let t=0;t<=n.length;t++){const s=n[t];if(s.fullMessageID===e){a=this.messageRefs.get(s.ui_state.id);break}}if(a){const e=this.messagesContainerWithScrollingRef.current,n=a.ref.current.offsetTop;(0,M.a)(e,n,0,t),this.checkScrollAnchor(!0,n)}}catch(e){(0,L.b)("An error occurred while attempting to scroll.",e)}}getLastOutputMessageElements(){const{localMessageItems:e,allMessagesByID:t}=this.props,n=(0,F.f)(e),a=t[n?.fullMessageID];if((0,F.b)(a)){const t=[];let n=!1;for(let s=e.length-1;s>=0;s--){const r=e[s],i=this.messageRefs.get(r?.ui_state.id);if(i){const{getLocalMessage:e}=i;if(e().fullMessageID===a.id){n=!0;const e=i.ref?.current;if(!e)break;t.push(e)}else if(n)break}}return t.reverse()}return[]}renderTypingIndicator(e,t){return s.createElement("div",{className:`WAC__message WAC__message-${t} WAC__message--lastMessage`},s.createElement("div",{className:"WAC__message--padding"},e&&s.createElement(f.A,{message:e}),s.createElement("div",{className:"WAC__bot-message"},s.createElement("div",{className:"WAC__received WAC__received--loading WAC__message-vertical-padding"},s.createElement("div",{className:"WAC__received--inner"},s.createElement(oe,{loop:!0,carbonTheme:this.props.carbonTheme}))))))}renderMessage(e,t,n,a,r,i,o){const{serviceManager:c,config:d,languagePack:m,requestInputFocus:u,persistedToBrowserStorage:g,botName:p,messageState:f,locale:C,botAvatarURL:E,carbonTheme:A,useAITheme:_}=this.props,v=(0,h.a)(this.props),{isAgentTyping:b}=(0,h.s)(this.props),{isTypingCounter:y,isLoadingCounter:S}=f,{chatState:M}=g,{disclaimersAccepted:I}=M;if(d.public.disclaimer?.is_on&&!I[window.location.hostname])return null;const w=this.props.localMessageItems.length+(y>0||S>0||b?1:0),W=l({"WAC__message--firstMessage":0===n,"WAC__message--lastMessage":n===w-1}),N=e.fullMessageID===o,R=e.ui_state.id,x=s.createElement(be,{ref:e=>{e?this.messageRefs.set(R,e):this.messageRefs.delete(R)},className:W,config:d,localMessageItem:e,message:t,languagePack:m,requestInputFocus:u,serviceManager:c,messagesIndex:n,botName:p,disableUserInputs:v.isReadonly,isMessageForInput:r,showAvatarLine:i,botAvatarURL:E,requestMoveFocus:this.requestMoveFocus,doAutoScroll:this.doAutoScroll,scrollElementIntoView:this.scrollElementIntoView,isFirstMessageItem:i,locale:C,carbonTheme:A,useAITheme:_,allowNewFeedback:N,hideFeedback:!1});return a?s.createElement(ge,{welcomeNodeBeforeElement:c.writeableElements[k.W.WELCOME_NODE_BEFORE_ELEMENT],key:R},x):s.createElement(s.Fragment,{key:R},x)}renderAgentBanner(){return s.createElement(me,{bannerRef:this.agentBannerRef,onButtonClick:this.props.onEndAgentChat})}renderScrollHandle(e){const{languagePack:t}=this.props;let n;n=B.I?e?"messages_scrollHandle":"messages_scrollHandleEnd":e?"messages_scrollHandleDetailed":"messages_scrollHandleEndDetailed";const a=B.I?void 0:()=>this.requestMoveFocus(e?Ae.FIRST:Ae.LAST,0);return s.createElement("button",{type:"button",className:"WACMessages--scrollHandle",ref:this.scrollHandleRef,tabIndex:0,"aria-label":t[n]||t.messages_scrollHandle,onClick:a,onFocus:()=>this.setState({scrollHandleHasFocus:!0}),onBlur:()=>this.setState({scrollHandleHasFocus:!1})})}getMessageIDForUserInput(){const{localMessageItems:e,allMessagesByID:t}=this.props;for(let n=e.length-1;n>=0;n--){const a=e[n],s=t[a.fullMessageID];if((0,F.a)(s)&&s?.history?.error_state!==T.M.FAILED)return null;if((0,F.b)(s))return a.fullMessageID}return null}renderMessages(e){const{localMessageItems:t,allMessagesByID:n}=this.props,a=[],s=(0,F.f)(t)?.fullMessageID;let r=null;for(let i=0;i<t.length;i++){const o=t[i],l=n[o.fullMessageID],c=e===o.fullMessageID,d=r!==o.fullMessageID,m=o.ui_state.isWelcomeResponse&&d;r=o.fullMessageID,a.push(this.renderMessage(o,l,i,m,c,d,s))}return a}render(){const{localMessageItems:e,messageState:t,intl:n,botName:a,serviceManager:r,notifications:i}=this.props,{isTypingCounter:o,isLoadingCounter:c}=t,{isAgentTyping:d}=(0,h.s)(this.props),{scrollHandleHasFocus:m}=this.state,u=this.getMessageIDForUserInput(),g=this.renderMessages(u);let p;return d?p=n.formatMessage({id:"messages_agentIsTyping"}):o?p=n.formatMessage({id:"messages_botIsTyping"},{botName:a}):c&&(p=n.formatMessage({id:"messages_botIsLoading"},{botName:a})),s.createElement("div",{id:`WACMessages--holder${r.namespace.suffix}`,className:"WACMessages--holder"},this.renderAgentBanner(),s.createElement("div",{className:l("WACMessages__Wrapper",{"WACMessages__Wrapper--scrollHandleHasFocus":m})},s.createElement("div",{id:`WAC__messages${r.namespace.suffix}`,className:"WAC__messages",ref:this.messagesContainerWithScrollingRef,onScroll:()=>this.checkScrollAnchor()},this.renderScrollHandle(!0),g,(Boolean(o)||Boolean(c)||d)&&this.renderTypingIndicator(p,e.length),s.createElement(pe,{serviceManager:r,notifications:i}),this.renderScrollHandle(!1))))}}function Se(e,...t){}var Me=function(e){const t=s.forwardRef((t,n)=>{const a=(0,s.useContext)(M.S);return s.createElement(e,{...t,ref:n,serviceManager:a})});return t.displayName=`withServiceManager(${e.displayName||e.name||"Component"})`,t}((0,o.Ng)(e=>e,null,null,{forwardRef:!0})(ye));function Ie(e,t){const[n,a]=e,[s,r]=t;if(n===s&&a===r)return!0;if(n.length!==s.length)return!1;for(let e=0;e<=n.length;e++){const t=n[e],i=s[e];if(t!==i)return!1;if(a[t]!==r[i])return!1}return!0}function we(){const e=(0,M.u)(),t=(0,S.u)(),n=t.agent_sharingRequestTitle,a=t.agent_sharingRequestMessage,r=t.agent_sharingDeclineButton,i=t.agent_sharingAcceptButton;return s.createElement(f.C,{title:n,message:a,onConfirm:()=>{e.humanAgentService?.screenShareUpdateRequestState(T.S.ACCEPTED)},onCancel:()=>{e.humanAgentService?.screenShareUpdateRequestState(T.S.DECLINED)},cancelButtonLabel:r,confirmButtonLabel:i,modalAnnounceMessage:a,serviceManager:e})}class We extends s.Component{constructor(){super(...arguments),this.state={showEndChatConfirmation:!1,hasCaughtError:!1},this.inputRef=s.createRef(),this.headerRef=s.createRef(),this.messagesRef=s.createRef(),this.messagesToArray=(0,ee.A)((e,t)=>e.map(e=>t[e]),Ie),this.hideConfirmEndChat=()=>{this.setState({showEndChatConfirmation:!1}),setTimeout(()=>{this.requestInputFocus()})},this.showConfirmEndChat=()=>{this.setState({showEndChatConfirmation:!0})},this.confirmAgentEndChat=()=>{this.hideConfirmEndChat(),this.props.serviceManager.humanAgentService.endChat(!0)},this.requestDefaultFocus=()=>{this.headerRef?.current?.requestFocus()||(0,M.d)(this.messagesRef.current?.scrollHandleRef)},this.requestInputFocus=()=>{const{agentDisplayState:e}=this.props;try{if(e.isConnectingOrConnected&&e.disableInput&&this.messagesRef.current.requestAgentBannerFocus())return;if(this.inputRef.current)if(this.props.inputState.fieldVisible&&!this.shouldDisableInput())this.inputRef.current.takeFocus();else{const e=this.messagesRef.current.getLastOutputMessageElements();(0,M.f)(e)||this.requestDefaultFocus()}else this.requestDefaultFocus()}catch(e){(0,L.b)("An error occurred in Chat.requestInputFocus",e)}},this.doAutoScroll=e=>{this.messagesRef.current?.doAutoScroll(e)},this.getMessagesScrollBottom=()=>this.messagesRef?.current?.getContainerScrollBottom(),this.onFilesSelectedForUpload=e=>{this.props.agentDisplayState.isConnectingOrConnected&&(this.props.serviceManager.humanAgentService.filesSelectedForUpload(e),this.props.inputState.allowMultipleFileUploads||this.requestInputFocus())}}async scrollOnHydrationComplete(){this.doAutoScroll()}componentDidMount(){this.props.isHydrationAnimationComplete&&setTimeout(()=>{this.scrollOnHydrationComplete()})}componentDidUpdate(e){const{isHydrationAnimationComplete:t,agentState:n}=this.props;t&&!e.isHydrationAnimationComplete&&setTimeout(()=>{this.scrollOnHydrationComplete()});const a=n.isConnecting!==e.agentState.isConnecting;this.state.showEndChatConfirmation&&a&&this.hideConfirmEndChat()}componentDidCatch(e,t){this.props.serviceManager.actions.errorOccurred((0,L.a)("Chat",e,t)),this.setState({hasCaughtError:!0})}doScrollToMessage(e,t=!0){this.messagesRef.current?.doScrollToMessage(e,t)}getMessageInput(){return this.inputRef.current?.getMessageInput()}shouldDisableInput(){return this.props.inputState.isReadonly||this.props.agentDisplayState.disableInput}shouldDisableSend(){const{isHydrated:e}=this.props;return this.shouldDisableInput()||!e}renderMessagesAndInput(){const{languagePack:e,messageState:t,intl:n,allMessageItemsByID:a,isHydrated:r,serviceManager:i,inputState:o,onUserTyping:l,agentState:c,botName:d,onSendInput:m,locale:u,useAITheme:g,carbonTheme:p,agentDisplayState:h}=this.props,{fieldVisible:C,files:E,allowFileUploads:A,allowedFileUploadTypes:_,allowMultipleFileUploads:v,stopStreamingButtonState:b}=o,{fileUploadInProgress:y}=c,{inputPlaceholderKey:S}=h,M=((E?.length??0)>0||y)&&!v;return s.createElement(s.Fragment,null,r&&s.createElement("div",{className:"WACMessagesContainer__NonInputContainer"},s.createElement(Me,{ref:this.messagesRef,messageState:t,localMessageItems:this.messagesToArray(t.localMessageIDs,a),requestInputFocus:this.requestInputFocus,botName:d,intl:n,onEndAgentChat:this.showConfirmEndChat,locale:u,useAITheme:g,carbonTheme:p})),s.createElement(f.a,{slotName:k.W.BEFORE_INPUT_ELEMENT,id:`beforeInputElement${i.namespace.suffix}`}),s.createElement(ae.I,{ref:this.inputRef,languagePack:e,serviceManager:i,disableInput:this.shouldDisableInput(),disableSend:this.shouldDisableSend(),isInputVisible:C,onSendInput:m,onUserTyping:l,showUploadButton:A,disableUploadButton:M,allowedFileUploadTypes:_,allowMultipleFileUploads:v,pendingUploads:E,onFilesSelectedForUpload:this.onFilesSelectedForUpload,placeholder:e[S],isStopStreamingButtonVisible:b.isVisible,isStopStreamingButtonDisabled:b.isDisabled,testIdPrefix:se.O.MAIN}),this.state.showEndChatConfirmation&&s.createElement(R.E,{onConfirm:this.confirmAgentEndChat,onCancel:this.hideConfirmEndChat}),this.props.agentState.showScreenShareRequest&&s.createElement(we,null))}render(){const{languagePack:e,onClose:t,onCloseAndRestart:n,onRestart:a,onToggleHomeScreen:r,botName:i,headerDisplayName:o,headerAvatarConfig:l}=this.props,{hasCaughtError:c}=this.state;return s.createElement("div",{className:"WAC"},s.createElement(ne.B,{ref:this.headerRef,onClose:t,onCloseAndRestart:n,onRestart:a,headerDisplayName:o,headerAvatarConfig:l,onToggleHomeScreen:r,enableChatHeaderConfig:!0,includeWriteableElement:!0,testIdPrefix:se.O.MAIN}),s.createElement(Ne,null),s.createElement("div",{className:"WACPanelContent WAC__ChatNonHeaderContainer"},c&&s.createElement("div",{className:"WAC__MessagesErrorHandler"},s.createElement(te.CatastrophicError,{languagePack:e,onRestart:a,showHeader:!1,botName:i,headerDisplayName:o})),!c&&s.createElement("div",{className:"WAC__messagesAndInputContainer"},this.renderMessagesAndInput())))}}function Ne(){return(0,o.d4)(e=>e.showNonHeaderBackgroundCover)?s.createElement("div",{className:"WACBackgroundCover WACBackgroundCover__NonHeader"}):null}var Re=(0,i.Ay)(We,{forwardRef:!0})}}]);
//# sourceMappingURL=9818.bundle.js.map