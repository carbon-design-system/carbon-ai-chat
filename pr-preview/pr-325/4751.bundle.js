/*! For license information please see 4751.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_carbon_ai_chat_examples_demo=self.webpackChunk_carbon_ai_chat_examples_demo||[]).push([[4751],{307:function(e,t,n){n.d(t,{A:function(){return p},B:function(){return E},C:function(){return j},D:function(){return h},E:function(){return y},F:function(){return N},G:function(){return V},H:function(){return S},I:function(){return U},J:function(){return O},K:function(){return R},L:function(){return z},M:function(){return W},N:function(){return k},O:function(){return P},P:function(){return H},Q:function(){return M},T:function(){return d},a:function(){return C},b:function(){return m},c:function(){return g},d:function(){return G},e:function(){return $},f:function(){return l},g:function(){return Z},h:function(){return I},i:function(){return B},j:function(){return _},k:function(){return T},l:function(){return f},m:function(){return v},n:function(){return q},o:function(){return K},p:function(){return X},q:function(){return D},r:function(){return x},s:function(){return u},t:function(){return Y},u:function(){return A},v:function(){return w},w:function(){return F},x:function(){return b},y:function(){return s},z:function(){return c}});var r=n(8690),o=n(171),a=n(5564),i=n(1536);function s(e){return Array.isArray(e)?e:[e]}async function u(e,t){for(let n=0;n<e.length;n++){const r=e[n];await t(r,n,e)}}function c(e,t,n){const r=function(e,t){if(e)for(let n=e.length-1;n>=0;n--)if(t(e[n],n,e))return n;return-1}(e,t);return-1===r?void 0:e[r]}function l(e){return e&&e.length?e[e.length-1]:null}const d="main";function m(e){return e&&void 0!==e.output}function p(e){return e?.item.response_type===a.b.DATE}function f(e){return e.id||(e.id=(0,o.u)(o.U.MESSAGE)),e.thread_id||(e.thread_id=d),e.history||(e.history={}),e.history.timestamp||(e.history.timestamp=Date.now()),void 0===e.history.from_history&&(e.history.from_history=!1),e}function C(e){return void 0!==e?.input}function _(e){return Boolean(e.item.agent_message_type)}function E(e){return e?.input?.message_type===a.M.EVENT}function S(e){return e&&"text"===e.response_type&&void 0!==e.text}function b(e){return e.response_type===a.b.PAUSE&&1==e.typing}function A(e){return e.response_type===a.b.PAUSE}function g(e){return e?.response_type===a.b.OPTION&&void 0!==e.options}function h(e,t){const n={id:(0,o.u)(o.U.MESSAGE),thread_id:d,...(0,r.A)(e.value)};return n.history={label:e.label,related_message_id:t},n}function y(e,t){const n={id:(0,o.u)(o.U.MESSAGE),thread_id:d,input:null};return e.value?.input?.text?n.input=(0,r.A)(e.value.input):n.input={text:e.label},n.history={related_message_id:t},n}function I(){return f({id:(0,o.u)(o.U.MESSAGE),input:{text:""},history:{silent:!0,is_welcome_request:!0},thread_id:d})}function T(e){return f({input:{text:e,message_type:a.M.TEXT}})}function R(e){return f({id:e.id,input:{text:e.file.name,message_type:a.c.FILE,agent_message_type:a.A.FROM_USER},history:{file_upload_status:i.F.UPLOADING}})}function N(e,t,n){const r=T(e);return r.history={label:t,related_message_id:n},r}function v(e,t=d,n=a.b.TEXT,r){const i={response_type:n,text:e};return{id:(0,o.u)(o.U.MESSAGE),thread_id:t,output:{generic:[i]}}}function O(e,t){return f({output:{generic:[e]}})}function B(e){return e?.response_type===a.b.CONNECT_TO_AGENT}function H(e){return e?.response_type===a.b.CARD}function W(e){return e?.response_type===a.b.CAROUSEL}function M(e){return e?.response_type===a.b.BUTTON}function k(e){return M(e)&&e.button_type===a.a.SHOW_PANEL}function D(e){return M(e)?L(e.panel):H(e)?L(e):W(e)?void 0!==e.items:z(e)}function L(e){return void 0!==e?.body||void 0!==e?.footer}function x(e){switch(e.response_type){case a.b.TEXT:case a.b.IMAGE:case a.b.OPTION:case a.b.CONNECT_TO_AGENT:case a.b.IFRAME:case a.b.VIDEO:case a.b.AUDIO:case a.b.DATE:case a.b.CONVERSATIONAL_SEARCH:case a.b.TABLE:case a.b.INLINE_ERROR:case a.b.CARD:case a.b.CAROUSEL:case a.b.BUTTON:case a.b.GRID:return!1;default:return!U(e)}}function U(e){return w(e)}function w(e){return"IBM_BETA_JOURNEYS_TOUR"===e?.user_defined?.user_defined_type}function F(e){return Boolean(e.public.serviceDeskFactory)}function P(e){switch(e.response_type){case a.b.IMAGE:case a.b.IFRAME:case a.b.VIDEO:case a.b.AUDIO:case a.b.TEXT:case a.b.USER_DEFINED:case a.b.CARD:case a.b.GRID:return!0;default:return!1}}function $(e){return W(e)&&1===e.items.length}function G(e){return t=e,t?.response_type===a.b.USER_DEFINED&&e.full_width;var t}function z(e){return e?.response_type===a.b.GRID}function V(e,t){let n="button";return e&&"button"===e?n="button":(e&&"dropdown"===e||t>4)&&(n="dropdown"),n}function K(e){return Boolean(e.partial_item)}function q(e){return Boolean(e.complete_item)}function X(e){return Boolean(e.final_response)}function Y(e,t){const n=t?.streaming_metadata?.id;return n?`${e}-${n}`:null}function Z(e){return e.dimensions}function j(e){return function(e,t,n){for(let r=e.length-1;r>=0;r--){const o=t[e[r]];if(n(o))return o}}(e.botMessageState.messageIDs||[],e.allMessagesByID,e=>m(e)&&!function(e){return m(e)&&Boolean(e.output.generic?.find(e=>e?.agent_message_type))||C(e)&&Boolean(e.input.agent_message_type)}(e)&&Boolean(e.context))}},2022:function(e,t,n){n.d(t,{H:function(){return u}});var r=n(3696),o=n(5022),a=n(2865),i=n(8241);function s(e,t){const{brandColor:n,onClose:s,onRestart:u,onCloseAndRestart:c}=e,l=(0,o.d4)(e=>e.config.public.showRestartButton||e.config.public.headerConfig?.showRestartButton),d=(0,o.d4)(e=>e.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot),m=(0,o.d4)(e=>e.headerDisplayName),p=(0,o.d4)(e=>e.customMenuOptions),f=(0,o.d4)(e=>e.theme.useAITheme),C=(0,r.useRef)();(0,r.useImperativeHandle)(t,()=>C.current);const _=!d,E=(0,r.useCallback)(e=>{const{handler:t}=p[e];t()},[p]),S=p?.map(e=>e.text);return r.createElement("div",{className:"WACHomeScreenHeader"},r.createElement(a.H,{ref:C,displayName:m,showCenter:!0,showRestartButton:l,hideCloseAndRestartButton:_,onClickRestart:u,onClickClose:s,onCloseAndRestart:c,overflowClicked:E,overflowItems:S,useAITheme:f,brandColor:n,testIdPrefix:i.O.HOME_SCREEN}))}const u=r.memo((0,r.forwardRef)(s))},3926:function(e,t,n){n.d(t,{I:function(){return w}});var r=n(2417),o=n(6854),a=n(2554),i=n(3210),s=n(3696),u=n(1263),c=n(1807),l=n(4307),d=n(4452),m=n(4629),p=n(3539),f=(n(1200),n(1523)),C=n(7924),_=n(3192),E=n(4574),S=n(2865),b=n(4720),A=n(9890),g=n(619),h=n(9473),y=n(1517),I=n(9124),T=n(481),R=n(3744),N=n(171),v=n(4859),O=n(8241),B=n(1536);const H=(0,i.a)({tagName:"cds-custom-file-uploader-item",elementClass:c.Ay,react:s,events:{onBeingDeleted:"cds-custom-file-uploader-item-beingdeleted",onDelete:"cds-custom-file-uploader-item-deleted"}}),W=(0,f.dI)(C.A);class M extends _.WF{_handleOnClick(){this.onClick()}}M.styles=_.AH`
    ${(0,_.iz)(".cds--aichat-stop-icon svg{\n  fill:var(--cds-icon-disabled, rgba(22, 22, 22, 0.25));\n}")}
  `,(0,m.Cg)([(0,g.MZ)({type:String,attribute:"label"})],M.prototype,"label",void 0),(0,m.Cg)([(0,g.MZ)({type:String,attribute:"tooltip-alignment"})],M.prototype,"tooltipAlignment",void 0),(0,m.Cg)([(0,g.MZ)({type:Boolean,attribute:"disabled"})],M.prototype,"disabled",void 0),(0,m.Cg)([(0,g.MZ)({type:Object})],M.prototype,"onClick",void 0),(0,m.Cg)([A.oI],M.prototype,"_handleOnClick",null);let k=class extends M{render(){return function({label:e,disabled:t,tooltipAlignment:n,onClick:r}){return _.qy`
    <cds-custom-icon-button
      class="${S.b}-stop-streaming-button"
      align="${n}"
      kind="${b.B.GHOST}"
      size="${b.a.SMALL}"
      ?disabled=${t}
      @click="${r}"
    >
      <span
        class="${t?`${S.b}-stop-icon`:""}"
        slot="icon"
        >${(0,E.T)(W)}</span
      >
      <span slot="tooltip-content">${e}</span>
    </cds-custom-icon-button>
  `}(this)}};k=(0,m.Cg)([(0,p.c)("cds-aichat-stop-streaming-button")],k);const D=(0,i.a)({tagName:"cds-aichat-stop-streaming-button",elementClass:k,react:s});class L{constructor(){this.listeners=[]}addListener(e){this.listeners=[...this.listeners,e]}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}fireListeners(...e){this.listeners.length&&this.listeners.forEach(t=>t(...e))}}class x extends s.PureComponent{constructor(){super(...arguments),this.textAreaRef=s.createRef()}getHTMLElement(){return this.textAreaRef.current}takeFocus(){(0,R.d)(this.textAreaRef,!1,!0)}doBlur(){this.textAreaRef.current.blur()}render(){const{isRequired:e,name:t,id:n,onFocus:r,onBlur:o,onClick:a,onChange:i,onKeyDown:u,rows:c,value:l,autoSize:m,maxLength:p,disabled:f,placeholder:C,ariaLabel:_,testId:E,onSelect:S}=this.props;return s.createElement("div",{className:d("WAC__TextArea",{"WAC__TextArea--autoSize":m,"WAC__TextArea--disabled":f})},s.createElement("textarea",{ref:this.textAreaRef,"aria-label":_,"aria-required":e,className:"WAC__TextArea-textarea",disabled:f,id:n||E,maxLength:p,name:t,onFocus:r,onBlur:o,onClick:a,onChange:i,onKeyDown:u,onSelect:S,placeholder:C,rows:c,value:l||"","data-gramm":"false","data-gramm_editor":"false","data-enable-grammarly":"false","data-testid":E}),m&&s.createElement("div",{className:"WAC__TextArea-sizer"},l||C||" "))}}function U(e,t){const{isInputVisible:n,placeholder:i,disableInput:c,disableSend:m,disableUploadButton:f,pendingUploads:C,allowedFileUploadTypes:_,allowMultipleFileUploads:E,showUploadButton:S,onFilesSelectedForUpload:A,onSendInput:g,blurOnSend:W,serviceManager:M,onUserTyping:k,languagePack:U,isStopStreamingButtonVisible:w,isStopStreamingButtonDisabled:F,testIdPrefix:P}=e,$=`${M.namespace.suffix}-${(0,h.u)()}`,[G,z]=(0,s.useState)(!1),[V,K]=(0,s.useState)(""),q=(0,s.useRef)(!0),X=(0,s.useRef)(null),Y=(0,s.useRef)(),Z=(0,s.useRef)(),j=(0,s.useRef)(new L),J=(0,s.useRef)(""),Q=(0,s.useRef)({getHTMLElement:()=>Y?.current?.getHTMLElement(),setValue:e=>K(e),setEnableEnterKey:e=>{q.current=e},addChangeListener:e=>j.current.addListener(e),removeChangeListener:e=>j.current.removeListener(e)});function ee(){X.current&&(clearTimeout(X.current),X.current=null,k?.(!1))}function te(e){if(re()){e.preventDefault(),ee();const t=V.trim();g(t),K(""),W?Y.current.doBlur():Y.current.takeFocus()}}function ne(){!T.I&&n&&Y.current.takeFocus()}function re(){const e=Boolean(C?.length);return(!e||!C.find(e=>!(0,v.i)(e)))&&(Boolean(V.trim())||e)}G&&c&&z(!1),(0,s.useImperativeHandle)(t,()=>({takeFocus:ne,getMessageInput:()=>Q.current}));const{input_buttonLabel:oe,input_placeholder:ae,input_ariaLabel:ie,input_uploadButtonLabel:se,input_stopResponse:ue}=U,ce=c?"":V,le=re(),de=!le||c||m,me=f||c,pe=`WACInputContainer__UploadInput-${$}`,fe="rtl"===document.dir,Ce=i||(c?void 0:ae);return J.current!==V&&(J.current=V,j.current.fireListeners(V)),n&&s.createElement("div",{className:"WACInputAndCompletions"},s.createElement("div",{className:d("WACInputContainer",{"WACInputContainer--hasFocus":G,"WACInputContainer--showUploadButton":S})},s.createElement("div",{className:"WACInputContainer__LeftContainer"},s.createElement("div",{className:"WACInputContainer__TextAndUpload"},S&&s.createElement("div",{className:"WACInputContainer__UploadButtonContainer"},s.createElement("input",{ref:Z,accept:_,id:pe,className:"WACVisuallyHidden WACInputContainer__UploadInput",type:"file","aria-label":se,onChange:function(e){const t=(0,I.b)(M.store.getState()),{dispatch:n}=M.store,{files:r}=e.target,o=[];for(let e=0;e<r.length;e++){const a={id:(0,N.u)(N.U.FILE),status:B.F.EDIT,file:r[e]};o.push(a),n(y.a.addInputFile(a,t))}A?.(o),Z.current.value=null},multiple:E,disabled:me}),s.createElement("label",{className:d("WACInputContainer__UploadButton",{"WACInputContainer__UploadButton--disabled":me}),htmlFor:pe},s.createElement(r.A,null))),s.createElement(x,{autoSize:!0,ariaLabel:ie,disabled:c,maxLength:2048,onChange:function(e){const t=e.target.value;k&&(X.current?clearTimeout(X.current):k(!0),X.current=setTimeout(ee,5e3)),K(t)},onKeyDown:function(e){(0,R.i)(e)&&(m||!q.current?e.preventDefault():te(e))},placeholder:Ce,value:ce,ref:Y,onFocus:function(){z(!0)},onBlur:function(){z(!1)},testId:(0,O.m)(O.P.INPUT,P)})),Boolean(C?.length)&&s.createElement("div",{className:"WACInputContainer__FilesContainer"},C.map((e,t)=>s.createElement(H,{key:t,iconDescription:U.fileSharing_removeButtonTitle,state:u.C.EDIT,errorSubject:e.errorMessage,invalid:e.isError,size:u.i.SMALL,onDelete:()=>function(e){const t=(0,I.b)(M.store.getState());M.store.dispatch(y.a.removeFileUpload(e,t)),Y.current.takeFocus()}(e.id)},e.file.name)))),s.createElement("div",{className:"WACInputContainer__SendButtonContainer"},w&&s.createElement(D,{label:ue,disabled:F,tooltipAlignment:"top",onClick:()=>{const{store:e}=M;e.dispatch(y.a.setStopStreamingButtonDisabled(!0)),M.fire({type:p.B.STOP_STREAMING})}}),s.createElement(l.$nd,{className:"WACInputContainer__SendButton",kind:b.B.GHOST,size:b.a.SMALL,type:"button",onClick:te,"aria-label":oe,disabled:de,renderIcon:le?a.A:o.A,iconDescription:oe,tooltipAlignment:fe?"start":"end",tooltipPosition:"top",hasIconOnly:!0,"data-testid":(0,O.m)(O.P.INPUT_SEND,P)}))))}x.defaultProps={isRequired:!1,maxLength:1e4};const w=s.memo((0,s.forwardRef)(U))},4751:function(e,t,n){n.r(t),n.d(t,{HomeScreenContainer:function(){return g},default:function(){return g}});var r,o=n(3696),a=n(5022),i=n(3744),s=n(8241),u=n(5230),c=n(2117),l=n(4452),d=n(9708),m=n(3167),p=n(3926),f=n(2865),C=n(2022);!function(e){e.NONE="none",e.SOLID="solid"}(r||(r={}));var _=n(1536),E=n(8516),S=n(307);function b({homeScreenConfig:e,homeScreenMessageInputRef:t,onStarterClick:n,onSendInput:S,isHydrated:b,onClose:A,onCloseAndRestart:g,onRestart:h,onToggleHomeScreen:y}){const I=(0,d.u)(),T=(0,i.u)(),{showBackToBot:R}=(0,a.d4)(e=>e.persistedToBrowserStorage.chatState.homeScreenState),N=(0,i.b)(b),v=(0,a.d4)(e=>e.theme.useAITheme),O=T.writeableElements[_.W.HOME_SCREEN_AFTER_STARTERS_ELEMENT].hasChildNodes(),{greeting:B,starters:H,background:W,custom_content_only:M}=e,k=H?.is_on&&Boolean(H.buttons?.length),D=!v&&W===r.SOLID,L=b&&!N;return o.createElement("div",{className:l("WACHomeScreen",{"WACHomeScreen--backgroundAITheme":v,"WACHomeScreen--hydrationComplete":b,"WACHomeScreen--firstRender":L,"WACHomeScreen--backgroundSolid":D})},o.createElement(C.H,{brandColor:D?m.B.ACCENT:m.B.PRIMARY,onRestart:h,onClose:A,onCloseAndRestart:g}),o.createElement(f.a,{slotName:_.W.HOME_SCREEN_HEADER_BOTTOM_ELEMENT,className:"WACHomeScreen__HomeScreenBottomElement",id:`homeScreenHeaderBottomElement${T.namespace.suffix}`}),o.createElement("div",{className:"WACPanelContent WACHomeScreen__content"},o.createElement("div",{className:"WACHomeScreen__bodyWrapper"},o.createElement("div",{className:l("WACHomeScreen__body",{"WACHomeScreen__body--noCustomContent":!O,"WACHomeScreen__body--customContent":O,"WACHomeScreen__body--customContentOnly":M})},o.createElement("div",{className:"WACHomeScreen__initialContent"},!M&&o.createElement("div",{className:"WACHomeScreen__greeting"},B),!M&&k&&o.createElement("div",{className:l("WACHomeScreen__starters",{"WACHomeScreen__starters--animateGroup":H.buttons.length>5})},H.buttons.map((e,t)=>o.createElement(u.C,{size:E.gD.SMALL,kind:E.lD.TERTIARY,isQuickAction:!0,key:t,className:"WACHomeScreen__starter",onClick:()=>n(e)},e.label))))),o.createElement("div",{className:l("WACHomeScreen__customContent",{"WACHomeScreen__customContent--customContentOnly":M,"WACHomeScreen__customContent--animation":(O||M)&&!D})},o.createElement(f.a,{slotName:_.W.HOME_SCREEN_AFTER_STARTERS_ELEMENT,id:`homeScreenAfterStartersElement${T.namespace.suffix}`}))),o.createElement("div",{className:l("WACHomeScreen__inputContainerWrapper",{"WACHomeScreen__inputContainerWrapper--noCustomContent":!O&&!M})},R&&o.createElement(u.C,{size:E.gD.SMALL,kind:E.lD.SECONDARY,className:"WACHomeScreen__backButton",onClick:y},o.createElement("span",{className:"WACHomeScreen__backButtonContent"},o.createElement("span",{className:"WACHomeScreen__backButtonContentText"},I.homeScreen_returnToAssistant),o.createElement(c.A,null))),o.createElement(f.a,{slotName:_.W.HOME_SCREEN_BEFORE_INPUT_ELEMENT,id:`homeScreenBeforeInputElement${T.namespace.suffix}`}),o.createElement("div",{className:"WACHomeScreen__inputContainer"},o.createElement(p.I,{ref:t,onSendInput:S,disableInput:!1,isInputVisible:!0,disableSend:!1,languagePack:I,serviceManager:T,testIdPrefix:s.O.HOME_SCREEN})))))}n(3210),n(1263),n(1807),n(4307),n(1200),n(7924),n(3192),n(4574),n(9890),n(619),n(712),n(9417),n(445),n(6677),n(236),n(1162),n(4544),n(8325),n(4776),n(3716);const A=o.memo(b);function g({onClose:e,onCloseAndRestart:t,onPanelCloseStart:n,onPanelOpenStart:r,onPanelCloseEnd:u,onPanelOpenEnd:c,onSendBotInput:l,onSendButtonInput:d,onRestart:m,showHomeScreen:p,isHydrationAnimationComplete:f,homeScreenInputRef:C,onToggleHomeScreen:_}){const E=(0,i.u)(),b=(0,a.d4)(e=>e.homeScreenConfig),g=(0,a.d4)(e=>e.customPanelState.isOpen),h=(0,i.b)(f),y=g,I=p&&f&&h,T=(0,o.useCallback)(e=>{l(e)},[l]),R=(0,o.useCallback)(e=>{d({label:e.label,value:{input:{text:e.label}}},S.T)},[d]);return o.createElement(s.a,{onOpenStart:r,onOpenEnd:c,onCloseStart:n,onCloseEnd:u,animationOnOpen:I?s.b.FADE_IN:s.b.NONE,animationOnClose:s.A.FADE_OUT,shouldOpen:p,shouldHide:y,serviceManager:E,overlayPanelName:s.O.HOME_SCREEN},o.createElement(A,{isHydrated:f,homeScreenMessageInputRef:C,homeScreenConfig:b,onSendInput:T,onStarterClick:R,onClose:e,onCloseAndRestart:t,onRestart:m,onToggleHomeScreen:_}))}},5230:function(e,t,n){n.d(t,{C:function(){return i}});var r=n(3210),o=n(3696),a=n(8516);const i=(0,r.a)({tagName:"cds-custom-chat-button",elementClass:a.Ay,react:o})},9124:function(e,t,n){n.d(t,{a:function(){return c},b:function(){return u},s:function(){return s}});const r=e=>e.botInputState,o=e=>e.agentState.inputState,a=e=>e.agentState,i=e=>e.persistedToBrowserStorage.chatState.agentState;function s(e){const t=a(e),n=i(e);if(n.isSuspended)return{isConnectingOrConnected:!1,disableInput:!1,isAgentTyping:!1,inputPlaceholderKey:null};const{isReconnecting:r,isConnecting:o,isAgentTyping:s}=t,{isConnected:u}=n;let c;return c=o?"agent_inputPlaceholderConnecting":r?"agent_inputPlaceholderReconnecting":null,{isAgentTyping:s,isConnectingOrConnected:o||u,disableInput:o||r,inputPlaceholderKey:c}}function u(e){return s(e).isConnectingOrConnected}function c(e){return u(e)?o(e):r(e)}},9473:function(e,t,n){n.d(t,{u:function(){return a}});var r=n(3696);let o=1;function a(){const e=(0,r.useRef)();return void 0===e.current&&(e.current=o++),e.current}}}]);
//# sourceMappingURL=4751.bundle.js.map