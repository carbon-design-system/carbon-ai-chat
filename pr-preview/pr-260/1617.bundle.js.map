{"version":3,"file":"1617.bundle.js","mappings":"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","sources":["webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useUUID.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/AriaAnnouncerContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/settings.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/UUIDType.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/arrayUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/outputItemToLocalItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/BasePanelComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/homeScreenUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/intlUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/ChatInstanceImpl.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/environmentVariables.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/config/LauncherConfig.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/reducerUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/colors.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/styleUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/viewStateUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/events/ChatActionsImpl.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/events/EventBus.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/CustomPanelInstance.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/HistoryService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/historyToMessages.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/messageServiceUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/MessageService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/NamespaceService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/ServiceManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/mockStorage.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/UserSessionStorageService.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/customizers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/humanAgentReducers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/tourReducerUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/reducers.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/doCreateStore.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/chatEntryFunctions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/Chat.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/loadServices.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/subscriptions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/services/CustomPanelManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaAnnouncerProvider.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/launcherUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/Launcher.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherComplex.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherDesktopContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/animationUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherExtended.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherMobileContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/launcher/LauncherContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useEffectDidUpdate.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/HydrationPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/panels/CustomPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/main/MainWindow.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/HasAddRemoveClassName.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/App.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/UserDefinedResponsePortalsContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/WriteableElementsPortalsContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/AppContainer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/actions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hocs/withAriaAnnouncer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/PageObjectId.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/messaging/LocalMessageItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/Animation.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/OverlayPanel.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/HideComponentContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/languages/en.json.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/MountChildrenOnDelay.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/resolvablePromise.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/dynamic-imports/dynamic-imports.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/VisuallyHidden.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/browserUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/usePrevious.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/config/ChatHeaderConfig.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatarElement.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatarElement.scss.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/cds-aichat-chat-header-avatar.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderAvatar/src/chatHeaderAvatar.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderAvatar.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderLink/cds-aichat-chat-header-link.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderLink/src/chatHeaderLinkElement.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderLink.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenu.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuButton.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderMenuItemRadioGroup.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderOverflowMenu.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/cds-aichat-chat-header-title.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/src/chatHeaderTitle.template.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/web-components/components/chatHeader/chatHeaderTitle/src/chatHeaderTitle.scss.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/react/components/chatHeader/ChatHeaderTitle.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/AISlug.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/Header.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaAnnouncerComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/homeScreen/HomeScreenHeader.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/languages.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useLanguagePack.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/HideComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/WindowSizeContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/utilities/carbonTypes.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useServiceManager.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/ModalPortalRootContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/uuid.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/aria/AriaLiveMessage.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/domUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/messageUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/util/AnnounceOnMountComponent.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/state/AppState.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/WriteableElement.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/ServiceManagerContext.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/containers/ModalPortal.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/modals/ConfirmModal.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/types/instance/ChatInstance.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/humanAgentActions.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/store/selectors.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/components/header/BotHeader.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/utils/lang/objectUtils.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/schema/inputItemToLocalItem.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/hooks/useAriaAnnouncer.js","webpack://@carbon/ai-chat-examples-demo/../packages/ai-chat/dist/es/chat/shared/contexts/LanguagePackContext.js"],"sourcesContent":["import { useRef } from \"react\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useUUID() {\n  const ref = useRef();\n  if (ref.current === undefined) {\n    ref.current = uuid(UUIDType.COMPONENT);\n  }\n  return ref.current;\n}\n\nexport { useUUID };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const AriaAnnouncerContext = React.createContext(null);\n\nexport { AriaAnnouncerContext };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst CSS_CLASS_PREFIX = \"cds--aichat\";\n\nconst WEB_COMPONENT_PREFIX = \"cds-aichat\";\n\nexport { CSS_CLASS_PREFIX, WEB_COMPONENT_PREFIX };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar UUIDType;\n\n(function(UUIDType) {\n  UUIDType[UUIDType[\"MISCELLANEOUS\"] = 1] = \"MISCELLANEOUS\";\n  UUIDType[UUIDType[\"LOCAL_MESSAGE\"] = 2] = \"LOCAL_MESSAGE\";\n  UUIDType[UUIDType[\"MESSAGE\"] = 3] = \"MESSAGE\";\n  UUIDType[UUIDType[\"COMPONENT\"] = 4] = \"COMPONENT\";\n  UUIDType[UUIDType[\"USER\"] = 6] = \"USER\";\n  UUIDType[UUIDType[\"DEVICE_ID\"] = 8] = \"DEVICE_ID\";\n  UUIDType[UUIDType[\"FILE\"] = 9] = \"FILE\";\n})(UUIDType || (UUIDType = {}));\n\nexport { UUIDType };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction asArray(value) {\n  return Array.isArray(value) ? value : [ value ];\n}\n\nasync function asyncForEach(array, callbackFunction) {\n  for (let index = 0; index < array.length; index++) {\n    const value = array[index];\n    await callbackFunction(value, index, array);\n  }\n}\n\nfunction findLast(array, predicate, startAt) {\n  const lastIndex = findLastIndex(array, predicate);\n  return lastIndex === -1 ? undefined : array[lastIndex];\n}\n\nfunction findLastIndex(array, predicate, startAt) {\n  if (array) {\n    const startingIndex = array.length - 1;\n    for (let index = startingIndex; index >= 0; index--) {\n      const value = array[index];\n      if (predicate(value, index, array)) {\n        return index;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction findLastWithMap(keys, map, predicate) {\n  for (let index = keys.length - 1; index >= 0; index--) {\n    const key = keys[index];\n    const value = map[key];\n    if (predicate(value, index, keys)) {\n      return value;\n    }\n  }\n  return undefined;\n}\n\nfunction arrayLastValue(array) {\n  return array && array.length ? array[array.length - 1] : null;\n}\n\nexport { arrayLastValue, asArray, asyncForEach, findLast, findLastWithMap };\n","import { MessageResponseTypes, ButtonItemType } from \"../../../types/messaging/Messages.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { streamItemID, isGridResponseType, isCarouselResponseType, isShowPanelButtonType, isResponseWithNestedItems, isItemSupportedInResponseBody, isCardResponseType, isButtonResponseType, createMessageResponseForItem } from \"../utils/messageUtils.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function outputItemToLocalItem(messageItem, fullMessage, isLatestWelcomeNode = false, disableFadeAnimation = false) {\n  const id = streamItemID(fullMessage.id, messageItem) || uuid(UUIDType.LOCAL_MESSAGE);\n  const localMessage = {\n    ui_state: {\n      id: id,\n      needsAnnouncement: !fullMessage.ui_state_internal?.from_history,\n      disableFadeAnimation: disableFadeAnimation\n    },\n    item: messageItem,\n    fullMessageID: fullMessage.id\n  };\n  if (isLatestWelcomeNode) {\n    localMessage.ui_state.isWelcomeResponse = true;\n  }\n  return localMessage;\n}\n\nfunction createLocalMessageForInlineError(text) {\n  const messageItem = {\n    response_type: MessageResponseTypes.INLINE_ERROR,\n    text: text\n  };\n  return createLocalMessageForItem(messageItem);\n}\n\nfunction createLocalMessageForItem(messageItem) {\n  const originalMessage = createMessageResponseForItem(messageItem);\n  const localMessage = outputItemToLocalItem(messageItem, originalMessage);\n  return {\n    originalMessage: originalMessage,\n    localMessage: localMessage\n  };\n}\n\nfunction createLocalMessageItemsForNestedMessageItems(localMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter) {\n  const {item: item} = localMessageItem;\n  if (isGridResponseType(item)) {\n    localMessageItem.ui_state.gridLocalMessageItemIDs = item.rows.map(row => row.cells.map(cell => {\n      const cellLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"items\", localMessageItem, cell.items, cellLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(localMessageItem.item, nestedMessageItem), false);\n      return cellLocalMessageItemIDs;\n    }));\n  } else if (isCarouselResponseType(item)) {\n    localMessageItem.ui_state.itemsLocalMessageItemIDs = [];\n    createLocalMessageItemsForNestedType(\"items\", localMessageItem, item.items, localMessageItem.ui_state.itemsLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), allowFooter);\n  } else {\n    const bodyItems = item.body || item.panel?.body;\n    if (bodyItems) {\n      localMessageItem.ui_state.bodyLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"body\", localMessageItem, bodyItems, localMessageItem.ui_state.bodyLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInBody(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n    if (!allowFooter) {\n      return;\n    }\n    const footerItems = item.footer || item.panel?.footer;\n    if (footerItems) {\n      localMessageItem.ui_state.footerLocalMessageItemIDs = [];\n      createLocalMessageItemsForNestedType(\"footer\", localMessageItem, footerItems, localMessageItem.ui_state.footerLocalMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, nestedMessageItem => isSupportedMessageItemInFooter(item, nestedMessageItem), !isShowPanelButtonType(item));\n    }\n  }\n}\n\nfunction createLocalMessageItemsForNestedType(type, localMessageItem, items, nestedMessageItemIDs, originalMessage, fromHistory, nestedLocalMessageItems, isSupported, allowFooter) {\n  items.forEach(nestedMessageItem => {\n    if (isSupported(nestedMessageItem)) {\n      const nestedLocalMessageItem = outputItemToLocalItem(nestedMessageItem, originalMessage, false, true);\n      nestedMessageItemIDs.push(nestedLocalMessageItem.ui_state.id);\n      nestedLocalMessageItems.push(nestedLocalMessageItem);\n      if (isResponseWithNestedItems(nestedLocalMessageItem.item)) {\n        createLocalMessageItemsForNestedMessageItems(nestedLocalMessageItem, originalMessage, fromHistory, nestedLocalMessageItems, allowFooter);\n      }\n    } else {\n      consoleError(`The \"${localMessageItem.item.response_type}\" response type does not support \"${nestedMessageItem.response_type}\" in \"${type}\" array.`);\n    }\n  });\n}\n\nfunction isSupportedMessageItemInBody(rootMessageItem, nestedMessageItem) {\n  switch (rootMessageItem.response_type) {\n   case MessageResponseTypes.CARD:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.CAROUSEL:\n    return isCardResponseType(nestedMessageItem);\n\n   case MessageResponseTypes.BUTTON:\n    return rootMessageItem.button_type === ButtonItemType.SHOW_PANEL && isItemSupportedInResponseBody(nestedMessageItem);\n\n   case MessageResponseTypes.GRID:\n    return !isCardResponseType(nestedMessageItem) && isItemSupportedInResponseBody(nestedMessageItem);\n\n   default:\n    return false;\n  }\n}\n\nfunction isSupportedMessageItemInFooter(rootMessageItem, nestedMessageItem) {\n  if (isButtonResponseType(nestedMessageItem)) {\n    if (isShowPanelButtonType(rootMessageItem)) {\n      return !isShowPanelButtonType(nestedMessageItem);\n    }\n    return true;\n  }\n  return false;\n}\n\nexport { createLocalMessageForInlineError, createLocalMessageItemsForNestedMessageItems, outputItemToLocalItem };\n","import FocusTrap from \"focus-trap-react\";\n\nimport React, { useRef, useImperativeHandle } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { IS_MOBILE } from \"../utils/browserUtils.js\";\n\nimport { Header as HeaderExport } from \"./header/Header.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function BasePanelComponent({className: className, children: children, isOpen: isOpen, hidePanelHeader: hidePanelHeader, labelBackButton: labelBackButton, title: title, hideBackButton: hideBackButton, useAITheme: useAITheme, onClickCloseAndRestart: onClickCloseAndRestart, onClickRestart: onClickRestart, testIdPrefix: testIdPrefix, ...headerProps}, ref) {\n  const showRestartButton = useSelector(state => state.config.public.headerConfig?.showRestartButton);\n  const headerRef = useRef();\n  useImperativeHandle(ref, () => headerRef.current);\n  return React.createElement(FocusTrap, {\n    active: isOpen,\n    focusTrapOptions: {\n      clickOutsideDeactivates: true,\n      returnFocusOnDeactivate: !IS_MOBILE,\n      preventScroll: true\n    }\n  }, React.createElement(\"div\", {\n    className: className\n  }, !hidePanelHeader && React.createElement(HeaderExport, {\n    ...headerProps,\n    ref: headerRef,\n    showRestartButton: showRestartButton,\n    onClickRestart: onClickRestart,\n    onCloseAndRestart: onClickCloseAndRestart,\n    showBackButton: !hideBackButton,\n    labelBackButton: labelBackButton,\n    displayName: title,\n    useAITheme: useAITheme,\n    testIdPrefix: testIdPrefix,\n    showCenter: true\n  }), React.createElement(\"div\", {\n    className: \"WACPanelContent\"\n  }, children)));\n}\n\nconst BasePanelComponentExport = React.memo(React.forwardRef(BasePanelComponent));\n\nexport { BasePanelComponentExport as BasePanelComponent };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction withoutEmptyStarters(config) {\n  let newConfig = config;\n  if (config?.starters?.buttons?.length) {\n    newConfig = {\n      allow_return: true,\n      ...config,\n      starters: {\n        ...config.starters,\n        buttons: config.starters.buttons.filter(button => Boolean(button.label?.trim()))\n      }\n    };\n    if (!newConfig?.starters?.buttons?.length) {\n      newConfig.starters.is_on = false;\n    }\n  }\n  return newConfig;\n}\n\nexport { withoutEmptyStarters };\n","import { createIntl } from \"react-intl\";\n\nimport actions from \"../store/actions.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function setIntl(serviceManager, locale, messages) {\n  serviceManager.intl = createIntl({\n    locale: locale,\n    messages: messages\n  });\n  serviceManager.store.dispatch(actions.setAppStateValue(\"languagePack\", messages));\n  serviceManager.store.dispatch(actions.setAppStateValue(\"locale\", locale));\n}\n\nexport { setIntl };\n","import dayjs from \"dayjs\";\n\nimport cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport actions from \"./store/actions.js\";\n\nimport { selectInputState } from \"./store/selectors.js\";\n\nimport \"../../types/state/AppState.js\";\n\nimport { withoutEmptyStarters } from \"./utils/homeScreenUtils.js\";\n\nimport { loadLocale, loadLanguagePack } from \"./utils/languages.js\";\n\nimport { consoleDebug, debugLog, consoleError, consoleWarn } from \"./utils/miscUtils.js\";\n\nimport { ViewChangeReason, MessageSendSource } from \"../../types/events/eventBusTypes.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { ViewType } from \"../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createChatInstance({serviceManager: serviceManager, callRender: callRender}) {\n  let wasRendered = false;\n  function getMainWindow() {\n    return {\n      addClassName: name => serviceManager.mainWindow?.addClassName(name),\n      removeClassName: name => serviceManager.mainWindow?.removeClassName(name)\n    };\n  }\n  function getMessageInput() {\n    return {\n      getHTMLElement: () => serviceManager.mainWindow?.getMessageInput()?.getHTMLElement(),\n      setValue: value => serviceManager.mainWindow?.getMessageInput()?.setValue(value),\n      setEnableEnterKey: value => serviceManager.mainWindow?.getMessageInput()?.setEnableEnterKey(value),\n      addChangeListener: listener => serviceManager.mainWindow?.getMessageInput()?.addChangeListener(listener),\n      removeChangeListener: listener => serviceManager.mainWindow?.getMessageInput()?.removeChangeListener(listener)\n    };\n  }\n  function getHomeScreenInput() {\n    return {\n      getHTMLElement: () => serviceManager.mainWindow?.getHomeScreenInput()?.getHTMLElement(),\n      setValue: value => serviceManager.mainWindow?.getHomeScreenInput()?.setValue(value),\n      setEnableEnterKey: value => serviceManager.mainWindow?.getHomeScreenInput()?.setEnableEnterKey(value),\n      addChangeListener: listener => serviceManager.mainWindow?.getHomeScreenInput()?.addChangeListener(listener),\n      removeChangeListener: listener => serviceManager.mainWindow?.getHomeScreenInput()?.removeChangeListener(listener)\n    };\n  }\n  let instance = {\n    render: () => {\n      if (wasRendered) {\n        consoleError(\"The render function has already been called!\");\n        return Promise.resolve(instance);\n      }\n      wasRendered = true;\n      return callRender();\n    },\n    on: handlers => {\n      serviceManager.eventBus.on(handlers);\n      return instance;\n    },\n    off: handlers => {\n      serviceManager.eventBus.off(handlers);\n      return instance;\n    },\n    once: handlers => {\n      serviceManager.eventBus.once(handlers);\n      return instance;\n    },\n    updateLanguagePack: newPack => {\n      debugLog(\"Called instance.updateLanguagePack\", newPack);\n      return serviceManager.actions.updateLanguagePack(newPack);\n    },\n    updateLocale: newLocale => {\n      debugLog(\"Called instance.updateLocale\", newLocale);\n      const localePromise = loadLocale(newLocale);\n      const languagePackPromise = loadLanguagePack(serviceManager.store.getState().languagePack);\n      return Promise.all([ localePromise, languagePackPromise ]).then(([localePack, languagePack]) => {\n        dayjs.locale(localePack);\n        setIntl(serviceManager, localePack.name, languagePack);\n        serviceManager.messageService.pendingLocale = true;\n        serviceManager.messageService.localeIsExplicit = true;\n      });\n    },\n    updateCSSVariables: (variables, whiteLabelVariables) => {\n      debugLog(\"Called instance.updateCSSVariables\", variables);\n      return serviceManager.actions.updateCSSVariables(variables, whiteLabelVariables);\n    },\n    send: async (message, options) => {\n      debugLog(\"Called instance.send\", message, options);\n      if (selectInputState(serviceManager.store.getState()).isReadonly) {\n        throw new Error(\"You are unable to send messages in read only mode.\");\n      }\n      return serviceManager.actions.send(message, MessageSendSource.INSTANCE_SEND, options);\n    },\n    doAutoScroll: (options = {}) => {\n      debugLog(\"Called instance.doAutoScroll\", options);\n      serviceManager.mainWindow?.doAutoScroll?.(options);\n    },\n    destroy: () => {\n      debugLog(\"Called instance.destroy\");\n      serviceManager.store.dispatch(actions.setAppStateValue(\"isDestroyed\", true));\n      serviceManager.container?.remove();\n      instance = undefined;\n    },\n    updateAssistantInputFieldVisibility: isVisible => {\n      debugLog(\"Called instance.updateAssistantInputFieldVisibility\", isVisible);\n      serviceManager.store.dispatch(actions.updateInputState({\n        fieldVisible: isVisible\n      }, false));\n    },\n    updateInputIsDisabled: isDisabled => {\n      debugLog(\"Called instance.updateInputIsDisabled\", isDisabled);\n      serviceManager.store.dispatch(actions.updateInputState({\n        isReadonly: isDisabled\n      }, false));\n    },\n    updateBotUnreadIndicatorVisibility: isVisible => {\n      debugLog(\"Called instance.updateBotUnreadIndicatorVisibility\", isVisible);\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"showUnreadIndicator\", isVisible));\n    },\n    changeView: async newView => {\n      debugLog(\"Called instance.changeView\", newView);\n      let issueWithNewView = false;\n      if (!wasRendered) {\n        consoleError(`You tried to call \"changeView\" without ever having called the \"render\" method. There is no view to change!`);\n        issueWithNewView = true;\n      }\n      const viewTypeValues = Object.values(ViewType);\n      if (typeof newView === \"string\") {\n        if (!viewTypeValues.includes(newView)) {\n          consoleError(`You tried to change the view but the view you specified is not a valid view name. Please use` + ` the valid view names; ${viewTypeValues.join(\", \")}.`);\n          issueWithNewView = true;\n        }\n      } else if (typeof newView === \"object\") {\n        Object.keys(newView).forEach(key => {\n          if (!viewTypeValues.includes(key)) {\n            consoleError(`You tried to change the state of multiple views by providing an object, however you included the key` + ` \"${key}\" within the object which is not a valid view name. Please use the valid view names; ` + `${viewTypeValues.join(\", \")}.`);\n            issueWithNewView = true;\n          }\n        });\n      } else {\n        consoleError(\"You tried to change the view but the view you provided was not a string or an object. You can either change\" + ' to one of the supported views by providing a string, ex. \"launcher\", \"mainWindow\", or \"tour\". Or you can' + ' change the state of multiple views by providing an object, ex. { \"launcher\": true, \"mainWindow\": false,' + ' \"tour\": true }. Please use one of these supported options.');\n        issueWithNewView = true;\n      }\n      if (!issueWithNewView) {\n        await serviceManager.actions.changeView(newView, {\n          viewChangeReason: ViewChangeReason.CALLED_CHANGE_VIEW\n        });\n      }\n    },\n    notifications: {\n      addNotification: notification => {\n        debugLog(\"Called instance.addNotification\", notification);\n        serviceManager.actions.addNotification(notification);\n      },\n      removeNotifications: groupID => {\n        debugLog(\"Called instance.removeNotifications\", groupID);\n        serviceManager.actions.removeNotification(groupID);\n      },\n      removeAllNotifications: () => {\n        debugLog(\"Called instance.removeAllNotifications\");\n        serviceManager.actions.removeAllNotifications();\n      }\n    },\n    updateMainHeaderTitle: title => {\n      debugLog(\"Called instance.updateMainHeaderTitle\", title);\n      if (!title) {\n        title = null;\n      }\n      serviceManager.actions.updateMainHeaderTitle(title);\n    },\n    updateHomeScreenConfig: homeScreenConfig => {\n      debugLog(\"Called instance.updateHomeScreenConfig\", homeScreenConfig);\n      const homeScreenConfigClone = cloneDeep(homeScreenConfig);\n      const isAIThemeEnabled = serviceManager.store.getState().theme.useAITheme;\n      if (isAIThemeEnabled) {\n        if (homeScreenConfig?.background) {\n          consoleWarn(\"The home screen background can not be changed when the AI theme is enabled.\");\n          delete homeScreenConfigClone.background;\n        }\n      }\n      serviceManager.actions.updateHomeScreenConfig(withoutEmptyStarters(homeScreenConfigClone));\n    },\n    getState: () => serviceManager.actions.getPublicWebChatState(),\n    writeableElements: createWriteableElementsProxy(serviceManager),\n    scrollToMessage: (messageID, animate) => {\n      debugLog(\"Called instance.scrollToMessage\", messageID, animate);\n      serviceManager.mainWindow?.doScrollToMessage(messageID, animate);\n    },\n    updateLauncherConfig: config => serviceManager.actions.updateLauncherConfig(config),\n    customPanels: serviceManager.customPanelManager,\n    updateCustomMenuOptions: options => {\n      debugLog(\"Called instance.updateCustomMenuOptions\", options);\n      serviceManager.store.dispatch(actions.setAppStateValue(\"customMenuOptions\", options));\n    },\n    restartConversation: async () => {\n      debugLog(\"Called instance.restartConversation\");\n      return serviceManager.actions.restartConversation();\n    },\n    agentEndConversation: () => {\n      debugLog(\"Called instance.agentEndConversation\");\n      consoleWarn(`The instance.agentEndConversation method is deprecated. Use instance.serviceDesk.endConversation instead.`);\n      return serviceManager.actions.agentEndConversation(false);\n    },\n    updateIsTypingCounter(direction) {\n      debugLog(\"Called instance.updateIsTypingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsTypingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isTypingCounter <= 0) {\n          consoleError(\"You cannot decrease the typing counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsTypingCounter(-1));\n      } else {\n        consoleError(`[updateIsTypingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateIsLoadingCounter(direction) {\n      debugLog(\"Called instance.updateIsLoadingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsLoadingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isLoadingCounter <= 0) {\n          consoleError(\"You cannot decrease the loading counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsLoadingCounter(-1));\n      } else {\n        consoleError(`[updateIsLoadingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateIsChatLoadingCounter(direction) {\n      debugLog(\"Called instance.updateIsChatLoadingCounter\", direction);\n      const {store: store} = serviceManager;\n      if (direction === \"increase\") {\n        store.dispatch(actions.addIsHydratingCounter(1));\n      } else if (direction === \"decrease\") {\n        if (store.getState().botMessageState.isHydratingCounter <= 0) {\n          consoleError(\"You cannot decrease the hydrating counter when it is already <= 0\");\n          return;\n        }\n        store.dispatch(actions.addIsHydratingCounter(-1));\n      } else {\n        consoleError(`[updateIsChatLoadingCounter] Invalid direction: ${direction}. Valid values are \"increase\" and \"decrease\".`);\n      }\n    },\n    updateHeaderConfig: config => {\n      const configCopy = cloneDeep(config);\n      serviceManager.store.dispatch(actions.updateChatHeaderConfig(configCopy));\n    },\n    updateMainHeaderAvatar: config => {\n      serviceManager.store.dispatch(actions.updateMainHeaderAvatar(config));\n    },\n    updateBotName: name => serviceManager.actions.updateBotName(name),\n    updateBotAvatarURL: url => serviceManager.actions.updateBotAvatarURL(url),\n    elements: {\n      getMainWindow: getMainWindow,\n      getMessageInput: getMessageInput,\n      getHomeScreenInput: getHomeScreenInput\n    },\n    tours: {\n      startTour: async message => {\n        debugLog(\"Called instance.tours.startTour\", message);\n        await serviceManager.actions.send(message, MessageSendSource.START_TOUR_METHOD, {\n          skipTourCard: true\n        });\n      },\n      endTour: async () => {\n        debugLog(\"Called instance.tours.endTour\");\n        serviceManager.actions.endTour({\n          viewChangeReason: ViewChangeReason.CALLED_END_TOUR\n        });\n      },\n      goToNextStep: async () => {\n        debugLog(\"Called instance.tours.goToNextStep\");\n        serviceManager.actions.changeStepInTour({\n          nextStep: true\n        });\n      },\n      goToStep: async stepId => {\n        debugLog(\"Called instance.tours.goToStep\", stepId);\n        serviceManager.actions.goToSpecificTourStep(stepId);\n      }\n    },\n    messaging: {\n      addMessage: (message, options = {}) => {\n        debugLog(\"Called instance.messaging.addMessage\", message, options);\n        serviceManager.messageService.messageLoadingManager.end();\n        return serviceManager.actions.receive(message, options?.isLatestWelcomeNode ?? false, null, {\n          disableFadeAnimation: options?.disableFadeAnimation\n        });\n      },\n      addMessageChunk: async (chunk, options = {}) => {\n        debugLog(\"Called instance.messaging.addMessageChunk\", chunk, options);\n        serviceManager.messageService.messageLoadingManager.end();\n        await serviceManager.actions.receiveChunk(chunk, null, options);\n      },\n      removeMessages: async messageIDs => {\n        debugLog(\"Called instance.messaging.removeMessages\", messageIDs);\n        return serviceManager.actions.removeMessages(messageIDs);\n      },\n      clearConversation: () => {\n        debugLog(\"Called instance.messaging.clearConversation\");\n        return serviceManager.actions.restartConversation({\n          skipHydration: true,\n          endHumanAgentConversation: false,\n          fireEvents: false\n        });\n      },\n      insertHistory: messages => {\n        debugLog(\"Called instance.messaging.insertHistory\", messages);\n        return serviceManager.actions.insertHistory(messages);\n      }\n    },\n    requestFocus: () => {\n      debugLog(\"Called instance.requestFocus\");\n      serviceManager.appWindow?.requestFocus();\n    },\n    serviceDesk: {\n      endConversation: () => {\n        debugLog(\"Called instance.serviceDesk.endConversation\");\n        return serviceManager.actions.agentEndConversation(false);\n      },\n      updateIsSuspended: async isSuspended => {\n        debugLog(\"Called instance.serviceDesk.updateIsSuspended\", isSuspended);\n        return serviceManager.actions.agentUpdateIsSuspended(isSuspended);\n      }\n    }\n  };\n  if (serviceManager.store.getState().config.public.debug) {\n    consoleDebug(\"[ChatInstanceImpl] Created chat instance\", instance);\n  }\n  return instance;\n}\n\nfunction createWriteableElementsProxy(serviceManager) {\n  const elementSet = new Set;\n  const handler = {\n    get(target, element) {\n      if (!elementSet.has(element)) {\n        elementSet.add(element);\n      }\n      return target[element];\n    }\n  };\n  return new Proxy(serviceManager.writeableElements, handler);\n}\n\nexport { createChatInstance };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst NODE_ENV = \"production\";\n\nconst VERSION = \"0.4.0\";\n\nexport { NODE_ENV, VERSION };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar NotificationType;\n\n(function(NotificationType) {\n  NotificationType[\"TEXT_NOTIFICATION\"] = \"text_notification\";\n})(NotificationType || (NotificationType = {}));\n\nconst BOUNCING_ANIMATION_TIMEOUTS = [ 15e3, 6e4 ];\n\nconst TIME_TO_ENTRANCE_ANIMATION_START = 15e3;\n\nexport { BOUNCING_ANIMATION_TIMEOUTS, NotificationType, TIME_TO_ENTRANCE_ANIMATION_START };\n","import isEqual from \"lodash-es/isEqual.js\";\n\nimport { VERSION } from \"../environmentVariables.js\";\n\nimport { NotificationType, TIME_TO_ENTRANCE_ANIMATION_START } from \"../../../types/config/LauncherConfig.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_ID } from \"../utils/constants.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport \"../../../types/utilities/carbonTypes.js\";\n\nimport { CarbonTheme } from \"../../../types/config/PublicConfig.js\";\n\nimport { CornersType } from \"../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const DEFAULT_LAUNCHER = {\n  config: {\n    is_on: true,\n    mobile: {\n      is_on: true,\n      title: \"\",\n      time_to_expand: TIME_TO_ENTRANCE_ANIMATION_START,\n      new_expand_time: false,\n      time_to_reduce: 1e4,\n      notification_type: NotificationType.TEXT_NOTIFICATION\n    },\n    desktop: {\n      is_on: true,\n      title: \"\",\n      new_expand_time: false,\n      time_to_expand: TIME_TO_ENTRANCE_ANIMATION_START,\n      notification_type: NotificationType.TEXT_NOTIFICATION\n    }\n  }\n};\n\ndeepFreeze(DEFAULT_LAUNCHER);\n\nconst DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS = {\n  title: null,\n  hideBackButton: false,\n  hidePanelHeader: false,\n  disableAnimation: false\n};\n\ndeepFreeze(DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS);\n\nconst DEFAULT_CUSTOM_PANEL_STATE = {\n  isOpen: false,\n  panelID: DEFAULT_CUSTOM_PANEL_ID,\n  options: DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS\n};\n\ndeepFreeze(DEFAULT_CUSTOM_PANEL_STATE);\n\nconst DEFAULT_IFRAME_PANEL_STATE = {\n  isOpen: false,\n  messageItem: null\n};\n\ndeepFreeze(DEFAULT_IFRAME_PANEL_STATE);\n\nconst DEFAULT_CITATION_PANEL_STATE = {\n  isOpen: false,\n  citationItem: null\n};\n\ndeepFreeze(DEFAULT_CITATION_PANEL_STATE);\n\nconst DEFAULT_TOUR_STATE = {\n  activeTourStepItems: null\n};\n\ndeepFreeze(DEFAULT_TOUR_STATE);\n\nconst DEFAULT_MESSAGE_PANEL_STATE = {\n  isOpen: false,\n  localMessageItem: null,\n  isMessageForInput: false\n};\n\ndeepFreeze(DEFAULT_MESSAGE_PANEL_STATE);\n\nconst VIEW_STATE_ALL_CLOSED = {\n  launcher: false,\n  mainWindow: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_ALL_CLOSED);\n\nconst VIEW_STATE_LAUNCHER_OPEN = {\n  launcher: true,\n  mainWindow: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_LAUNCHER_OPEN);\n\nconst VIEW_STATE_MAIN_WINDOW_OPEN = {\n  mainWindow: true,\n  launcher: false,\n  tour: false\n};\n\ndeepFreeze(VIEW_STATE_MAIN_WINDOW_OPEN);\n\nconst DEFAULT_PERSISTED_TO_BROWSER = {\n  chatState: {\n    version: VERSION,\n    disclaimersAccepted: {},\n    homeScreenState: {\n      isHomeScreenOpen: false,\n      showBackToBot: false\n    },\n    hasSentNonWelcomeMessage: false,\n    persistedTourState: {\n      activeTourID: null,\n      activeTourCurrentStepIndex: null\n    },\n    humanAgentState: {\n      isConnected: false,\n      isSuspended: false,\n      responseUserProfiles: {}\n    }\n  },\n  launcherState: {\n    wasLoadedFromBrowser: false,\n    version: VERSION,\n    viewState: VIEW_STATE_ALL_CLOSED,\n    activeTour: false,\n    showUnreadIndicator: false,\n    mobileLauncherIsExtended: false,\n    mobileLauncherWasReduced: false,\n    mobileLauncherDisableBounce: false,\n    desktopLauncherIsExpanded: false,\n    desktopLauncherWasMinimized: false,\n    bounceTurn: 1,\n    hasSentNonWelcomeMessage: false\n  }\n};\n\ndeepFreeze(DEFAULT_PERSISTED_TO_BROWSER);\n\nconst DEFAULT_CHAT_MESSAGES_STATE = {\n  localMessageIDs: [],\n  messageIDs: [],\n  isTypingCounter: 0,\n  isLoadingCounter: 0,\n  isHydratingCounter: 0,\n  isScrollAnchored: false\n};\n\ndeepFreeze(DEFAULT_CHAT_MESSAGES_STATE);\n\nconst DEFAULT_MESSAGE_STATE = {\n  allMessageItemsByID: {},\n  allMessagesByID: {},\n  botMessageState: {\n    ...DEFAULT_CHAT_MESSAGES_STATE\n  }\n};\n\ndeepFreeze(DEFAULT_MESSAGE_STATE);\n\nconst DEFAULT_INPUT_STATE = () => ({\n  fieldVisible: true,\n  isReadonly: false,\n  files: [],\n  allowFileUploads: false,\n  allowMultipleFileUploads: false,\n  allowedFileUploadTypes: null,\n  stopStreamingButtonState: {\n    currentStreamID: null,\n    isVisible: false,\n    isDisabled: false\n  }\n});\n\nconst DEFAULT_HUMAN_AGENT_STATE = {\n  isConnecting: false,\n  isReconnecting: false,\n  numUnreadMessages: 0,\n  fileUploadInProgress: false,\n  showScreenShareRequest: false,\n  isScreenSharing: false,\n  isHumanAgentTyping: false,\n  inputState: DEFAULT_INPUT_STATE()\n};\n\ndeepFreeze(DEFAULT_HUMAN_AGENT_STATE);\n\nconst DEFAULT_THEME_STATE = {\n  carbonTheme: CarbonTheme.G10,\n  useAITheme: false,\n  corners: CornersType.ROUND\n};\n\ndeepFreeze(DEFAULT_THEME_STATE);\n\nconst DEFAULT_LAYOUT_STATE = {\n  showFrame: true,\n  hasContentMaxWidth: true\n};\n\ndeepFreeze(DEFAULT_LAYOUT_STATE);\n\nfunction calcAnnouncementForWidgetOpen(previousState, newViewState) {\n  if (isEqual(previousState.persistedToBrowserStorage.launcherState.viewState, newViewState)) {\n    return previousState.announceMessage;\n  }\n  return {\n    messageID: newViewState.mainWindow ? \"window_ariaWindowOpened\" : \"window_ariaWindowClosed\"\n  };\n}\n\nfunction applyBotMessageState(state, newState) {\n  return {\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      ...newState\n    }\n  };\n}\n\nfunction handleViewStateChange(state, viewState) {\n  let {humanAgentState: humanAgentState} = state;\n  let {showUnreadIndicator: showUnreadIndicator} = state.persistedToBrowserStorage.launcherState;\n  if (viewState.mainWindow && state.isBrowserPageVisible) {\n    if (humanAgentState.numUnreadMessages !== 0) {\n      humanAgentState = {\n        ...humanAgentState,\n        numUnreadMessages: 0\n      };\n    }\n    showUnreadIndicator = false;\n  }\n  return {\n    ...state,\n    announceMessage: calcAnnouncementForWidgetOpen(state, viewState),\n    humanAgentState: humanAgentState,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        viewState: viewState,\n        showUnreadIndicator: showUnreadIndicator\n      }\n    }\n  };\n}\n\nfunction setHomeScreenOpenState(state, isOpen, showBackToBot) {\n  if (showBackToBot === undefined) {\n    showBackToBot = state.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot;\n  }\n  return {\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        homeScreenState: {\n          ...state.persistedToBrowserStorage.chatState.homeScreenState,\n          isHomeScreenOpen: isOpen,\n          showBackToBot: showBackToBot\n        }\n      }\n    }\n  };\n}\n\nfunction applyLocalMessageUIState(state, localMessageID, propertyName, propertyValue) {\n  const oldMessage = state.allMessageItemsByID[localMessageID];\n  if (oldMessage) {\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [localMessageID]: {\n          ...oldMessage,\n          ui_state: {\n            ...oldMessage.ui_state,\n            [propertyName]: propertyValue\n          }\n        }\n      }\n    };\n  }\n  return state;\n}\n\nfunction applyFullMessage(state, message) {\n  const newState = {\n    ...state,\n    allMessagesByID: {\n      ...state.allMessagesByID,\n      [message.id]: message\n    }\n  };\n  if (!state.allMessagesByID[message.id]) {\n    const currentMessageIDs = state.botMessageState.messageIDs;\n    const newMessageIDs = [ ...currentMessageIDs, message.id ];\n    return applyBotMessageState(newState, {\n      messageIDs: newMessageIDs\n    });\n  }\n  return newState;\n}\n\nexport { DEFAULT_CHAT_MESSAGES_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_HUMAN_AGENT_STATE, DEFAULT_IFRAME_PANEL_STATE, DEFAULT_INPUT_STATE, DEFAULT_LAUNCHER, DEFAULT_LAYOUT_STATE, DEFAULT_MESSAGE_PANEL_STATE, DEFAULT_MESSAGE_STATE, DEFAULT_PERSISTED_TO_BROWSER, DEFAULT_THEME_STATE, DEFAULT_TOUR_STATE, VIEW_STATE_ALL_CLOSED, VIEW_STATE_LAUNCHER_OPEN, VIEW_STATE_MAIN_WINDOW_OPEN, applyBotMessageState, applyFullMessage, applyLocalMessageUIState, handleViewStateChange, setHomeScreenOpenState };\n","import { gray100, white } from \"../../../node_modules/@carbon/colors/es/index.js\";\n\nimport Color from \"color\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst MIN_CONTRAST = 4.5;\n\nfunction hexCodeToRGB(color) {\n  if (color.length === 7) {\n    const red = color.substring(1, 3);\n    const blue = color.substring(3, 5);\n    const green = color.substring(5, 7);\n    return [ parseInt(red, 16), parseInt(blue, 16), parseInt(green, 16) ];\n  }\n  if (color.length === 4) {\n    const red = color.substring(1, 2);\n    const blue = color.substring(2, 3);\n    const green = color.substring(3, 4);\n    return [ parseInt(red + red, 16), parseInt(blue + blue, 16), parseInt(green + green, 16) ];\n  }\n  consoleError(`Unsupported color code: \"${color}\"`);\n  return [ 0, 0, 0 ];\n}\n\nfunction calculateContrast(color1, color2) {\n  const rgb1 = hexCodeToRGB(color1);\n  const rgb2 = hexCodeToRGB(color2);\n  const luminance1 = calculateRelativeLuminance(rgb1);\n  const luminance2 = calculateRelativeLuminance(rgb2);\n  let contrast;\n  if (luminance1 > luminance2) {\n    contrast = (luminance1 + .05) / (luminance2 + .05);\n  } else {\n    contrast = (luminance2 + .05) / (luminance1 + .05);\n  }\n  return contrast;\n}\n\nfunction calculateRelativeLuminance([r8, g8, b8]) {\n  const rRGB = r8 / 255;\n  const gRGB = g8 / 255;\n  const bRGB = b8 / 255;\n  const R = rRGB <= .03928 ? rRGB / 12.92 : ((rRGB + .055) / 1.055) ** 2.4;\n  const G = gRGB <= .03928 ? gRGB / 12.92 : ((gRGB + .055) / 1.055) ** 2.4;\n  const B = bRGB <= .03928 ? bRGB / 12.92 : ((bRGB + .055) / 1.055) ** 2.4;\n  const luminance = .2126 * R + .7152 * G + .0722 * B;\n  return luminance;\n}\n\nfunction whiteOrBlackText(background) {\n  return calculateContrast(gray100, background) >= MIN_CONTRAST ? gray100 : white;\n}\n\nfunction adjustLightness(token, shift) {\n  const original = Color(token).hsl().object();\n  return Color({\n    ...original,\n    l: original.l + shift\n  }).round().hex().toLowerCase();\n}\n\nexport { MIN_CONTRAST, adjustLightness, calculateContrast, hexCodeToRGB, whiteOrBlackText };\n","import { white, gray100, gray10, blue60, gray80 } from \"../../../node_modules/@carbon/colors/es/index.js\";\n\nimport { whiteOrBlackText, adjustLightness, calculateContrast, MIN_CONTRAST, hexCodeToRGB } from \"./colors.js\";\n\nimport { WA_CONSOLE_PREFIX } from \"./constants.js\";\n\nimport { CarbonTheme } from \"../../../types/config/PublicConfig.js\";\n\nimport { CarbonThemeClassNames } from \"../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst CSS_VAR_PREFIX = \"--cds-\";\n\nconst CSS_CHAT_PREFIX = \"chat-\";\n\nconst HEXADECIMAL_REGEX = /#([a-f0-9]{3}){1,2}\\b/i;\n\nconst INTERNAL_OVERRIDES_LIGHT_THEME_MAP = {\n  \"$chat-button\": \"#000000\",\n  \"$chat-button-text-hover\": \"#525252\"\n};\n\nconst INTERNAL_OVERRIDES_DARK_THEME_MAP = {\n  \"$chat-button\": \"#ffffff\",\n  \"$chat-button-text-hover\": \"#f4f4f4\"\n};\n\nfunction convertCSSVariablesToString(cssVariables) {\n  const pieces = Object.keys(cssVariables).map(key => {\n    const value = cssVariables[key];\n    if (value === undefined) {\n      return \"\";\n    }\n    const fullName = key.startsWith(\"$\") ? `${CSS_VAR_PREFIX}${key.replace(/^\\$/, \"\")}` : `${CSS_VAR_PREFIX}${CSS_CHAT_PREFIX}${key}`;\n    return `${fullName}:${value};`;\n  });\n  let cssVariablesString = \"\";\n  const allValues = pieces.join(\"\");\n  const prefix = \"\";\n  if (allValues.length > 0) {\n    const rule = `${prefix}.WACContainer .cds--white, ${prefix}.WACContainer .cds--g10, ${prefix}.WACContainer .cds--g90, ${prefix}.WACContainer .cds--g100`;\n    cssVariablesString = `${rule}${`, :host`}{${allValues}}`;\n  }\n  return cssVariablesString;\n}\n\nfunction remoteStylesToCSSVars(whiteLabelVariables, carbonTheme) {\n  const cssOverrides = {};\n  const primaryColor = whiteLabelVariables[\"BASE-primary-color\"];\n  const secondaryColor = whiteLabelVariables[\"BASE-secondary-color\"];\n  const accentColor = whiteLabelVariables[\"BASE-accent-color\"];\n  if (primaryColor) {\n    cssOverrides[\"PRIMARY-color\"] = primaryColor;\n    cssOverrides[\"PRIMARY-color-text\"] = whiteOrBlackText(primaryColor);\n    cssOverrides[\"PRIMARY-color-hover\"] = adjustLightness(primaryColor, -8);\n    cssOverrides[\"PRIMARY-color-active\"] = adjustLightness(primaryColor, -10);\n    const useAccentColor = accentColor || blue60;\n    const tryFocusColor = carbonTheme === CarbonTheme.G90 || carbonTheme === CarbonTheme.G100 ? white : useAccentColor;\n    let useFocusColor;\n    if (calculateContrast(primaryColor, tryFocusColor) >= MIN_CONTRAST) {\n      useFocusColor = tryFocusColor;\n    } else if (tryFocusColor !== useAccentColor && calculateContrast(primaryColor, useAccentColor) >= MIN_CONTRAST) {\n      useFocusColor = useAccentColor;\n    } else if (tryFocusColor !== white && calculateContrast(primaryColor, white) >= MIN_CONTRAST) {\n      useFocusColor = white;\n    } else {\n      useFocusColor = gray100;\n    }\n    if (useFocusColor !== tryFocusColor) {\n      cssOverrides[\"PRIMARY-color-focus\"] = useFocusColor;\n    }\n  }\n  if (secondaryColor) {\n    cssOverrides[\"SECONDARY-color\"] = secondaryColor;\n    cssOverrides[\"SECONDARY-color-text\"] = whiteOrBlackText(secondaryColor);\n  } else if (carbonTheme === CarbonTheme.G90 || carbonTheme === CarbonTheme.G100) {\n    cssOverrides[\"SECONDARY-color\"] = `var(${CSS_VAR_PREFIX}layer-02)`;\n    cssOverrides[\"SECONDARY-color-text\"] = `var(${CSS_VAR_PREFIX}text-primary);`;\n  }\n  if (accentColor) {\n    const colorMap = ACCENT_COLOR_MAPS[carbonTheme];\n    const accentBlue20 = adjustLightness(accentColor, 40);\n    const accentBlue60Hover = adjustLightness(accentColor, -8);\n    const accentBlue80 = adjustLightness(accentColor, -20);\n    fillValues(cssOverrides, colorMap.blue20, accentBlue20);\n    fillValues(cssOverrides, colorMap.blue60, accentColor);\n    fillValues(cssOverrides, colorMap.blue60Hover, accentBlue60Hover);\n    fillValues(cssOverrides, colorMap.blue80, accentBlue80);\n    cssOverrides[\"LAUNCHER-color-background\"] = accentColor;\n    cssOverrides[\"LAUNCHER-color-background-hover\"] = accentBlue60Hover;\n    cssOverrides[\"LAUNCHER-color-background-active\"] = accentBlue80;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-background\"] = accentColor;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-hover\"] = accentBlue60Hover;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-active\"] = accentBlue80;\n    cssOverrides[\"ACCENT-color\"] = accentColor;\n    const accentColorRGB = hexCodeToRGB(accentColor);\n    cssOverrides[\"ACCENT-color-r\"] = accentColorRGB[0].toString();\n    cssOverrides[\"ACCENT-color-g\"] = accentColorRGB[1].toString();\n    cssOverrides[\"ACCENT-color-b\"] = accentColorRGB[2].toString();\n    cssOverrides[\"ACCENT-color-ghost-text\"] = accentColor;\n    const accentColorBW = whiteOrBlackText(accentColor);\n    cssOverrides[\"ACCENT-color-text\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-background-hover\"] = accentBlue60Hover;\n    cssOverrides[\"ACCENT-color-background-active\"] = accentBlue80;\n    cssOverrides[\"LAUNCHER-color-focus-border\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-color-avatar\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-text\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-EXPANDED-MESSAGE-color-focus-border\"] = accentColorBW;\n    cssOverrides[\"LAUNCHER-MOBILE-color-text\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-bw\"] = accentColorBW;\n    cssOverrides[\"ACCENT-color-bw-hover\"] = adjustLightness(accentColorBW, -8);\n    cssOverrides[\"ACCENT-color-bw-active\"] = adjustLightness(accentColorBW, -10);\n    cssOverrides[\"ACCENT-color-bw-inverse\"] = accentColorBW === gray100 ? white : gray100;\n    cssOverrides[\"ACCENT-color-bw-gray\"] = accentColorBW === gray100 ? gray80 : gray10;\n    cssOverrides[\"ACCENT-color-pastel\"] = accentColorBW === gray100 ? adjustLightness(accentColor, 20) : adjustLightness(accentColor, -15);\n  }\n  return cssOverrides;\n}\n\nconst ACCENT_COLOR_MAPS = {\n  white: {\n    blue20: [ \"$highlight\" ],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$icon-interactive\", \"$focus\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$button-tertiary-active\" ]\n  },\n  g10: {\n    blue20: [ \"$highlight\" ],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$icon-interactive\", \"$focus\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$button-tertiary-active\" ]\n  },\n  g90: {\n    blue20: [],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$focus-inverse\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$highlight\", \"$button-tertiary-active\" ]\n  },\n  g100: {\n    blue20: [],\n    blue60: [ \"$background-brand\", \"$interactive\", \"$border-interactive\", \"$button-primary\", \"$button-tertiary\", \"$focus-inverse\" ],\n    blue60Hover: [ \"$button-primary-hover\", \"$button-tertiary-hover\" ],\n    blue80: [ \"$button-primary-active\", \"$highlight\", \"$button-tertiary-active\" ]\n  }\n};\n\nfunction fillValues(styles, propertyNames, value) {\n  propertyNames.forEach(propertyName => {\n    styles[propertyName] = value;\n  });\n}\n\nfunction mergeCSSVariables(publicVars, whiteLabelVariables, carbonTheme, useAITheme) {\n  carbonTheme = carbonTheme || CarbonTheme.G10;\n  useAITheme = useAITheme || false;\n  publicVars = publicVars || {};\n  const internalOverrides = createInternalCSSOverridesMap(carbonTheme, useAITheme);\n  const result = {\n    ...internalOverrides,\n    ...publicVars\n  };\n  Object.entries(result).forEach(([key, value]) => {\n    if (key.startsWith(\"$\") && !value.match(HEXADECIMAL_REGEX)) {\n      console.warn(`${WA_CONSOLE_PREFIX} You tried to call \"updateCSSVariables\" with an invalid value for \"${key}\": \"${publicVars[key]}\". You must use hexadecimal values for colors.`);\n      delete result[key];\n    }\n  });\n  const remoteVars = remoteStylesToCSSVars(whiteLabelVariables || {}, carbonTheme);\n  Object.entries(remoteVars).forEach(([key, value]) => {\n    if (value !== \"\" && publicVars[key] === undefined) {\n      result[key] = value;\n    }\n  });\n  return result;\n}\n\nfunction createInternalCSSOverridesMap(carbonTheme, useAITheme) {\n  let internalOverridesMap = {};\n  if (!useAITheme) {\n    if ([ CarbonTheme.G10, CarbonTheme.WHITE ].includes(carbonTheme)) {\n      internalOverridesMap = {\n        ...internalOverridesMap,\n        ...INTERNAL_OVERRIDES_LIGHT_THEME_MAP\n      };\n    } else if ([ CarbonTheme.G90, CarbonTheme.G100 ].includes(carbonTheme)) {\n      internalOverridesMap = {\n        ...internalOverridesMap,\n        ...INTERNAL_OVERRIDES_DARK_THEME_MAP\n      };\n    }\n  }\n  return internalOverridesMap;\n}\n\nfunction getThemeClassNames(themeState) {\n  let themeClassnames;\n  switch (themeState?.carbonTheme) {\n   case CarbonTheme.WHITE:\n    themeClassnames = CarbonThemeClassNames.WHITE;\n    break;\n\n   case CarbonTheme.G10:\n    themeClassnames = CarbonThemeClassNames.G10;\n    break;\n\n   case CarbonTheme.G90:\n    themeClassnames = CarbonThemeClassNames.G90;\n    break;\n\n   case CarbonTheme.G100:\n    themeClassnames = CarbonThemeClassNames.G100;\n    break;\n\n   default:\n    themeClassnames = CarbonThemeClassNames.G10;\n    break;\n  }\n  if (themeState?.useAITheme) {\n    themeClassnames += \" WAC--aiTheme\";\n  }\n  return themeClassnames;\n}\n\nexport { convertCSSVariablesToString, getThemeClassNames, mergeCSSVariables };\n","import { VIEW_STATE_ALL_CLOSED } from \"../store/reducerUtils.js\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function constructViewState(newView, appState) {\n  const {viewState: viewState} = appState.persistedToBrowserStorage.launcherState;\n  let newViewState;\n  if (typeof newView === \"string\") {\n    newViewState = {\n      ...VIEW_STATE_ALL_CLOSED,\n      [newView]: true\n    };\n  } else {\n    newViewState = {\n      ...viewState,\n      ...newView\n    };\n  }\n  return newViewState;\n}\n\nfunction validateViewState(viewState, appState) {\n  const {activeTour: activeTour} = appState.persistedToBrowserStorage.launcherState;\n  if (viewState.tour && !activeTour) {\n    consoleError(\"Error changing the view. The new view was supposed to show a tour however there is no active tour to show.\" + \" Changing the view has been canceled.\");\n    return false;\n  }\n  return true;\n}\n\nexport { constructViewState, validateViewState };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport isEqual from \"lodash-es/isEqual.js\";\n\nimport merge from \"lodash-es/merge.js\";\n\nimport inputItemToLocalItem from \"../schema/inputItemToLocalItem.js\";\n\nimport { outputItemToLocalItem, createLocalMessageItemsForNestedMessageItems } from \"../schema/outputItemToLocalItem.js\";\n\nimport { HumanAgentsOnlineStatus } from \"../../../types/config/ServiceDeskConfig.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { agentUpdateIsSuspended } from \"../store/humanAgentActions.js\";\n\nimport { DEFAULT_PERSISTED_TO_BROWSER, VIEW_STATE_LAUNCHER_OPEN } from \"../store/reducerUtils.js\";\n\nimport \"../../../types/state/AppState.js\";\n\nimport { arrayLastValue, asyncForEach } from \"../utils/lang/arrayUtils.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { sleep } from \"../utils/lang/promiseUtils.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { createWelcomeRequest, isLiveHumanAgentMessage, isRequest, createMessageRequestForText, addDefaultsToMessage, isResponse, createMessageResponseForText, isStreamCompleteItem, isStreamPartialItem, isStreamFinalResponse, renderAsUserDefinedMessage, isResponseWithNestedItems, streamItemID, isPause, isConnectToHumanAgent, hasTourUserDefinedType, hasServiceDesk, isTyping } from \"../utils/messageUtils.js\";\n\nimport { debugLog, isEnableDebugLog, consoleError, consoleWarn, callOnError } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\nimport { mergeCSSVariables } from \"../utils/styleUtils.js\";\n\nimport { constructViewState, validateViewState } from \"../utils/viewStateUtils.js\";\n\nimport { MessageResponseTypes } from \"../../../types/messaging/Messages.js\";\n\nimport { BusEventType, MessageSendSource, TourStartReason, MainWindowCloseReason, ViewChangeReason, MainWindowOpenReason } from \"../../../types/events/eventBusTypes.js\";\n\nimport { CSSVariable } from \"../../../types/instance/ChatInstance.js\";\n\nimport { OnErrorType } from \"../../../types/config/PublicConfig.js\";\n\nimport { setIntl } from \"../utils/intlUtils.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\nimport { ViewType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const VALID_PUBLIC_VARS_IN_AI_THEME_SET = new Set(Object.values(CSSVariable));\n\nconst UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE = `[updateCSSVariables] The AI theme is enabled and only ${Object.values(CSSVariable).join(\", \")} can be updated.`;\n\nclass ChatActionsImpl {\n  constructor(serviceManager) {\n    this.hydrating = false;\n    this.restarting = false;\n    this.alreadyHydrated = false;\n    this.chunkQueue = [];\n    this.serviceManager = serviceManager;\n  }\n  async hydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions) {\n    let fireReady = false;\n    try {\n      if (!this.hydrationPromise) {\n        this.hydrating = true;\n        this.hydrationPromise = this.doHydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions);\n        fireReady = true;\n      }\n      await this.hydrationPromise;\n    } finally {\n      this.hydrating = false;\n    }\n    if (fireReady) {\n      await this.serviceManager.fire({\n        type: BusEventType.CHAT_READY\n      });\n    }\n  }\n  async doHydrateChat(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions) {\n    debugLog(\"Hydrating Carbon AI chat\", alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions);\n    let history;\n    const {serviceManager: serviceManager} = this;\n    serviceManager.store.dispatch(actions.addIsHydratingCounter(1));\n    if (!this.alreadyHydrated) {\n      history = await this.serviceManager.historyService.loadHistory();\n      if (serviceManager.humanAgentService) {\n        debugLog(\"Initializing the human agent service\");\n        await serviceManager.humanAgentService.initialize();\n      } else {\n        debugLog(\"No service desk integrations present\");\n      }\n    }\n    const {config: config} = serviceManager.store.getState();\n    if (!history) {\n      if (!alternateWelcomeRequest) {\n        const state = serviceManager.store.getState();\n        if (state.homeScreenConfig?.is_on) {\n          serviceManager.store.dispatch(actions.setHomeScreenIsOpen(true));\n        } else if (!config.public.messaging?.skipWelcome) {\n          await serviceManager.actions.send(createWelcomeRequest(), MessageSendSource.WELCOME_REQUEST, {\n            returnBeforeStreaming: true\n          }, true);\n        }\n      }\n    } else {\n      serviceManager.store.dispatch(actions.hydrateMessageHistory(history.messageHistory));\n      await this.createElementsForUserDefinedResponses(history.messageHistory);\n      if (history.latestPanelLocalMessageItem) {\n        this.openResponsePanel(history.latestPanelLocalMessageItem, true);\n      }\n    }\n    if (alternateWelcomeRequest) {\n      serviceManager.store.dispatch(actions.setHomeScreenIsOpen(false));\n      await serviceManager.actions.send(alternateWelcomeRequest, alternateWelcomeRequestSource, alternateOptions, true);\n    }\n    serviceManager.store.dispatch(actions.chatWasHydrated());\n    serviceManager.store.dispatch(actions.addIsHydratingCounter(-1));\n    if (history) {\n      const lastMessageID = arrayLastValue(history.messageHistory.botMessageState.localMessageIDs);\n      const lastMessage = history.messageHistory.allMessageItemsByID[lastMessageID];\n      const lastOriginalMessage = history.messageHistory.allMessagesByID[lastMessage?.fullMessageID];\n      if (!isLiveHumanAgentMessage(lastMessage) && isRequest(lastOriginalMessage)) {\n        serviceManager.messageService.resendMessage(lastOriginalMessage, lastMessage.ui_state.id);\n      }\n    }\n    const allowReconnect = config.public.serviceDesk.allowReconnect ?? true;\n    this.serviceManager?.humanAgentService?.handleHydration(allowReconnect, Boolean(history));\n    this.alreadyHydrated = true;\n  }\n  getPublicWebChatState() {\n    const state = this.serviceManager.store.getState();\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = state;\n    const {chatState: chatState, launcherState: launcherState} = persistedToBrowserStorage;\n    const publicWebChatState = {\n      isConnectedWithHumanAgent: chatState.humanAgentState.isConnected,\n      isWebChatOpen: launcherState.viewState.mainWindow,\n      isConnectingWithHumanAgent: state.humanAgentState.isConnecting,\n      isHomeScreenOpen: chatState.homeScreenState.isHomeScreenOpen,\n      isDebugEnabled: isEnableDebugLog(),\n      hasUserSentMessage: chatState.hasSentNonWelcomeMessage,\n      isTourActive: launcherState.activeTour,\n      viewState: {\n        ...launcherState.viewState\n      },\n      serviceDesk: {\n        isConnected: chatState.humanAgentState.isConnected,\n        isConnecting: state.humanAgentState.isConnecting,\n        isSuspended: chatState.humanAgentState.isSuspended ?? false\n      },\n      locale: this.serviceManager.store.getState().locale,\n      intl: this.serviceManager.intl\n    };\n    return publicWebChatState;\n  }\n  async sendWithCatch(message, source, options = {}, ignoreHydration = false) {\n    try {\n      await this.send(message, source, options, ignoreHydration);\n    } catch (error) {\n      consoleError(\"An error occurred sending the message\", error);\n    }\n  }\n  async send(message, source, options = {}, ignoreHydration = false) {\n    const messageRequest = typeof message === \"string\" ? createMessageRequestForText(message) : message;\n    if (this.serviceManager.store.getState().persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen) {\n      this.serviceManager.store.dispatch(actions.setHomeScreenIsOpen(false));\n    }\n    if (this.serviceManager.store.getState().responsePanelState.isOpen) {\n      this.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(false));\n    }\n    if (this.hydrationPromise || ignoreHydration) {\n      if (!ignoreHydration) {\n        await this.hydrationPromise;\n      }\n      await this.doSend(messageRequest, source, options);\n    } else {\n      await this.hydrateChat(messageRequest, source, options);\n    }\n  }\n  async doSend(message, source, options = {}) {\n    const {store: store} = this.serviceManager;\n    addDefaultsToMessage(message);\n    const originalUserText = message.history?.label || message.input.text;\n    if (options.silent) {\n      message.history.silent = true;\n    }\n    const localMessage = inputItemToLocalItem(message, originalUserText);\n    if (!message.history.silent) {\n      store.dispatch(actions.addLocalMessageItem(localMessage, message, true));\n    } else {\n      store.dispatch(actions.addMessage(message));\n    }\n    if (options.setValueSelectedForMessageID) {\n      store.dispatch(actions.messageSetOptionSelected(options.setValueSelectedForMessageID, message));\n    }\n    deepFreeze(message);\n    await this.serviceManager.messageService.send(cloneDeep(message), source, localMessage.ui_state.id, options);\n  }\n  async receive(message, isLatestWelcomeNode = false, requestMessage, requestOptions) {\n    const {restartCount: initialRestartCount} = this.serviceManager;\n    if (!message.id) {\n      message.id = uuid(UUIDType.MESSAGE);\n    }\n    const preReceiveEvent = {\n      type: BusEventType.PRE_RECEIVE,\n      data: message\n    };\n    await this.serviceManager.fire(preReceiveEvent);\n    if (initialRestartCount !== this.serviceManager.restartCount) {\n      return;\n    }\n    if (!isLatestWelcomeNode) {\n      this.serviceManager.store.dispatch(actions.updateHasSentNonWelcomeMessage(true));\n    }\n    if (initialRestartCount !== this.serviceManager.restartCount) {\n      return;\n    }\n    const {languagePack: languagePack} = this.serviceManager.store.getState();\n    if (isResponse(message)) {\n      this.processMessageResponse(message, isLatestWelcomeNode, requestMessage, requestOptions).catch(error => {\n        consoleError(\"Error processing the message response\", error);\n      });\n    } else {\n      const inlineError = createMessageResponseForText(languagePack.errors_singleMessage, message.thread_id, MessageResponseTypes.INLINE_ERROR);\n      this.receive(inlineError, false);\n    }\n    deepFreeze(message);\n    await this.serviceManager.fire({\n      type: BusEventType.RECEIVE,\n      data: message\n    });\n  }\n  async removeMessages(messageIDs) {\n    this.serviceManager.store.dispatch(actions.removeMessages(messageIDs));\n  }\n  async insertHistory(messages) {\n    const scrollBottom = this.serviceManager.mainWindow?.getMessagesScrollBottom();\n    const state = this.serviceManager.store.getState();\n    const notes = {\n      notes: [ {\n        body: messages\n      } ]\n    };\n    const history = await this.serviceManager.historyService.loadHistory(notes);\n    const currentAppStateMessages = {\n      allMessageItemsByID: state.allMessageItemsByID,\n      allMessagesByID: state.allMessagesByID,\n      botMessageState: state.botMessageState\n    };\n    const newAppStateMessages = merge({}, history.messageHistory, currentAppStateMessages);\n    newAppStateMessages.botMessageState.messageIDs = [ ...history.messageHistory.botMessageState.messageIDs, ...currentAppStateMessages.botMessageState.messageIDs ];\n    newAppStateMessages.botMessageState.localMessageIDs = [ ...history.messageHistory.botMessageState.localMessageIDs, ...currentAppStateMessages.botMessageState.localMessageIDs ];\n    this.serviceManager.store.dispatch(actions.hydrateMessageHistory(newAppStateMessages));\n    await this.createElementsForUserDefinedResponses(history.messageHistory);\n    this.serviceManager.mainWindow?.doAutoScroll({\n      scrollToBottom: scrollBottom\n    });\n  }\n  async receiveChunk(chunk, messageID, options = {}) {\n    const chunkPromise = resolvablePromise();\n    this.chunkQueue.push({\n      chunk: chunk,\n      messageID: messageID,\n      options: options,\n      chunkPromise: chunkPromise\n    });\n    if (this.chunkQueue.length === 1) {\n      this.processChunkQueue();\n    }\n    return chunkPromise;\n  }\n  async processChunkQueue() {\n    const {chunk: chunk, options: options, chunkPromise: chunkPromise} = this.chunkQueue[0];\n    let {messageID: messageID} = this.chunkQueue[0];\n    const isCompleteItem = isStreamCompleteItem(chunk);\n    const isPartialItem = isStreamPartialItem(chunk);\n    const {store: store} = this.serviceManager;\n    const isStopGeneratingVisible = store.getState().botInputState.stopStreamingButtonState.isVisible;\n    if (isPartialItem) {\n      const streamingData = chunk.partial_item.streaming_metadata;\n      if (streamingData.cancellable && !isStopGeneratingVisible) {\n        store.dispatch(actions.setStopStreamingButtonVisible(true));\n      }\n    }\n    if (isCompleteItem || isPartialItem) {\n      if (!messageID) {\n        messageID = chunk.streaming_metadata.response_id;\n      }\n      if (!store.getState().allMessagesByID[messageID]) {\n        store.dispatch(actions.streamingStart(messageID));\n      }\n      const item = chunk.partial_item || chunk.complete_item;\n      store.dispatch(actions.streamingAddChunk(messageID, item, isCompleteItem, options.disableFadeAnimation ?? true));\n      if (chunk.partial_response?.history) {\n        if (Object.keys(chunk.partial_response).length > 1) {\n          throw new Error(`The partial_response object only supports the \"history\" property.`);\n        }\n        store.dispatch(actions.streamingMergeHistory(messageID, chunk.partial_response?.history));\n      }\n      await this.handleUserDefinedResponseItemsChunk(messageID, chunk, item);\n    } else if (isStreamFinalResponse(chunk)) {\n      this.receive(chunk.final_response, options.isLatestWelcomeNode, null, {\n        disableFadeAnimation: true\n      });\n    }\n    if ((isCompleteItem || isStreamFinalResponse(chunk)) && isStopGeneratingVisible) {\n      store.dispatch(actions.setStopStreamingButtonDisabled(false));\n      store.dispatch(actions.setStopStreamingButtonVisible(false));\n    }\n    this.chunkQueue.shift();\n    chunkPromise.doResolve();\n    if (this.chunkQueue[0]) {\n      this.processChunkQueue();\n    }\n  }\n  getOrCreateUserDefinedElement(messageItemID) {\n    let userDefinedItem = this.serviceManager.userDefinedElementRegistry.get(messageItemID);\n    if (!userDefinedItem) {\n      userDefinedItem = {\n        element: document.createElement(\"div\"),\n        slotName: `slot-user-defined-${uuid()}`\n      };\n      userDefinedItem.element.setAttribute(\"slot\", userDefinedItem.slotName);\n      this.serviceManager.userDefinedElementRegistry.set(messageItemID, userDefinedItem);\n    }\n    return userDefinedItem;\n  }\n  async handleUserDefinedResponseItems(localMessage, originalMessage) {\n    if (renderAsUserDefinedMessage(localMessage.item)) {\n      let element;\n      let slotName;\n      if (!localMessage.item.user_defined?.silent) {\n        ({element: element, slotName: slotName} = this.getOrCreateUserDefinedElement(localMessage.ui_state.id));\n      }\n      const userDefinedResponseEvent = {\n        type: BusEventType.USER_DEFINED_RESPONSE,\n        data: {\n          message: localMessage.item,\n          fullMessage: originalMessage,\n          element: element,\n          slot: slotName,\n          fullWidth: false\n        }\n      };\n      await this.serviceManager.fire(userDefinedResponseEvent);\n      if (userDefinedResponseEvent.data.fullWidth) {\n        this.serviceManager.store.dispatch(actions.setMessageUIProperty(localMessage.ui_state.id, \"fullWidth\", true));\n      }\n    } else if (isResponseWithNestedItems(localMessage.item)) {\n      const {itemsLocalMessageItemIDs: itemsLocalMessageItemIDs, bodyLocalMessageItemIDs: bodyLocalMessageItemIDs, footerLocalMessageItemIDs: footerLocalMessageItemIDs, gridLocalMessageItemIDs: gridLocalMessageItemIDs} = localMessage.ui_state;\n      const {allMessageItemsByID: allMessageItemsByID} = this.serviceManager.store.getState();\n      const createElementForNestedUserDefinedResponse = localMessageItemID => {\n        const nestedLocalMessage = allMessageItemsByID[localMessageItemID];\n        return this.handleUserDefinedResponseItems(nestedLocalMessage, originalMessage);\n      };\n      if (gridLocalMessageItemIDs?.length) {\n        await asyncForEach(gridLocalMessageItemIDs, row => asyncForEach(row, cell => asyncForEach(cell, itemID => createElementForNestedUserDefinedResponse(itemID))));\n      }\n      if (itemsLocalMessageItemIDs?.length) {\n        await asyncForEach(itemsLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n      if (bodyLocalMessageItemIDs?.length) {\n        await asyncForEach(bodyLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n      if (footerLocalMessageItemIDs?.length) {\n        await asyncForEach(footerLocalMessageItemIDs, createElementForNestedUserDefinedResponse);\n      }\n    }\n  }\n  async handleUserDefinedResponseItemsChunk(messageID, chunk, messageItem) {\n    if (renderAsUserDefinedMessage(messageItem)) {\n      const {store: store} = this.serviceManager;\n      const itemID = streamItemID(messageID, messageItem);\n      let element;\n      let slotName;\n      if (!messageItem.user_defined?.silent) {\n        ({element: element, slotName: slotName} = this.getOrCreateUserDefinedElement(itemID));\n      }\n      const userDefinedResponseEvent = {\n        type: BusEventType.CHUNK_USER_DEFINED_RESPONSE,\n        data: {\n          messageItem: messageItem,\n          chunk: chunk,\n          element: element,\n          slot: slotName,\n          fullWidth: false\n        }\n      };\n      await this.serviceManager.fire(userDefinedResponseEvent);\n      if (store.getState().allMessageItemsByID[itemID].ui_state.fullWidth !== userDefinedResponseEvent.data.fullWidth) {\n        store.dispatch(actions.setMessageUIProperty(itemID, \"fullWidth\", userDefinedResponseEvent.data.fullWidth));\n      }\n    }\n  }\n  async processMessageResponse(fullMessage, isLatestWelcomeNode, requestMessage, requestOptions = {}) {\n    const {store: store} = this.serviceManager;\n    const {config: config} = store.getState();\n    const initialRestartCount = this.serviceManager.restartCount;\n    const output = fullMessage.output.generic;\n    fullMessage.request_id = requestMessage?.id;\n    addDefaultsToMessage(fullMessage);\n    store.dispatch(actions.addMessage(fullMessage));\n    let previousItemID = null;\n    for (let index = 0; index < output.length && initialRestartCount === this.serviceManager.restartCount; index++) {\n      const messageItem = output[index];\n      if (messageItem) {\n        const pause = isPause(messageItem);\n        const agent = isConnectToHumanAgent(messageItem);\n        const tour = hasTourUserDefinedType(messageItem);\n        const localMessageItem = outputItemToLocalItem(messageItem, fullMessage, isLatestWelcomeNode, requestOptions.disableFadeAnimation);\n        if (tour && (requestOptions.skipTourCard || messageItem.user_defined?.skip_card)) {\n          const startTourReason = requestOptions.skipTourCard ? TourStartReason.START_TOUR_METHOD : TourStartReason.SKIP_CARD;\n          const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n          if (viewState.mainWindow) {\n            const mainWindowCloseReason = requestOptions.skipTourCard ? MainWindowCloseReason.CALLED_START_TOUR : MainWindowCloseReason.TOUR_SKIP_CARD;\n            this.startTour(localMessageItem, startTourReason, {\n              mainWindowCloseReason: mainWindowCloseReason\n            }).catch(error => {\n              consoleError(\"Error starting the tour\", error);\n            });\n          } else {\n            const viewChangeReason = requestOptions.skipTourCard ? ViewChangeReason.CALLED_START_TOUR : ViewChangeReason.TOUR_SKIP_CARD;\n            this.startTour(localMessageItem, startTourReason, {\n              viewChangeReason: viewChangeReason\n            }).catch(error => {\n              consoleError(\"Error starting the tour\", error);\n            });\n          }\n        } else if (!tour && requestOptions.skipTourCard) {\n          consoleError(\"The message response received was not a tour, so the tour card was not skipped nor was a tour started by the startTour() call.\");\n        }\n        const nestedLocalMessageItems = [];\n        createLocalMessageItemsForNestedMessageItems(localMessageItem, fullMessage, false, nestedLocalMessageItems, true);\n        store.dispatch(actions.addNestedMessages(nestedLocalMessageItems));\n        if (agent && isResponse(fullMessage)) {\n          store.dispatch(actions.addIsTypingCounter(1));\n          const partialMessage = {};\n          if (!hasServiceDesk(config)) {\n            const message = 'Web chat received a \"connect_to_agent\" message but there is no service desk configured. Check your chat configuration.';\n            this.errorOccurred({\n              errorType: OnErrorType.INTEGRATION_ERROR,\n              message: message\n            });\n            store.dispatch(actions.setMessageUIStateInternalProperty(localMessageItem.fullMessageID, \"agent_no_service_desk\", true));\n            partialMessage.ui_state_internal.agent_no_service_desk = true;\n          }\n          const agentAvailability = await (this.serviceManager.humanAgentService?.checkAreAnyHumanAgentsOnline(fullMessage));\n          if (initialRestartCount === this.serviceManager.restartCount) {\n            store.dispatch(actions.setMessageUIStateInternalProperty(localMessageItem.fullMessageID, \"agent_availability\", agentAvailability));\n            partialMessage.ui_state_internal = partialMessage.ui_state_internal || {};\n            partialMessage.ui_state_internal.agent_availability = agentAvailability;\n            let shouldAutoRequestHumanAgent = false;\n            if (config.public.serviceDesk?.skipConnectHumanAgentCard) {\n              shouldAutoRequestHumanAgent = true;\n            }\n            store.dispatch(actions.addIsTypingCounter(-1));\n            if (shouldAutoRequestHumanAgent && agentAvailability === HumanAgentsOnlineStatus.ONLINE) {\n              this.serviceManager.humanAgentService.startChat(localMessageItem, fullMessage);\n            }\n          }\n        }\n        if (pause) {\n          const showIsTyping = isTyping(messageItem);\n          if (showIsTyping) {\n            store.dispatch(actions.addIsTypingCounter(1));\n          }\n          await sleep(messageItem.time);\n          if (showIsTyping && initialRestartCount === this.serviceManager.restartCount) {\n            store.dispatch(actions.addIsTypingCounter(-1));\n          }\n        } else {\n          await this.handleUserDefinedResponseItems(localMessageItem, fullMessage);\n          if (!localMessageItem.item.user_defined?.silent && initialRestartCount === this.serviceManager.restartCount) {\n            this.serviceManager.store.dispatch(actions.addLocalMessageItem(localMessageItem, fullMessage, false, previousItemID));\n            previousItemID = localMessageItem.ui_state.id;\n          }\n        }\n      }\n    }\n  }\n  openResponsePanel(localMessageItem, isMessageForInput) {\n    this.serviceManager.store.dispatch(actions.setResponsePanelContent(localMessageItem, isMessageForInput));\n    this.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(true));\n  }\n  async insertLocalMessageResponse(message) {\n    message.id = uuid(UUIDType.MESSAGE);\n    await this.processMessageResponse(message, false, null, {});\n  }\n  updateLanguagePack(changes) {\n    const {languagePack: languagePack, locale: locale} = this.serviceManager.store.getState();\n    const messages = {\n      ...languagePack,\n      ...changes\n    };\n    setIntl(this.serviceManager, locale, messages);\n  }\n  addNotification(notification) {\n    this.serviceManager.store.dispatch(actions.addNotification(notification));\n  }\n  removeNotification(groupID) {\n    this.serviceManager.store.dispatch(actions.removeNotifications({\n      groupID: groupID\n    }));\n  }\n  removeAllNotifications() {\n    this.serviceManager.store.dispatch(actions.removeAllNotifications());\n  }\n  updateCSSVariables(publicVars, whiteLabelVariables = {}) {\n    const {store: store} = this.serviceManager;\n    const {theme: theme} = store.getState();\n    const {carbonTheme: carbonTheme, useAITheme: useAITheme} = theme;\n    if (useAITheme) {\n      const usePublicVars = publicVars;\n      publicVars = {};\n      whiteLabelVariables = {};\n      usePublicVars && Object.entries(usePublicVars).forEach(([variable]) => {\n        if (VALID_PUBLIC_VARS_IN_AI_THEME_SET.has(variable)) {\n          publicVars[variable] = usePublicVars[variable];\n        } else {\n          consoleWarn(UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE);\n        }\n      });\n    } else {\n      publicVars = {\n        ...publicVars\n      };\n      whiteLabelVariables = {\n        ...whiteLabelVariables\n      };\n    }\n    const allVariables = mergeCSSVariables(publicVars, whiteLabelVariables, carbonTheme, useAITheme);\n    store.dispatch(actions.updateCSSVariables(allVariables, publicVars, whiteLabelVariables));\n  }\n  updateBotName(name) {\n    this.serviceManager.store.dispatch(actions.updateBotName(name));\n  }\n  updateMainHeaderTitle(title) {\n    this.serviceManager.store.dispatch(actions.updateMainHeaderTitle(title));\n  }\n  updateBotAvatarURL(url) {\n    this.serviceManager.store.dispatch(actions.updateBotAvatarURL(url));\n  }\n  updateHomeScreenConfig(homeScreenConfig) {\n    this.serviceManager.store.dispatch(actions.updateHomeScreenConfig(homeScreenConfig));\n  }\n  updateLauncherConfig(launcherConfig) {\n    this.serviceManager.store.dispatch(actions.updateLauncherConfig(launcherConfig));\n  }\n  async changeView(newView, reason, tryHydrating = true, forceViewChange = false) {\n    const {store: store} = this.serviceManager;\n    const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n    let newViewState = constructViewState(newView, store.getState());\n    if (!validateViewState(newViewState, store.getState())) {\n      return viewState;\n    }\n    if (!isEqual(newViewState, viewState) || forceViewChange) {\n      await this.fireViewChangeEventsAndChangeView(newViewState, reason);\n      newViewState = store.getState().persistedToBrowserStorage.launcherState.viewState;\n      if (tryHydrating && (newViewState.mainWindow || newViewState.tour) && !store.getState().isHydrated) {\n        this.hydrateChat().catch(error => {\n          consoleError(\"Error hydrating the chat\", error);\n        });\n      }\n    }\n    return newViewState;\n  }\n  async fireViewChangeEventsAndChangeView(newViewState, reason) {\n    const {store: store} = this.serviceManager;\n    if (store.getState().viewChanging) {\n      throw new Error(\"The view may not be changed while a view change event is already running. Please make sure to resolve any promises from these events.\");\n    }\n    store.dispatch(actions.setViewChanging(true));\n    const {viewState: viewState} = store.getState().persistedToBrowserStorage.launcherState;\n    const {viewChangeReason: viewChangeReason} = reason;\n    const oldViewState = deepFreeze(viewState);\n    try {\n      const preViewChangeEvent = {\n        type: BusEventType.VIEW_PRE_CHANGE,\n        reason: viewChangeReason,\n        oldViewState: oldViewState,\n        newViewState: newViewState,\n        cancelViewChange: false\n      };\n      await this.serviceManager.fire(preViewChangeEvent);\n      if (preViewChangeEvent.cancelViewChange) {\n        debugLog(\"The view changing was cancelled by a view:pre:change event.\");\n        return;\n      }\n      if (!validateViewState(preViewChangeEvent.newViewState, store.getState())) {\n        return;\n      }\n      newViewState = preViewChangeEvent.newViewState;\n      store.dispatch(actions.setViewState(deepFreeze(newViewState)));\n      const viewChangeEvent = {\n        type: BusEventType.VIEW_CHANGE,\n        reason: viewChangeReason,\n        oldViewState: oldViewState,\n        newViewState: newViewState,\n        cancelViewChange: false\n      };\n      await this.serviceManager.fire(viewChangeEvent);\n      if (viewChangeEvent.cancelViewChange) {\n        store.dispatch(actions.setViewState(oldViewState));\n        debugLog(\"The view changing was cancelled by a view:change event.\");\n        return;\n      }\n      if (!validateViewState(viewChangeEvent.newViewState, store.getState())) {\n        store.dispatch(actions.setViewState(oldViewState));\n        return;\n      }\n      newViewState = viewChangeEvent.newViewState;\n      store.dispatch(actions.setViewState(deepFreeze(newViewState)));\n    } finally {\n      store.dispatch(actions.setViewChanging(false));\n    }\n  }\n  async startTour(message, startTourReason, changeViewReason) {\n    this.serviceManager.store.dispatch(actions.setTourData(message.fullMessageID));\n    const newViewState = await this.changeView(ViewType.TOUR, changeViewReason);\n    if (newViewState.tour) {\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_START,\n        reason: startTourReason\n      });\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_STEP,\n        step: this.serviceManager.store.getState().tourState.activeTourStepItems[0]\n      });\n    }\n  }\n  async endTour(reason) {\n    const {viewState: viewState} = this.serviceManager.store.getState().persistedToBrowserStorage.launcherState;\n    let newViewState = viewState;\n    if (viewState.tour) {\n      newViewState = await this.changeView(ViewType.LAUNCHER, reason);\n    }\n    if (!newViewState.tour) {\n      this.serviceManager.store.dispatch(actions.clearTourData());\n      return true;\n    }\n    return false;\n  }\n  goToSpecificTourStep(stepId) {\n    const {activeTourStepItems: activeTourStepItems} = this.serviceManager.store.getState().tourState;\n    const newStepIndex = activeTourStepItems.findIndex(stepItem => stepItem.step_id === stepId);\n    if (newStepIndex) {\n      this.changeStepInTour({\n        newStepIndex: newStepIndex\n      });\n    } else {\n      consoleError(`No step with the id \"${stepId}\" was found within the current tour. As a result, goToTourStep() did not change the current tour step.`);\n    }\n  }\n  async changeStepInTour(changeStepOptions) {\n    const {store: store} = this.serviceManager;\n    const {activeTourStepItems: activeTourStepItems} = store.getState().tourState;\n    const {activeTourCurrentStepIndex: activeTourCurrentStepIndex} = store.getState().persistedToBrowserStorage.chatState.persistedTourState;\n    let {newStepIndex: newStepIndex} = changeStepOptions;\n    if (changeStepOptions.nextStep) {\n      newStepIndex = activeTourCurrentStepIndex + 1;\n    } else if (changeStepOptions.previousStep) {\n      newStepIndex = activeTourCurrentStepIndex - 1;\n    }\n    store.dispatch(actions.changeStepInTour(newStepIndex));\n    const actualNewStepIndex = store.getState().persistedToBrowserStorage.chatState.persistedTourState.activeTourCurrentStepIndex;\n    if (actualNewStepIndex === newStepIndex) {\n      await this.serviceManager.fire({\n        type: BusEventType.TOUR_STEP,\n        step: activeTourStepItems[actualNewStepIndex]\n      });\n    } else {\n      consoleWarn(\"The tour tried to change to a step that was out of bounds for the step array, so no step change was made.\");\n    }\n  }\n  errorOccurred(error) {\n    consoleError(\"An error has occurred\", error);\n    if (error.catastrophicErrorType) {\n      this.serviceManager.store.dispatch(actions.setAppStateValue(\"catastrophicErrorType\", error.catastrophicErrorType));\n    }\n    callOnError(this.serviceManager.additionalChatParameters.onError, error);\n  }\n  async restartConversation(options = {}) {\n    const {skipHydration: skipHydration = false, endHumanAgentConversation: endHumanAgentConversation = true, fireEvents: fireEvents = true} = options;\n    debugLog(\"Restarting conversation\");\n    if (this.restarting) {\n      consoleWarn(\"You cannot restart a conversation while a previous restart is still pending.\");\n      return;\n    }\n    this.restarting = true;\n    try {\n      const {serviceManager: serviceManager} = this;\n      const {store: store} = serviceManager;\n      if (fireEvents) {\n        await serviceManager.fire({\n          type: BusEventType.PRE_RESTART_CONVERSATION\n        });\n      }\n      serviceManager.restartCount++;\n      if (this.hydrating) {\n        await this.hydrationPromise;\n      }\n      const currentState = store.getState();\n      const {persistedToBrowserStorage: persistedToBrowserStorage} = currentState;\n      const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n      const {isConnecting: isConnecting} = currentState.humanAgentState;\n      const {isConnected: isConnected} = currentState.persistedToBrowserStorage.chatState.humanAgentState;\n      if ((isConnected || isConnecting) && endHumanAgentConversation) {\n        await serviceManager.humanAgentService.endChat(true, false, false);\n      }\n      if (viewState.tour) {\n        await this.serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n          mainWindowOpenReason: MainWindowOpenReason.CALLED_RESTART_CONVERSATION\n        }, false);\n      }\n      this.serviceManager.instance.updateAssistantInputFieldVisibility(true);\n      this.serviceManager.messageService.cancelAllMessageRequests();\n      store.dispatch(actions.restartConversation());\n      if (!skipHydration) {\n        this.hydrationPromise = null;\n      }\n      if (fireEvents) {\n        await serviceManager.fire({\n          type: BusEventType.RESTART_CONVERSATION\n        });\n      }\n      if (this.hydrating) {\n        await this.hydrationPromise;\n      }\n      if (!skipHydration && !serviceManager.store.getState().isHydrated) {\n        this.hydrationPromise = null;\n        if (store.getState().persistedToBrowserStorage.launcherState.viewState.mainWindow) {\n          await serviceManager.actions.hydrateChat();\n        }\n      } else {\n        store.dispatch(actions.chatWasHydrated());\n      }\n    } finally {\n      this.restarting = false;\n    }\n  }\n  async destroySession(keepOpenState) {\n    const {store: store} = this.serviceManager;\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = store.getState();\n    const originalViewState = persistedToBrowserStorage.launcherState.viewState;\n    const newPersistedToBrowserStorage = cloneDeep(DEFAULT_PERSISTED_TO_BROWSER);\n    if (keepOpenState) {\n      newPersistedToBrowserStorage.launcherState.viewState = originalViewState;\n      if (originalViewState.tour) {\n        newPersistedToBrowserStorage.launcherState.viewState = {\n          ...originalViewState,\n          tour: false,\n          mainWindow: true\n        };\n      }\n    } else {\n      newPersistedToBrowserStorage.launcherState.viewState = VIEW_STATE_LAUNCHER_OPEN;\n    }\n    this.serviceManager.messageService.cancelAllMessageRequests();\n    this.serviceManager.userSessionStorageService.clearLauncherSession();\n    this.serviceManager.userSessionStorageService.clearChatSession();\n    this.serviceManager.store.dispatch(actions.setAppStateValue(\"persistedToBrowserStorage\", newPersistedToBrowserStorage));\n  }\n  agentEndConversation(endedByUser) {\n    return this.serviceManager.humanAgentService.endChat(endedByUser);\n  }\n  agentUpdateIsSuspended(isSuspended) {\n    this.serviceManager.store.dispatch(agentUpdateIsSuspended(isSuspended));\n  }\n  async createElementsForUserDefinedResponses(messages) {\n    await asyncForEach(Object.values(messages.allMessageItemsByID), localMessage => {\n      const originalMessage = messages.allMessagesByID[localMessage.fullMessageID];\n      return this.handleUserDefinedResponseItems(localMessage, originalMessage);\n    });\n  }\n}\n\nexport { ChatActionsImpl };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport { asyncForEach, asArray } from \"../utils/lang/arrayUtils.js\";\n\nimport { debugStackTrace, consoleError, consoleLog, consoleWarn, isEnableDebugLog, debugLog } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const HANDLER_NOT_FUNCTION = \"The event handler is not a function.\";\n\nclass EventBus {\n  constructor() {\n    this.handlersByType = new Map;\n    this.eventsTypesRunning = new Set;\n    this.eventsRunningCount = 0;\n  }\n  async fire(busEvent, instance) {\n    logEvent(\"Before fire\", busEvent);\n    const {type: type} = busEvent;\n    if (!type) {\n      throw new Error(`Attempted to fire an event with no type! ${JSON.stringify(busEvent)}`);\n    }\n    function wrappedHandler(handler) {\n      const result = handler(busEvent, instance);\n      if (result && !(result instanceof Promise)) {\n        consoleWarn(`An event handler for event ${type} returned a non-promise. This might be a mistake.`, result);\n      }\n      return result;\n    }\n    if (this.eventsTypesRunning.has(type)) {\n      throw new Error(`An event of type ${type} is already running. Please make sure that you have resolved the Promises for any earlier events that were fired.`);\n    }\n    try {\n      this.eventsRunningCount++;\n      try {\n        this.eventsTypesRunning.add(type);\n        const handlersForType = this.handlersByType.get(type);\n        if (handlersForType && handlersForType.length) {\n          const handlersCopy = handlersForType.slice();\n          await asyncForEach(handlersCopy, wrappedHandler);\n        }\n      } finally {\n        this.eventsTypesRunning.delete(type);\n      }\n    } finally {\n      this.eventsRunningCount--;\n      if (this.waitForEmptyPromise && this.eventsRunningCount === 0) {\n        this.waitForEmptyPromise.doResolve();\n      }\n    }\n    logEvent(\"After fire\", busEvent);\n  }\n  fireSync(busEvent, instance) {\n    logEvent(\"Before fire\", busEvent);\n    const {type: type} = busEvent;\n    const handlersForType = this.handlersByType.get(type);\n    if (handlersForType && handlersForType.length) {\n      const handlersCopy = handlersForType.slice();\n      handlersCopy.forEach(handler => handler(busEvent, instance));\n    }\n    logEvent(\"After fire\", busEvent);\n  }\n  async waitForEmpty() {\n    if (this.eventsRunningCount === 0) {\n      return;\n    }\n    if (!this.waitForEmptyPromise) {\n      this.waitForEmptyPromise = resolvablePromise();\n    }\n    await this.waitForEmptyPromise;\n    this.waitForEmptyPromise = null;\n  }\n  on(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      if (!type) {\n        throw new Error(`Attempted to listen to an event with no type: \"${type}\"!`);\n      }\n      if (typeof handler === \"function\") {\n        if (!this.handlersByType.has(type)) {\n          this.handlersByType.set(type, []);\n        }\n        const handlersForType = this.handlersByType.get(type);\n        debugStackTrace(`[EventBus] Adding ${type} event handler`, handler);\n        handlersForType.push(handler);\n      } else {\n        consoleError(HANDLER_NOT_FUNCTION, handler);\n      }\n    });\n    return this;\n  }\n  off(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      const handlersForType = this.handlersByType.get(type);\n      if (handlersForType) {\n        if (handler) {\n          const index = handlersForType.indexOf(handler);\n          if (index !== -1) {\n            const removed = handlersForType.splice(index, 1);\n            debugStackTrace(`[EventBus] Removing ${type} event handlers`, removed);\n          }\n        } else {\n          debugStackTrace(`[EventBus] Removing all ${type} event handlers`);\n          this.handlersByType.set(type, []);\n        }\n      }\n    });\n    return this;\n  }\n  once(handlers) {\n    const data = asArray(handlers);\n    data.forEach(({type: type, handler: handler}) => {\n      if (typeof handler === \"function\") {\n        const onceHandler = (event, instance) => {\n          this.off({\n            type: type,\n            handler: onceHandler\n          });\n          return handler(event, instance);\n        };\n        this.on({\n          type: type,\n          handler: onceHandler\n        });\n      } else {\n        consoleError(HANDLER_NOT_FUNCTION, handler);\n      }\n    });\n    return this;\n  }\n  logListeners() {\n    this.handlersByType.forEach((listeners, type) => {\n      console.group(`Event ${type} (${listeners.length})`);\n      listeners.forEach(listener => {\n        consoleLog(\"Listener\", listener);\n      });\n      console.groupEnd();\n    });\n  }\n  clear() {\n    this.handlersByType.clear();\n    return this;\n  }\n}\n\nfunction logEvent(message, busEvent) {\n  if (isEnableDebugLog()) {\n    const eventCopy = cloneDeep(busEvent);\n    debugLog(`[EventBus] ${message}`, eventCopy);\n  }\n}\n\nexport { EventBus };\n","import actions from \"../store/actions.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS } from \"../store/reducerUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createCustomPanelInstance(serviceManager) {\n  const customPanelInstance = {\n    open(options = DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS) {\n      const {store: store} = serviceManager;\n      store.dispatch(actions.setCustomPanelConfigOptions(options));\n      store.dispatch(actions.setCustomPanelOpen(true));\n    },\n    close() {\n      serviceManager.store.dispatch(actions.setCustomPanelOpen(false));\n    }\n  };\n  return Object.freeze(customPanelInstance);\n}\n\nexport { createCustomPanelInstance };\n","import { notesToLoadedHistory } from \"../schema/historyToMessages.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport \"../../../types/state/AppState.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport { MainWindowOpenReason } from \"../../../types/events/eventBusTypes.js\";\n\nimport { ViewType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class HistoryService {\n  constructor(serviceManager) {\n    this.serviceManager = serviceManager;\n  }\n  async loadHistory(useHistory) {\n    const state = this.serviceManager.store.getState();\n    const {config: config, persistedToBrowserStorage: persistedToBrowserStorage} = state;\n    const publicConfig = config.public;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    try {\n      let resultData;\n      if (useHistory) {\n        resultData = useHistory;\n      } else if (publicConfig.messaging?.customLoadHistory) {\n        const items = await publicConfig.messaging.customLoadHistory(this.serviceManager.instance);\n        const note = {\n          body: items\n        };\n        resultData = {\n          notes: [ note ]\n        };\n      }\n      if (resultData) {\n        const historyNotes = resultData?.notes;\n        return notesToLoadedHistory(historyNotes, this.serviceManager);\n      }\n      if (viewState.tour) {\n        await this.serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n          mainWindowOpenReason: MainWindowOpenReason.SESSION_HISTORY\n        }, false);\n        this.serviceManager.store.dispatch(actions.clearTourData());\n      }\n    } catch (error) {\n      consoleError(\"An error occurred while attempting to load the conversation history\", error);\n    }\n    return null;\n  }\n}\n\nexport { HistoryService };\n","import { DEFAULT_CHAT_MESSAGES_STATE } from \"../store/reducerUtils.js\";\n\nimport { MessageErrorState } from \"../../../types/messaging/LocalMessageItem.js\";\n\nimport \"../utils/constants.js\";\n\nimport { findLast } from \"../utils/lang/arrayUtils.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { isResponse, isRequest, isPause, isResponseWithNestedItems, THREAD_ID_MAIN, isOptionItem, isDateResponseType, isEventRequest } from \"../utils/messageUtils.js\";\n\nimport inputItemToLocalItem from \"./inputItemToLocalItem.js\";\n\nimport { outputItemToLocalItem, createLocalMessageItemsForNestedMessageItems } from \"./outputItemToLocalItem.js\";\n\nimport { BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\nimport { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function notesToLoadedHistory(notes, serviceManager) {\n  const allLocalMessagesByID = {};\n  const allMessagesByID = {};\n  const loadingState = {\n    serviceManager: serviceManager,\n    allMessages: [],\n    allMessagesByID: allMessagesByID,\n    allLocalMessagesByID: allLocalMessagesByID,\n    threadMessagesByThreadID: {},\n    responsesByRequestID: {},\n    relatedMessageByID: {},\n    localMessagesByOriginalMessageID: {},\n    lastThreadID: null,\n    loadedHistory: {\n      messageHistory: {\n        allMessageItemsByID: allLocalMessagesByID,\n        allMessagesByID: allMessagesByID,\n        botMessageState: null\n      },\n      latestTransferToHumanAgentResponse: null,\n      latestPanelLocalMessageItem: null\n    }\n  };\n  await notesToMessages(notes, loadingState);\n  if (!loadingState.allMessages.length) {\n    return null;\n  }\n  createLocalMessages(loadingState);\n  createChatStates(loadingState);\n  markIsLatestWelcomeNode(loadingState);\n  markSelectedOptions(loadingState);\n  return loadingState.loadedHistory;\n}\n\nasync function notesToMessages(notes, loadingState) {\n  const {allMessages: allMessages, allMessagesByID: allMessagesByID, responsesByRequestID: responsesByRequestID, relatedMessageByID: relatedMessageByID, serviceManager: serviceManager, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  if (!notes?.length) {\n    return;\n  }\n  notes.forEach(note => {\n    const sessionHistory = note.body;\n    const pushAndPrepareMessage = historyItem => {\n      const {message: message} = historyItem;\n      if (!isEventRequest(message) && (isRequest(message) || isResponse(message))) {\n        addMessage(message, loadingState, historyItem);\n      }\n    };\n    sessionHistory.forEach(pushAndPrepareMessage);\n  });\n  for (let index = allMessages.length - 1; index >= 0; index--) {\n    const message = allMessages[index];\n    if (message.history?.file_upload_status === FileStatusValue.UPLOADING) {\n      message.history.file_upload_status = FileStatusValue.COMPLETE;\n      message.history.error_state = MessageErrorState.FAILED;\n    }\n    if (isResponse(message) && message.history.silent) {\n      allMessages.splice(index, 1);\n      delete allMessagesByID[message.id];\n    } else {\n      localMessagesByOriginalMessageID[message.id] = [];\n      if (isResponse(message) && message.request_id) {\n        responsesByRequestID[message.request_id] = message;\n      }\n      if (message.history.related_message_id) {\n        relatedMessageByID[message.history.related_message_id] = message;\n      }\n    }\n  }\n  if (!allMessages.length) {\n    return;\n  }\n  Object.freeze(allMessages);\n  const beginEvent = {\n    type: BusEventType.HISTORY_BEGIN,\n    messages: allMessages\n  };\n  await serviceManager.eventBus.fire(beginEvent, serviceManager.instance);\n  allMessages.forEach(deepFreeze);\n  await serviceManager.eventBus.fire({\n    type: BusEventType.HISTORY_END,\n    messages: allMessages\n  }, serviceManager.instance);\n}\n\nfunction addMessage(message, loadingState, historyItem) {\n  message.history = message.history || {};\n  message.ui_state_internal = message.ui_state_internal || {};\n  message.ui_state_internal.from_history = true;\n  message.history.timestamp = new Date(historyItem.time).getTime();\n  if (message.thread_id !== THREAD_ID_MAIN) {\n    loadingState.lastThreadID = message.thread_id;\n  }\n  loadingState.allMessagesByID[message.id] = message;\n  loadingState.allMessages.push(message);\n}\n\nfunction createLocalMessages(loadingState) {\n  const {allMessages: allMessages, allLocalMessagesByID: allLocalMessagesByID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  allMessages.forEach(message => {\n    if (isRequest(message)) {\n      if (!message.history?.silent) {\n        const text = message.history?.label || message.input.text;\n        const localMessage = inputItemToLocalItem(message, text);\n        localMessagesByOriginalMessageID[message.id].push(localMessage);\n        allLocalMessagesByID[localMessage.ui_state.id] = localMessage;\n      }\n    } else {\n      const items = getResponseItems(message);\n      if (items?.length) {\n        items.forEach(messageItem => {\n          if (!isPause(messageItem)) {\n            const localMessage = outputItemToLocalItem(messageItem, message, false);\n            localMessagesByOriginalMessageID[message.id].push(localMessage);\n            allLocalMessagesByID[localMessage.ui_state.id] = localMessage;\n            if (isResponseWithNestedItems(localMessage.item)) {\n              const nestedLocalMessageItems = [];\n              createLocalMessageItemsForNestedMessageItems(localMessage, message, true, nestedLocalMessageItems, true);\n              nestedLocalMessageItems.forEach(localMessageItem => {\n                const localMessageID = localMessageItem.ui_state.id;\n                loadingState.loadedHistory.messageHistory.allMessageItemsByID[localMessageID] = localMessageItem;\n              });\n            }\n          }\n        });\n      }\n    }\n    addMessageToThread(message, loadingState);\n  });\n}\n\nfunction getResponseItems(message) {\n  if (isResponse(message)) {\n    return message.output.generic;\n  }\n  return null;\n}\n\nfunction addMessageToThread(message, loadingState) {\n  const {threadMessagesByThreadID: threadMessagesByThreadID} = loadingState;\n  let thread = threadMessagesByThreadID[THREAD_ID_MAIN];\n  if (!thread) {\n    thread = [];\n    threadMessagesByThreadID[THREAD_ID_MAIN] = thread;\n  }\n  thread.push(message);\n}\n\nfunction createChatStates(loadingState) {\n  const {loadedHistory: loadedHistory, threadMessagesByThreadID: threadMessagesByThreadID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  loadedHistory.messageHistory.botMessageState = toChatMessageState(threadMessagesByThreadID[THREAD_ID_MAIN], localMessagesByOriginalMessageID);\n}\n\nfunction toChatMessageState(messages, localMessagesByFullMessageID) {\n  const localMessageIDs = [];\n  const messageIDs = [];\n  if (messages) {\n    messages.forEach(message => {\n      messageIDs.push(message.id);\n      localMessagesByFullMessageID[message.id].forEach(localMessage => {\n        localMessageIDs.push(localMessage.ui_state.id);\n      });\n    });\n  }\n  return {\n    ...DEFAULT_CHAT_MESSAGES_STATE,\n    localMessageIDs: localMessageIDs,\n    messageIDs: messageIDs\n  };\n}\n\nfunction markIsLatestWelcomeNode(loadingState) {\n  const {responsesByRequestID: responsesByRequestID, threadMessagesByThreadID: threadMessagesByThreadID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID} = loadingState;\n  const mainThreadMessages = threadMessagesByThreadID[THREAD_ID_MAIN];\n  const welcomeRequest = findLast(mainThreadMessages, message => isRequest(message) && message.history.is_welcome_request);\n  if (welcomeRequest) {\n    const welcomeResponse = responsesByRequestID[welcomeRequest.id];\n    if (welcomeResponse) {\n      localMessagesByOriginalMessageID[welcomeResponse.id].forEach(localMessage => {\n        localMessage.ui_state.isWelcomeResponse = true;\n      });\n    }\n  }\n}\n\nfunction markSelectedOptions({allMessages: allMessages, relatedMessageByID: relatedMessageByID, localMessagesByOriginalMessageID: localMessagesByOriginalMessageID}) {\n  allMessages.forEach(message => {\n    if (isResponse(message)) {\n      localMessagesByOriginalMessageID[message.id].forEach(localMessage => {\n        if (isOptionItem(localMessage.item)) {\n          const relatedRequest = relatedMessageByID[message.id];\n          if (isRequest(relatedRequest)) {\n            localMessage.ui_state.optionSelected = relatedRequest;\n          }\n        } else if (isDateResponseType(localMessage)) {\n          const relatedRequest = relatedMessageByID[message.id];\n          if (isRequest(relatedRequest)) {\n            localMessage.ui_state.originalUserText = relatedRequest.history.label;\n          }\n        }\n      });\n    }\n  });\n}\n\nexport { notesToLoadedHistory };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass MessageLoadingManager {\n  start(onExceededMaxSilentLoading, onEnd, onTimeout, msMaxSilentLoading, msMaxAttempt) {\n    this.hasExceededMaxSilentLoading = false;\n    this.onEnd = onEnd;\n    this.onSilentLoading = setTimeout(() => {\n      this.hasExceededMaxSilentLoading = true;\n      onExceededMaxSilentLoading();\n    }, msMaxSilentLoading);\n    this.onMaxAttempt = setTimeout(() => {\n      onTimeout();\n    }, msMaxAttempt);\n  }\n  end() {\n    if (this.onMaxAttempt) {\n      clearTimeout(this.onMaxAttempt);\n    }\n    if (this.onSilentLoading) {\n      clearTimeout(this.onSilentLoading);\n    }\n    if (this.onEnd) {\n      this.onEnd(this.hasExceededMaxSilentLoading);\n    }\n    this.hasExceededMaxSilentLoading = null;\n    this.onEnd = null;\n  }\n}\n\nexport { MessageLoadingManager };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport inputItemToLocalItem from \"../schema/inputItemToLocalItem.js\";\n\nimport { createLocalMessageForInlineError } from \"../schema/outputItemToLocalItem.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { MessageErrorState } from \"../../../types/messaging/LocalMessageItem.js\";\n\nimport { deepFreeze } from \"../utils/lang/objectUtils.js\";\n\nimport { MessageLoadingManager } from \"../utils/messageServiceUtils.js\";\n\nimport { getLastBotResponseWithContext, THREAD_ID_MAIN } from \"../utils/messageUtils.js\";\n\nimport { debugLog, consoleError, safeFetchTextWithTimeout } from \"../utils/miscUtils.js\";\n\nimport { resolvablePromise } from \"../utils/resolvablePromise.js\";\n\nimport { MessageInputType } from \"../../../types/messaging/Messages.js\";\n\nimport { MessageSendSource, BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\nimport { OnErrorType } from \"../../../types/config/PublicConfig.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst MS_BETWEEN_RETRIES = [ 1e3, 3e3, 5e3 ];\n\nconst MS_MAX_ATTEMPT = 150 * 1e3;\n\nconst MS_MAX_SILENT_ERROR = 6e3;\n\nconst MS_MAX_SILENT_LOADING = 4e3;\n\nvar RetryType;\n\n(function(RetryType) {\n  RetryType[RetryType[\"SILENT\"] = 1] = \"SILENT\";\n  RetryType[RetryType[\"VISIBLE\"] = 2] = \"VISIBLE\";\n})(RetryType || (RetryType = {}));\n\nclass MessageService {\n  constructor(serviceManager, publicConfig) {\n    this.pendingLocale = false;\n    this.localeIsExplicit = false;\n    this.serviceManager = serviceManager;\n    this.messageLoadingManager = new MessageLoadingManager;\n    this.queue = {\n      waiting: [],\n      current: null\n    };\n    const timeoutOverride = publicConfig.messaging?.messageTimeoutSecs;\n    this.timeoutMS = timeoutOverride ? timeoutOverride * 1e3 : MS_MAX_ATTEMPT;\n  }\n  async processSuccess(current, received) {\n    const {requestOptions: requestOptions, isProcessed: isProcessed} = current;\n    const isWelcomeNode = Boolean(current.message.history.is_welcome_request);\n    if (isProcessed) {\n      return;\n    }\n    this.setMessageErrorState(current, MessageErrorState.NONE);\n    const {message: message} = current;\n    if (received) {\n      if (message.input.message_type !== MessageInputType.EVENT) {\n        if (!isWelcomeNode) {\n          this.messageLoadingManager.end();\n        }\n        received.history = received.history || {};\n        received.history.timestamp = received.history.timestamp || Date.now();\n        current.trackData.lastRequestTime = Date.now() - current.timeLastRequest;\n        current.trackData.totalRequestTime = Date.now() - current.timeFirstRequest;\n        await this.serviceManager.actions.receive(received, isWelcomeNode, message, requestOptions);\n      }\n      this.messageLoadingManager.end();\n    }\n    if (current.isProcessed) {\n      return;\n    }\n    {\n      current.sendMessagePromise.doResolve();\n      current.isProcessed = true;\n    }\n    this.moveToNextQueueItem();\n  }\n  addErrorMessage() {\n    const {store: store} = this.serviceManager;\n    const errorMessage = store.getState().languagePack.errors_singleMessage;\n    const {originalMessage: originalMessage, localMessage: localMessage} = createLocalMessageForInlineError(errorMessage);\n    store.dispatch(actions.addLocalMessageItem(localMessage, originalMessage, true));\n  }\n  async resendMessage(message, localMessageID) {\n    await this.send(cloneDeep(message), MessageSendSource.HYDRATE_RESEND, localMessageID, {\n      skipQueue: true,\n      silent: true\n    });\n  }\n  sendToAssistantAndUpdateErrorState(current) {\n    if (current.isProcessed) {\n      return;\n    }\n    this.sendToAssistant(current);\n    const now = Date.now();\n    const msSinceStarted = now - current.timeFirstRequest;\n    const isSilentErrorWindow = MS_MAX_SILENT_ERROR > msSinceStarted;\n    const type = isSilentErrorWindow ? RetryType.SILENT : RetryType.VISIBLE;\n    if (type === RetryType.VISIBLE) {\n      this.setMessageErrorState(current, MessageErrorState.RETRYING);\n      this.queue.waiting.forEach(waitingMessage => {\n        this.setMessageErrorState(waitingMessage, MessageErrorState.WAITING);\n      });\n    }\n  }\n  async processError(pendingRequest, resultText, allowRetry) {\n    const {message: message, timeFirstRequest: timeFirstRequest, timeLastRequest: timeLastRequest, tryCount: tryCount, isProcessed: isProcessed, trackData: trackData, requestOptions: requestOptions} = pendingRequest;\n    const isWelcome = message.history.is_welcome_request;\n    const now = Date.now();\n    const msSinceStarted = now - timeFirstRequest;\n    const isInAttemptWindow = this.timeoutMS > msSinceStarted && tryCount < MS_BETWEEN_RETRIES.length;\n    if (isProcessed) {\n      return;\n    }\n    trackData.lastRequestTime = Date.now() - timeLastRequest;\n    trackData.totalRequestTime = Date.now() - timeFirstRequest;\n    if (isInAttemptWindow && allowRetry) {\n      trackData.numErrors++;\n      const retryDelay = MS_BETWEEN_RETRIES[pendingRequest.tryCount++];\n      setTimeout(() => {\n        this.sendToAssistantAndUpdateErrorState(pendingRequest);\n      }, retryDelay);\n    } else {\n      let catastrophicErrorType = false;\n      if (isWelcome) {\n        catastrophicErrorType = true;\n      } else if (requestOptions.silent) {\n        this.addErrorMessage();\n      }\n      this.serviceManager.actions.errorOccurred({\n        errorType: OnErrorType.MESSAGE_COMMUNICATION,\n        message: \"An error occurred sending a message\",\n        otherData: resultText,\n        catastrophicErrorType: catastrophicErrorType\n      });\n      this.rejectFinalErrorOnMessage(pendingRequest, resultText);\n    }\n  }\n  rejectFinalErrorOnMessage(pendingRequest, resultText = \"An undefined error occurred trying to send your message.\") {\n    const {sendMessagePromise: sendMessagePromise} = pendingRequest;\n    this.setMessageErrorState(pendingRequest, MessageErrorState.FAILED);\n    const {message: message} = pendingRequest;\n    if (pendingRequest === this.queue.current && message.input.message_type !== MessageInputType.EVENT && !message.history.is_welcome_request) {\n      this.messageLoadingManager.end();\n    }\n    sendMessagePromise.doReject(new Error(resultText));\n    pendingRequest.isProcessed = true;\n    if (pendingRequest === this.queue.current) {\n      this.moveToNextQueueItem();\n    }\n  }\n  async sendToAssistant(current) {\n    const {store: store} = this.serviceManager;\n    const state = store.getState();\n    const {customSendMessage: customSendMessage} = state.config.public.messaging;\n    current.timeLastRequest = Date.now();\n    if (current.isProcessed) {\n      return;\n    }\n    try {\n      const message = cloneDeep(current.message);\n      current.message = message;\n      store.dispatch(actions.updateMessage(message));\n      const controller = new AbortController;\n      current.sendMessageController = controller;\n      debugLog(\"Called customSendMessage\", message);\n      await customSendMessage(message, {\n        signal: controller.signal\n      }, this.serviceManager.instance);\n      await this.processSuccess(current, null);\n    } catch (error) {\n      consoleError(\"An error occurred while sending a message\", error);\n      const resultText = error && (typeof error === \"string\" ? error : JSON.stringify(error)) || \"There was an unidentified error.\";\n      this.processError(current, resultText, !customSendMessage);\n    }\n  }\n  async runQueueIfReady() {\n    if (!this.queue.current && this.queue.waiting.length > 0) {\n      const {eventBus: eventBus, store: store} = this.serviceManager;\n      this.clearCurrentQueueItem();\n      this.queue.current = this.queue.waiting.shift();\n      const {current: current} = this.queue;\n      const {message: message, source: source} = current;\n      const state = store.getState();\n      const {config: config} = store.getState();\n      const {public: publicConfig} = config;\n      current.timeFirstRequest = Date.now();\n      if (message.input.message_type !== MessageInputType.EVENT) {\n        const lastResponse = getLastBotResponseWithContext(state);\n        if (lastResponse) {\n          message.thread_id = THREAD_ID_MAIN;\n        }\n        if (!message.history.is_welcome_request) {\n          const LOADING_INDICATOR_TIMER = !publicConfig.messaging?.messageLoadingIndicatorTimeoutSecs && publicConfig.messaging?.messageLoadingIndicatorTimeoutSecs !== 0 ? MS_MAX_SILENT_LOADING : publicConfig.messaging.messageLoadingIndicatorTimeoutSecs * 1e3;\n          this.messageLoadingManager.start(() => {\n            this.serviceManager.store.dispatch(actions.addIsLoadingCounter(1));\n          }, didExceedMaxLoading => {\n            if (didExceedMaxLoading) {\n              this.serviceManager.store.dispatch(actions.addIsLoadingCounter(-1));\n            }\n          }, () => {\n            this.cancelMessageRequestByID(message.id, true);\n          }, LOADING_INDICATOR_TIMER, this.timeoutMS);\n        }\n        if (current.isProcessed) {\n          return;\n        }\n        const originalUserText = message.history?.label || message.input.text;\n        await eventBus.fire({\n          type: BusEventType.PRE_SEND,\n          data: message,\n          source: source\n        }, this.serviceManager.instance);\n        if (current.isProcessed) {\n          return;\n        }\n        const localMessage = inputItemToLocalItem(message, originalUserText, current.localMessageID);\n        if (!message.history.silent) {\n          store.dispatch(actions.updateLocalMessageItem(localMessage));\n          store.dispatch(actions.updateMessage(message));\n        }\n        deepFreeze(message);\n        await eventBus.fire({\n          type: BusEventType.SEND,\n          data: message,\n          source: source\n        }, this.serviceManager.instance);\n      }\n      this.sendToAssistant(current);\n    }\n  }\n  addToMessageQueue(message, source, localMessageID, sendMessagePromise, requestOptions = {}) {\n    const newPendingMessage = {\n      localMessageID: localMessageID,\n      message: message,\n      sendMessagePromise: sendMessagePromise,\n      requestOptions: requestOptions || {},\n      timeFirstRequest: 0,\n      timeLastRequest: 0,\n      trackData: {\n        numErrors: 0,\n        lastRequestTime: 0,\n        totalRequestTime: 0\n      },\n      tryCount: 0,\n      isProcessed: false,\n      source: source\n    };\n    this.queue.waiting.push(newPendingMessage);\n    if (this.queue.current) {\n      if (message.history?.error_state === MessageErrorState.RETRYING) {\n        this.setMessageErrorState(newPendingMessage, MessageErrorState.WAITING);\n      }\n    }\n  }\n  clearCurrentQueueItem() {\n    if (this.queue.current) {\n      this.queue.current = null;\n    }\n  }\n  moveToNextQueueItem() {\n    this.clearCurrentQueueItem();\n    this.runQueueIfReady();\n  }\n  setMessageErrorState(pendingRequest, errorState) {\n    const {message: message} = pendingRequest;\n    const {allMessagesByID: allMessagesByID} = this.serviceManager.store.getState();\n    const messageToUpdate = allMessagesByID[message.id];\n    if (messageToUpdate) {\n      const currentState = messageToUpdate.history?.error_state;\n      const errorSame = currentState === errorState || errorState === MessageErrorState.NONE && !currentState;\n      if (!errorSame) {\n        let announceMessageID;\n        switch (errorState) {\n         case MessageErrorState.FAILED:\n          {\n            announceMessageID = \"errors_ariaMessageFailed\";\n            break;\n          }\n        }\n        if (announceMessageID) {\n          this.serviceManager.store.dispatch(actions.announceMessage({\n            messageID: announceMessageID\n          }));\n        }\n        this.serviceManager.store.dispatch(actions.setMessageErrorState(message.id, errorState));\n        const {allMessagesByID: allMessagesByID} = this.serviceManager.store.getState();\n        pendingRequest.message = allMessagesByID[message.id];\n      }\n    }\n  }\n  send(message, source, localMessageID, requestOptions) {\n    message.history.timestamp = message.history.timestamp || Date.now();\n    message.input = message.input || {};\n    message.input.message_type = message.input.message_type || MessageInputType.TEXT;\n    const sendMessagePromise = resolvablePromise();\n    this.addToMessageQueue(message, source, localMessageID, sendMessagePromise, requestOptions);\n    this.runQueueIfReady();\n    return sendMessagePromise;\n  }\n  cancelAllMessageRequests() {\n    while (this.queue.waiting.length) {\n      this.cancelMessageRequestByID(this.queue.waiting[0].message.id, false);\n    }\n    if (this.queue.current) {\n      this.cancelMessageRequestByID(this.queue.current.message.id, false);\n      this.clearCurrentQueueItem();\n    }\n  }\n  async cancelMessageRequestByID(messageID, logError) {\n    let pendingRequest;\n    if (this.queue.current?.message.id === messageID) {\n      pendingRequest = this.queue.current;\n    } else {\n      const index = this.queue.waiting.findIndex(item => item.message.id === messageID);\n      if (index !== -1) {\n        pendingRequest = this.queue.waiting[index];\n        this.queue.waiting.splice(index, 1);\n      }\n    }\n    if (pendingRequest) {\n      const {lastResponse: lastResponse, sendMessageController: sendMessageController} = pendingRequest;\n      sendMessageController?.abort(\"Message was cancelled\");\n      this.rejectFinalErrorOnMessage(pendingRequest, \"Message was cancelled\");\n      if (logError) {\n        this.serviceManager.actions.errorOccurred({\n          errorType: OnErrorType.MESSAGE_COMMUNICATION,\n          message: \"Message was cancelled\",\n          otherData: await safeFetchTextWithTimeout(lastResponse)\n        });\n      }\n    }\n  }\n}\n\nexport { MessageService as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass NamespaceService {\n  constructor(namespace) {\n    this.originalName = namespace;\n    this.attributeSafe = namespace;\n    this.suffix = getSuffix(namespace);\n  }\n}\n\nfunction getSuffix(namespace) {\n  const computedName = computeNamespaceName(namespace);\n  return computedName?.length ? `--${namespace}` : \"\";\n}\n\nfunction computeNamespaceName(namespace) {\n  return namespace ? namespace.trim() : \"\";\n}\n\nexport { NamespaceService };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass ServiceManager {\n  constructor() {\n    this.userDefinedElementRegistry = new Map;\n    this.restartCount = 0;\n  }\n  async fire(busEvent) {\n    return this.eventBus.fire(busEvent, this.instance);\n  }\n}\n\nexport { ServiceManager };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nlet innerStorage = {};\n\nconst storage = {\n  getItem(key) {\n    return innerStorage[key];\n  },\n  setItem(key, value) {\n    innerStorage[key] = value;\n  },\n  removeItem(key) {\n    delete innerStorage[key];\n  },\n  length: Object.keys(innerStorage).length,\n  clear() {\n    innerStorage = {};\n  },\n  key(index) {\n    return Object.keys(innerStorage)[index];\n  }\n};\n\nexport { storage as default };\n","import { VERSION } from \"../environmentVariables.js\";\n\nimport { IS_SESSION_STORAGE } from \"../utils/browserUtils.js\";\n\nimport { consoleError } from \"../utils/miscUtils.js\";\n\nimport storage$1 from \"./mockStorage.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst storage = IS_SESSION_STORAGE() ? window.sessionStorage : storage$1;\n\nclass UserSessionStorageService {\n  constructor(serviceManager) {\n    this.serviceManager = serviceManager;\n    this.prefix = `CARBON_CHAT_SESSION${this.serviceManager?.namespace?.suffix || \"\"}`;\n  }\n  loadChatSession() {\n    try {\n      const chatSessionString = storage.getItem(this.getChatSessionKey());\n      const chatSession = chatSessionString ? JSON.parse(chatSessionString) : null;\n      if (chatSession?.version === VERSION) {\n        return chatSession;\n      }\n      this.clearChatSession();\n      return null;\n    } catch (error) {\n      this.clearChatSession();\n      return null;\n    }\n  }\n  loadLauncherSession() {\n    try {\n      const launcherSessionString = storage.getItem(this.getLauncherSessionKey());\n      const launcherSession = launcherSessionString ? JSON.parse(launcherSessionString) : null;\n      if (launcherSession?.version === VERSION) {\n        launcherSession.wasLoadedFromBrowser = true;\n        return launcherSession;\n      }\n      this.clearLauncherSession();\n      return null;\n    } catch (error) {\n      this.clearLauncherSession();\n      return null;\n    }\n  }\n  persistChatSession(session) {\n    try {\n      storage.setItem(this.getChatSessionKey(), JSON.stringify(session));\n    } catch (error) {\n      consoleError(\"Error in persistChatSession\", error);\n    }\n  }\n  persistLauncherSession(session) {\n    try {\n      storage.setItem(this.getLauncherSessionKey(), JSON.stringify(session));\n    } catch (error) {\n      consoleError(\"Error in persistLauncherSession\", error);\n    }\n  }\n  clearChatSession() {\n    try {\n      storage.removeItem(this.getChatSessionKey());\n    } catch (error) {\n      consoleError(\"Error in clearChatSession\", error);\n    }\n  }\n  clearLauncherSession() {\n    try {\n      storage.removeItem(this.getLauncherSessionKey());\n    } catch (error) {\n      consoleError(\"Error in clearLauncherSession\", error);\n    }\n  }\n  getChatSessionKey() {\n    return this.prefix;\n  }\n  getLauncherSessionKey() {\n    return this.prefix;\n  }\n}\n\nexport { UserSessionStorageService };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction replaceCurrentArrayValue(currentValue, newValue) {\n  if (Array.isArray(newValue)) {\n    return newValue;\n  }\n  return undefined;\n}\n\nexport { replaceCurrentArrayValue };\n","import { HA_END_CHAT, HA_UPDATE_FILE_UPLOAD_IN_PROGRESS, HA_SET_IS_SCREEN_SHARING, HA_UPDATE_CAPABILITIES, HA_SET_HUMAN_AGENT_LEFT_CHAT, HA_UPDATE_IS_TYPING, HA_UPDATE_IS_SUSPENDED, HA_SET_PERSISTED_STATE, HA_SET_HUMAN_AGENT_JOINED, HA_SET_SHOW_SCREEN_SHARE_REQUEST, HA_SET_HUMAN_AGENT_AVAILABILITY, HA_SET_IS_RECONNECTING, HA_SET_IS_CONNECTING } from \"./humanAgentActions.js\";\n\nimport { applyLocalMessageUIState } from \"./reducerUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const humanAgentReducers = {\n  [HA_SET_IS_CONNECTING]: (state, action) => {\n    const {isConnecting: isConnecting, localMessageID: localMessageID} = action;\n    return {\n      ...state,\n      humanAgentState: {\n        ...state.humanAgentState,\n        isConnecting: isConnecting,\n        activeLocalMessageID: localMessageID,\n        numUnreadMessages: isConnecting ? 0 : state.humanAgentState.numUnreadMessages\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          humanAgentState: {\n            ...state.persistedToBrowserStorage.chatState.humanAgentState,\n            isSuspended: isConnecting ? state.persistedToBrowserStorage.chatState.humanAgentState.isSuspended : false\n          }\n        }\n      }\n    };\n  },\n  [HA_SET_IS_RECONNECTING]: (state, action) => {\n    const {isReconnecting: isReconnecting} = action;\n    return {\n      ...state,\n      humanAgentState: {\n        ...state.humanAgentState,\n        isReconnecting: isReconnecting\n      }\n    };\n  },\n  [HA_SET_HUMAN_AGENT_AVAILABILITY]: (state, action) => {\n    if (!state.humanAgentState.isConnecting) {\n      return state;\n    }\n    return {\n      ...state,\n      humanAgentState: {\n        ...state.humanAgentState,\n        availability: state.humanAgentState.isConnecting ? action.availability : null\n      }\n    };\n  },\n  [HA_SET_SHOW_SCREEN_SHARE_REQUEST]: (state, {showRequest: showRequest}) => ({\n    ...state,\n    humanAgentState: {\n      ...state.humanAgentState,\n      showScreenShareRequest: showRequest\n    }\n  }),\n  [HA_SET_HUMAN_AGENT_JOINED]: (state, action) => {\n    const responseUserProfiles = {\n      ...state.persistedToBrowserStorage.chatState.humanAgentState.responseUserProfiles\n    };\n    const {responseUserProfile: responseUserProfile} = action;\n    if (responseUserProfile) {\n      responseUserProfiles[responseUserProfile.id] = responseUserProfile;\n    }\n    return {\n      ...state,\n      humanAgentState: {\n        ...state.humanAgentState,\n        isConnecting: false,\n        isReconnecting: false,\n        availability: null\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          humanAgentState: {\n            ...state.persistedToBrowserStorage.chatState.humanAgentState,\n            isConnected: true,\n            responseUserProfile: responseUserProfile,\n            responseUserProfiles: responseUserProfiles\n          }\n        }\n      }\n    };\n  },\n  [HA_SET_PERSISTED_STATE]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        humanAgentState: {\n          ...state.persistedToBrowserStorage.chatState.humanAgentState,\n          serviceDeskState: action.state\n        }\n      }\n    }\n  }),\n  [HA_UPDATE_IS_SUSPENDED]: (state, action) => {\n    if (!state.humanAgentState.isConnecting && !state.persistedToBrowserStorage.chatState.humanAgentState.isConnected) {\n      return state;\n    }\n    return {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          humanAgentState: {\n            ...state.persistedToBrowserStorage.chatState.humanAgentState,\n            isSuspended: action.isSuspended\n          }\n        }\n      }\n    };\n  },\n  [HA_UPDATE_IS_TYPING]: (state, action) => ({\n    ...state,\n    humanAgentState: {\n      ...state.humanAgentState,\n      isHumanAgentTyping: action.isTyping\n    }\n  }),\n  [HA_SET_HUMAN_AGENT_LEFT_CHAT]: state => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState\n    },\n    humanAgentState: {\n      ...state.humanAgentState,\n      isHumanAgentTyping: false\n    },\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        humanAgentState: {\n          ...state.persistedToBrowserStorage.chatState.humanAgentState,\n          responseUserProfile: null\n        }\n      }\n    }\n  }),\n  [HA_UPDATE_CAPABILITIES]: (state, action) => {\n    const newInputState = {\n      ...state.humanAgentState.inputState,\n      ...action.capabilities\n    };\n    if (!newInputState.allowFileUploads) {\n      newInputState.files = [];\n    }\n    return {\n      ...state,\n      humanAgentState: {\n        ...state.humanAgentState,\n        inputState: newInputState\n      }\n    };\n  },\n  [HA_SET_IS_SCREEN_SHARING]: (state, {isSharing: isSharing}) => ({\n    ...state,\n    humanAgentState: {\n      ...state.humanAgentState,\n      isScreenSharing: isSharing\n    }\n  }),\n  [HA_UPDATE_FILE_UPLOAD_IN_PROGRESS]: (state, action) => ({\n    ...state,\n    humanAgentState: {\n      ...state.humanAgentState,\n      fileUploadInProgress: action.fileUploadInProgress\n    }\n  }),\n  [HA_END_CHAT]: state => {\n    let newState = applyLocalMessageUIState(state, state.humanAgentState.activeLocalMessageID, \"wasHumanAgentChatEnded\", true);\n    newState = {\n      ...newState,\n      humanAgentState: {\n        ...newState.humanAgentState,\n        isConnecting: false,\n        isReconnecting: false,\n        availability: null,\n        activeLocalMessageID: null,\n        isHumanAgentTyping: false,\n        inputState: {\n          ...newState.humanAgentState.inputState,\n          isReadonly: false\n        }\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          humanAgentState: {\n            ...state.persistedToBrowserStorage.chatState.humanAgentState,\n            isConnected: false,\n            isSuspended: false,\n            responseUserProfile: null\n          }\n        }\n      }\n    };\n    return newState;\n  }\n};\n\nexport { humanAgentReducers };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction populateTourStepItems(state) {\n  const {activeTourID: activeTourID} = state.persistedToBrowserStorage.chatState.persistedTourState;\n  if (activeTourID) {\n    const originalMessage = state.allMessagesByID[activeTourID];\n    const tourMessageItem = originalMessage?.output?.generic?.find(message => Boolean(message.user_defined?.steps));\n    if (tourMessageItem) {\n      return {\n        ...state,\n        tourState: {\n          ...state.tourState,\n          activeTourStepItems: tourMessageItem.user_defined?.steps\n        }\n      };\n    }\n  }\n  return clearTourState(state);\n}\n\nfunction clearTourState(state) {\n  return {\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        persistedTourState: {\n          activeTourID: null,\n          activeTourCurrentStepIndex: null\n        }\n      },\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        activeTour: false\n      }\n    },\n    tourState: {\n      ...state.tourState,\n      activeTourStepItems: null\n    }\n  };\n}\n\nexport { clearTourState, populateTourStepItems };\n","import merge from \"lodash-es/merge.js\";\n\nimport mergeWith from \"lodash-es/mergeWith.js\";\n\nimport { outputItemToLocalItem } from \"../schema/outputItemToLocalItem.js\";\n\nimport \"../utils/constants.js\";\n\nimport { replaceCurrentArrayValue } from \"../utils/customizers.js\";\n\nimport { streamItemID, isResponse, isRequest } from \"../utils/messageUtils.js\";\n\nimport { UPDATE_MAIN_HEADER_AVATAR, SET_STREAM_ID, SET_STOP_STREAMING_BUTTON_DISABLED, SET_STOP_STREAMING_BUTTON_VISIBLE, UPDATE_MAX_VISIBLE_HEADER_OBJECTS, UPDATE_CHAT_HEADER_CONFIG, STREAMING_ADD_CHUNK, STREAMING_MERGE_HISTORY, STREAMING_START, SET_RESPONSE_PANEL_CONTENT, SET_RESPONSE_PANEL_IS_OPEN, ADD_NESTED_MESSAGES, FILE_UPLOAD_INPUT_ERROR, CLEAR_INPUT_FILES, REMOVE_ALL_NOTIFICATIONS, REMOVE_NOTIFICATIONS, ADD_NOTIFICATION, REMOVE_LOCAL_MESSAGE_ITEM, REMOVE_INPUT_FILE, ADD_INPUT_FILE, SET_IS_BROWSER_PAGE_VISIBLE, UPDATE_INPUT_STATE, CHANGE_STEP_IN_TOUR, CLEAR_TOUR_DATA, SET_TOUR_DATA, SET_CUSTOM_PANEL_OPTIONS, SET_CUSTOM_PANEL_OPEN, SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN, CLOSE_IFRAME_PANEL, OPEN_IFRAME_CONTENT, SET_LAUNCHER_MINIMIZED, SET_CHAT_MESSAGES_PROPERTY, SET_LAUNCHER_CONFIG_PROPERTY, SET_LAUNCHER_PROPERTY, UPDATE_LAUNCHER_CONFIG, TOGGLE_HOME_SCREEN, SET_HOME_SCREEN_IS_OPEN, ACCEPTED_DISCLAIMER, ANNOUNCE_MESSAGE, MERGE_HISTORY, SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY, SET_MESSAGE_HISTORY_PROPERTY, SET_MESSAGE_UI_PROPERTY, UPDATE_HOME_SCREEN_CONFIG, UPDATE_CSS_VARIABLES, UPDATE_MAIN_HEADER_TITLE, UPDATE_LAUNCHER_AVATAR_URL, UPDATE_BOT_AVATAR_URL, UPDATE_BOT_NAME, SET_INITIAL_VIEW_CHANGE_COMPLETE, SET_VIEW_CHANGING, SET_VIEW_STATE, UPDATE_HAS_SENT_NON_WELCOME_MESSAGE, UPDATE_PERSISTED_CHAT_STATE, SET_APP_STATE_VALUE, ADD_IS_HYDRATING_COUNTER, ADD_IS_LOADING_COUNTER, ADD_IS_TYPING_COUNTER, MESSAGE_SET_OPTION_SELECTED, ADD_MESSAGE, UPDATE_MESSAGE, UPDATE_LOCAL_MESSAGE_ITEM, REMOVE_MESSAGES, ADD_LOCAL_MESSAGE_ITEM, HYDRATE_MESSAGE_HISTORY, RESTART_CONVERSATION, HYDRATE_CHAT, CHANGE_STATE } from \"./actions.js\";\n\nimport { humanAgentReducers } from \"./humanAgentReducers.js\";\n\nimport { setHomeScreenOpenState, applyFullMessage, applyBotMessageState, applyLocalMessageUIState, handleViewStateChange, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE } from \"./reducerUtils.js\";\n\nimport { clearTourState, populateTourStepItems } from \"./tourReducerUtils.js\";\n\nimport { HumanAgentMessageType } from \"../../../types/messaging/Messages.js\";\n\nimport { FileStatusValue, LauncherType } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst EXCLUDE_HUMAN_AGENT_UNREAD = new Set([ HumanAgentMessageType.USER_ENDED_CHAT, HumanAgentMessageType.CHAT_WAS_ENDED, HumanAgentMessageType.RELOAD_WARNING ]);\n\nconst reducers = {\n  [CHANGE_STATE]: (state, action) => merge({}, state, action.partialState),\n  [HYDRATE_CHAT]: state => ({\n    ...state,\n    isHydrated: true\n  }),\n  [RESTART_CONVERSATION]: state => {\n    let newState = {\n      ...state,\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: [],\n        messageIDs: [],\n        isTypingCounter: 0,\n        isScrollAnchored: false\n      },\n      allMessageItemsByID: {},\n      allMessagesByID: {},\n      iFramePanelState: {\n        ...DEFAULT_IFRAME_PANEL_STATE\n      },\n      viewSourcePanelState: {\n        ...DEFAULT_CITATION_PANEL_STATE\n      },\n      customPanelState: {\n        ...DEFAULT_CUSTOM_PANEL_STATE\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          homeScreenState: {\n            ...state.persistedToBrowserStorage.chatState.homeScreenState,\n            showBackToBot: false\n          }\n        }\n      },\n      isHydrated: false,\n      catastrophicErrorType: null\n    };\n    newState = clearTourState(newState);\n    if (newState.homeScreenConfig.is_on) {\n      newState = setHomeScreenOpenState(newState, true);\n    }\n    return newState;\n  },\n  [HYDRATE_MESSAGE_HISTORY]: (state, action) => {\n    let newState = {\n      ...state,\n      ...action.messageHistory\n    };\n    if (state.persistedToBrowserStorage.chatState.persistedTourState.activeTourID) {\n      newState = populateTourStepItems(newState);\n    }\n    return newState;\n  },\n  [ADD_LOCAL_MESSAGE_ITEM]: (state, action) => {\n    const {messageItem: messageItem, message: message, addMessage: addMessage, addAfterID: addAfterID} = action;\n    const {id: id} = messageItem.ui_state;\n    const isSilent = message.history.silent;\n    let newState = state;\n    if (addMessage) {\n      newState = applyFullMessage(newState, message);\n    }\n    const currentIndex = newState.botMessageState.localMessageIDs.findIndex(existingID => existingID === id);\n    const newLocalMessageIDs = [ ...newState.botMessageState.localMessageIDs ];\n    let insertAtIndex = currentIndex;\n    if (currentIndex !== -1) {\n      newLocalMessageIDs.splice(currentIndex, 1);\n    } else {\n      insertAtIndex = newLocalMessageIDs.length;\n    }\n    if (addAfterID) {\n      const afterIDIndex = newLocalMessageIDs.findIndex(existingID => existingID === addAfterID);\n      if (afterIDIndex !== -1) {\n        insertAtIndex = afterIDIndex + 1;\n      }\n    }\n    newLocalMessageIDs.splice(insertAtIndex, 0, id);\n    if (!isSilent) {\n      newState = {\n        ...newState,\n        allMessageItemsByID: {\n          ...newState.allMessageItemsByID,\n          [id]: messageItem\n        },\n        botMessageState: {\n          ...newState.botMessageState,\n          localMessageIDs: newLocalMessageIDs\n        }\n      };\n      if (newState.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen) {\n        newState = setHomeScreenOpenState(newState, false);\n      }\n      const isBotMessage = !messageItem.item.agent_message_type;\n      const isMainWindowOpen = state.persistedToBrowserStorage.launcherState.viewState.mainWindow;\n      if (!isBotMessage && (!isMainWindowOpen || !state.isBrowserPageVisible)) {\n        const fromHumanAgent = !isRequest(message);\n        if (fromHumanAgent && !EXCLUDE_HUMAN_AGENT_UNREAD.has(messageItem.item.agent_message_type)) {\n          newState = {\n            ...newState,\n            humanAgentState: {\n              ...newState.humanAgentState,\n              numUnreadMessages: newState.humanAgentState.numUnreadMessages + 1\n            }\n          };\n        }\n      }\n    }\n    return newState;\n  },\n  [REMOVE_MESSAGES]: (state, {messageIDs: messageIDs}) => {\n    const idsSet = new Set(messageIDs);\n    const newAllMessages = {\n      ...state.allMessagesByID\n    };\n    const newAllMessageItems = {\n      ...state.allMessageItemsByID\n    };\n    const newMessageIDs = state.botMessageState.messageIDs.filter(messageID => !idsSet.has(messageID));\n    const newMessageItemsIDs = state.botMessageState.localMessageIDs.filter(messageItemID => {\n      const messageItem = newAllMessageItems[messageItemID];\n      const removeItem = idsSet.has(messageItem?.fullMessageID);\n      if (removeItem) {\n        delete newAllMessageItems[messageItemID];\n      }\n      return !removeItem;\n    });\n    messageIDs.forEach(messageID => {\n      delete newAllMessages[messageID];\n    });\n    const newState = {\n      ...state,\n      allMessagesByID: newAllMessages,\n      allMessageItemsByID: newAllMessageItems,\n      botMessageState: {\n        ...state.botMessageState,\n        messageIDs: newMessageIDs,\n        localMessageIDs: newMessageItemsIDs\n      }\n    };\n    return newState;\n  },\n  [UPDATE_LOCAL_MESSAGE_ITEM]: (state, action) => {\n    const {messageItem: messageItem} = action;\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [messageItem.ui_state.id]: messageItem\n      }\n    };\n  },\n  [UPDATE_MESSAGE]: (state, action) => {\n    const {message: message} = action;\n    return {\n      ...state,\n      allMessagesByID: {\n        ...state.allMessagesByID,\n        [message.id]: message\n      }\n    };\n  },\n  [ADD_MESSAGE]: (state, action) => {\n    const {message: message} = action;\n    const messageID = message.id;\n    let newState = state;\n    if (isResponse(message)) {\n      const itemIDsInNewMessage = [];\n      message.output.generic.forEach(item => {\n        const id = streamItemID(messageID, item);\n        if (id) {\n          itemIDsInNewMessage.push(id);\n        }\n      });\n      const newAllMessageItemsByID = {\n        ...state.allMessageItemsByID\n      };\n      const existingItemIDs = [];\n      let firstFoundIndex;\n      const newLocalMessageIDs = state.botMessageState.localMessageIDs.filter((itemID, index) => {\n        const item = state.allMessageItemsByID[itemID];\n        const isItemInMessage = item.fullMessageID === messageID;\n        if (isItemInMessage) {\n          if (firstFoundIndex === undefined) {\n            firstFoundIndex = index;\n          }\n          if (!itemIDsInNewMessage.includes(itemID)) {\n            delete newAllMessageItemsByID[itemID];\n          } else {\n            existingItemIDs.push(itemID);\n          }\n        }\n        return !isItemInMessage;\n      });\n      if (existingItemIDs.length) {\n        const itemIDsToInsert = itemIDsInNewMessage.filter(itemID => existingItemIDs.includes(itemID));\n        if (itemIDsToInsert.length) {\n          newLocalMessageIDs.splice(firstFoundIndex, 0, ...itemIDsToInsert);\n        }\n      }\n      newState = {\n        ...newState,\n        allMessageItemsByID: newAllMessageItemsByID,\n        botMessageState: {\n          ...newState.botMessageState,\n          localMessageIDs: newLocalMessageIDs\n        }\n      };\n    }\n    return applyFullMessage(newState, message);\n  },\n  [MESSAGE_SET_OPTION_SELECTED]: (state, action) => {\n    const newMessagesByID = {\n      ...state.allMessageItemsByID\n    };\n    newMessagesByID[action.messageID] = {\n      ...state.allMessageItemsByID[action.messageID],\n      ui_state: {\n        ...state.allMessageItemsByID[action.messageID].ui_state,\n        optionSelected: action.sentMessage\n      }\n    };\n    return {\n      ...state,\n      allMessageItemsByID: newMessagesByID\n    };\n  },\n  [ADD_IS_TYPING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isTypingCounter: Math.max(state.botMessageState.isTypingCounter + action.addToIsTyping, 0)\n    }\n  }),\n  [ADD_IS_LOADING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isLoadingCounter: Math.max(state.botMessageState.isLoadingCounter + action.addToIsLoading, 0)\n    }\n  }),\n  [ADD_IS_HYDRATING_COUNTER]: (state, action) => ({\n    ...state,\n    botMessageState: {\n      ...state.botMessageState,\n      isHydratingCounter: Math.max(state.botMessageState.isHydratingCounter + action.addToIsHydrating, 0)\n    }\n  }),\n  [SET_APP_STATE_VALUE]: (state, action) => ({\n    ...state,\n    [action.key]: action.value\n  }),\n  [UPDATE_PERSISTED_CHAT_STATE]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        ...action.chatState\n      }\n    }\n  }),\n  [UPDATE_HAS_SENT_NON_WELCOME_MESSAGE]: (state, action) => {\n    if (state.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage === action.hasSentNonWelcomeMessage) {\n      return state;\n    }\n    return {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          hasSentNonWelcomeMessage: action.hasSentNonWelcomeMessage\n        },\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          hasSentNonWelcomeMessage: action.hasSentNonWelcomeMessage\n        }\n      }\n    };\n  },\n  [SET_VIEW_STATE]: (state, action) => handleViewStateChange(state, action.viewState),\n  [SET_VIEW_CHANGING]: (state, action) => ({\n    ...state,\n    viewChanging: action.viewChanging\n  }),\n  [SET_INITIAL_VIEW_CHANGE_COMPLETE]: (state, action) => ({\n    ...state,\n    initialViewChangeComplete: action.changeComplete\n  }),\n  [UPDATE_BOT_NAME]: (state, action) => ({\n    ...state,\n    botName: action.name,\n    headerDisplayName: state.theme.useAITheme ? state.headerDisplayName : action.name\n  }),\n  [UPDATE_BOT_AVATAR_URL]: (state, action) => ({\n    ...state,\n    botAvatarURL: action.url\n  }),\n  [UPDATE_LAUNCHER_AVATAR_URL]: (state, action) => ({\n    ...state,\n    launcher: {\n      ...state.launcher,\n      config: {\n        ...state.launcher.config,\n        mobile: {\n          ...state.launcher.config.mobile,\n          avatar_url_override: action.source\n        },\n        desktop: {\n          ...state.launcher.config.desktop,\n          avatar_url_override: action.source\n        }\n      }\n    }\n  }),\n  [UPDATE_MAIN_HEADER_TITLE]: (state, action) => ({\n    ...state,\n    headerDisplayName: action.title\n  }),\n  [UPDATE_CSS_VARIABLES]: (state, action) => {\n    const {config: config} = state;\n    const {variables: variables} = action;\n    const newConfig = {\n      public: {\n        ...config.public\n      }\n    };\n    return {\n      ...state,\n      config: newConfig,\n      cssVariableOverrides: variables\n    };\n  },\n  [UPDATE_HOME_SCREEN_CONFIG]: (state, action) => {\n    const newHomeScreenConfig = action.homeScreenConfig;\n    return {\n      ...state,\n      homeScreenConfig: mergeWith({}, state.homeScreenConfig, newHomeScreenConfig, replaceCurrentArrayValue)\n    };\n  },\n  [SET_MESSAGE_UI_PROPERTY]: (state, action) => applyLocalMessageUIState(state, action.localMessageID, action.propertyName, action.propertyValue),\n  [SET_MESSAGE_HISTORY_PROPERTY]: (state, action) => {\n    const {messageID: messageID, propertyName: propertyName, propertyValue: propertyValue} = action;\n    const oldMessage = state.allMessagesByID[messageID];\n    if (oldMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [messageID]: {\n            ...oldMessage,\n            history: {\n              ...oldMessage.history,\n              [propertyName]: propertyValue\n            }\n          }\n        }\n      };\n    }\n    return state;\n  },\n  [SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY]: (state, action) => {\n    const {messageID: messageID, propertyName: propertyName, propertyValue: propertyValue} = action;\n    const oldMessage = state.allMessagesByID[messageID];\n    if (oldMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [messageID]: {\n            ...oldMessage,\n            ui_state_internal: {\n              ...oldMessage.ui_state_internal,\n              [propertyName]: propertyValue\n            }\n          }\n        }\n      };\n    }\n    return state;\n  },\n  [MERGE_HISTORY]: (state, action) => {\n    const oldMessage = state.allMessagesByID[action.messageID];\n    if (oldMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [action.messageID]: {\n            ...oldMessage,\n            history: merge({}, oldMessage.history, action.history)\n          }\n        }\n      };\n    }\n    return state;\n  },\n  [ANNOUNCE_MESSAGE]: (state, action) => ({\n    ...state,\n    announceMessage: action.message\n  }),\n  [ACCEPTED_DISCLAIMER]: state => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        disclaimersAccepted: {\n          ...state.persistedToBrowserStorage.chatState.disclaimersAccepted,\n          [window.location.hostname]: true\n        }\n      }\n    }\n  }),\n  [SET_HOME_SCREEN_IS_OPEN]: (state, {isOpen: isOpen}) => setHomeScreenOpenState(state, isOpen),\n  [TOGGLE_HOME_SCREEN]: state => setHomeScreenOpenState(state, !state.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen, true),\n  [UPDATE_LAUNCHER_CONFIG]: (state, action) => {\n    const newConfig = merge({}, state.launcher.config, action.launcherConfig);\n    return {\n      ...state,\n      launcher: {\n        ...state.launcher,\n        config: newConfig\n      },\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          desktopLauncherIsExpanded: newConfig.is_on && newConfig.desktop.is_on ? state.persistedToBrowserStorage.launcherState.desktopLauncherIsExpanded : false,\n          mobileLauncherIsExtended: newConfig.is_on && newConfig.mobile.is_on ? state.persistedToBrowserStorage.launcherState.mobileLauncherIsExtended : false\n        }\n      }\n    };\n  },\n  [SET_LAUNCHER_PROPERTY]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        [action.propertyName]: action.propertyValue\n      }\n    }\n  }),\n  [SET_LAUNCHER_CONFIG_PROPERTY]: (state, action) => {\n    const newState = {\n      ...state,\n      launcher: {\n        ...state.launcher,\n        config: {\n          ...state.launcher.config\n        }\n      }\n    };\n    if (!action.launcherType || action.launcherType === LauncherType.DESKTOP) {\n      newState.launcher.config.desktop = {\n        ...state.launcher.config.desktop,\n        [action.propertyName]: action.propertyValue\n      };\n    }\n    if (!action.launcherType || action.launcherType === LauncherType.MOBILE) {\n      newState.launcher.config.mobile = {\n        ...state.launcher.config.mobile,\n        [action.propertyName]: action.propertyValue\n      };\n    }\n    return newState;\n  },\n  [SET_CHAT_MESSAGES_PROPERTY]: (state, action) => applyBotMessageState(state, {\n    [action.propertyName]: action.propertyValue\n  }),\n  [SET_LAUNCHER_MINIMIZED]: state => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      launcherState: {\n        ...state.persistedToBrowserStorage.launcherState,\n        desktopLauncherIsExpanded: false,\n        desktopLauncherWasMinimized: true\n      }\n    }\n  }),\n  [OPEN_IFRAME_CONTENT]: (state, {messageItem: messageItem}) => ({\n    ...state,\n    iFramePanelState: {\n      ...state.iFramePanelState,\n      messageItem: messageItem,\n      isOpen: true\n    },\n    announceMessage: {\n      messageID: \"iframe_ariaOpenedPanel\"\n    }\n  }),\n  [CLOSE_IFRAME_PANEL]: state => ({\n    ...state,\n    iFramePanelState: {\n      ...state.iFramePanelState,\n      isOpen: false\n    },\n    announceMessage: {\n      messageID: \"iframe_ariaClosedPanel\"\n    }\n  }),\n  [SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN]: (state, action) => ({\n    ...state,\n    viewSourcePanelState: {\n      ...state.viewSourcePanelState,\n      citationItem: action.citationItem,\n      relatedSearchResult: action.relatedSearchResult,\n      isOpen: action.isOpen\n    }\n  }),\n  [SET_CUSTOM_PANEL_OPEN]: (state, action) => ({\n    ...state,\n    customPanelState: {\n      ...state.customPanelState,\n      isOpen: action.isOpen\n    }\n  }),\n  [SET_CUSTOM_PANEL_OPTIONS]: (state, action) => ({\n    ...state,\n    customPanelState: {\n      ...state.customPanelState,\n      options: action.options\n    }\n  }),\n  [SET_TOUR_DATA]: (state, action) => {\n    const newStateWithPersistedTourData = {\n      ...state,\n      persistedToBrowserStorage: {\n        ...state.persistedToBrowserStorage,\n        chatState: {\n          ...state.persistedToBrowserStorage.chatState,\n          persistedTourState: {\n            activeTourID: action.newActiveTourMessageID,\n            activeTourCurrentStepIndex: 0\n          }\n        },\n        launcherState: {\n          ...state.persistedToBrowserStorage.launcherState,\n          activeTour: true\n        }\n      }\n    };\n    return populateTourStepItems(newStateWithPersistedTourData);\n  },\n  [CLEAR_TOUR_DATA]: state => clearTourState(state),\n  [CHANGE_STEP_IN_TOUR]: (state, action) => ({\n    ...state,\n    persistedToBrowserStorage: {\n      ...state.persistedToBrowserStorage,\n      chatState: {\n        ...state.persistedToBrowserStorage.chatState,\n        persistedTourState: {\n          ...state.persistedToBrowserStorage.chatState.persistedTourState,\n          activeTourCurrentStepIndex: Math.max(Math.min(action.newStepNumber, state.tourState.activeTourStepItems.length - 1), 0)\n        }\n      }\n    }\n  }),\n  [UPDATE_INPUT_STATE]: (state, action) => {\n    const currentInputState = getInputState(state, action.isInputToHumanAgent);\n    const newInputState = {\n      ...currentInputState,\n      ...action.newState\n    };\n    const newState = applyInputState(state, newInputState, action.isInputToHumanAgent);\n    return newState;\n  },\n  [SET_IS_BROWSER_PAGE_VISIBLE]: (state, action) => {\n    let numUnreadMessages;\n    const isMainWindowOpen = state.persistedToBrowserStorage.launcherState.viewState.mainWindow;\n    if (isMainWindowOpen && action.isVisible) {\n      numUnreadMessages = 0;\n    } else {\n      numUnreadMessages = state.humanAgentState.numUnreadMessages;\n    }\n    return {\n      ...state,\n      isBrowserPageVisible: action.isVisible,\n      humanAgentState: {\n        ...state.humanAgentState,\n        numUnreadMessages: numUnreadMessages\n      }\n    };\n  },\n  [ADD_INPUT_FILE]: (state, {file: file, isInputToHumanAgent: isInputToHumanAgent}) => {\n    const currentInputState = getInputState(state, isInputToHumanAgent);\n    return applyInputState(state, {\n      ...currentInputState,\n      files: [ ...currentInputState.files, file ]\n    }, isInputToHumanAgent);\n  },\n  [REMOVE_INPUT_FILE]: (state, {fileID: fileID, isInputToHumanAgent: isInputToHumanAgent}) => {\n    const currentInputState = getInputState(state, isInputToHumanAgent);\n    const newUploads = [ ...currentInputState.files ];\n    const index = newUploads.findIndex(file => file.id === fileID);\n    if (index !== -1) {\n      newUploads.splice(index, 1);\n    }\n    return applyInputState(state, {\n      ...currentInputState,\n      files: newUploads\n    }, isInputToHumanAgent);\n  },\n  [REMOVE_LOCAL_MESSAGE_ITEM]: (state, {localMessageItemID: localMessageItemID}) => {\n    const newLocalMessageIDs = state.botMessageState.localMessageIDs.filter(id => id !== localMessageItemID);\n    const allMessageItemsByID = {\n      ...state.allMessageItemsByID\n    };\n    if (allMessageItemsByID[localMessageItemID]) {\n      delete allMessageItemsByID[localMessageItemID];\n    }\n    return {\n      ...state,\n      allMessageItemsByID: allMessageItemsByID,\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: newLocalMessageIDs\n      }\n    };\n  },\n  [ADD_NOTIFICATION]: (state, {notification: notification, notificationID: notificationID}) => ({\n    ...state,\n    notifications: state.notifications.concat({\n      id: notificationID,\n      notification: notification\n    })\n  }),\n  [REMOVE_NOTIFICATIONS]: (state, {groupID: groupID, notificationID: notificationID}) => ({\n    ...state,\n    notifications: state.notifications.filter(notification => {\n      if (notificationID) {\n        return notification.id !== notificationID;\n      }\n      return notification.notification.groupID !== groupID;\n    })\n  }),\n  [REMOVE_ALL_NOTIFICATIONS]: state => ({\n    ...state,\n    notifications: []\n  }),\n  [CLEAR_INPUT_FILES]: (state, {isInputToHumanAgent: isInputToHumanAgent}) => {\n    const currentInputState = getInputState(state, isInputToHumanAgent);\n    return applyInputState(state, {\n      ...currentInputState,\n      files: []\n    }, isInputToHumanAgent);\n  },\n  [FILE_UPLOAD_INPUT_ERROR]: (state, {fileID: fileID, errorMessage: errorMessage, isInputToHumanAgent: isInputToHumanAgent}) => {\n    const currentInputSate = getInputState(state, isInputToHumanAgent);\n    const newUploads = [ ...currentInputSate.files ];\n    const index = newUploads.findIndex(file => file.id === fileID);\n    if (index !== -1) {\n      newUploads[index] = {\n        ...newUploads[index],\n        isError: true,\n        errorMessage: errorMessage,\n        status: FileStatusValue.COMPLETE\n      };\n    }\n    return applyInputState(state, {\n      ...currentInputSate,\n      files: newUploads\n    }, isInputToHumanAgent);\n  },\n  [ADD_NESTED_MESSAGES]: (state, {localMessageItems: localMessageItems}) => {\n    const allMessageItemsByID = {\n      ...state.allMessageItemsByID\n    };\n    localMessageItems.forEach(localMessageItem => {\n      allMessageItemsByID[localMessageItem.ui_state.id] = localMessageItem;\n    });\n    return {\n      ...state,\n      allMessageItemsByID: allMessageItemsByID\n    };\n  },\n  [SET_RESPONSE_PANEL_IS_OPEN]: (state, {isOpen: isOpen}) => ({\n    ...state,\n    responsePanelState: {\n      ...state.responsePanelState,\n      isOpen: isOpen\n    }\n  }),\n  [SET_RESPONSE_PANEL_CONTENT]: (state, {localMessageItem: localMessageItem, isMessageForInput: isMessageForInput}) => ({\n    ...state,\n    responsePanelState: {\n      ...state.responsePanelState,\n      localMessageItem: localMessageItem,\n      isMessageForInput: isMessageForInput\n    }\n  }),\n  [STREAMING_START]: (state, {messageID: messageID}) => {\n    const streamIntoResponse = {\n      id: messageID,\n      output: {\n        generic: []\n      },\n      history: {\n        timestamp: Date.now()\n      }\n    };\n    return applyFullMessage(state, streamIntoResponse);\n  },\n  [STREAMING_MERGE_HISTORY]: (state, {messageID: messageID, history: history}) => {\n    const existingMessage = state.allMessagesByID[messageID];\n    const newMessage = merge({}, existingMessage, {\n      history: history\n    });\n    if (existingMessage) {\n      return {\n        ...state,\n        allMessagesByID: {\n          ...state.allMessagesByID,\n          [messageID]: newMessage\n        }\n      };\n    }\n    return state;\n  },\n  [STREAMING_ADD_CHUNK]: (state, {chunkItem: chunkItem, fullMessageID: fullMessageID, isCompleteItem: isCompleteItem, disableFadeAnimation: disableFadeAnimation}) => {\n    const message = state.allMessagesByID[fullMessageID];\n    const localItemID = streamItemID(fullMessageID, chunkItem);\n    const existingLocalMessageItem = state.allMessageItemsByID[localItemID];\n    let {localMessageIDs: localMessageIDs} = state.botMessageState;\n    let newItem;\n    if (!existingLocalMessageItem) {\n      newItem = outputItemToLocalItem(chunkItem, message, false);\n      newItem.ui_state.needsAnnouncement = false;\n      newItem.ui_state.disableFadeAnimation = disableFadeAnimation;\n      newItem.ui_state.isIntermediateStreaming = true;\n      if (isCompleteItem) {\n        newItem.ui_state.streamingState = {\n          chunks: [],\n          isDone: true\n        };\n      } else {\n        newItem.ui_state.streamingState = {\n          chunks: [ chunkItem ],\n          isDone: false\n        };\n      }\n      localMessageIDs = [ ...localMessageIDs, localItemID ];\n      if (!newItem.item.response_type) {\n        throw new Error(`New chunk item does not have a response_type: ${JSON.stringify(chunkItem)}`);\n      }\n    } else if (isCompleteItem) {\n      newItem = outputItemToLocalItem(chunkItem, message, false);\n      newItem.ui_state.needsAnnouncement = false;\n      newItem.ui_state.disableFadeAnimation = disableFadeAnimation;\n      newItem.ui_state.streamingState = {\n        chunks: [],\n        isDone: true\n      };\n    } else {\n      newItem = {\n        ...existingLocalMessageItem,\n        ui_state: {\n          ...existingLocalMessageItem?.ui_state,\n          streamingState: {\n            ...existingLocalMessageItem?.ui_state.streamingState,\n            chunks: [ ...existingLocalMessageItem?.ui_state.streamingState?.chunks || [], chunkItem ]\n          }\n        }\n      };\n    }\n    return {\n      ...state,\n      allMessageItemsByID: {\n        ...state.allMessageItemsByID,\n        [localItemID]: newItem\n      },\n      botMessageState: {\n        ...state.botMessageState,\n        localMessageIDs: localMessageIDs\n      }\n    };\n  },\n  [UPDATE_CHAT_HEADER_CONFIG]: (state, {chatHeaderConfig: chatHeaderConfig}) => ({\n    ...state,\n    chatHeaderState: {\n      ...state.chatHeaderState,\n      config: {\n        ...state.chatHeaderState.config,\n        ...chatHeaderConfig\n      }\n    }\n  }),\n  [UPDATE_MAX_VISIBLE_HEADER_OBJECTS]: (state, {maxTotal: maxTotal}) => ({\n    ...state,\n    chatHeaderState: {\n      ...state.chatHeaderState,\n      maxVisibleHeaderObjects: maxTotal\n    }\n  }),\n  [SET_STOP_STREAMING_BUTTON_VISIBLE]: (state, {isVisible: isVisible}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        isVisible: isVisible\n      }\n    }\n  }),\n  [SET_STOP_STREAMING_BUTTON_DISABLED]: (state, {isDisabled: isDisabled}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        isDisabled: isDisabled\n      }\n    }\n  }),\n  [SET_STREAM_ID]: (state, {currentStreamID: currentStreamID}) => ({\n    ...state,\n    botInputState: {\n      ...state.botInputState,\n      stopStreamingButtonState: {\n        ...state.botInputState.stopStreamingButtonState,\n        currentStreamID: currentStreamID\n      }\n    }\n  }),\n  [UPDATE_MAIN_HEADER_AVATAR]: (state, {config: config}) => ({\n    ...state,\n    headerAvatarConfig: config\n  })\n};\n\nfunction applyInputState(state, newInputState, isInputToHumanAgent) {\n  if (isInputToHumanAgent) {\n    return {\n      ...state,\n      humanAgentState: {\n        ...state.humanAgentState,\n        inputState: newInputState\n      }\n    };\n  }\n  return {\n    ...state,\n    botInputState: newInputState\n  };\n}\n\nfunction getInputState(state, isInputToHumanAgent) {\n  return isInputToHumanAgent ? state.humanAgentState.inputState : state.botInputState;\n}\n\nObject.assign(reducers, humanAgentReducers);\n\nexport { reducers };\n","import merge from \"lodash-es/merge.js\";\n\nimport { createStore } from \"redux\";\n\nimport { NODE_ENV } from \"../environmentVariables.js\";\n\nimport { IS_PHONE } from \"../utils/browserUtils.js\";\n\nimport \"../utils/constants.js\";\n\nimport { withoutEmptyStarters } from \"../utils/homeScreenUtils.js\";\n\nimport { getBotName } from \"../utils/miscUtils.js\";\n\nimport { mergeCSSVariables } from \"../utils/styleUtils.js\";\n\nimport { reducers } from \"./reducers.js\";\n\nimport { DEFAULT_THEME_STATE, VIEW_STATE_MAIN_WINDOW_OPEN, VIEW_STATE_LAUNCHER_OPEN, DEFAULT_LAUNCHER, DEFAULT_PERSISTED_TO_BROWSER, DEFAULT_INPUT_STATE, VIEW_STATE_ALL_CLOSED, DEFAULT_TOUR_STATE, DEFAULT_MESSAGE_PANEL_STATE, DEFAULT_CUSTOM_PANEL_STATE, DEFAULT_CITATION_PANEL_STATE, DEFAULT_IFRAME_PANEL_STATE, DEFAULT_HUMAN_AGENT_STATE, DEFAULT_MESSAGE_STATE, DEFAULT_LAYOUT_STATE } from \"./reducerUtils.js\";\n\nimport \"../../../types/instance/apiTypes.js\";\n\nimport enLanguagePack from \"../../languages/en.json.js\";\n\nimport { CornersType } from \"../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function doCreateStore(config, serviceManager) {\n  let useAITheme;\n  if (config.public.themeConfig?.useAITheme !== undefined) {\n    useAITheme = config.public.themeConfig?.useAITheme;\n  } else {\n    useAITheme = DEFAULT_THEME_STATE.useAITheme;\n  }\n  const themeState = {\n    carbonTheme: config.public.themeConfig?.carbonTheme || DEFAULT_THEME_STATE.carbonTheme,\n    useAITheme: useAITheme,\n    corners: getThemeCornersType(config)\n  };\n  const botName = getBotName(themeState.useAITheme, config);\n  const initialState = {\n    ...DEFAULT_MESSAGE_STATE,\n    notifications: [],\n    botInputState: {\n      ...DEFAULT_INPUT_STATE(),\n      isReadonly: config.public.isReadonly,\n      fieldVisible: !config.public.isReadonly\n    },\n    humanAgentState: {\n      ...DEFAULT_HUMAN_AGENT_STATE\n    },\n    botName: botName,\n    headerDisplayName: null,\n    botAvatarURL: config.public.botAvatarURL || null,\n    headerAvatarConfig: null,\n    chatWidthBreakpoint: null,\n    chatWidth: null,\n    chatHeight: null,\n    cssVariableOverrides: mergeCSSVariables({}, {}, themeState.carbonTheme, themeState.useAITheme),\n    isHydrated: false,\n    languagePack: enLanguagePack,\n    locale: \"en\",\n    config: config,\n    originalConfig: config,\n    suspendScrollDetection: false,\n    homeScreenConfig: withoutEmptyStarters({}),\n    persistedToBrowserStorage: {\n      ...DEFAULT_PERSISTED_TO_BROWSER,\n      chatState: {\n        ...DEFAULT_PERSISTED_TO_BROWSER.chatState,\n        homeScreenState: {\n          ...DEFAULT_PERSISTED_TO_BROWSER.chatState.homeScreenState\n        }\n      }\n    },\n    launcher: merge({}, DEFAULT_LAUNCHER, {\n      config: merge({}, {}, {\n        mobile: {}\n      }, {\n        is_on: config.public.showLauncher\n      })\n    }),\n    iFramePanelState: DEFAULT_IFRAME_PANEL_STATE,\n    viewSourcePanelState: DEFAULT_CITATION_PANEL_STATE,\n    isDestroyed: false,\n    customPanelState: DEFAULT_CUSTOM_PANEL_STATE,\n    viewChanging: false,\n    initialViewChangeComplete: false,\n    targetViewState: config.public.openChatByDefault ? VIEW_STATE_MAIN_WINDOW_OPEN : VIEW_STATE_LAUNCHER_OPEN,\n    responsePanelState: DEFAULT_MESSAGE_PANEL_STATE,\n    customMenuOptions: null,\n    tourState: DEFAULT_TOUR_STATE,\n    isBrowserPageVisible: true,\n    showNonHeaderBackgroundCover: false,\n    theme: themeState,\n    layout: getLayoutState(config),\n    chatHeaderState: {\n      config: null,\n      maxVisibleHeaderObjects: 0\n    }\n  };\n  const sessionStorageLauncherState = serviceManager.userSessionStorageService?.loadLauncherSession();\n  if (sessionStorageLauncherState) {\n    initialState.targetViewState = sessionStorageLauncherState.viewState;\n    sessionStorageLauncherState.viewState = VIEW_STATE_ALL_CLOSED;\n    initialState.persistedToBrowserStorage.launcherState = sessionStorageLauncherState;\n  }\n  const enhancer = config.public.debug || NODE_ENV === \"development\" ? window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__({\n    name: \"CarbonAIChat\",\n    instanceId: `Chat${serviceManager.namespace.suffix}`\n  }) : undefined;\n  return createStore(reducerFunction, initialState, enhancer);\n}\n\nfunction getThemeCornersType(config) {\n  if (getLayoutState(config).showFrame === false || IS_PHONE || config.public.themeConfig?.corners === CornersType.SQUARE) {\n    return CornersType.SQUARE;\n  }\n  return DEFAULT_THEME_STATE.corners;\n}\n\nfunction getLayoutState(config) {\n  if (config.public.themeConfig?.useAITheme) {\n    return {\n      showFrame: config.public.layout?.showFrame ?? true,\n      hasContentMaxWidth: config.public.layout?.hasContentMaxWidth ?? true\n    };\n  }\n  return merge({}, DEFAULT_LAYOUT_STATE, config.public.layout);\n}\n\nfunction reducerFunction(state, action) {\n  return action && reducers[action.type] ? reducers[action.type](state, action) : state;\n}\n\nexport { doCreateStore };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport { consoleDebug, consoleWarn } from \"./utils/miscUtils.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const DEFAULT_PUBLIC_CONFIG = {\n  openChatByDefault: false,\n  showLauncher: true,\n  shouldTakeFocusIfOpensAutomatically: true,\n  serviceDesk: {},\n  messaging: {},\n  themeConfig: {\n    useAITheme: true\n  }\n};\n\nasync function instantiateWidget(pagePublicConfig, chatConstructorPromise, render, element) {\n  const config = cloneDeep(pagePublicConfig);\n  if (!config.messaging?.customSendMessage) {\n    throw new Error(`You must set messaging.customSendMessage in your configuration object.`);\n  }\n  if (config?.debug) {\n    consoleDebug(\"[ChatEntry] Called instantiateWidget\", config);\n  }\n  if (document.location.protocol !== \"https:\") {\n    consoleWarn('Your page is not running with \"https\"; your data will not be sent  securely.');\n  }\n  if (document.compatMode !== \"CSS1Compat\") {\n    consoleWarn('Your page is running in quirks mode; you may experience layout issues with the chat. Add \"<!DOCTYPE html>\" to the page to run in standards mode.');\n  }\n  const {onError: onError, ...publicConfig} = config;\n  const Chat = await chatConstructorPromise(publicConfig);\n  const additionalChatParameters = {\n    onError: onError,\n    render: render\n  };\n  return new Chat(publicConfig, element, additionalChatParameters);\n}\n\nexport { DEFAULT_PUBLIC_CONFIG, instantiateWidget };\n","import dayjs from \"dayjs\";\n\nimport LocalizedFormat from \"dayjs/plugin/localizedFormat.js\";\n\nimport isEqual from \"lodash-es/isEqual.js\";\n\nimport merge from \"lodash-es/merge.js\";\n\nimport { createChatInstance } from \"./ChatInstanceImpl.js\";\n\nimport { createServiceManager } from \"./loadServices.js\";\n\nimport actions from \"./store/actions.js\";\n\nimport { VIEW_STATE_ALL_CLOSED } from \"./store/reducerUtils.js\";\n\nimport { loadLanguagePack, loadLocale } from \"./utils/languages.js\";\n\nimport { hasServiceDesk } from \"./utils/messageUtils.js\";\n\nimport { consoleDebug, consoleError } from \"./utils/miscUtils.js\";\n\nimport { DEFAULT_PUBLIC_CONFIG } from \"./chatEntryFunctions.js\";\n\nimport { MainWindowOpenReason, ViewChangeReason } from \"../../types/events/eventBusTypes.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { loadHAA } from \"../dynamic-imports/dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\ndayjs.extend(LocalizedFormat);\n\nclass Chat {\n  constructor(publicConfigProvided, customHostElement, additionalChatParametersProvided) {\n    if (publicConfigProvided?.debug) {\n      consoleDebug(\"Constructed chat widget\", publicConfigProvided);\n    }\n    const publicConfig = merge({}, DEFAULT_PUBLIC_CONFIG, publicConfigProvided);\n    this.additionalChatParameters = additionalChatParametersProvided || {};\n    this.appConfig = {\n      public: publicConfig\n    };\n    this.customHostElement = customHostElement;\n  }\n  async start() {\n    try {\n      const result = await this.startInternal();\n      return result.instance;\n    } catch (error) {\n      consoleError(\"There was an error starting your chat\", error);\n      return null;\n    }\n  }\n  async startInternal() {\n    const doesHaveServiceDesk = hasServiceDesk(this.appConfig);\n    this.serviceManager = await createServiceManager(this.appConfig, this.additionalChatParameters);\n    const [languagePack, localePack, render, createHumanAgentService] = await Promise.all([ loadLanguagePack(this.serviceManager.store.getState().languagePack), loadLocale(this.serviceManager.store.getState().locale), Promise.resolve(this.additionalChatParameters.render), doesHaveServiceDesk ? loadHAA() : Promise.resolve(null) ]);\n    this.serviceManager.customHostElement = this.customHostElement;\n    if (createHumanAgentService) {\n      this.serviceManager.humanAgentService = createHumanAgentService(this.serviceManager);\n    }\n    setIntl(this.serviceManager, localePack.name, languagePack);\n    dayjs.locale(localePack);\n    const reallyRenderAndReturnInstance = async () => {\n      await render({\n        serviceManager: this.serviceManager\n      });\n      const initialState = this.serviceManager.store.getState();\n      const {wasLoadedFromBrowser: wasLoadedFromBrowser} = initialState.persistedToBrowserStorage.launcherState;\n      const {targetViewState: targetViewState} = initialState;\n      const {openChatByDefault: openChatByDefault} = initialState.config.public;\n      if (targetViewState.mainWindow) {\n        let mainWindowOpenReason = MainWindowOpenReason.SESSION_HISTORY;\n        if (openChatByDefault && !wasLoadedFromBrowser) {\n          mainWindowOpenReason = MainWindowOpenReason.OPEN_BY_DEFAULT;\n        }\n        await this.serviceManager.actions.changeView(targetViewState, {\n          mainWindowOpenReason: mainWindowOpenReason\n        });\n      } else {\n        const viewChangeReason = ViewChangeReason.WEB_CHAT_LOADED;\n        const tryHydrating = targetViewState.tour;\n        const forceViewChange = isEqual(targetViewState, VIEW_STATE_ALL_CLOSED);\n        await this.serviceManager.actions.changeView(targetViewState, {\n          viewChangeReason: viewChangeReason\n        }, tryHydrating, forceViewChange);\n      }\n      this.serviceManager.store.dispatch(actions.setInitialViewChangeComplete(true));\n      return this.serviceManager.instance;\n    };\n    const renderAndReturnInstance = () => {\n      const promise = reallyRenderAndReturnInstance();\n      this.serviceManager.renderPromise = promise;\n      return promise;\n    };\n    this.serviceManager.instance = createChatInstance({\n      serviceManager: this.serviceManager,\n      callRender: renderAndReturnInstance\n    });\n    return {\n      instance: this.serviceManager.instance,\n      serviceManager: this.serviceManager\n    };\n  }\n}\n\nexport { Chat as default };\n","import { ChatActionsImpl } from \"./events/ChatActionsImpl.js\";\n\nimport { EventBus } from \"./events/EventBus.js\";\n\nimport { createCustomPanelManager } from \"./services/CustomPanelManager.js\";\n\nimport { HistoryService } from \"./services/HistoryService.js\";\n\nimport MessageService from \"./services/MessageService.js\";\n\nimport { NamespaceService } from \"./services/NamespaceService.js\";\n\nimport { ServiceManager } from \"./services/ServiceManager.js\";\n\nimport { UserSessionStorageService } from \"./services/UserSessionStorageService.js\";\n\nimport { doCreateStore } from \"./store/doCreateStore.js\";\n\nimport { copyToSessionStorage, createHandleWindowTitle } from \"./store/subscriptions.js\";\n\nimport \"./utils/constants.js\";\n\nimport { setEnableDebugLog, setEnableDebugStackTracesLog } from \"./utils/miscUtils.js\";\n\nimport { setIntl } from \"./utils/intlUtils.js\";\n\nimport { WriteableElementName } from \"../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function createServiceManager(appConfig, additionalChatParameters) {\n  const publicConfig = appConfig.public;\n  const serviceManager = new ServiceManager;\n  serviceManager.additionalChatParameters = additionalChatParameters;\n  serviceManager.namespace = new NamespaceService(publicConfig.namespace);\n  serviceManager.userSessionStorageService = new UserSessionStorageService(serviceManager);\n  serviceManager.actions = new ChatActionsImpl(serviceManager);\n  serviceManager.eventBus = new EventBus;\n  serviceManager.store = doCreateStore(appConfig, serviceManager);\n  serviceManager.historyService = new HistoryService(serviceManager);\n  serviceManager.messageService = new MessageService(serviceManager, publicConfig);\n  serviceManager.store.subscribe(copyToSessionStorage(serviceManager));\n  if (!publicConfig.disableWindowTitleChanges) {\n    serviceManager.store.subscribe(createHandleWindowTitle(serviceManager));\n  }\n  serviceManager.customPanelManager = createCustomPanelManager(serviceManager);\n  setIntl(serviceManager, serviceManager.store.getState().locale, serviceManager.store.getState().languagePack);\n  serviceManager.writeableElements = {\n    [WriteableElementName.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.WELCOME_NODE_BEFORE_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HEADER_BOTTOM_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.BEFORE_INPUT_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_HEADER_BOTTOM_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_AFTER_STARTERS_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.HOME_SCREEN_BEFORE_INPUT_ELEMENT]: document.createElement(\"div\"),\n    [WriteableElementName.CUSTOM_PANEL_ELEMENT]: document.createElement(\"div\")\n  };\n  if (publicConfig.debug) {\n    setEnableDebugLog(true);\n  }\n  if (publicConfig.debugStackTraces) {\n    setEnableDebugStackTracesLog(true);\n  }\n  return serviceManager;\n}\n\nexport { createServiceManager };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst UNREAD_COUNT_TITLE_TIME = 1e4;\n\nfunction copyToSessionStorage(serviceManager) {\n  let previousPersistedToBrowserStorage = serviceManager.store.getState().persistedToBrowserStorage;\n  return () => {\n    const {persistedToBrowserStorage: persistedToBrowserStorage} = serviceManager.store.getState();\n    const persistChatSession = previousPersistedToBrowserStorage !== persistedToBrowserStorage;\n    if (persistChatSession) {\n      previousPersistedToBrowserStorage = persistedToBrowserStorage;\n      serviceManager.userSessionStorageService.persistChatSession(persistedToBrowserStorage.chatState);\n      serviceManager.userSessionStorageService.persistLauncherSession(persistedToBrowserStorage.launcherState);\n    }\n  };\n}\n\nfunction createHandleWindowTitle(serviceManager) {\n  const {store: store} = serviceManager;\n  let originalTitle;\n  let changeTitleTimer;\n  let previousState = store.getState();\n  return () => {\n    const state = store.getState();\n    const {humanAgentState: humanAgentState} = store.getState();\n    const {numUnreadMessages: numUnreadMessages} = humanAgentState;\n    if (numUnreadMessages !== previousState.humanAgentState.numUnreadMessages) {\n      if (!numUnreadMessages) {\n        clearTimeout(changeTitleTimer);\n        if (originalTitle) {\n          window.document.title = originalTitle;\n          originalTitle = null;\n        }\n      } else {\n        clearTimeout(changeTitleTimer);\n        if (!originalTitle) {\n          originalTitle = window.document.title;\n        }\n        window.document.title = state.languagePack.agent_newMessage;\n        changeTitleTimer = setTimeout(() => {\n          window.document.title = `(${numUnreadMessages}) ${originalTitle}`;\n        }, UNREAD_COUNT_TITLE_TIME);\n      }\n    }\n    previousState = state;\n  };\n}\n\nexport { copyToSessionStorage, createHandleWindowTitle };\n","import { DEFAULT_CUSTOM_PANEL_ID } from \"../utils/constants.js\";\n\nimport { createCustomPanelInstance } from \"./CustomPanelInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function createCustomPanelManager(serviceManger) {\n  const panels = {\n    [DEFAULT_CUSTOM_PANEL_ID]: createCustomPanelInstance(serviceManger)\n  };\n  return Object.freeze({\n    getPanel() {\n      return panels[DEFAULT_CUSTOM_PANEL_ID];\n    }\n  });\n}\n\nexport { createCustomPanelManager };\n","import React, { useRef, useCallback, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { AriaAnnouncerContext } from \"../../contexts/AriaAnnouncerContext.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport { AriaAnnouncerComponent } from \"./AriaAnnouncerComponent.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AriaAnnouncerProvider(props) {\n  const intl = useIntl();\n  const {store: store} = useServiceManager();\n  const announcerRef = useRef();\n  const announcerFunction = useCallback(value => {\n    if (!announcerRef.current) {\n      setTimeout(() => announcerRef.current.announceValue(value));\n    } else {\n      announcerRef.current.announceValue(value);\n    }\n  }, []);\n  const previousAnnounceMessageRef = useRef();\n  useEffect(() => {\n    const unsubscribe = store.subscribe(() => {\n      const currentAnnounceMessage = store.getState().announceMessage;\n      if (currentAnnounceMessage !== previousAnnounceMessageRef.current) {\n        announcerFunction(currentAnnounceMessage);\n        previousAnnounceMessageRef.current = currentAnnounceMessage;\n      }\n    });\n    return unsubscribe;\n  }, [ store, announcerFunction ]);\n  return React.createElement(AriaAnnouncerContext.Provider, {\n    value: announcerFunction\n  }, props.children, React.createElement(AriaAnnouncerComponent, {\n    intl: intl,\n    ref: announcerRef\n  }));\n}\n\nexport { AriaAnnouncerProvider };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction getLauncherButtonAriaLabel(languagePack, isLauncherHidden, isTourActive) {\n  if (isTourActive) {\n    return isLauncherHidden ? languagePack.launcher_isTourOpen : languagePack.launcher_isTourClosed;\n  }\n  return isLauncherHidden ? languagePack.launcher_isOpen : languagePack.launcher_isClosed;\n}\n\nexport { getLauncherButtonAriaLabel };\n","import AiLaunch from \"@carbon/icons-react/es/AiLaunch.js\";\n\nimport ArrowUpLeft from \"@carbon/icons-react/es/ArrowUpLeft.js\";\n\nimport ChatLaunch from \"@carbon/icons-react/es/ChatLaunch.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useImperativeHandle } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { getLauncherButtonAriaLabel } from \"./launcherUtils.js\";\n\nimport { ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\nimport { PageObjectId } from \"../../utils/PageObjectId.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function Launcher(props, ref) {\n  const {onToggleOpen: onToggleOpen, languagePack: languagePack, unreadHumanAgentCount: unreadHumanAgentCount, intl: intl, showUnreadIndicator: showUnreadIndicator, className: className, tabIndex: tabIndex, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const launcherAvatarURL = useSelector(state => state.theme.useAITheme ? undefined : state.launcher.config.desktop.avatar_url_override);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const buttonRef = React.createRef();\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      doFocusRef(buttonRef);\n    }\n  }));\n  let ariaLabel = getLauncherButtonAriaLabel(languagePack, launcherHidden, activeTour);\n  if (unreadHumanAgentCount !== 0) {\n    ariaLabel += `. ${intl.formatMessage({\n      id: \"icon_ariaUnreadMessages\"\n    }, {\n      count: unreadHumanAgentCount\n    })}`;\n  }\n  let launcherAvatar = useAITheme ? React.createElement(AiLaunch, {\n    size: 24,\n    className: \"WACLauncher_svg\"\n  }) : React.createElement(ChatLaunch, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  });\n  if (launcherAvatarURL) {\n    launcherAvatar = React.createElement(\"img\", {\n      className: \"WACLauncher__Avatar\",\n      src: launcherAvatarURL,\n      alt: \"\",\n      \"aria-hidden\": true\n    });\n  }\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer\", \"WACLauncher__ButtonContainer--round\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden\n    })\n  }, React.createElement(Button, {\n    \"aria-label\": ariaLabel,\n    className: cx(\"WACLauncher__Button\", {\n      WACLauncher__TourButton: activeTour\n    }),\n    \"data-testid\": PageObjectId.LAUNCHER,\n    kind: ButtonKindEnum.PRIMARY,\n    type: \"button\",\n    onClick: onToggleOpen,\n    ref: buttonRef,\n    tabIndex: tabIndex\n  }, activeTour ? React.createElement(ArrowUpLeft, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  }) : launcherAvatar, (unreadHumanAgentCount !== 0 || showUnreadIndicator) && React.createElement(\"div\", {\n    className: \"WAC__countIndicator\"\n  }, unreadHumanAgentCount !== 0 ? unreadHumanAgentCount : \"\")));\n}\n\nconst LauncherExport = forwardRef(Launcher);\n\nexport { LauncherExport as Launcher };\n","import Close from \"@carbon/icons-react/es/Close.js\";\n\nimport { Tag } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React from \"react\";\n\nimport { Launcher as LauncherExport } from \"./Launcher.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherComplex(props) {\n  const {languagePack: languagePack, intl: intl, launcherConfig: launcherConfig, launcherComplexRef: launcherComplexRef, launcherRef: launcherRef, onOpen: onOpen, onMinimize: onMinimize, unreadHumanAgentCount: unreadHumanAgentCount, showUnreadIndicator: showUnreadIndicator, desktopLauncherIsExpanded: desktopLauncherIsExpanded, launcherHidden: launcherHidden, activeTour: activeTour, className: className} = props;\n  const {launcher_desktopGreeting: launcher_desktopGreeting, launcher_closeButton: launcher_closeButton, launcher_ariaIsExpanded: launcher_ariaIsExpanded} = languagePack;\n  function getLauncherContent() {\n    if (launcherConfig.desktop.title) {\n      return launcherConfig.desktop.title;\n    }\n    return launcher_desktopGreeting;\n  }\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer\", \"WACLauncherComplex__Container\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden\n    }),\n    ref: launcherComplexRef\n  }, React.createElement(\"button\", {\n    className: \"WACLauncherComplex__ContentButton\",\n    type: \"button\",\n    onClick: onOpen,\n    disabled: !desktopLauncherIsExpanded\n  }, React.createElement(\"div\", {\n    className: cx(\"WACWidget__textEllipsis\", {\n      WACLauncherComplex__Text: !launcherHidden\n    })\n  }, getLauncherContent())), React.createElement(LauncherExport, {\n    languagePack: languagePack,\n    intl: intl,\n    ref: launcherRef,\n    onToggleOpen: onOpen,\n    className: \"WACLauncherComplex__SmallLauncherContainer\",\n    unreadHumanAgentCount: unreadHumanAgentCount,\n    showUnreadIndicator: showUnreadIndicator,\n    launcherHidden: launcherHidden,\n    activeTour: activeTour\n  }), React.createElement(Tag, {\n    className: \"WACLauncher__CloseButton\",\n    \"aria-label\": launcher_ariaIsExpanded,\n    onClick: onMinimize,\n    disabled: !desktopLauncherIsExpanded\n  }, React.createElement(\"div\", {\n    className: \"WACLauncher__CloseButtonInnerWrapper\"\n  }, React.createElement(Close, {\n    className: \"WACLauncher__CloseButtonIcon\"\n  }), launcher_closeButton)));\n}\n\nexport { LauncherComplex };\n","import React, { useState, useRef, useCallback, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { useOnMount } from \"../../hooks/useOnMount.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { BOUNCING_ANIMATION_TIMEOUTS } from \"../../../../types/config/LauncherConfig.js\";\n\nimport { Launcher as LauncherExport } from \"./Launcher.js\";\n\nimport { LauncherComplex } from \"./LauncherComplex.js\";\n\nimport { LauncherType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst TIME_FOR_MINIMIZE_ANIMATION = 400;\n\nconst TIME_FOR_BOUNCE_ANIMATION = 500;\n\nconst LauncherDesktopContainer = props => {\n  const {launcherRef: launcherRef, onDoToggle: onDoToggle, requestFocus: requestFocus, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const intl = useIntl();\n  const browserLauncherState = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const {desktopLauncherWasMinimized: desktopLauncherWasMinimized, desktopLauncherIsExpanded: desktopLauncherIsExpanded, bounceTurn: bounceTurn, showUnreadIndicator: showUnreadIndicator, viewState: viewState} = browserLauncherState;\n  const launcherState = useSelector(state => state.launcher);\n  const launcherConfig = launcherState.config;\n  const {time_to_expand: time_to_expand, new_expand_time: new_expand_time} = launcherConfig.desktop;\n  const isExpandedLauncherEnabled = launcherConfig.desktop.is_on;\n  const unreadHumanAgentCount = useSelector(state => state.humanAgentState.numUnreadMessages);\n  const [smallLauncherClassName, setSmallLauncherClassName] = useState(\"\");\n  const [complexLauncherClassName, setComplexLauncherClassName] = useState(\"\");\n  const launcherComplexRef = useRef();\n  const launcherHiddenRef = useRef();\n  launcherHiddenRef.current = launcherHidden;\n  const animateOnceVisible = useRef(false);\n  const bounceTurnRef = useRef();\n  bounceTurnRef.current = bounceTurn;\n  const animationStartTimerRef = useRef();\n  const animationFinishedTimerRef = useRef();\n  const firstBounceAnimationStartTimerRef = useRef();\n  const firstBounceAnimationFinishedTimerRef = useRef();\n  const secondBounceAnimationStartTimerRef = useRef();\n  const secondBounceAnimationFinishedTimerRef = useRef();\n  const determineLauncherHeight = useCallback(() => {\n    const expandedLauncherHeight = `${launcherComplexRef.current?.offsetHeight}px`;\n    if (launcherComplexRef.current?.style?.setProperty) {\n      launcherComplexRef.current.style.setProperty(\"--cds-chat-LAUNCHER-desktop-expanded-height\", expandedLauncherHeight);\n    }\n  }, []);\n  const startExpandLauncher = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"desktopLauncherIsExpanded\", true));\n      determineLauncherHeight();\n      setComplexLauncherClassName(\"WACLauncherComplex__Container--introAnimation\");\n    }\n  }, [ determineLauncherHeight, serviceManager.store ]);\n  const setExpandAnimationTimers = useCallback(() => {\n    animationStartTimerRef.current = setTimeout(() => {\n      startExpandLauncher();\n    }, time_to_expand);\n  }, [ time_to_expand, startExpandLauncher ]);\n  const clearExpandAnimationTimers = useCallback(() => {\n    clearTimeout(animationStartTimerRef.current);\n    clearTimeout(animationFinishedTimerRef.current);\n  }, []);\n  const startBounceAnimation = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--bounceAnimation\");\n    }\n  }, []);\n  const finishBounceAnimation = useCallback(() => {\n    if (!launcherHiddenRef.current) {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n      bounceTurnRef.current++;\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", bounceTurnRef.current));\n    }\n  }, [ serviceManager.store ]);\n  const setBounceAnimationTimers = useCallback(() => {\n    if (bounceTurnRef.current === 1) {\n      firstBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0]);\n      firstBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + TIME_FOR_BOUNCE_ANIMATION);\n      secondBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + BOUNCING_ANIMATION_TIMEOUTS[1]);\n      secondBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[0] + BOUNCING_ANIMATION_TIMEOUTS[1] + TIME_FOR_BOUNCE_ANIMATION);\n    } else if (bounceTurnRef.current === 2) {\n      secondBounceAnimationStartTimerRef.current = setTimeout(() => {\n        startBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[1]);\n      secondBounceAnimationFinishedTimerRef.current = setTimeout(() => {\n        finishBounceAnimation();\n      }, BOUNCING_ANIMATION_TIMEOUTS[1] + TIME_FOR_BOUNCE_ANIMATION);\n    }\n  }, [ finishBounceAnimation, startBounceAnimation ]);\n  const clearBounceAnimationTimers = useCallback(() => {\n    clearTimeout(firstBounceAnimationStartTimerRef.current);\n    clearTimeout(firstBounceAnimationFinishedTimerRef.current);\n    clearTimeout(secondBounceAnimationStartTimerRef.current);\n    clearTimeout(secondBounceAnimationFinishedTimerRef.current);\n  }, []);\n  const setDefaultLauncherState = useCallback(() => {\n    clearExpandAnimationTimers();\n    serviceManager.store.dispatch(actions.setLauncherMinimized());\n    clearBounceAnimationTimers();\n    serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", 3));\n    animateOnceVisible.current = false;\n    setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n  }, [ clearBounceAnimationTimers, clearExpandAnimationTimers, serviceManager.store ]);\n  useOnMount(() => {\n    if (desktopLauncherIsExpanded) {\n      animateOnceVisible.current = true;\n    } else if (!desktopLauncherWasMinimized && isExpandedLauncherEnabled) {\n      setExpandAnimationTimers();\n      return () => {\n        clearExpandAnimationTimers();\n      };\n    } else if (desktopLauncherWasMinimized && bounceTurn !== 3) {\n      setBounceAnimationTimers();\n      return () => {\n        clearBounceAnimationTimers();\n      };\n    }\n    return undefined;\n  });\n  useEffect(() => {\n    if (viewState.launcher && animateOnceVisible.current) {\n      determineLauncherHeight();\n      setComplexLauncherClassName(\"WACLauncherComplex__Container--simpleAnimation\");\n      animateOnceVisible.current = false;\n    }\n  }, [ determineLauncherHeight, viewState.launcher ]);\n  useEffect(() => {\n    if (viewState.mainWindow || viewState.tour) {\n      setDefaultLauncherState();\n    }\n  }, [ viewState, setDefaultLauncherState ]);\n  useEffect(() => {\n    if (new_expand_time) {\n      clearBounceAnimationTimers();\n      clearExpandAnimationTimers();\n      setExpandAnimationTimers();\n      serviceManager.store.dispatch(actions.setLauncherConfigProperty(\"new_expand_time\", false, LauncherType.DESKTOP));\n    }\n  }, [ animationFinishedTimerRef, animationStartTimerRef, new_expand_time, setExpandAnimationTimers, clearExpandAnimationTimers, clearBounceAnimationTimers, serviceManager.store ]);\n  const prevLauncherTitle = usePrevious(launcherConfig.desktop.title);\n  useEffect(() => {\n    if (prevLauncherTitle !== launcherConfig.desktop.title && (launcherConfig.desktop.title || prevLauncherTitle)) {\n      determineLauncherHeight();\n    }\n  }, [ determineLauncherHeight, launcherConfig, prevLauncherTitle ]);\n  const onMinimize = useCallback(() => {\n    setComplexLauncherClassName(\"WACLauncherComplex__Container--closeAnimation\");\n    setTimeout(() => {\n      setSmallLauncherClassName(\"WACLauncher__ButtonContainer--noAnimation\");\n      serviceManager.store.dispatch(actions.setLauncherMinimized());\n      setTimeout(requestFocus);\n    }, TIME_FOR_MINIMIZE_ANIMATION);\n  }, [ requestFocus, serviceManager.store ]);\n  const onOpen = useCallback(() => {\n    setDefaultLauncherState();\n    onDoToggle();\n  }, [ onDoToggle, setDefaultLauncherState ]);\n  let launcher;\n  if (desktopLauncherIsExpanded) {\n    launcher = React.createElement(LauncherComplex, {\n      languagePack: languagePack,\n      intl: intl,\n      launcherComplexRef: launcherComplexRef,\n      launcherRef: launcherRef,\n      launcherConfig: launcherConfig,\n      onOpen: onOpen,\n      onMinimize: onMinimize,\n      unreadHumanAgentCount: unreadHumanAgentCount,\n      showUnreadIndicator: showUnreadIndicator,\n      desktopLauncherIsExpanded: desktopLauncherIsExpanded,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour,\n      className: complexLauncherClassName\n    });\n  } else {\n    launcher = React.createElement(LauncherExport, {\n      languagePack: languagePack,\n      intl: intl,\n      ref: launcherRef,\n      onToggleOpen: onOpen,\n      unreadHumanAgentCount: unreadHumanAgentCount,\n      showUnreadIndicator: showUnreadIndicator,\n      className: smallLauncherClassName,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  }\n  return launcher;\n};\n\nexport { LauncherDesktopContainer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction animateWithClass(element, className, endAnimationNameOrDelay, endAnimationCallback) {\n  if (element) {\n    element.classList.add(className);\n    if (typeof endAnimationNameOrDelay === \"number\") {\n      setTimeout(() => {\n        element.classList.remove(className);\n        if (endAnimationCallback) {\n          endAnimationCallback();\n        }\n      }, endAnimationNameOrDelay);\n    } else {\n      const listener = event => {\n        if (!endAnimationNameOrDelay || event.animationName === endAnimationNameOrDelay) {\n          element.removeEventListener(\"animationend\", listener);\n          element.removeEventListener(\"animationcancel\", listener);\n          element.classList.remove(className);\n          if (endAnimationCallback) {\n            endAnimationCallback();\n          }\n        }\n      };\n      element.addEventListener(\"animationend\", listener);\n      element.addEventListener(\"animationcancel\", listener);\n    }\n  }\n}\n\nfunction setAnimationTimeouts(element, animation, timeouts, options) {\n  const {startingIndex: startingIndex, beforeAll: beforeAll, afterAll: afterAll, beforeEach: beforeEach, afterEach: afterEach} = options;\n  let index = startingIndex || 0;\n  let terminate = false;\n  let timeoutID = null;\n  function playAnimation() {\n    if (beforeAll && index === 0) {\n      beforeAll();\n    }\n    const isComplete = index === timeouts.length;\n    if (!isComplete && !terminate) {\n      timeoutID = setTimeout(setAnimationListener, timeouts[index]);\n    } else if (isComplete && afterAll) {\n      afterAll();\n    }\n  }\n  function replayAnimation() {\n    if (afterEach) {\n      afterEach();\n    }\n    index++;\n    element.removeEventListener(\"animationend\", replayAnimation);\n    element.classList.remove(animation);\n    playAnimation();\n  }\n  function setAnimationListener() {\n    if (beforeEach) {\n      beforeEach();\n    }\n    element.addEventListener(\"animationend\", replayAnimation);\n    element.classList.add(animation);\n  }\n  playAnimation();\n  return () => {\n    terminate = true;\n    clearTimeout(timeoutID);\n    element.classList.remove(animation);\n    element.removeEventListener(\"animationend\", replayAnimation);\n  };\n}\n\nexport { animateWithClass, setAnimationTimeouts };\n","import ArrowUpLeft from \"@carbon/icons-react/es/ArrowUpLeft.js\";\n\nimport ChatLaunch from \"@carbon/icons-react/es/ChatLaunch.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useState, useRef, useImperativeHandle, useEffect } from \"react\";\n\nimport { useIntl } from \"react-intl\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useAriaAnnouncer } from \"../../hooks/useAriaAnnouncer.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { animateWithClass } from \"../../utils/animationUtils.js\";\n\nimport { IS_MOBILE } from \"../../utils/browserUtils.js\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { getLauncherButtonAriaLabel } from \"./launcherUtils.js\";\n\nimport { ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const MAX_EXTENDED_LAUNCHER_WIDTH = 400;\n\nfunction LauncherExtended(props, ref) {\n  const {unreadHumanAgentCount: unreadHumanAgentCount, showUnreadIndicator: showUnreadIndicator, launcherConfig: launcherConfig, isExtended: isExtended, playExtendAnimation: playExtendAnimation, onToggleOpen: onToggleOpen, onSwipeRight: onSwipeRight, onReduceEnd: onReduceEnd, className: className, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const ariaAnnouncer = useAriaAnnouncer();\n  const languagePack = useLanguagePack();\n  const intl = useIntl();\n  const launcherAvatarURL = useSelector(state => state.theme.useAITheme ? undefined : state.launcher.config.mobile.avatar_url_override);\n  const [animateExtendedState, setAnimateExtendedState] = useState(playExtendAnimation);\n  const [showGreetingMessage, setShowGreetingMessage] = useState(false);\n  const prevIsExtended = usePrevious(isExtended);\n  const buttonRef = useRef();\n  const extendedContainerRef = useRef();\n  const greetingMessageRef = useRef();\n  const textHolderRef = useRef();\n  const touchStartRef = useRef({\n    touchStartX: null,\n    touchStartY: null\n  });\n  const shouldReduceExtendedLauncher = !isExtended && prevIsExtended;\n  const extendWithAnimation = isExtended && animateExtendedState;\n  const extendWithoutAnimation = isExtended && !animateExtendedState;\n  const launcherGreetingMessage = launcherConfig.mobile.title || languagePack.launcher_mobileGreeting;\n  let ariaLabel = getLauncherButtonAriaLabel(languagePack, launcherHidden, activeTour);\n  if (unreadHumanAgentCount !== 0) {\n    ariaLabel += `. ${intl.formatMessage({\n      id: \"icon_ariaUnreadMessages\"\n    }, {\n      count: unreadHumanAgentCount\n    })}`;\n  }\n  let launcherAvatar = React.createElement(ChatLaunch, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  });\n  if (launcherAvatarURL) {\n    launcherAvatar = React.createElement(\"img\", {\n      className: \"WACLauncher__Avatar\",\n      src: launcherAvatarURL,\n      \"aria-hidden\": true,\n      alt: \"\"\n    });\n  }\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      doFocusRef(buttonRef);\n    },\n    launcherContainerElement: () => extendedContainerRef.current\n  }));\n  useEffect(() => {\n    const textHolderElement = textHolderRef.current;\n    const greetingMessageElement = greetingMessageRef.current;\n    const extendedContainerElement = extendedContainerRef.current;\n    calculateAndSetMaxExtendedLauncherWidth(textHolderElement, greetingMessageElement, extendedContainerElement);\n  }, [ ariaAnnouncer, extendWithoutAnimation, launcherGreetingMessage ]);\n  useEffect(() => {\n    if (isExtended) {\n      if (animateExtendedState) {\n        doFadeAnimationForElements({\n          fadeInElement: greetingMessageRef.current,\n          fadeInTime: 300\n        }, () => {\n          setAnimateExtendedState(false);\n        });\n      } else {\n        setShowGreetingMessage(true);\n      }\n      const buttonEl = buttonRef.current;\n      const handleTouchMove = event => {\n        checkIfUserSwipedRight(event.touches[0], touchStartRef.current, onSwipeRight);\n      };\n      const handleTouchStart = event => {\n        const {clientX: clientX, clientY: clientY} = event.touches[0];\n        const touchStart = touchStartRef.current;\n        touchStart.touchStartX = clientX;\n        touchStart.touchStartY = clientY;\n        buttonRef.current.addEventListener(\"touchmove\", handleTouchMove);\n      };\n      buttonEl.addEventListener(\"touchstart\", handleTouchStart);\n      return () => {\n        buttonEl.removeEventListener(\"touchmove\", handleTouchMove);\n        buttonEl.removeEventListener(\"touchstart\", handleTouchStart);\n      };\n    } else if (shouldReduceExtendedLauncher) {\n      const reduceAnimationEndListener = () => {\n        onReduceEnd();\n        setAnimateExtendedState(true);\n        extendedContainerRef.current.removeEventListener(\"animationend\", reduceAnimationEndListener);\n      };\n      extendedContainerRef.current.addEventListener(\"animationend\", reduceAnimationEndListener);\n      doFadeAnimationForElements({\n        fadeOutElement: greetingMessageRef.current\n      });\n    }\n    return undefined;\n  }, [ animateExtendedState, ariaAnnouncer, isExtended, launcherGreetingMessage, onReduceEnd, onSwipeRight, shouldReduceExtendedLauncher ]);\n  return React.createElement(\"div\", {\n    className: cx(\"WACLauncher__ButtonContainer WACLauncher__ButtonContainer--round WACLauncherExtended__Container\", className, {\n      \"WACLauncher__ButtonContainer--hidden\": launcherHidden,\n      \"WACLauncherExtended__Button--extended\": extendWithoutAnimation,\n      \"WACLauncherExtended__Button--extendedAnimation\": extendWithAnimation,\n      \"WACLauncherExtended__Button--reducedAnimation\": shouldReduceExtendedLauncher\n    }),\n    ref: extendedContainerRef\n  }, React.createElement(Button, {\n    \"aria-label\": ariaLabel,\n    className: cx(\"WACLauncher__Button\", \"WACLauncherExtended__Button\", {\n      WACLauncher__TourButton: activeTour\n    }),\n    kind: activeTour ? ButtonKindEnum.GHOST : ButtonKindEnum.PRIMARY,\n    type: \"button\",\n    ref: buttonRef,\n    onClick: onToggleOpen\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__WrapperContainer\"\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__Wrapper\"\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__TextHolder\",\n    ref: textHolderRef\n  }, React.createElement(\"div\", {\n    className: cx(\"WACLauncherExtended__Greeting\", {\n      \"WACLauncherExtended__Element--hidden\": !showGreetingMessage\n    }),\n    ref: greetingMessageRef\n  }, React.createElement(\"div\", {\n    className: \"WACLauncherExtended__GreetingText\",\n    \"aria-hidden\": !isExtended\n  }, launcherGreetingMessage))), React.createElement(\"div\", {\n    className: \"WACLauncher__IconHolder\"\n  }, activeTour ? React.createElement(ArrowUpLeft, {\n    size: 24,\n    className: \"WACLauncher__svg\"\n  }) : launcherAvatar))), (unreadHumanAgentCount !== 0 || showUnreadIndicator) && React.createElement(\"div\", {\n    className: \"WAC__countIndicator\"\n  }, unreadHumanAgentCount !== 0 ? unreadHumanAgentCount : \"\")));\n}\n\nfunction calculateAndSetMaxExtendedLauncherWidth(textHolderEl, greetingMessageEl, extendedContainerEl) {\n  const nonTextSpace = 68;\n  const maxLauncherExtendedWidth = getMaxLauncherExtendedWidth();\n  const maxTextHolderWidth = maxLauncherExtendedWidth - nonTextSpace + 12;\n  textHolderEl.style.setProperty(\"width\", `${maxTextHolderWidth}px`);\n  greetingMessageEl.style.setProperty(\"width\", `${maxTextHolderWidth - 12}px`);\n  greetingMessageEl.style.setProperty(\"display\", \"flex\");\n  const {clientWidth: clientWidth} = greetingMessageEl.querySelector(\".WACLauncherExtended__GreetingText\");\n  let launcherExtendedWidth = clientWidth + nonTextSpace + 1;\n  if (launcherExtendedWidth > MAX_EXTENDED_LAUNCHER_WIDTH) {\n    launcherExtendedWidth = MAX_EXTENDED_LAUNCHER_WIDTH;\n  }\n  greetingMessageEl.removeAttribute(\"style\");\n  textHolderEl.removeAttribute(\"style\");\n  extendedContainerEl.style.setProperty(\"--cds-chat--LAUNCHER-EXTENDED-width\", `${launcherExtendedWidth}px`);\n}\n\nfunction doFadeAnimationForElements({fadeOutElement: fadeOutElement, fadeInElement: fadeInElement, fadeInTime: fadeInTime = 600}, callback) {\n  if (fadeOutElement) {\n    fadeOutElement.classList.remove(\"WACLauncherExtended__Element--hidden\");\n    animateWithClass(fadeOutElement, \"WACLauncherExtended__Element--FadeOut\", 500, () => {\n      fadeOutElement.classList.add(\"WACLauncherExtended__Element--hidden\");\n      fadeOutElement.classList.remove(\"WACLauncherExtended__Element--FadeOut\");\n      if (!fadeInElement && callback) {\n        callback();\n      }\n    });\n  }\n  if (fadeInElement) {\n    setTimeout(() => {\n      fadeInElement.classList.remove(\"WACLauncherExtended__Element--hidden\");\n      animateWithClass(fadeInElement, \"WACLauncherExtended__Element--FadeIn\", 600, () => {\n        fadeInElement.classList.remove(\"WACLauncherExtended__Element--FadeIn\");\n        if (callback) {\n          callback();\n        }\n      });\n    }, fadeInTime);\n  }\n}\n\nfunction checkIfUserSwipedRight(touchList, touchStartCoordinates, callback) {\n  const {touchStartX: touchStartX, touchStartY: touchStartY} = touchStartCoordinates;\n  if (touchStartX === null || touchStartY === null) {\n    return;\n  }\n  const {clientX: touchEndX, clientY: touchEndY} = touchList;\n  const differenceX = touchEndX - touchStartX;\n  const differenceY = touchEndY - touchStartY;\n  if (Math.abs(differenceX) > Math.abs(differenceY)) {\n    if (differenceX > 0) {\n      callback();\n    }\n  }\n  touchStartCoordinates.touchStartX = null;\n  touchStartCoordinates.touchStartY = null;\n}\n\nfunction getMaxLauncherExtendedWidth() {\n  const launcherPosition = IS_MOBILE ? 32 : 64;\n  const {width: width, height: height} = window.screen;\n  const lowestValue = Math.min(height, width);\n  const extendedWidth = lowestValue - launcherPosition;\n  return Math.min(extendedWidth, MAX_EXTENDED_LAUNCHER_WIDTH);\n}\n\nconst LauncherExtendedExport = React.memo(forwardRef(LauncherExtended));\n\nexport { LauncherExtendedExport as LauncherExtended };\n","import cx from \"classnames\";\n\nimport React, { useState, useRef, useCallback, useEffect } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useOnMount } from \"../../hooks/useOnMount.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { BOUNCING_ANIMATION_TIMEOUTS } from \"../../../../types/config/LauncherConfig.js\";\n\nimport { setAnimationTimeouts } from \"../../utils/animationUtils.js\";\n\nimport { LauncherExtended as LauncherExtendedExport } from \"./LauncherExtended.js\";\n\nimport { LauncherType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherMobileContainer(props) {\n  const {launcherRef: launcherRef, onToggleOpen: onToggleOpen, launcherHidden: launcherHidden, activeTour: activeTour} = props;\n  const serviceManager = useServiceManager();\n  const {config: launcherConfig} = useSelector(state => state.launcher);\n  const unreadHumanAgentCount = useSelector(state => state.humanAgentState.numUnreadMessages);\n  const {mobileLauncherIsExtended: isExtended, mobileLauncherWasReduced: wasReduced, mobileLauncherDisableBounce: disableBounce, bounceTurn: bounceTurn, showUnreadIndicator: showUnreadIndicator, viewState: viewState} = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const [isStartingBounceAnimation, setIsStartingBounceAnimation] = useState(false);\n  const prevIsExtended = usePrevious(isExtended);\n  const prevWasReduced = usePrevious(wasReduced);\n  const initialBounceTurn = useRef(bounceTurn).current;\n  const previouslyPlayedExtendAnimation = useRef(wasReduced).current;\n  const extendLauncherTimeoutIDRef = useRef(null);\n  const reduceLauncherTimeoutIDRef = useRef(null);\n  const endBounceAnimationRef = useRef(null);\n  const shouldBounceRef = useRef(previouslyPlayedExtendAnimation && !disableBounce);\n  const {time_to_expand: time_to_expand, new_expand_time: new_expand_time, time_to_reduce: time_to_reduce} = launcherConfig.mobile;\n  const isExpandedLauncherEnabled = launcherConfig.mobile.is_on;\n  const playExtendAnimation = prevIsExtended === undefined && !isExtended;\n  const isExtending = prevIsExtended !== undefined && !prevIsExtended && isExtended;\n  const hasReduced = prevWasReduced !== undefined && !prevWasReduced && wasReduced;\n  const disableIntroAnimation = isExtending || hasReduced || isStartingBounceAnimation;\n  const setLauncherStateAsReduced = useCallback(() => {\n    if (!wasReduced) {\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherWasReduced\", true));\n    }\n  }, [ wasReduced, serviceManager ]);\n  const reduceLauncher = useCallback(() => {\n    clearTimeouts();\n    if (isExtended) {\n      document.removeEventListener(\"scroll\", reduceLauncher);\n      serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherIsExtended\", false));\n    }\n  }, [ isExtended, serviceManager ]);\n  const setExpandAnimationTimeout = useCallback(() => {\n    extendLauncherTimeoutIDRef.current = setTimeout(() => {\n      if (!isExtended && !isExtending) {\n        serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherWasReduced\", false));\n        serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherIsExtended\", true));\n      }\n    }, time_to_expand);\n  }, [ isExtended, isExtending, serviceManager.store, time_to_expand ]);\n  const setDefaultLauncherState = useCallback(() => {\n    const endBounceAnimation = endBounceAnimationRef.current;\n    if (endBounceAnimation) {\n      endBounceAnimation();\n      endBounceAnimationRef.current = null;\n    }\n    serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherDisableBounce\", true));\n    reduceLauncher();\n    setLauncherStateAsReduced();\n  }, [ reduceLauncher, serviceManager.store, setLauncherStateAsReduced ]);\n  useOnMount(() => {\n    if (!wasReduced && playExtendAnimation && isExpandedLauncherEnabled) {\n      setExpandAnimationTimeout();\n    } else if (shouldBounceRef.current) {\n      const launcherContainerElement = launcherRef?.current?.launcherContainerElement();\n      if (launcherContainerElement) {\n        const startRecurringBounceAnimation = () => {\n          if (shouldBounceRef.current) {\n            let turnCounter = initialBounceTurn;\n            launcherContainerElement.removeEventListener(\"animationend\", startRecurringBounceAnimation);\n            setIsStartingBounceAnimation(true);\n            endBounceAnimationRef.current = setAnimationTimeouts(launcherContainerElement, \"WACLauncher__ButtonContainer--bounceAnimation\", BOUNCING_ANIMATION_TIMEOUTS, {\n              startingIndex: initialBounceTurn - 1,\n              afterEach: () => {\n                turnCounter++;\n                serviceManager.store.dispatch(actions.setLauncherProperty(\"bounceTurn\", turnCounter));\n              },\n              afterAll: () => {\n                serviceManager.store.dispatch(actions.setLauncherProperty(\"mobileLauncherDisableBounce\", true));\n              }\n            });\n          }\n        };\n        launcherContainerElement.addEventListener(\"animationend\", startRecurringBounceAnimation);\n      }\n    }\n  });\n  useEffect(() => {\n    if (viewState.mainWindow || viewState.tour) {\n      setDefaultLauncherState();\n    }\n  }, [ viewState, setDefaultLauncherState ]);\n  useEffect(() => {\n    if (new_expand_time) {\n      if (shouldBounceRef.current) {\n        shouldBounceRef.current = false;\n      }\n      const endBounceAnimation = endBounceAnimationRef.current;\n      if (endBounceAnimation) {\n        endBounceAnimation();\n        endBounceAnimationRef.current = null;\n      }\n      if (extendLauncherTimeoutIDRef.current) {\n        clearTimeout(extendLauncherTimeoutIDRef.current);\n      }\n      setExpandAnimationTimeout();\n      serviceManager.store.dispatch(actions.setLauncherConfigProperty(\"new_expand_time\", false, LauncherType.MOBILE));\n    }\n  }, [ setExpandAnimationTimeout, new_expand_time, serviceManager.store, shouldBounceRef ]);\n  function clearTimeouts() {\n    const extendLauncherTimeoutID = extendLauncherTimeoutIDRef.current;\n    const reduceLauncherTimeoutID = reduceLauncherTimeoutIDRef.current;\n    if (reduceLauncherTimeoutID) {\n      clearTimeout(reduceLauncherTimeoutID);\n      reduceLauncherTimeoutIDRef.current = null;\n    }\n    if (extendLauncherTimeoutID) {\n      clearTimeout(extendLauncherTimeoutID);\n      extendLauncherTimeoutIDRef.current = null;\n    }\n  }\n  const handleToggleOpen = useCallback(() => {\n    setDefaultLauncherState();\n    onToggleOpen();\n  }, [ onToggleOpen, setDefaultLauncherState ]);\n  const handleSwipeRight = useCallback(() => {\n    reduceLauncher();\n  }, [ reduceLauncher ]);\n  useEffect(() => {\n    if (isExtended) {\n      reduceLauncherTimeoutIDRef.current = setTimeout(() => {\n        reduceLauncher();\n      }, time_to_reduce);\n      document.addEventListener(\"scroll\", reduceLauncher);\n    }\n  }, [ isExtended, reduceLauncher, time_to_reduce, serviceManager ]);\n  return React.createElement(LauncherExtendedExport, {\n    className: cx({\n      \"WACLauncher__ButtonContainer--noAnimation\": disableIntroAnimation\n    }),\n    ref: launcherRef,\n    launcherConfig: launcherConfig,\n    showUnreadIndicator: showUnreadIndicator,\n    unreadHumanAgentCount: unreadHumanAgentCount,\n    isExtended: isExtended,\n    playExtendAnimation: playExtendAnimation,\n    onToggleOpen: handleToggleOpen,\n    onSwipeRight: handleSwipeRight,\n    onReduceEnd: setLauncherStateAsReduced,\n    launcherHidden: launcherHidden,\n    activeTour: activeTour\n  });\n}\n\nexport { LauncherMobileContainer };\n","import React, { useRef, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { useEffectDidUpdate } from \"../../hooks/useEffectDidUpdate.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport \"../../../../types/state/AppState.js\";\n\nimport { IS_PHONE } from \"../../utils/browserUtils.js\";\n\nimport { LauncherDesktopContainer } from \"./LauncherDesktopContainer.js\";\n\nimport { LauncherMobileContainer } from \"./LauncherMobileContainer.js\";\n\nimport { ViewChangeReason, MainWindowOpenReason } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { ViewType } from \"../../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function LauncherContainer() {\n  const serviceManager = useServiceManager();\n  const launcherRef = useRef();\n  const viewState = useSelector(state => state.persistedToBrowserStorage.launcherState.viewState);\n  const initialViewChangeComplete = useSelector(state => state.initialViewChangeComplete);\n  const launcherHidden = !viewState.launcher;\n  const activeTour = useSelector(state => state.persistedToBrowserStorage.launcherState.activeTour);\n  const requestFocus = useCallback(() => {\n    launcherRef.current?.requestFocus();\n  }, [ launcherRef ]);\n  const onDoToggle = useCallback(() => {\n    if (activeTour) {\n      return serviceManager.actions.changeView(ViewType.TOUR, {\n        viewChangeReason: ViewChangeReason.LAUNCHER_CLICKED\n      });\n    }\n    return serviceManager.actions.changeView(ViewType.MAIN_WINDOW, {\n      mainWindowOpenReason: MainWindowOpenReason.DEFAULT_LAUNCHER\n    });\n  }, [ activeTour, serviceManager.actions ]);\n  useEffectDidUpdate(() => {\n    if (viewState.launcher && !viewState.mainWindow && !viewState.tour && initialViewChangeComplete) {\n      launcherRef.current?.requestFocus();\n    }\n  }, [ viewState ]);\n  let launcherContainer;\n  if (IS_PHONE) {\n    launcherContainer = React.createElement(LauncherMobileContainer, {\n      launcherRef: launcherRef,\n      onToggleOpen: onDoToggle,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  } else {\n    launcherContainer = React.createElement(LauncherDesktopContainer, {\n      launcherRef: launcherRef,\n      onDoToggle: onDoToggle,\n      requestFocus: requestFocus,\n      launcherHidden: launcherHidden,\n      activeTour: activeTour\n    });\n  }\n  return launcherContainer;\n}\n\nexport { LauncherContainer };\n","import { useRef, useEffect } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useEffectDidUpdate(effect, deps) {\n  const hasRunRef = useRef(false);\n  useEffect(() => {\n    if (hasRunRef.current) {\n      return effect();\n    }\n    hasRunRef.current = true;\n    return undefined;\n  }, deps);\n}\n\nexport { useEffectDidUpdate };\n","import { Loading } from \"@carbon/react\";\n\nimport cx from \"classnames\";\n\nimport React, { useContext } from \"react\";\n\nimport { HideComponentContext } from \"../contexts/HideComponentContext.js\";\n\nimport { BotHeader as BotHeaderExport } from \"./header/BotHeader.js\";\n\nimport { HomeScreenHeader as HomeScreenHeaderExport } from \"./homeScreen/HomeScreenHeader.js\";\n\nimport { AnnounceOnMountComponent as AnnounceOnMountComponentExport } from \"./util/AnnounceOnMountComponent.js\";\n\nimport { MountChildrenOnDelay } from \"./util/MountChildrenOnDelay.js\";\n\nimport { OverlayPanelName } from \"./OverlayPanel.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HydrationPanel({onClose: onClose, languagePack: languagePack, isHydrated: isHydrated, headerDisplayName: headerDisplayName, useHomeScreenVersion: useHomeScreenVersion}) {\n  const isHidden = useContext(HideComponentContext);\n  let header;\n  if (useHomeScreenVersion) {\n    header = React.createElement(HomeScreenHeaderExport, {\n      onClose: onClose\n    });\n  } else {\n    header = React.createElement(BotHeaderExport, {\n      onClose: onClose,\n      headerDisplayName: headerDisplayName,\n      onToggleHomeScreen: null,\n      includeWriteableElement: false,\n      testIdPrefix: OverlayPanelName.HYDRATING\n    });\n  }\n  return React.createElement(\"div\", {\n    className: \"WAC WAC__hydratingContainer\"\n  }, header, React.createElement(\"div\", {\n    className: cx(\"WAC__hydrating\", \"WACPanelContent\", {\n      \"WAC__hydrating--homeScreen\": useHomeScreenVersion\n    })\n  }, !isHidden && React.createElement(MountChildrenOnDelay, {\n    delay: 400\n  }, !isHydrated && React.createElement(AnnounceOnMountComponentExport, {\n    announceOnce: languagePack.window_ariaWindowLoading\n  }), React.createElement(Loading, {\n    withOverlay: false,\n    \"aria-label\": languagePack.window_ariaWindowLoading\n  }))));\n}\n\nexport { HydrationPanel };\n","import React, { useEffect, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { BusEventType } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { useAriaAnnouncer } from \"../../hooks/useAriaAnnouncer.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS } from \"../../store/reducerUtils.js\";\n\nimport { AnimationInType, AnimationOutType } from \"../../../../types/utilities/Animation.js\";\n\nimport { consoleError } from \"../../utils/miscUtils.js\";\n\nimport { BasePanelComponent as BasePanelComponentExport } from \"../BasePanelComponent.js\";\n\nimport { OverlayPanel, OverlayPanelName } from \"../OverlayPanel.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function CustomPanel(props) {\n  const {useAITheme: useAITheme, onPanelOpenEnd: onPanelOpenEnd, onPanelCloseEnd: onPanelCloseEnd, onPanelOpenStart: onPanelOpenStart, onPanelCloseStart: onPanelCloseStart, onClose: onClose, onCloseAndRestart: onCloseAndRestart, onClickRestart: onClickRestart} = props;\n  const languagePack = useLanguagePack();\n  const {isOpen: isOpen, options: options} = useSelector(state => state.customPanelState);\n  const {title: title, hidePanelHeader: hidePanelHeader, disableDefaultCloseAction: disableDefaultCloseAction, disableAnimation: disableAnimation, onClickBack: onClickBack, onClickClose: onClickClose, onClickCloseAndRestart: onClickCloseAndRestart} = options;\n  const serviceManager = useServiceManager();\n  const ariaAnnouncer = useAriaAnnouncer();\n  const prevIsOpen = usePrevious(isOpen);\n  const openAnimation = disableAnimation ? AnimationInType.NONE : AnimationInType.SLIDE_IN_FROM_BOTTOM;\n  const closeAnimation = disableAnimation ? AnimationOutType.NONE : AnimationOutType.SLIDE_OUT_TO_BOTTOM;\n  useEffect(() => {\n    if (prevIsOpen !== isOpen && isOpen) {\n      if (!hidePanelHeader && title) {\n        ariaAnnouncer(title);\n      }\n    }\n  }, [ ariaAnnouncer, hidePanelHeader, isOpen, prevIsOpen, title ]);\n  const onClickBackLocal = useCallback(() => {\n    serviceManager.store.dispatch(actions.setCustomPanelOpen(false));\n    onClickBack?.();\n  }, [ serviceManager, onClickBack ]);\n  const onClickCloseLocal = useCallback(() => {\n    if (!disableDefaultCloseAction) {\n      checkAllowClose(serviceManager.store.getState().viewChanging);\n      onClose();\n    }\n    onClickClose?.();\n  }, [ disableDefaultCloseAction, onClickClose, onClose, serviceManager ]);\n  const onCloseAndRestartLocal = useCallback(() => {\n    if (!disableDefaultCloseAction) {\n      checkAllowClose(serviceManager.store.getState().viewChanging);\n      onCloseAndRestart();\n    }\n    onClickCloseAndRestart?.();\n  }, [ disableDefaultCloseAction, onClickCloseAndRestart, onCloseAndRestart, serviceManager ]);\n  return React.createElement(OverlayPanel, {\n    className: \"WAC__overlay--covering\",\n    onOpenStart: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_PRE_OPEN\n      }, serviceManager.instance);\n      onPanelOpenStart();\n    },\n    onOpenEnd: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_OPEN\n      }, serviceManager.instance);\n      onPanelOpenEnd();\n    },\n    onCloseStart: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_PRE_CLOSE\n      }, serviceManager.instance);\n      onPanelCloseStart();\n    },\n    onCloseEnd: () => {\n      serviceManager.eventBus.fire({\n        type: BusEventType.CUSTOM_PANEL_CLOSE\n      }, serviceManager.instance);\n      onPanelCloseEnd();\n      serviceManager.store.dispatch(actions.setCustomPanelConfigOptions(DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS));\n    },\n    animationOnOpen: openAnimation,\n    animationOnClose: closeAnimation,\n    shouldOpen: isOpen,\n    serviceManager: serviceManager,\n    overlayPanelName: OverlayPanelName.CUSTOM\n  }, React.createElement(BasePanelComponentExport, {\n    className: \"WACCustomPanel\",\n    eventName: \"Custom panel opened\",\n    eventDescription: \"A user opened a custom panel.\",\n    labelBackButton: languagePack.general_returnToAssistant,\n    isOpen: isOpen,\n    title: title,\n    useAITheme: useAITheme,\n    onClickBack: onClickBackLocal,\n    onClickClose: onClickCloseLocal,\n    onClickCloseAndRestart: onCloseAndRestartLocal,\n    onClickRestart: onClickRestart,\n    hidePanelHeader: hidePanelHeader,\n    hideBackButton: options.hideBackButton,\n    hideCloseButton: options.hideCloseButton,\n    hideCloseAndRestartButton: options.hideCloseAndRestartButton,\n    testIdPrefix: OverlayPanelName.CUSTOM\n  }, React.createElement(WriteableElement, {\n    slotName: \"customPanelElement\",\n    className: \"WACCustomPanel__ContentContainer\"\n  })));\n}\n\nfunction checkAllowClose(viewChanging) {\n  if (viewChanging) {\n    const message = \"You are attempting to close Carbon AI chat from a custom panel while Carbon AI chat is currently running a view\" + \" change event which is not permitted. Please use the disableDefaultCloseAction option to disable\" + \" this behavior for the custom panel and then use onClickClose to resolve your Promise that is handling\" + \" the event; that Promise will allow you to close Carbon AI chat.\";\n    consoleError(message);\n    throw new Error(message);\n  }\n}\n\nconst CustomPanelExport = React.memo(CustomPanel);\n\nexport { CustomPanelExport as CustomPanel };\n","import \"intl-pluralrules\";\n\nimport cx from \"classnames\";\n\nimport FocusTrap from \"focus-trap-react\";\n\nimport React, { Component, Suspense } from \"react\";\n\nimport { connect } from \"react-redux\";\n\nimport { HydrationPanel } from \"../../components/HydrationPanel.js\";\n\nimport { OverlayPanel, OverlayPanelName } from \"../../components/OverlayPanel.js\";\n\nimport { CustomPanel as CustomPanelExport } from \"../../components/panels/CustomPanel.js\";\n\nimport { HideComponent } from \"../../components/util/HideComponent.js\";\n\nimport VisuallyHidden from \"../../components/util/VisuallyHidden.js\";\n\nimport { ModalPortalRootContext } from \"../../contexts/ModalPortalRootContext.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { selectIsInputToHumanAgent, selectInputState, selectHumanAgentDisplayState } from \"../../store/selectors.js\";\n\nimport { AnimationOutType, AnimationInType } from \"../../../../types/utilities/Animation.js\";\n\nimport { ChatWidthBreakpoint } from \"../../../../types/state/AppState.js\";\n\nimport { addClassNameToState, removeClassNameFromState } from \"../../../../types/utilities/HasAddRemoveClassName.js\";\n\nimport { IS_MOBILE, IS_IOS } from \"../../utils/browserUtils.js\";\n\nimport \"../../utils/constants.js\";\n\nimport { doFocusRef, SCROLLBAR_WIDTH } from \"../../utils/domUtils.js\";\n\nimport { arrayLastValue } from \"../../utils/lang/arrayUtils.js\";\n\nimport { createMessageRequestForText, createMessageRequestForChoice } from \"../../utils/messageUtils.js\";\n\nimport { consoleError, createDidCatchErrorData } from \"../../utils/miscUtils.js\";\n\nimport { MessageSendSource, MainWindowCloseReason } from \"../../../../types/events/eventBusTypes.js\";\n\nimport { lazyChat, lazyCatastrophicError, lazyDisclaimer, lazyHomeScreenContainer, lazyIFramePanel, lazyViewSourcePanel, lazyBodyAndFooterPanelComponent } from \"../../../dynamic-imports/dynamic-imports.js\";\n\nimport { ViewType } from \"../../../../types/instance/apiTypes.js\";\n\nimport { CornersType } from \"../../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const Chat = lazyChat();\n\nconst CatastrophicError = lazyCatastrophicError();\n\nconst Disclaimer = lazyDisclaimer();\n\nconst HomeScreenContainer = lazyHomeScreenContainer();\n\nconst IFramePanel = lazyIFramePanel();\n\nconst ViewSourcePanel = lazyViewSourcePanel();\n\nconst BodyAndFooterPanelComponent = lazyBodyAndFooterPanelComponent();\n\nconst WIDTH_BREAKPOINT_STANDARD = \"WAC--standardWidth\";\n\nconst WIDTH_BREAKPOINT_NARROW = \"WAC--narrowWidth\";\n\nconst WIDTH_BREAKPOINT_WIDE = \"WAC--wideWidth\";\n\nclass MainWindow extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      closing: false,\n      open: this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow,\n      modalPortalHostElement: null,\n      numPanelsOpen: 0,\n      numPanelsAnimating: 0,\n      numPanelsCovering: 0,\n      isHydrationAnimationComplete: this.props.isHydrated,\n      shouldAutoFocus: this.props.config.public.shouldTakeFocusIfOpensAutomatically,\n      extraClassNames: [],\n      areModulesLoaded: false\n    };\n    this.mainWindowRef = React.createRef();\n    this.containerRef = React.createRef();\n    this.botChatRef = React.createRef();\n    this.homeScreenInputRef = React.createRef();\n    this.disclaimerRef = React.createRef();\n    this.brandingRef = React.createRef();\n    this.animationContainerRef = React.createRef();\n    this.iframePanelRef = React.createRef();\n    this.viewSourcePanelRef = React.createRef();\n    this.previousBodyVisibility = undefined;\n    this.previousBodyPosition = undefined;\n    this.onResize = () => {\n      let appChatWidthBreakpoint;\n      const height = this.containerRef?.current?.offsetHeight;\n      const width = this.containerRef?.current?.offsetWidth;\n      if (width >= 672 + 16 + 16) {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.WIDE;\n      } else if (width >= 360) {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.STANDARD;\n      } else {\n        appChatWidthBreakpoint = ChatWidthBreakpoint.NARROW;\n      }\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatWidth\", width));\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatHeight\", height));\n      this.props.serviceManager.store.dispatch(actions.setAppStateValue(\"chatWidthBreakpoint\", appChatWidthBreakpoint));\n    };\n    this.onVisualViewportResize = () => {\n      this.updateFromVisualViewport();\n    };\n    this.updateFromVisualViewport = () => {\n      const element = this.props.serviceManager.container;\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        element.style.setProperty(\"--cds-chat-viewport-height\", `${visualViewport.height}px`);\n        element.style.setProperty(\"--cds-chat-viewport-width\", `${visualViewport.width}px`);\n        element.style.setProperty(\"--cds-chat-viewport-offsetTop\", `${visualViewport.offsetTop}px`);\n        element.style.setProperty(\"--cds-chat-viewport-offsetLeft\", `${visualViewport.offsetLeft}px`);\n      } else {\n        const height = \"100vh\";\n        element.style.setProperty(\"--cds-chat-viewport-height\", height);\n        element.style.setProperty(\"--cds-chat-viewport-width\", \"100vw\");\n        element.style.setProperty(\"--cds-chat-viewport-offsetTop\", \"0\");\n        element.style.setProperty(\"--cds-chat-viewport-offsetLeft\", \"0\");\n      }\n    };\n    this.setModalPortalHostElement = ref => {\n      if (this.state.modalPortalHostElement !== ref) {\n        this.setState({\n          modalPortalHostElement: ref\n        });\n      }\n    };\n    this.onSendInput = async (text, source, options) => {\n      const isInputToHumanAgent = selectIsInputToHumanAgent(this.props);\n      const {serviceManager: serviceManager} = this.props;\n      const state = serviceManager.store.getState();\n      const {files: files} = selectInputState(state);\n      if (isInputToHumanAgent) {\n        serviceManager.humanAgentService.sendMessageToAgent(text, files);\n      } else {\n        const messageRequest = createMessageRequestForText(text);\n        serviceManager.actions.sendWithCatch(messageRequest, source, {\n          ...options\n        });\n      }\n      if (files.length) {\n        serviceManager.store.dispatch(actions.clearInputFiles(isInputToHumanAgent));\n      }\n    };\n    this.onSendHomeButtonInput = input => {\n      const messageRequest = createMessageRequestForChoice(input);\n      this.props.serviceManager.actions.sendWithCatch(messageRequest, MessageSendSource.HOME_SCREEN_STARTER);\n    };\n    this.removeChatFromDom = () => {\n      this.containerRef.current.removeEventListener(\"animationend\", this.removeChatFromDom);\n      this.setState({\n        open: false,\n        closing: false\n      });\n    };\n    this.onRestart = async () => {\n      await this.props.serviceManager.actions.restartConversation();\n      this.requestFocus();\n    };\n    this.onClose = async () => this.doClose(false);\n    this.onCloseAndRestart = async () => this.doClose(true);\n    this.onToggleHomeScreen = () => {\n      this.props.serviceManager.store.dispatch(actions.toggleHomeScreen());\n    };\n    this.requestFocus = () => {\n      try {\n        if (this.state.shouldAutoFocus && !IS_MOBILE) {\n          if (this.getShowDisclaimer()) {\n            if (this.disclaimerRef.current) {\n              doFocusRef(this.disclaimerRef);\n            }\n          } else if (this.getShowHomeScreen()) {\n            if (this.homeScreenInputRef.current) {\n              this.homeScreenInputRef.current.takeFocus();\n            }\n          } else if (this.props.iFramePanelState.isOpen) {\n            if (this.iframePanelRef.current) {\n              this.iframePanelRef.current.requestFocus();\n            }\n          } else if (this.botChatRef.current) {\n            this.botChatRef.current.requestInputFocus();\n          }\n        }\n      } catch (error) {\n        consoleError(\"An error occurred in MainWindow.requestFocus\", error);\n      }\n    };\n    this.onUserTyping = isTyping => {\n      if (this.props.serviceManager.store.getState().persistedToBrowserStorage.chatState.humanAgentState.isConnected) {\n        this.props.serviceManager.humanAgentService.userTyping(isTyping);\n      }\n    };\n    this.onAcceptDisclaimer = () => {\n      this.props.serviceManager.store.dispatch(actions.acceptDisclaimer());\n    };\n    this.onPanelOpenStart = coverBackground => {\n      this.setState(prevState => ({\n        numPanelsOpen: prevState.numPanelsOpen + 1,\n        numPanelsAnimating: prevState.numPanelsAnimating + 1,\n        numPanelsCovering: prevState.numPanelsCovering + (coverBackground ? 1 : 0)\n      }), this.requestFocus);\n    };\n    this.onPanelOpenEnd = () => {\n      this.setState(prevState => ({\n        numPanelsAnimating: prevState.numPanelsAnimating - 1\n      }));\n    };\n    this.onPanelCloseStart = () => {\n      this.setState(prevState => ({\n        numPanelsAnimating: prevState.numPanelsAnimating + 1\n      }), this.requestFocus);\n    };\n    this.onPanelCloseEnd = coverBackground => {\n      this.setState(prevState => ({\n        numPanelsOpen: prevState.numPanelsOpen - 1,\n        numPanelsAnimating: prevState.numPanelsAnimating - 1,\n        numPanelsCovering: prevState.numPanelsCovering - (coverBackground ? 1 : 0)\n      }));\n    };\n    this.onHydrationPanelClose = () => {\n      this.setState({\n        isHydrationAnimationComplete: true\n      }, this.requestFocus);\n    };\n  }\n  componentDidMount() {\n    const {persistedToBrowserStorage: persistedToBrowserStorage, config: config, serviceManager: serviceManager, mainWindowRef: mainWindowRef} = this.props;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {public: publicConfig} = config;\n    serviceManager.mainWindow = this;\n    mainWindowRef.current = this;\n    this.mainWindowObserver = new ResizeObserver(this.onResize);\n    this.mainWindowObserver.observe(this.containerRef.current);\n    if (IS_MOBILE && !publicConfig.disableCustomElementMobileEnhancements) {\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        visualViewport.addEventListener(\"resize\", this.onVisualViewportResize);\n        visualViewport.addEventListener(\"scroll\", this.updateFromVisualViewport);\n      }\n      this.updateFromVisualViewport();\n      this.updateBody(false);\n    }\n    this.containerRef.current.style.setProperty(\"--cds-chat-scrollbar-width\", `${SCROLLBAR_WIDTH()}px`);\n    if (viewState.mainWindow) {\n      this.loadPanels();\n    }\n  }\n  componentWillUnmount() {\n    this.mainWindowObserver.unobserve(this.containerRef.current);\n  }\n  destroy() {\n    if (IS_MOBILE && !this.props.config.public.disableCustomElementMobileEnhancements) {\n      const {visualViewport: visualViewport} = window;\n      if (visualViewport) {\n        visualViewport.removeEventListener(\"resize\", this.onVisualViewportResize);\n        visualViewport.removeEventListener(\"scroll\", this.updateFromVisualViewport);\n      }\n    }\n    this.updateBody(true);\n  }\n  componentDidUpdate(oldProps, oldState) {\n    const newProps = this.props;\n    const newState = this.state;\n    const {persistedToBrowserStorage: persistedToBrowserStorage, useCustomHostElement: useCustomHostElement, isDestroyed: isDestroyed} = newProps;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {open: open} = newState;\n    const prevViewState = oldProps.persistedToBrowserStorage.launcherState.viewState;\n    if (viewState.mainWindow !== prevViewState.mainWindow) {\n      this.updateBody(false);\n      this.updateFromVisualViewport();\n    }\n    if (isDestroyed && !oldProps.isDestroyed) {\n      this.destroy();\n    }\n    if ((oldState.areModulesLoaded !== newState.areModulesLoaded || oldProps.isHydrated !== newProps.isHydrated) && newProps.isHydrated && newState.areModulesLoaded) {\n      this.setState({\n        isHydrationAnimationComplete: true\n      }, () => {\n        requestAnimationFrame(() => {\n          this.requestFocus();\n        });\n      });\n    }\n    if (viewState.mainWindow && (!prevViewState.mainWindow || !open)) {\n      this.setState({\n        open: true\n      }, () => {\n        this.requestFocus();\n      });\n      this.loadPanels();\n    } else if (!viewState.mainWindow && prevViewState.mainWindow && oldState.open && open) {\n      this.setState({\n        closing: true\n      });\n      if (useCustomHostElement) {\n        this.removeChatFromDom();\n      } else {\n        this.containerRef.current.addEventListener(\"animationend\", this.removeChatFromDom);\n        this.requestFocus();\n      }\n    }\n    if (newProps.config.public.shouldTakeFocusIfOpensAutomatically) {\n      if (!oldProps.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage && newProps.persistedToBrowserStorage.chatState.hasSentNonWelcomeMessage && !this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: true\n        });\n      } else if (oldProps.botMessageState.localMessageIDs.length > newProps.botMessageState.localMessageIDs.length && this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: false\n        });\n      } else if (oldProps.botMessageState.localMessageIDs.length < newProps.botMessageState.localMessageIDs.length && !this.state.shouldAutoFocus) {\n        this.setState({\n          shouldAutoFocus: true\n        });\n      }\n    }\n    const newLastItemID = arrayLastValue(newProps.botMessageState.localMessageIDs);\n    const oldLastItemID = arrayLastValue(oldProps.botMessageState.localMessageIDs);\n    if (newLastItemID !== oldLastItemID && newState.shouldAutoFocus) {\n      const lastMessageItem = newProps.allMessageItemsByID[newLastItemID];\n      const lastMessage = newProps.allMessagesByID[lastMessageItem?.fullMessageID];\n      if (!lastMessage?.ui_state_internal?.from_history) {\n        this.requestFocus();\n      }\n    }\n  }\n  componentDidCatch(error, errorInfo) {\n    this.props.serviceManager.actions.errorOccurred(createDidCatchErrorData(\"MainWindow\", error, errorInfo, true));\n  }\n  loadPanels() {\n    Promise.all([ Chat.preload(), CatastrophicError.preload(), Disclaimer.preload(), HomeScreenContainer.preload(), IFramePanel.preload(), ViewSourcePanel.preload(), BodyAndFooterPanelComponent.preload() ]).then(() => {\n      this.setState({\n        areModulesLoaded: true\n      });\n    });\n  }\n  updateBody(unmounting) {\n    if (IS_IOS && !this.props.config.public.disableCustomElementMobileEnhancements) {\n      if ((window.screen.width <= 500 || window.screen.height <= 500) && this.props.persistedToBrowserStorage.launcherState.viewState.mainWindow && !unmounting) {\n        this.previousBodyVisibility = document.body.style.getPropertyValue(\"visibility\");\n        this.previousBodyPosition = document.body.style.getPropertyValue(\"position\");\n        document.body.style.setProperty(\"visibility\", \"hidden\", \"important\");\n        document.body.style.setProperty(\"position\", \"fixed\", \"important\");\n      } else {\n        document.body.style.setProperty(\"visibility\", this.previousBodyVisibility);\n        document.body.style.setProperty(\"position\", this.previousBodyPosition);\n      }\n    }\n  }\n  async doClose(fromCloseAndRestart) {\n    const {serviceManager: serviceManager} = this.props;\n    const {activeTour: activeTour} = serviceManager.store.getState().persistedToBrowserStorage.launcherState;\n    if (fromCloseAndRestart) {\n      const newViewState = await serviceManager.actions.changeView(ViewType.LAUNCHER, {\n        mainWindowCloseReason: MainWindowCloseReason.MAIN_WINDOW_CLOSED_AND_RESTARTED\n      });\n      if (!newViewState.mainWindow) {\n        await serviceManager.actions.restartConversation();\n      }\n    } else {\n      await serviceManager.actions.changeView(activeTour ? ViewType.TOUR : ViewType.LAUNCHER, {\n        mainWindowCloseReason: MainWindowCloseReason.DEFAULT_MINIMIZE\n      });\n    }\n  }\n  getShowHomeScreen() {\n    return this.props.homeScreenConfig.is_on && this.props.persistedToBrowserStorage.chatState.homeScreenState.isHomeScreenOpen && !this.getShowDisclaimer();\n  }\n  getShowDisclaimer() {\n    return this.props.config.public.disclaimer?.is_on && !this.props.persistedToBrowserStorage.chatState.disclaimersAccepted[window.location.hostname];\n  }\n  doAutoScroll(options) {\n    this.botChatRef?.current?.doAutoScroll(options);\n  }\n  getMessagesScrollBottom() {\n    return this.botChatRef?.current?.getMessagesScrollBottom();\n  }\n  doScrollToMessage(messageID, animate = true) {\n    this.botChatRef.current?.doScrollToMessage(messageID, animate);\n  }\n  getMessageInput() {\n    return this.botChatRef.current?.getMessageInput();\n  }\n  getHomeScreenInput() {\n    return this.homeScreenInputRef.current?.getMessageInput();\n  }\n  addClassName(name) {\n    this.setState(addClassNameToState(name));\n  }\n  removeClassName(name) {\n    this.setState(removeClassNameFromState(name));\n  }\n  renderChat() {\n    const {isHydrated: isHydrated, config: config, chatWidthBreakpoint: chatWidthBreakpoint} = this.props;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    const showCovering = this.state.numPanelsCovering > 0 && config.public.layout?.hasContentMaxWidth && chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n    return React.createElement(\"div\", {\n      className: \"WACWidget--content\"\n    }, this.renderCustomPanel(), this.renderHydrationPanel(), isHydrated && areModulesLoaded && React.createElement(React.Fragment, null, this.renderDisclaimerPanel(), this.renderResponsePanel(), this.renderHomeScreenPanel(), this.renderIFramePanel(), this.renderViewSourcePanel(), showCovering && React.createElement(\"div\", {\n      className: \"WACBackgroundCover\"\n    }), this.renderBotChat()));\n  }\n  renderBotChat() {\n    const {botName: botName, languagePack: languagePack, config: config, serviceManager: serviceManager, botMessageState: botMessageState, humanAgentState: humanAgentState, allMessageItemsByID: allMessageItemsByID, isHydrated: isHydrated, locale: locale, theme: theme, headerDisplayName: headerDisplayName, headerAvatarConfig: headerAvatar} = this.props;\n    const {numPanelsAnimating: numPanelsAnimating, numPanelsOpen: numPanelsOpen, isHydrationAnimationComplete: isHydrationAnimationComplete} = this.state;\n    const inputState = selectInputState(this.props);\n    const agentDisplayState = selectHumanAgentDisplayState(this.props);\n    const showDisclaimer = this.getShowDisclaimer();\n    let hideBotContainer;\n    if (!isHydrationAnimationComplete) {\n      hideBotContainer = true;\n    } else if (numPanelsAnimating > 0) {\n      hideBotContainer = false;\n    } else if (numPanelsOpen > 0) {\n      hideBotContainer = true;\n    }\n    return React.createElement(HideComponent, {\n      className: \"WACBotContainer\",\n      hidden: hideBotContainer\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(Chat, {\n      botName: botName,\n      headerDisplayName: headerDisplayName,\n      headerAvatarConfig: headerAvatar,\n      ref: this.botChatRef,\n      languagePack: languagePack,\n      config: config,\n      serviceManager: serviceManager,\n      onClose: this.onClose,\n      onCloseAndRestart: this.onCloseAndRestart,\n      messageState: botMessageState,\n      onSendInput: text => this.onSendInput(text, MessageSendSource.MESSAGE_INPUT),\n      humanAgentState: humanAgentState,\n      agentDisplayState: agentDisplayState,\n      allMessageItemsByID: allMessageItemsByID,\n      onRestart: this.onRestart,\n      isHydrated: isHydrated,\n      isHydrationAnimationComplete: isHydrationAnimationComplete && !showDisclaimer,\n      inputState: inputState,\n      onToggleHomeScreen: this.onToggleHomeScreen,\n      onUserTyping: this.onUserTyping,\n      locale: locale,\n      useAITheme: theme.useAITheme,\n      carbonTheme: theme.carbonTheme\n    })));\n  }\n  renderInnerHydrationPanel() {\n    const {botMessageState: botMessageState, serviceManager: serviceManager, languagePack: languagePack, headerDisplayName: headerDisplayName, persistedToBrowserStorage: persistedToBrowserStorage, homeScreenConfig: homeScreenConfig} = this.props;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    const useHomeScreenVersion = homeScreenConfig.is_on && !persistedToBrowserStorage.launcherState.hasSentNonWelcomeMessage;\n    return React.createElement(HydrationPanel, {\n      headerDisplayName: headerDisplayName,\n      isHydrated: botMessageState.isHydratingCounter === 0 && areModulesLoaded,\n      serviceManager: serviceManager,\n      onClose: this.onClose,\n      languagePack: languagePack,\n      useHomeScreenVersion: useHomeScreenVersion\n    });\n  }\n  renderHydrationPanel() {\n    const {botMessageState: botMessageState, serviceManager: serviceManager, catastrophicErrorType: catastrophicErrorType, persistedToBrowserStorage: persistedToBrowserStorage} = this.props;\n    const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n    const {areModulesLoaded: areModulesLoaded} = this.state;\n    return React.createElement(OverlayPanel, {\n      onOpenStart: () => this.onPanelOpenStart(false),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => {\n        this.onHydrationPanelClose();\n        this.onPanelCloseEnd(false);\n      },\n      animationOnOpen: AnimationInType.NONE,\n      animationOnClose: AnimationOutType.NONE,\n      shouldOpen: (botMessageState.isHydratingCounter > 0 || !areModulesLoaded) && !catastrophicErrorType && viewState.mainWindow,\n      shouldHide: false,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.HYDRATING\n    }, this.renderInnerHydrationPanel());\n  }\n  renderCatastrophicPanel() {\n    const {serviceManager: serviceManager, botName: botName, languagePack: languagePack, headerDisplayName: headerDisplayName} = this.props;\n    return React.createElement(OverlayPanel, {\n      animationOnOpen: AnimationInType.NONE,\n      animationOnClose: AnimationOutType.NONE,\n      shouldOpen: true,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.CATASTROPHIC\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(CatastrophicError, {\n      onClose: this.onClose,\n      headerDisplayName: headerDisplayName,\n      languagePack: languagePack,\n      onRestart: this.onRestart,\n      showHeader: true,\n      botName: botName\n    })));\n  }\n  renderDisclaimerPanel() {\n    const {serviceManager: serviceManager, config: config} = this.props;\n    const showDisclaimer = this.getShowDisclaimer();\n    return config.public.disclaimer?.is_on ? React.createElement(OverlayPanel, {\n      onOpenStart: () => this.onPanelOpenStart(false),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(false),\n      animationOnOpen: AnimationInType.FADE_IN,\n      animationOnClose: AnimationOutType.FADE_OUT,\n      shouldOpen: showDisclaimer,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.DISCLAIMER\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(Disclaimer, {\n      onAcceptDisclaimer: this.onAcceptDisclaimer,\n      onClose: this.onClose,\n      disclaimerHTML: config.public.disclaimer?.disclaimerHTML,\n      disclaimerAcceptButtonRef: this.disclaimerRef\n    }))) : null;\n  }\n  renderHomeScreenPanel() {\n    const {isHydrationAnimationComplete: isHydrationAnimationComplete} = this.state;\n    const showHomeScreen = this.getShowHomeScreen();\n    return React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(HomeScreenContainer, {\n      onPanelOpenStart: () => this.onPanelOpenStart(false),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => this.onPanelCloseEnd(false),\n      onClose: this.onClose,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onSendBotInput: text => this.onSendInput(text, MessageSendSource.HOME_SCREEN_INPUT),\n      onSendButtonInput: this.onSendHomeButtonInput,\n      onRestart: this.onRestart,\n      showHomeScreen: showHomeScreen,\n      isHydrationAnimationComplete: isHydrationAnimationComplete,\n      homeScreenInputRef: this.homeScreenInputRef,\n      onToggleHomeScreen: this.onToggleHomeScreen,\n      requestFocus: this.requestFocus\n    }));\n  }\n  renderIFramePanel() {\n    const {serviceManager: serviceManager, iFramePanelState: iFramePanelState} = this.props;\n    return React.createElement(OverlayPanel, {\n      className: \"WAC__overlay--covering\",\n      onOpenStart: () => this.onPanelOpenStart(true),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(true),\n      animationOnOpen: AnimationInType.SLIDE_IN_FROM_BOTTOM,\n      animationOnClose: AnimationOutType.SLIDE_OUT_TO_BOTTOM,\n      shouldOpen: iFramePanelState.isOpen,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.IFRAME\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(IFramePanel, {\n      useAITheme: this.props.theme.useAITheme,\n      ref: this.iframePanelRef,\n      onClickClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onClickCloseAndRestart: this.onCloseAndRestart\n    })));\n  }\n  renderViewSourcePanel() {\n    const {serviceManager: serviceManager, viewSourcePanelState: viewSourcePanelState} = this.props;\n    return React.createElement(OverlayPanel, {\n      className: \"WAC__overlay--covering\",\n      onOpenStart: () => this.onPanelOpenStart(true),\n      onCloseStart: this.onPanelCloseStart,\n      onOpenEnd: this.onPanelOpenEnd,\n      onCloseEnd: () => this.onPanelCloseEnd(true),\n      animationOnOpen: AnimationInType.SLIDE_IN_FROM_BOTTOM,\n      animationOnClose: AnimationOutType.SLIDE_OUT_TO_BOTTOM,\n      shouldOpen: viewSourcePanelState.isOpen,\n      serviceManager: serviceManager,\n      overlayPanelName: OverlayPanelName.CONVERSATIONAL_SEARCH_CITATION\n    }, React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(ViewSourcePanel, {\n      ref: this.viewSourcePanelRef,\n      onClickClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onClickCloseAndRestart: this.onCloseAndRestart\n    })));\n  }\n  renderCustomPanel() {\n    return React.createElement(CustomPanelExport, {\n      useAITheme: this.props.theme.useAITheme,\n      onClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onPanelOpenStart: () => this.onPanelOpenStart(true),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => this.onPanelCloseEnd(true)\n    });\n  }\n  renderResponsePanel() {\n    if (!this.props.responsePanelState.localMessageItem) {\n      return null;\n    }\n    const {isOpen: isOpen, localMessageItem: localMessageItem, isMessageForInput: isMessageForInput} = this.props.responsePanelState;\n    const panelOptions = (localMessageItem?.item).panel;\n    const eventName = `\"Show panel\" opened`;\n    const eventDescription = \"Panel opened through panel response type\";\n    const overlayPanelName = OverlayPanelName.PANEL_RESPONSE;\n    return React.createElement(Suspense, {\n      fallback: null\n    }, React.createElement(BodyAndFooterPanelComponent, {\n      eventName: eventName,\n      eventDescription: eventDescription,\n      overlayPanelName: overlayPanelName,\n      testIdPrefix: overlayPanelName,\n      isOpen: isOpen,\n      isMessageForInput: isMessageForInput,\n      localMessageItem: localMessageItem,\n      title: panelOptions?.title,\n      showAnimations: panelOptions?.show_animations,\n      useAITheme: this.props.theme.useAITheme,\n      requestFocus: this.requestFocus,\n      onClose: this.onClose,\n      onClickRestart: this.onRestart,\n      onCloseAndRestart: this.onCloseAndRestart,\n      onClickBack: () => this.props.serviceManager.store.dispatch(actions.setResponsePanelIsOpen(false)),\n      onPanelOpenStart: () => this.onPanelOpenStart(true),\n      onPanelOpenEnd: this.onPanelOpenEnd,\n      onPanelCloseStart: this.onPanelCloseStart,\n      onPanelCloseEnd: () => {\n        this.onPanelCloseEnd(true);\n        this.props.serviceManager.store.dispatch(actions.setResponsePanelContent(null, false));\n      }\n    }));\n  }\n  renderWidget() {\n    const {serviceManager: serviceManager, useCustomHostElement: useCustomHostElement, locale: locale, catastrophicErrorType: catastrophicErrorType, config: config, isHydrated: isHydrated, theme: theme, chatWidthBreakpoint: chatWidthBreakpoint, layout: layout, languagePack: languagePack} = this.props;\n    const {closing: closing, open: open, extraClassNames: extraClassNames} = this.state;\n    const localeClassName = `WACLocale-${locale || \"en\"}`;\n    const showGlass = config.public.enableFocusTrap && open && !config.public.hideCloseButton && !config.public.headerConfig.hideMinimizeButton;\n    const trapActive = Boolean(showGlass && isHydrated);\n    const isWideWidth = chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n    return React.createElement(FocusTrap, {\n      active: trapActive\n    }, React.createElement(\"div\", {\n      className: cx(\"WACMainWindow\", \"WACWidget__FocusTrapContainer\", ...extraClassNames),\n      ref: this.mainWindowRef\n    }, showGlass && React.createElement(\"div\", {\n      className: \"WACWidget__FocusTrapGlass\"\n    }), React.createElement(\"div\", {\n      id: `WACWidget${serviceManager.namespace.suffix}`,\n      className: cx(`WACWidget ${localeClassName}`, {\n        \"WACWidget--rounded\": theme.corners === CornersType.ROUND,\n        \"WACWidget--defaultElement\": !useCustomHostElement,\n        \"WACWidget--launched\": !closing,\n        \"WACWidget--closing\": closing,\n        \"WACWidget--closed\": !open,\n        \"WACWidget--maxWidth\": isWideWidth && layout.hasContentMaxWidth,\n        [WIDTH_BREAKPOINT_NARROW]: chatWidthBreakpoint === ChatWidthBreakpoint.NARROW,\n        [WIDTH_BREAKPOINT_STANDARD]: chatWidthBreakpoint === ChatWidthBreakpoint.STANDARD,\n        [WIDTH_BREAKPOINT_WIDE]: isWideWidth\n      }),\n      ref: this.containerRef\n    }, React.createElement(VisuallyHidden, null, React.createElement(\"h1\", null, languagePack.window_title)), catastrophicErrorType && this.renderCatastrophicPanel(), !catastrophicErrorType && React.createElement(\"div\", {\n      ref: this.animationContainerRef,\n      className: \"WACWidget__animationContainer\",\n      onScroll: () => {\n        if (this.animationContainerRef.current.scrollTop !== 0) {\n          this.animationContainerRef.current.scrollTop = 0;\n        }\n      }\n    }, this.renderChat()), React.createElement(\"div\", {\n      className: \"WACMainWindowModalHost\",\n      ref: this.setModalPortalHostElement\n    }))));\n  }\n  render() {\n    return React.createElement(ModalPortalRootContext.Provider, {\n      value: this.state.modalPortalHostElement\n    }, this.renderWidget());\n  }\n}\n\nvar MainWindow$1 = connect(state => state, null, null, {\n  forwardRef: true\n})(MainWindow);\n\nexport { MainWindow$1 as default };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction addClassNameToState(name) {\n  return previousState => {\n    const currentIndex = previousState.extraClassNames.indexOf(name);\n    if (currentIndex === -1) {\n      return {\n        extraClassNames: [ ...previousState.extraClassNames, name ]\n      };\n    }\n    return null;\n  };\n}\n\nfunction removeClassNameFromState(name) {\n  return previousState => ({\n    extraClassNames: previousState.extraClassNames.filter(value => value !== name)\n  });\n}\n\nexport { addClassNameToState, removeClassNameFromState };\n","import \"intl-pluralrules\";\n\nimport cx from \"classnames\";\n\nimport React, { useState, useMemo, useRef, Suspense } from \"react\";\n\nimport { RawIntlProvider, useIntl } from \"react-intl\";\n\nimport { Provider, useSelector, useDispatch } from \"react-redux\";\n\nimport { AriaAnnouncerProvider } from \"../components/aria/AriaAnnouncerProvider.js\";\n\nimport { LauncherContainer } from \"../components/launcher/LauncherContainer.js\";\n\nimport { LanguagePackContext } from \"../contexts/LanguagePackContext.js\";\n\nimport { WindowSizeContext } from \"../contexts/WindowSizeContext.js\";\n\nimport { ServiceManagerContext } from \"../contexts/ServiceManagerContext.js\";\n\nimport { useOnMount } from \"../hooks/useOnMount.js\";\n\nimport actions from \"../store/actions.js\";\n\nimport { IS_PHONE_IN_PORTRAIT_MODE, IS_PHONE } from \"../utils/browserUtils.js\";\n\nimport { consoleDebug, consoleError } from \"../utils/miscUtils.js\";\n\nimport { convertCSSVariablesToString, getThemeClassNames } from \"../utils/styleUtils.js\";\n\nimport MainWindow from \"./main/MainWindow.js\";\n\nimport { lazyTourComponent } from \"../../dynamic-imports/dynamic-imports.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const TourContainerLazy = lazyTourComponent();\n\nfunction App({serviceManager: serviceManager, hostElement: hostElement, applicationStyles: applicationStyles, fontStyles: fontStyles}) {\n  const {store: store} = serviceManager;\n  const {config: config} = store.getState();\n  if (config.public.debug) {\n    consoleDebug(\"[render] Called render\");\n  }\n  const combinedStyles = `${fontStyles ? `${fontStyles} ` : \"\"}${applicationStyles}`;\n  return React.createElement(Provider, {\n    store: store\n  }, React.createElement(AppContainer, {\n    serviceManager: serviceManager,\n    hostElement: hostElement,\n    applicationStyles: combinedStyles\n  }));\n}\n\nfunction AppContainer({serviceManager: serviceManager, hostElement: hostElement, applicationStyles: applicationStyles}) {\n  const languagePack = useSelector(state => state.languagePack);\n  const cssVariableOverrides = useSelector(state => state.cssVariableOverrides);\n  const theme = useSelector(state => state.theme);\n  const config = useSelector(state => state.config);\n  const layout = useSelector(state => state.layout);\n  const {namespace: namespace} = serviceManager;\n  const {originalName: originalName} = namespace;\n  const dispatch = useDispatch();\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  const cssVariableOverrideString = useMemo(() => convertCSSVariablesToString(cssVariableOverrides), [ cssVariableOverrides ]);\n  const dir = document.dir || \"auto\";\n  useOnMount(() => {\n    const windowListener = () => {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    };\n    window.addEventListener(\"resize\", windowListener);\n    const visibilityListener = () => {\n      dispatch(actions.setIsBrowserPageVisible(document.visibilityState === \"visible\"));\n    };\n    document.addEventListener(\"visibilitychange\", visibilityListener);\n    return () => {\n      window.removeEventListener(\"resize\", windowListener);\n      document.removeEventListener(\"visibilitychange\", visibilityListener);\n    };\n  });\n  return React.createElement(\"div\", {\n    className: \"WACContainer\",\n    \"data-namespace\": originalName,\n    ref: node => {\n      if (node && hostElement) {\n        node.style.setProperty(\"height\", \"100%\", \"important\");\n        node.style.setProperty(\"width\", \"100%\", \"important\");\n      }\n    }\n  }, React.createElement(\"div\", {\n    className: \"WACContainer--styles\"\n  }, React.createElement(\"style\", {\n    \"data-base-styles\": \"true\",\n    nonce: config.public.cspNonce\n  }, applicationStyles || `.WACContainer { visibility: hidden; }`), React.createElement(\"style\", {\n    \"data-variables-custom\": \"true\",\n    nonce: config.public.cspNonce\n  }, cssVariableOverrideString)), React.createElement(\"div\", {\n    className: cx(`WACContainer--render`, getThemeClassNames(theme), {\n      \"WACContainer-disableMobileEnhancements\": hostElement && config.public.disableCustomElementMobileEnhancements,\n      \"WAC-isPhone\": IS_PHONE && !config.public.disableCustomElementMobileEnhancements,\n      \"WAC-isPhonePortraitMode\": IS_PHONE_IN_PORTRAIT_MODE && !config.public.disableCustomElementMobileEnhancements,\n      \"WAC--frameless\": !layout?.showFrame\n    }),\n    dir: dir\n  }, React.createElement(WindowSizeContext.Provider, {\n    value: windowSize\n  }, React.createElement(ServiceManagerContext.Provider, {\n    value: serviceManager\n  }, React.createElement(RawIntlProvider, {\n    value: serviceManager.intl\n  }, React.createElement(LanguagePackContext.Provider, {\n    value: languagePack\n  }, React.createElement(AriaAnnouncerProvider, null, React.createElement(MainContainer, {\n    serviceManager: serviceManager,\n    hostElement: hostElement\n  }))))))));\n}\n\nfunction MainContainer(props) {\n  const {hostElement: hostElement, serviceManager: serviceManager} = props;\n  const showLauncher = useSelector(state => state.launcher.config.is_on);\n  const {viewState: viewState} = useSelector(state => state.persistedToBrowserStorage.launcherState);\n  const tourContainerRef = useRef();\n  const mainWindowRef = useRef();\n  const showTour = viewState.tour;\n  const showedTourOnce = useRef(showTour);\n  showedTourOnce.current = showTour || showedTourOnce.current;\n  const intl = useIntl();\n  const namespace = serviceManager.namespace.originalName;\n  const languageKey = namespace ? \"window_ariaChatRegionNamespace\" : \"window_ariaChatRegion\";\n  const regionLabel = intl.formatMessage({\n    id: languageKey\n  }, {\n    namespace: namespace\n  });\n  useOnMount(() => {\n    function requestFocus() {\n      try {\n        const {persistedToBrowserStorage: persistedToBrowserStorage} = serviceManager.store.getState();\n        const {viewState: viewState} = persistedToBrowserStorage.launcherState;\n        if (viewState.tour) {\n          tourContainerRef.current?.requestFocus();\n        } else if (viewState.mainWindow) {\n          mainWindowRef.current?.requestFocus();\n        }\n      } catch (error) {\n        consoleError(\"An error occurred in App.requestFocus\", error);\n      }\n    }\n    serviceManager.appWindow = {\n      requestFocus: requestFocus\n    };\n  });\n  return React.createElement(\"div\", {\n    className: \"WACWidget__regionContainer\",\n    role: \"region\",\n    \"aria-label\": regionLabel\n  }, React.createElement(MainWindow, {\n    mainWindowRef: mainWindowRef,\n    useCustomHostElement: Boolean(hostElement),\n    serviceManager: serviceManager\n  }), showedTourOnce.current && React.createElement(Suspense, {\n    fallback: null\n  }, React.createElement(TourContainerLazy, {\n    ref: tourContainerRef\n  })), showLauncher && React.createElement(LauncherContainer, null));\n}\n\nexport { App as default };\n","import React from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function UserDefinedResponsePortalsContainer({chatInstance: chatInstance, renderUserDefinedResponse: renderUserDefinedResponse, userDefinedResponseEventsBySlot: userDefinedResponseEventsBySlot}) {\n  return renderUserDefinedResponse ? Object.entries(userDefinedResponseEventsBySlot).map(([slot, slotState]) => {\n    const {element: element} = slotState;\n    if (!element) {\n      return null;\n    }\n    return React.createElement(UserDefinedResponseComponentPortal, {\n      key: slot,\n      hostElement: element\n    }, renderUserDefinedResponse(slotState, chatInstance));\n  }) : null;\n}\n\nfunction UserDefinedResponseComponentPortal({hostElement: hostElement, children: children}) {\n  return ReactDOM.createPortal(children, hostElement);\n}\n\nconst UserDefinedResponsePortalsContainerExport = React.memo(UserDefinedResponsePortalsContainer);\n\nexport { UserDefinedResponsePortalsContainerExport as UserDefinedResponsePortalsContainer };\n","import React from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function WriteableElementsPortalsContainer({chatInstance: chatInstance, renderResponseMap: renderResponseMap}) {\n  return React.createElement(React.Fragment, null, Object.keys(chatInstance.writeableElements).map(key => {\n    const responseItem = renderResponseMap[key];\n    return responseItem ? React.createElement(WriteableElementsComponentPortal, {\n      key: key,\n      hostElement: chatInstance.writeableElements[key]\n    }, responseItem) : null;\n  }));\n}\n\nfunction WriteableElementsComponentPortal({hostElement: hostElement, children: children}) {\n  return ReactDOM.createPortal(children, hostElement);\n}\n\nconst WriteableElementsPortalsContainerExport = React.memo(WriteableElementsPortalsContainer);\n\nexport { WriteableElementsPortalsContainerExport as WriteableElementsPortalsContainer };\n","import isEqual from \"lodash-es/isEqual.js\";\n\nimport React, { useState, useRef, useEffect } from \"react\";\n\nimport Chat from \"../../shared/Chat.js\";\n\nimport { instantiateWidget } from \"../../shared/chatEntryFunctions.js\";\n\nimport App from \"../../shared/containers/App.js\";\n\nimport { sleep } from \"../../shared/utils/lang/promiseUtils.js\";\n\nimport { UserDefinedResponsePortalsContainer as UserDefinedResponsePortalsContainerExport } from \"./UserDefinedResponsePortalsContainer.js\";\n\nimport { WriteableElementsPortalsContainer as WriteableElementsPortalsContainerExport } from \"./WriteableElementsPortalsContainer.js\";\n\nimport { BusEventType } from \"../../../types/events/eventBusTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AppContainer({config: config, onBeforeRender: onBeforeRender, onAfterRender: onAfterRender, renderUserDefinedResponse: renderUserDefinedResponse, renderWriteableElements: renderWriteableElements, container: container, setParentInstance: setParentInstance, element: element}) {\n  const [instance, setInstance] = useState(null);\n  const [renderProps, setRenderProps] = useState(null);\n  const [applicationStyles, setApplicationStyles] = useState(null);\n  const setInstances = instance => {\n    setInstance(instance);\n    setParentInstance?.(instance);\n  };\n  const [userDefinedResponseEventsBySlot, setUserDefinedResponseEventsBySlot] = useState({});\n  const managedWebChatRef = useRef(null);\n  const previousConfigRef = useRef(null);\n  useEffect(() => {\n    const previousConfig = previousConfigRef.current;\n    previousConfigRef.current = config;\n    async function render({serviceManager: serviceManager}) {\n      const applicationStyles = await loadStyles();\n      serviceManager.container = container;\n      if (serviceManager.customHostElement) {\n        container.style.setProperty(\"width\", \"100%\", \"important\");\n        container.style.setProperty(\"height\", \"100%\", \"important\");\n      } else {\n        container.style.setProperty(\"width\", \"0\", \"important\");\n        container.style.setProperty(\"height\", \"0\", \"important\");\n      }\n      setApplicationStyles(applicationStyles);\n      setRenderProps({\n        serviceManager: serviceManager\n      });\n      await sleep(0);\n    }\n    if (!isEqual(previousConfig, config)) {\n      const managedWebChat = {\n        instance: null,\n        shouldDestroy: false,\n        config: config\n      };\n      if (config) {\n        loadChat({\n          managedWebChatRef: managedWebChatRef,\n          managedWebChat: managedWebChat,\n          render: render,\n          setInstance: setInstances,\n          onBeforeRender: onBeforeRender,\n          onAfterRender: onAfterRender,\n          setUserDefinedResponseEventsBySlot: setUserDefinedResponseEventsBySlot,\n          element: element\n        });\n      }\n      return () => {\n        destroyWebChat(managedWebChat, setInstances);\n        previousConfigRef.current = null;\n      };\n    }\n    return undefined;\n  }, [ config, container ]);\n  if (renderProps && instance) {\n    return React.createElement(React.Fragment, null, React.createElement(App, {\n      serviceManager: renderProps.serviceManager,\n      hostElement: renderProps.serviceManager.customHostElement,\n      applicationStyles: applicationStyles\n    }), renderUserDefinedResponse && React.createElement(UserDefinedResponsePortalsContainerExport, {\n      chatInstance: instance,\n      renderUserDefinedResponse: renderUserDefinedResponse,\n      userDefinedResponseEventsBySlot: userDefinedResponseEventsBySlot\n    }), renderWriteableElements && React.createElement(WriteableElementsPortalsContainerExport, {\n      chatInstance: instance,\n      renderResponseMap: renderWriteableElements\n    }));\n  }\n  return null;\n}\n\nasync function destroyWebChat(managedWebChat, setInstance) {\n  if (managedWebChat) {\n    if (managedWebChat.instance) {\n      managedWebChat.instance.destroy();\n      await sleep(0);\n    }\n    managedWebChat.shouldDestroy = true;\n    managedWebChat.instance = null;\n  }\n  setInstance(null);\n  await sleep(0);\n}\n\nfunction addUserDefinedResponseHandler(webChatInstance, setUserDefinedResponseEventsBySlot) {\n  function userDefinedResponseHandler(event) {\n    setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n      ...userDefinedEventsBySlot,\n      [event.data.slot]: {\n        fullMessage: event.data.fullMessage,\n        messageItem: event.data.message,\n        element: event.data.element\n      }\n    }));\n  }\n  function userDefinedChunkHandler(event) {\n    if (\"complete_item\" in event.data.chunk) {\n      const messageItem = event.data.chunk.complete_item;\n      setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n        ...userDefinedEventsBySlot,\n        [event.data.slot]: {\n          messageItem: messageItem,\n          element: event.data.element\n        }\n      }));\n    } else if (\"partial_item\" in event.data.chunk) {\n      const itemChunk = event.data.chunk.partial_item;\n      setUserDefinedResponseEventsBySlot(userDefinedEventsBySlot => ({\n        ...userDefinedEventsBySlot,\n        [event.data.slot]: {\n          partialItems: [ ...userDefinedEventsBySlot[event.data.slot]?.partialItems || [], itemChunk ],\n          element: event.data.element\n        }\n      }));\n    }\n  }\n  function restartHandler() {\n    setUserDefinedResponseEventsBySlot({});\n  }\n  webChatInstance.on({\n    type: BusEventType.CHUNK_USER_DEFINED_RESPONSE,\n    handler: userDefinedChunkHandler\n  });\n  webChatInstance.on({\n    type: BusEventType.USER_DEFINED_RESPONSE,\n    handler: userDefinedResponseHandler\n  });\n  webChatInstance.on({\n    type: BusEventType.RESTART_CONVERSATION,\n    handler: restartHandler\n  });\n}\n\nasync function loadChat({managedWebChatRef: managedWebChatRef, managedWebChat: managedWebChat, render: render, setInstance: setInstance, onBeforeRender: onBeforeRender, onAfterRender: onAfterRender, setUserDefinedResponseEventsBySlot: setUserDefinedResponseEventsBySlot, element: element}) {\n  await destroyWebChat(managedWebChatRef.current, setInstance);\n  managedWebChatRef.current = managedWebChat;\n  if (managedWebChat.shouldDestroy) {\n    await destroyWebChat(managedWebChat, setInstance);\n    return;\n  }\n  const widget = await instantiateWidget(managedWebChat.config, () => Promise.resolve(Chat), Promise.resolve(render), element);\n  const instance = await widget.start();\n  addUserDefinedResponseHandler(instance, setUserDefinedResponseEventsBySlot);\n  onBeforeRender?.(instance);\n  await instance.render();\n  onAfterRender?.(instance);\n  setInstance(instance);\n  managedWebChat.instance = instance;\n  if (managedWebChat.shouldDestroy) {\n    await destroyWebChat(managedWebChat, setInstance);\n  }\n}\n\nconst AppContainerExport = React.memo(AppContainer);\n\nconst loadBaseStyles = async () => {\n  const {default: styles} = await import(\"../../shared/styles/export.scss.js\");\n  return styles;\n};\n\nconst loadCarbon = async () => {\n  const {default: carbon} = await import(\"../../shared/styles/export.carbon.scss.js\");\n  return carbon;\n};\n\nasync function loadStyles() {\n  const [styles, carbonStyles] = await Promise.all([ loadBaseStyles(), loadCarbon() ]);\n  return carbonStyles + styles;\n}\n\nexport { AppContainerExport as AppContainer };\n","import { uuid } from \"../utils/lang/uuid.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CHANGE_STATE = \"CHANGE_STATE\";\n\nconst UPDATE_BOT_NAME = \"UPDATE_BOT_NAME\";\n\nconst UPDATE_BOT_AVATAR_URL = \"UPDATE_BOT_AVATAR_URL\";\n\nconst UPDATE_LAUNCHER_AVATAR_URL = \"UPDATE_LAUNCHER_AVATAR_URL\";\n\nconst UPDATE_MAIN_HEADER_TITLE = \"UPDATE_MAIN_HEADER_TITLE\";\n\nconst HYDRATE_CHAT = \"HYDRATE_CHAT\";\n\nconst HYDRATE_MESSAGE_HISTORY = \"HYDRATE_MESSAGE_HISTORY\";\n\nconst ADD_LOCAL_MESSAGE_ITEM = \"ADD_LOCAL_MESSAGE_ITEM\";\n\nconst REMOVE_MESSAGES = \"REMOVE_MESSAGES\";\n\nconst UPDATE_LOCAL_MESSAGE_ITEM = \"UPDATE_LOCAL_MESSAGE_ITEM\";\n\nconst SET_APP_STATE_VALUE = \"SET_APP_STATE_VALUE\";\n\nconst ADD_IS_TYPING_COUNTER = \"ADD_IS_TYPING_COUNTER\";\n\nconst ADD_IS_LOADING_COUNTER = \"ADD_IS_LOADING_COUNTER\";\n\nconst ADD_IS_HYDRATING_COUNTER = \"ADD_IS_HYDRATING_COUNTER\";\n\nconst SET_VIEW_STATE = \"SET_VIEW_STATE\";\n\nconst SET_VIEW_CHANGING = \"SET_VIEW_CHANGING\";\n\nconst SET_INITIAL_VIEW_CHANGE_COMPLETE = \"SET_INITIAL_VIEW_CHANGE_COMPLETE\";\n\nconst UPDATE_CSS_VARIABLES = \"UPDATE_CSS_VARIABLES\";\n\nconst MESSAGE_SET_OPTION_SELECTED = \"MESSAGE_SET_OPTION_SELECTED\";\n\nconst SET_MESSAGE_UI_PROPERTY = \"SET_MESSAGE_UI_PROPERTY\";\n\nconst SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY = \"SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY\";\n\nconst SET_MESSAGE_HISTORY_PROPERTY = \"SET_MESSAGE_HISTORY_PROPERTY\";\n\nconst MERGE_HISTORY = \"MERGE_HISTORY\";\n\nconst SET_LAUNCHER_PROPERTY = \"SET_LAUNCHER_PROPERTY\";\n\nconst SET_LAUNCHER_CONFIG_PROPERTY = \"SET_LAUNCHER_CONFIG_PROPERTY\";\n\nconst ANNOUNCE_MESSAGE = \"ANNOUNCE_MESSAGE\";\n\nconst SET_CHAT_MESSAGES_PROPERTY = \"SET_CHAT_MESSAGES_PROPERTY\";\n\nconst RESTART_CONVERSATION = \"RESTART_CONVERSATION\";\n\nconst ACCEPTED_DISCLAIMER = \"ACCEPTED_DISCLAIMER\";\n\nconst ADD_MESSAGE = \"ADD_MESSAGE\";\n\nconst UPDATE_HOME_SCREEN_CONFIG = \"UPDATE_HOME_SCREEN_CONFIG\";\n\nconst UPDATE_HAS_SENT_NON_WELCOME_MESSAGE = \"UPDATE_HAS_SENT_NON_WELCOME_MESSAGE\";\n\nconst UPDATE_PERSISTED_CHAT_STATE = \"UPDATE_PERSISTED_CHAT_STATE\";\n\nconst SET_TOUR_DATA = \"SET_TOUR_DATA\";\n\nconst CLEAR_TOUR_DATA = \"CLEAR_TOUR_DATA\";\n\nconst CHANGE_STEP_IN_TOUR = \"CHANGE_STEP_IN_TOUR\";\n\nconst SET_HOME_SCREEN_IS_OPEN = \"SET_HOME_SCREEN_IS_OPEN\";\n\nconst UPDATE_LAUNCHER_CONFIG = \"UPDATE_LAUNCHER_CONFIG\";\n\nconst UPDATE_MESSAGE = \"UPDATE_MESSAGE\";\n\nconst SET_LAUNCHER_MINIMIZED = \"SET_LAUNCHER_MINIMIZED\";\n\nconst CLOSE_IFRAME_PANEL = \"CLOSE_IFRAME_PANEL\";\n\nconst OPEN_IFRAME_CONTENT = \"OPEN_IFRAME_CONTENT\";\n\nconst SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN = \"SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN\";\n\nconst SET_CUSTOM_PANEL_OPTIONS = \"SET_CUSTOM_PANEL_OPTIONS\";\n\nconst SET_CUSTOM_PANEL_OPEN = \"SET_CUSTOM_PANEL_OPEN\";\n\nconst TOGGLE_HOME_SCREEN = \"GO_BACK_TO_HOME\";\n\nconst UPDATE_INPUT_STATE = \"UPDATE_INPUT_STATE\";\n\nconst SET_IS_BROWSER_PAGE_VISIBLE = \"SET_IS_PAGE_VISIBLE\";\n\nconst ADD_INPUT_FILE = \"ADD_INPUT_FILE\";\n\nconst CLEAR_INPUT_FILES = \"CLEAR_INPUT_FILES\";\n\nconst REMOVE_INPUT_FILE = \"REMOVE_INPUT_FILE\";\n\nconst REMOVE_LOCAL_MESSAGE_ITEM = \"REMOVE_LOCAL_MESSAGE_ITEM\";\n\nconst FILE_UPLOAD_INPUT_ERROR = \"FILE_UPLOAD_INPUT_ERROR\";\n\nconst ADD_NESTED_MESSAGES = \"ADD_NESTED_MESSAGES\";\n\nconst SET_RESPONSE_PANEL_IS_OPEN = \"SET_RESPONSE_PANEL_IS_OPEN\";\n\nconst SET_RESPONSE_PANEL_CONTENT = \"SET_PANEL_RESPONSE_CONTENT\";\n\nconst STREAMING_ADD_CHUNK = \"STREAMING_ADD_CHUNK\";\n\nconst STREAMING_START = \"STREAMING_START\";\n\nconst STREAMING_MERGE_HISTORY = \"STREAMING_MERGE_HISTORY\";\n\nconst ADD_NOTIFICATION = \"ADD_NOTIFICATION\";\n\nconst REMOVE_ALL_NOTIFICATIONS = \"REMOVE_ALL_NOTIFICATIONS\";\n\nconst REMOVE_NOTIFICATIONS = \"REMOVE_NOTIFICATIONS\";\n\nconst UPDATE_CHAT_HEADER_CONFIG = \"UPDATE_CHAT_HEADER_CONFIG\";\n\nconst UPDATE_MAX_VISIBLE_HEADER_OBJECTS = \"UPDATE_MAX_VISIBLE_HEADER_OBJECTS\";\n\nconst SET_STOP_STREAMING_BUTTON_VISIBLE = \"SET_STOP_STREAMING_BUTTON_VISIBLE\";\n\nconst SET_STOP_STREAMING_BUTTON_DISABLED = \"SET_STOP_STREAMING_BUTTON_DISABLED\";\n\nconst SET_STREAM_ID = \"SET_STREAM_ID\";\n\nconst UPDATE_MAIN_HEADER_AVATAR = \"UPDATE_MAIN_HEADER_AVATAR\";\n\nconst actions = {\n  changeState(partialState) {\n    return {\n      type: CHANGE_STATE,\n      partialState: partialState\n    };\n  },\n  chatWasHydrated() {\n    return {\n      type: HYDRATE_CHAT\n    };\n  },\n  hydrateMessageHistory(messageHistory) {\n    return {\n      type: HYDRATE_MESSAGE_HISTORY,\n      messageHistory: messageHistory\n    };\n  },\n  removeMessages(messageIDs) {\n    return {\n      type: REMOVE_MESSAGES,\n      messageIDs: messageIDs\n    };\n  },\n  restartConversation() {\n    return {\n      type: RESTART_CONVERSATION\n    };\n  },\n  addLocalMessageItem(messageItem, message, addMessage, addAfterID) {\n    return {\n      type: ADD_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem,\n      message: message,\n      addMessage: addMessage,\n      addAfterID: addAfterID\n    };\n  },\n  addMessage(message) {\n    return {\n      type: ADD_MESSAGE,\n      message: message\n    };\n  },\n  updateLocalMessageItem(messageItem) {\n    return {\n      type: UPDATE_LOCAL_MESSAGE_ITEM,\n      messageItem: messageItem\n    };\n  },\n  updateMessage(message) {\n    return {\n      type: UPDATE_MESSAGE,\n      message: message\n    };\n  },\n  messageSetOptionSelected(messageID, sentMessage) {\n    return {\n      type: MESSAGE_SET_OPTION_SELECTED,\n      messageID: messageID,\n      sentMessage: sentMessage\n    };\n  },\n  updatePersistedChatState(chatState) {\n    return {\n      type: UPDATE_PERSISTED_CHAT_STATE,\n      chatState: chatState\n    };\n  },\n  setTourData(newActiveTourMessageID) {\n    return {\n      type: SET_TOUR_DATA,\n      newActiveTourMessageID: newActiveTourMessageID\n    };\n  },\n  clearTourData() {\n    return {\n      type: CLEAR_TOUR_DATA\n    };\n  },\n  changeStepInTour(newStepNumber) {\n    return {\n      type: CHANGE_STEP_IN_TOUR,\n      newStepNumber: newStepNumber\n    };\n  },\n  updateHasSentNonWelcomeMessage(hasSentNonWelcomeMessage) {\n    return {\n      type: UPDATE_HAS_SENT_NON_WELCOME_MESSAGE,\n      hasSentNonWelcomeMessage: hasSentNonWelcomeMessage\n    };\n  },\n  setAppStateValue(key, value) {\n    return {\n      type: SET_APP_STATE_VALUE,\n      key: key,\n      value: value\n    };\n  },\n  addIsTypingCounter(addToIsTyping) {\n    return {\n      type: ADD_IS_TYPING_COUNTER,\n      addToIsTyping: addToIsTyping\n    };\n  },\n  addIsLoadingCounter(addToIsLoading) {\n    return {\n      type: ADD_IS_LOADING_COUNTER,\n      addToIsLoading: addToIsLoading\n    };\n  },\n  addIsHydratingCounter(addToIsHydrating) {\n    return {\n      type: ADD_IS_HYDRATING_COUNTER,\n      addToIsHydrating: addToIsHydrating\n    };\n  },\n  updateBotName(name) {\n    return {\n      type: UPDATE_BOT_NAME,\n      name: name\n    };\n  },\n  updateMainHeaderTitle(title) {\n    return {\n      type: UPDATE_MAIN_HEADER_TITLE,\n      title: title\n    };\n  },\n  updateBotAvatarURL(url) {\n    return {\n      type: UPDATE_BOT_AVATAR_URL,\n      url: url\n    };\n  },\n  updateCSSVariables(variables, publicVars, whiteLabelVariables) {\n    return {\n      type: UPDATE_CSS_VARIABLES,\n      variables: variables,\n      publicVars: publicVars,\n      whiteLabelVariables: whiteLabelVariables\n    };\n  },\n  updateHomeScreenConfig(homeScreenConfig) {\n    return {\n      type: UPDATE_HOME_SCREEN_CONFIG,\n      homeScreenConfig: homeScreenConfig\n    };\n  },\n  setViewState(viewState) {\n    return {\n      type: SET_VIEW_STATE,\n      viewState: viewState\n    };\n  },\n  setViewChanging(viewChanging) {\n    return {\n      type: SET_VIEW_CHANGING,\n      viewChanging: viewChanging\n    };\n  },\n  setInitialViewChangeComplete(changeComplete) {\n    return {\n      type: SET_INITIAL_VIEW_CHANGE_COMPLETE,\n      changeComplete: changeComplete\n    };\n  },\n  setMessageUIProperty(localMessageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_UI_PROPERTY,\n      localMessageID: localMessageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherProperty(propertyName, propertyValue) {\n    return {\n      type: SET_LAUNCHER_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setLauncherConfigProperty(propertyName, propertyValue, launcherType) {\n    return {\n      type: SET_LAUNCHER_CONFIG_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue,\n      launcherType: launcherType\n    };\n  },\n  setMessageHistoryProperty(messageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_HISTORY_PROPERTY,\n      messageID: messageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  setMessageUIStateInternalProperty(messageID, propertyName, propertyValue) {\n    return {\n      type: SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY,\n      messageID: messageID,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  mergeMessageHistory(messageID, history) {\n    return {\n      type: MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  setMessageErrorState(messageID, errorState) {\n    return actions.setMessageHistoryProperty(messageID, \"error_state\", errorState);\n  },\n  setMessageWasAnnounced(messageID) {\n    return actions.setMessageUIProperty(messageID, \"needsAnnouncement\", false);\n  },\n  announceMessage(message) {\n    return {\n      type: ANNOUNCE_MESSAGE,\n      message: message\n    };\n  },\n  setChatMessagesStateProperty(propertyName, propertyValue) {\n    return {\n      type: SET_CHAT_MESSAGES_PROPERTY,\n      propertyName: propertyName,\n      propertyValue: propertyValue\n    };\n  },\n  addNotification(notification) {\n    const notificationID = uuid();\n    return {\n      type: ADD_NOTIFICATION,\n      notificationID: notificationID,\n      notification: notification\n    };\n  },\n  removeNotifications({groupID: groupID, notificationID: notificationID}) {\n    return {\n      type: REMOVE_NOTIFICATIONS,\n      groupID: groupID,\n      notificationID: notificationID\n    };\n  },\n  removeAllNotifications() {\n    return {\n      type: REMOVE_ALL_NOTIFICATIONS\n    };\n  },\n  acceptDisclaimer() {\n    return {\n      type: ACCEPTED_DISCLAIMER\n    };\n  },\n  setHomeScreenIsOpen(isOpen) {\n    return {\n      type: SET_HOME_SCREEN_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  updateLauncherConfig(launcherConfig) {\n    return {\n      type: UPDATE_LAUNCHER_CONFIG,\n      launcherConfig: launcherConfig\n    };\n  },\n  setLauncherMinimized() {\n    return {\n      type: SET_LAUNCHER_MINIMIZED\n    };\n  },\n  closeIFramePanel() {\n    return {\n      type: CLOSE_IFRAME_PANEL\n    };\n  },\n  setIFrameContent(messageItem) {\n    return {\n      type: OPEN_IFRAME_CONTENT,\n      messageItem: messageItem\n    };\n  },\n  setViewSourcePanelIsOpen(isOpen, citationItem, relatedSearchResult) {\n    return {\n      type: SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN,\n      isOpen: isOpen,\n      citationItem: citationItem,\n      relatedSearchResult: relatedSearchResult\n    };\n  },\n  setCustomPanelConfigOptions(options) {\n    return {\n      type: SET_CUSTOM_PANEL_OPTIONS,\n      options: options\n    };\n  },\n  setCustomPanelOpen(isOpen) {\n    return {\n      type: SET_CUSTOM_PANEL_OPEN,\n      isOpen: isOpen\n    };\n  },\n  toggleHomeScreen() {\n    return {\n      type: TOGGLE_HOME_SCREEN\n    };\n  },\n  updateInputState(newState, isInputToHumanAgent) {\n    return {\n      type: UPDATE_INPUT_STATE,\n      newState: newState,\n      isInputToHumanAgent: isInputToHumanAgent\n    };\n  },\n  setIsBrowserPageVisible(isVisible) {\n    return {\n      type: SET_IS_BROWSER_PAGE_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  addInputFile(file, isInputToHumanAgent) {\n    return {\n      type: ADD_INPUT_FILE,\n      file: file,\n      isInputToHumanAgent: isInputToHumanAgent\n    };\n  },\n  removeFileUpload(fileID, isInputToHumanAgent) {\n    return {\n      type: REMOVE_INPUT_FILE,\n      fileID: fileID,\n      isInputToHumanAgent: isInputToHumanAgent\n    };\n  },\n  removeLocalMessageItem(localMessageItemID) {\n    return {\n      type: REMOVE_LOCAL_MESSAGE_ITEM,\n      localMessageItemID: localMessageItemID\n    };\n  },\n  fileUploadInputError(fileID, errorMessage, isInputToHumanAgent) {\n    return {\n      type: FILE_UPLOAD_INPUT_ERROR,\n      fileID: fileID,\n      errorMessage: errorMessage,\n      isInputToHumanAgent: isInputToHumanAgent\n    };\n  },\n  clearInputFiles(isInputToHumanAgent) {\n    return {\n      type: CLEAR_INPUT_FILES,\n      isInputToHumanAgent: isInputToHumanAgent\n    };\n  },\n  addNestedMessages(localMessageItems) {\n    return {\n      type: ADD_NESTED_MESSAGES,\n      localMessageItems: localMessageItems\n    };\n  },\n  setResponsePanelIsOpen(isOpen) {\n    return {\n      type: SET_RESPONSE_PANEL_IS_OPEN,\n      isOpen: isOpen\n    };\n  },\n  setResponsePanelContent(localMessageItem, isMessageForInput = false) {\n    return {\n      type: SET_RESPONSE_PANEL_CONTENT,\n      localMessageItem: localMessageItem,\n      isMessageForInput: isMessageForInput\n    };\n  },\n  streamingStart(messageID) {\n    return {\n      type: STREAMING_START,\n      messageID: messageID\n    };\n  },\n  streamingMergeHistory(messageID, history) {\n    return {\n      type: STREAMING_MERGE_HISTORY,\n      messageID: messageID,\n      history: history\n    };\n  },\n  streamingAddChunk(fullMessageID, chunkItem, isCompleteItem, disableFadeAnimation) {\n    return {\n      type: STREAMING_ADD_CHUNK,\n      fullMessageID: fullMessageID,\n      chunkItem: chunkItem,\n      isCompleteItem: isCompleteItem,\n      disableFadeAnimation: disableFadeAnimation\n    };\n  },\n  updateChatHeaderConfig(chatHeaderConfig) {\n    return {\n      type: UPDATE_CHAT_HEADER_CONFIG,\n      chatHeaderConfig: chatHeaderConfig\n    };\n  },\n  setMaxVisibleHeaderObjects(maxTotal) {\n    return {\n      type: UPDATE_MAX_VISIBLE_HEADER_OBJECTS,\n      maxTotal: maxTotal\n    };\n  },\n  setStopStreamingButtonVisible(isVisible) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_VISIBLE,\n      isVisible: isVisible\n    };\n  },\n  setStopStreamingButtonDisabled(isDisabled) {\n    return {\n      type: SET_STOP_STREAMING_BUTTON_DISABLED,\n      isDisabled: isDisabled\n    };\n  },\n  setStreamID(currentStreamID) {\n    return {\n      type: SET_STREAM_ID,\n      currentStreamID: currentStreamID\n    };\n  },\n  updateMainHeaderAvatar(config) {\n    return {\n      type: UPDATE_MAIN_HEADER_AVATAR,\n      config: config\n    };\n  }\n};\n\nexport { ACCEPTED_DISCLAIMER, ADD_INPUT_FILE, ADD_IS_HYDRATING_COUNTER, ADD_IS_LOADING_COUNTER, ADD_IS_TYPING_COUNTER, ADD_LOCAL_MESSAGE_ITEM, ADD_MESSAGE, ADD_NESTED_MESSAGES, ADD_NOTIFICATION, ANNOUNCE_MESSAGE, CHANGE_STATE, CHANGE_STEP_IN_TOUR, CLEAR_INPUT_FILES, CLEAR_TOUR_DATA, CLOSE_IFRAME_PANEL, FILE_UPLOAD_INPUT_ERROR, HYDRATE_CHAT, HYDRATE_MESSAGE_HISTORY, MERGE_HISTORY, MESSAGE_SET_OPTION_SELECTED, OPEN_IFRAME_CONTENT, REMOVE_ALL_NOTIFICATIONS, REMOVE_INPUT_FILE, REMOVE_LOCAL_MESSAGE_ITEM, REMOVE_MESSAGES, REMOVE_NOTIFICATIONS, RESTART_CONVERSATION, SET_APP_STATE_VALUE, SET_CHAT_MESSAGES_PROPERTY, SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN, SET_CUSTOM_PANEL_OPEN, SET_CUSTOM_PANEL_OPTIONS, SET_HOME_SCREEN_IS_OPEN, SET_INITIAL_VIEW_CHANGE_COMPLETE, SET_IS_BROWSER_PAGE_VISIBLE, SET_LAUNCHER_CONFIG_PROPERTY, SET_LAUNCHER_MINIMIZED, SET_LAUNCHER_PROPERTY, SET_MESSAGE_HISTORY_PROPERTY, SET_MESSAGE_UI_PROPERTY, SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY, SET_RESPONSE_PANEL_CONTENT, SET_RESPONSE_PANEL_IS_OPEN, SET_STOP_STREAMING_BUTTON_DISABLED, SET_STOP_STREAMING_BUTTON_VISIBLE, SET_STREAM_ID, SET_TOUR_DATA, SET_VIEW_CHANGING, SET_VIEW_STATE, STREAMING_ADD_CHUNK, STREAMING_MERGE_HISTORY, STREAMING_START, TOGGLE_HOME_SCREEN, UPDATE_BOT_AVATAR_URL, UPDATE_BOT_NAME, UPDATE_CHAT_HEADER_CONFIG, UPDATE_CSS_VARIABLES, UPDATE_HAS_SENT_NON_WELCOME_MESSAGE, UPDATE_HOME_SCREEN_CONFIG, UPDATE_INPUT_STATE, UPDATE_LAUNCHER_AVATAR_URL, UPDATE_LAUNCHER_CONFIG, UPDATE_LOCAL_MESSAGE_ITEM, UPDATE_MAIN_HEADER_AVATAR, UPDATE_MAIN_HEADER_TITLE, UPDATE_MAX_VISIBLE_HEADER_OBJECTS, UPDATE_MESSAGE, UPDATE_PERSISTED_CHAT_STATE, actions as default };\n","import React, { useContext } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function withAriaAnnouncer(Component) {\n  const Wrapped = React.forwardRef((props, ref) => {\n    const ariaAnnouncer = useContext(AriaAnnouncerContext);\n    return React.createElement(Component, {\n      ...props,\n      ref: ref,\n      ariaAnnouncer: ariaAnnouncer\n    });\n  });\n  Wrapped.displayName = `withAriaAnnouncer(${Component.displayName || Component.name || \"Component\"})`;\n  return Wrapped;\n}\n\nexport { withAriaAnnouncer };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar PageObjectId;\n\n(function(PageObjectId) {\n  PageObjectId[\"CLOSE_CHAT\"] = \"close_chat\";\n  PageObjectId[\"LAUNCHER\"] = \"launcher_open_chat\";\n  PageObjectId[\"INPUT\"] = \"input_field\";\n  PageObjectId[\"INPUT_SEND\"] = \"input_send\";\n})(PageObjectId || (PageObjectId = {}));\n\nfunction makeTestId(id, panel) {\n  if (panel) {\n    return `${panel}-${id}`;\n  }\n  return id;\n}\n\nexport { PageObjectId, makeTestId };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar MessageErrorState;\n\n(function(MessageErrorState) {\n  MessageErrorState[MessageErrorState[\"NONE\"] = 1] = \"NONE\";\n  MessageErrorState[MessageErrorState[\"FAILED\"] = 2] = \"FAILED\";\n  MessageErrorState[MessageErrorState[\"FAILED_WHILE_STREAMING\"] = 3] = \"FAILED_WHILE_STREAMING\";\n  MessageErrorState[MessageErrorState[\"RETRYING\"] = 4] = \"RETRYING\";\n  MessageErrorState[MessageErrorState[\"WAITING\"] = 5] = \"WAITING\";\n})(MessageErrorState || (MessageErrorState = {}));\n\nexport { MessageErrorState };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar AnimationInType;\n\n(function(AnimationInType) {\n  AnimationInType[\"NONE\"] = \"none\";\n  AnimationInType[\"FADE_IN\"] = \"fadeIn\";\n  AnimationInType[\"SLIDE_IN_FROM_LEFT\"] = \"slideInFromLeft\";\n  AnimationInType[\"SLIDE_IN_FROM_RIGHT\"] = \"slideInFromRight\";\n  AnimationInType[\"SLIDE_IN_FROM_BOTTOM\"] = \"slideInFromBottom\";\n  AnimationInType[\"BRANDING_SLIDE_IN_FROM_BOTTOM\"] = \"brandingSlideInFromBottom\";\n})(AnimationInType || (AnimationInType = {}));\n\nvar AnimationOutType;\n\n(function(AnimationOutType) {\n  AnimationOutType[\"NONE\"] = \"none\";\n  AnimationOutType[\"FADE_OUT\"] = \"fadeOut\";\n  AnimationOutType[\"SLIDE_OUT_TO_LEFT\"] = \"slideOutToLeft\";\n  AnimationOutType[\"SLIDE_OUT_TO_RIGHT\"] = \"slideOutToRight\";\n  AnimationOutType[\"SLIDE_OUT_TO_TOP\"] = \"slideOutToTop\";\n  AnimationOutType[\"SLIDE_OUT_TO_BOTTOM\"] = \"slideOutToBottom\";\n})(AnimationOutType || (AnimationOutType = {}));\n\nexport { AnimationInType, AnimationOutType };\n","import cx from \"classnames\";\n\nimport React, { PureComponent } from \"react\";\n\nimport { AnimationInType, AnimationOutType } from \"../../../types/utilities/Animation.js\";\n\nimport { conditionalSetTimeout } from \"../utils/browserUtils.js\";\n\nimport { HideComponent } from \"./util/HideComponent.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var OverlayPanelName;\n\n(function(OverlayPanelName) {\n  OverlayPanelName[\"MAIN\"] = \"main\";\n  OverlayPanelName[\"DISCLAIMER\"] = \"disclaimer\";\n  OverlayPanelName[\"HOME_SCREEN\"] = \"home_screen\";\n  OverlayPanelName[\"HYDRATING\"] = \"hydrating\";\n  OverlayPanelName[\"CATASTROPHIC\"] = \"catastrophic\";\n  OverlayPanelName[\"IFRAME\"] = \"iframe\";\n  OverlayPanelName[\"CONVERSATIONAL_SEARCH_CITATION\"] = \"conversational_search_citation\";\n  OverlayPanelName[\"CUSTOM\"] = \"custom\";\n  OverlayPanelName[\"SHOW_PANEL\"] = \"show_panel\";\n  OverlayPanelName[\"PANEL_RESPONSE\"] = \"panel_response\";\n})(OverlayPanelName || (OverlayPanelName = {}));\n\nconst ANIMATION_DURATION_IN_MS = 240;\n\nclass OverlayPanel extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isClosing: false,\n      isOpening: false\n    };\n    this.openPanelTimeout = null;\n    this.closePanelTimeout = null;\n    this.openPanel = () => {\n      const {onOpenEnd: onOpenEnd, onOpenStart: onOpenStart, animationOnOpen: animationOnOpen, animationDurationOpen: animationDurationOpen} = this.props;\n      onOpenStart?.();\n      this.setState({\n        isClosing: false,\n        isOpening: true\n      });\n      const durationInMS = animationOnOpen === AnimationInType.NONE ? 0 : animationDurationOpen || ANIMATION_DURATION_IN_MS;\n      this.openPanelTimeout = conditionalSetTimeout(() => {\n        this.setState({\n          isClosing: false,\n          isOpening: false\n        });\n        onOpenEnd?.();\n      }, durationInMS);\n    };\n    this.closePanel = () => {\n      const {onCloseEnd: onCloseEnd, onCloseStart: onCloseStart, animationOnClose: animationOnClose, animationDurationClose: animationDurationClose} = this.props;\n      onCloseStart?.();\n      this.setState({\n        isClosing: true,\n        isOpening: false\n      });\n      const durationInMS = animationOnClose === AnimationOutType.NONE ? 0 : animationDurationClose || ANIMATION_DURATION_IN_MS;\n      this.closePanelTimeout = conditionalSetTimeout(() => {\n        this.setState({\n          isClosing: false,\n          isOpening: false\n        });\n        onCloseEnd?.();\n      }, durationInMS);\n    };\n  }\n  componentDidMount() {\n    const {shouldOpen: shouldOpen} = this.props;\n    if (shouldOpen) {\n      this.openPanel();\n    }\n  }\n  componentDidUpdate(prevProps) {\n    const {shouldOpen: shouldOpen} = this.props;\n    if (shouldOpen !== prevProps.shouldOpen) {\n      if (shouldOpen) {\n        this.openPanel();\n      } else {\n        this.closePanel();\n      }\n    }\n  }\n  componentWillUnmount() {\n    if (this.openPanelTimeout) {\n      clearTimeout(this.openPanelTimeout);\n    }\n    if (this.closePanelTimeout) {\n      clearTimeout(this.closePanelTimeout);\n    }\n    if (this.props.shouldOpen) {\n      if (this.props.onCloseStart) {\n        this.props.onCloseStart();\n      }\n      if (this.props.onCloseEnd) {\n        this.props.onCloseEnd();\n      }\n    }\n  }\n  render() {\n    const {children: children, className: className, shouldOpen: shouldOpen, animationOnClose: animationOnClose, animationOnOpen: animationOnOpen, overlayPanelName: overlayPanelName} = this.props;\n    const {isClosing: isClosing, isOpening: isOpening} = this.state;\n    return React.createElement(HideComponent, {\n      hidden: !isClosing && !shouldOpen,\n      className: cx(\"WAC__overlay-panelContainer\", `WAC__overlay--${overlayPanelName}`, className, {\n        \"WAC__overlay-panelContainer--animating\": isOpening || isClosing\n      })\n    }, React.createElement(\"div\", {\n      className: cx(\"WAC__overlay-panel\", `WAC__overlay-panel--${overlayPanelName}`, {\n        [`WAC__overlay-panel--closing--${animationOnClose}`]: isClosing,\n        \"WAC__overlay-panel--closed\": !isClosing && !shouldOpen,\n        [`WAC__overlay-panel--opening--${animationOnOpen}`]: isOpening,\n        \"WAC__overlay-panel--open\": !isOpening && shouldOpen\n      })\n    }, children));\n  }\n}\n\nexport { OverlayPanel, OverlayPanelName };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const HideComponentContext = React.createContext(false);\n\nexport { HideComponentContext };\n","var ai_slug_title = \"Powered by IBM watsonx\";\n\nvar ai_slug_description = \"IBM watsonx is powered by the latest AI models to intelligently process conversations and provide help whenever and wherever you may need it.\";\n\nvar components_overflow_ariaLabel = \"Open and close list of options\";\n\nvar components_swiper_currentLabel = \"{currentSlideNumber}/{totalSlideCount}\";\n\nvar errors_communicating = \"{botName} isn't available right now. Problems with a related system are preventing the data from being supplied.\";\n\nvar errors_imageSource = \"Image is not available.\";\n\nvar errors_videoSource = \"Video is not available.\";\n\nvar errors_audioSource = \"Audio is not available.\";\n\nvar errors_iframeSource = \"The web page is not available.\";\n\nvar errors_singleMessage = \"There is an error with the message you just sent, but feel free to ask me something else.\";\n\nvar errors_ariaMessageRetrying = \"We are having some trouble sending your message but are still trying\";\n\nvar errors_ariaMessageFailed = \"Your message failed to be sent\";\n\nvar errors_noHumanAgentsAvailable = \"No agents are available.\";\n\nvar errors_noHumanAgentsJoined = \"No agents accepted the chat\";\n\nvar errors_connectingToHumanAgent = \"I'm sorry. Something went wrong and I cannot connect you to an agent right now.\";\n\nvar errors_busy = \"I'm sorry, but I can't help you right now. I'm answering questions from lots of people at the moment. Please try again later.\";\n\nvar errors_agentAppSessionExpired = \"I'm sorry, but access to the chat history has expired.\";\n\nvar errors_generalContent = \"There was an error displaying this content\";\n\nvar errors_somethingWrong = \"Something went wrong\";\n\nvar input_ariaLabel = \"Message to send\";\n\nvar input_placeholder = \"Type something...\";\n\nvar input_buttonLabel = \"Click to send message\";\n\nvar input_uploadButtonLabel = \"Add files to upload\";\n\nvar window_title = \"Chat window\";\n\nvar window_ariaTourRegion = \"Tour\";\n\nvar window_ariaTourRegionNamespace = \"Tour {namespace}\";\n\nvar window_ariaChatRegion = \"Chat\";\n\nvar window_ariaChatRegionNamespace = \"Chat {namespace}\";\n\nvar window_ariaWindowOpened = \"The chat window has been opened\";\n\nvar window_ariaWindowClosed = \"The chat window has been closed\";\n\nvar window_ariaWindowLoading = \"The chat is loading.\";\n\nvar launcher_isOpen = \"Close the chat window\";\n\nvar launcher_isClosed = \"Open the chat window\";\n\nvar launcher_isTourOpen = \"Close the tour window\";\n\nvar launcher_isTourClosed = \"Open the tour window\";\n\nvar launcher_desktopGreeting = \"Hi! I’m a virtual assistant. How can I help you today?\";\n\nvar launcher_mobileGreeting = \"Hi! How can I help you today?\";\n\nvar launcher_ariaIsExpanded = \"Close the chat launcher\";\n\nvar launcher_closeButton = \"Close\";\n\nvar messages_youSaid = \"You said\";\n\nvar messages_botSaid = \"{botName} said\";\n\nvar messages_agentSaid = \"The live agent said\";\n\nvar messages_searchResults = \"Search results\";\n\nvar messages_searchResultsLink = \"Open this search result in a new window\";\n\nvar messages_searchResultsOpenDocument = \"Open document\";\n\nvar messages_searchResultsOpenDocumentWithLabel = 'Open document \"{documentName}\"';\n\nvar messages_searchResultsExpand = \"Expand\";\n\nvar messages_searchResultsCollapse = \"Collapse\";\n\nvar messages_botIsLoading = \"{botName} is loading\";\n\nvar messages_botIsTyping = \"{botName} is typing\";\n\nvar messages_agentIsTyping = \"The live agent is typing\";\n\nvar messages_scrollHandle = \"Chat history begin\";\n\nvar messages_scrollHandleDetailed = \"Chat history begin. Activate to focus the first message then use the arrow, home, and end keys to move between messages. Press escape to exit.\";\n\nvar messages_scrollHandleEnd = \"Chat history end\";\n\nvar messages_scrollHandleEndDetailed = \"Chat history end. Activate to focus the last message then use the arrow, home, and end keys to move between messages. Press escape to exit.\";\n\nvar message_labelBot = \"{actorName} {timestamp}\";\n\nvar message_labelYou = \"You {timestamp}\";\n\nvar notifications_toastClose = \"Close notification\";\n\nvar buttons_restart = \"Restart conversation\";\n\nvar buttons_cancel = \"Cancel\";\n\nvar buttons_retry = \"Retry\";\n\nvar options_select = \"Select an option\";\n\nvar options_ariaOptionsDisabled = \"These options are disabled and cannot be selected\";\n\nvar header_previewLinkTitle = \"Assistant preview\";\n\nvar header_ariaCloseRestart = \"End chat and close the window\";\n\nvar header_ariaBotAvatar = \"{botName} avatar image\";\n\nvar header_overflowMenu_options = \"Options\";\n\nvar homeScreen_returnToAssistant = \"Return to assistant\";\n\nvar homeScreen_returnToHome = \"Return to the home screen\";\n\nvar homeScreen_overflowMenuHomeScreen = \"Home screen\";\n\nvar homeScreen_ariaQuickStartListButton = \"Quick start menu\";\n\nvar homeScreen_ariaQuickStartListOpened = \"The quick start menu has been opened.\";\n\nvar homeScreen_ariaQuickStartListClosed = \"The quick start menu has been closed.\";\n\nvar default_agent_availableMessage = \"Request an agent, and I'll notify you when they're ready. Your wait time may vary based on availability.\";\n\nvar default_agent_unavailableMessage = \"Sorry, no agents are available right now.\";\n\nvar agent_reason_error = \"Hmmm... I'm experiencing some difficulties. I need a human agent to manually continue the chat.\";\n\nvar agent_sdMissingWarning = 'No service desk is configured. Unless you have a custom service desk implemented, users will see an error instead of the message below. See the <a href=\"https://cloud.ibm.com/docs/watson-assistant?topic=watson-assistant-deploy-web-chat-haa\" rel=\"noreferrer noopener\" target=\"_blank\">documentation</a> for more information.';\n\nvar agent_noName = \"Live agent\";\n\nvar agent_chatTitle = \"Live agent support\";\n\nvar agent_startChat = \"Connect to agent\";\n\nvar agent_connecting = \"Request for agent sent...\";\n\nvar agent_agentNoNameTitle = \"Agent\";\n\nvar agent_agentJoinedName = \"{personName} connected.\";\n\nvar agent_agentJoinedNoName = \"A live agent connected.\";\n\nvar agent_youConnectedWarning = \"If you refresh or leave the current page, you'll have to request a new agent.\";\n\nvar agent_connectingMinutes = \"Current wait time is <b>{time, number} {time, plural, one {minute} other {minutes}}</b>.\";\n\nvar agent_connectingQueue = \"You're number <b>{position, number}</b> in line.\";\n\nvar agent_ariaHumanAgentAvatar = \"Live agent avatar image\";\n\nvar agent_ariaGenericAvatar = \"Avatar image\";\n\nvar agent_ariaGenericBotAvatar = \"Avatar image\";\n\nvar agent_youEndedChat = \"You disconnected from the live agent.\";\n\nvar agent_conversationWasEnded = \"You disconnected from the live agent.\";\n\nvar agent_disconnected = \"Something went wrong and your connection to the live agent was lost. Check your internet connection and then try again to connect to an agent.\";\n\nvar agent_reconnected = \"The agent reconnected.\";\n\nvar agent_agentLeftChat = \"{personName} disconnected.\";\n\nvar agent_agentLeftChatNoName = \"The live agent disconnected.\";\n\nvar agent_agentEndedChat = \"{personName} ended the chat.\";\n\nvar agent_agentEndedChatNoName = \"The live agent ended the chat.\";\n\nvar agent_transferring = \"You're being transferred.\";\n\nvar agent_transferringNoName = \"You're being transferred.\";\n\nvar agent_endChat = \"Disconnect from live agent?\";\n\nvar agent_confirmSuspendedEndChatTitle = \"Disconnect from previous agent?\";\n\nvar agent_confirmSuspendedEndChatMessage = \"You are currently connected to an agent. Continuing will disconnect you from the agent and connect you to a new one. Do you want to continue?\";\n\nvar agent_confirmCancelRequestTitle = \"Cancel request?\";\n\nvar agent_confirmCancelRequestMessage = \"If you continue, you'll cancel your request for an agent.\";\n\nvar agent_confirmCancelRequestNo = \"Go back\";\n\nvar agent_confirmCancelRequestYes = \"Cancel request\";\n\nvar agent_confirmEndChat = \"If you disconnect, you'll have to request a new live agent.\";\n\nvar agent_confirmEndChatNo = \"Go back\";\n\nvar agent_confirmEndChatYes = \"Disconnect\";\n\nvar agent_confirmEndSuspendedYes = \"Continue\";\n\nvar agent_botReturned = \"Can I help you with anything else?\";\n\nvar agent_newMessage = \"New message\";\n\nvar agent_cardButtonChatRequested = \"Connecting...\";\n\nvar agent_cardButtonConnected = \"Connected\";\n\nvar agent_cardButtonChatEnded = \"Disconnected\";\n\nvar agent_cardMessageChatEnded = \"You disconnected from the live agent.\";\n\nvar agent_cardMessageConnected = \"You're now connected.\";\n\nvar agent_connectButtonCancel = \"Cancel\";\n\nvar agent_connectedButtonEndChat = \"Disconnect\";\n\nvar agent_connectWaiting = \"Waiting...\";\n\nvar agent_defaultMessageToHumanAgent = \"Begin conversation\";\n\nvar agent_inputPlaceholderConnecting = \"Waiting for agent...\";\n\nvar agent_inputPlaceholderReconnecting = \"Reconnecting to agent...\";\n\nvar agent_sharingStopSharingButton = \"Stop sharing screen\";\n\nvar agent_sharingRequestTitle = \"Screen sharing\";\n\nvar agent_sharingRequestMessage = \"The agent has requested you share your screen. You can stop sharing at any time.\";\n\nvar agent_sharingAcceptButton = \"Share screen\";\n\nvar agent_sharingDeclineButton = \"Decline\";\n\nvar agent_sharingRequested = \"You were requested to share your screen.\";\n\nvar agent_sharingAccepted = \"You shared your screen.\";\n\nvar agent_sharingDeclined = \"You declined to share your screen.\";\n\nvar agent_sharingCancelled = \"The screen sharing request was cancelled.\";\n\nvar agent_sharingEnded = \"You stopped sharing your screen.\";\n\nvar agent_suspendedWarning = \"You are currently connected to an agent.\";\n\nvar icon_ariaUnreadMessages = \"There {count, plural, one {is} other {are}} {count, number} unread {count, plural, one {message} other {messages}}\";\n\nvar showMore = \"See more\";\n\nvar showMoreResults = \"See more\";\n\nvar disclaimer_title = \"Disclaimer\";\n\nvar disclaimer_accept = \"I accept\";\n\nvar general_ariaCloseInformationOverlay = \"Close information panel.\";\n\nvar general_ariaAnnounceOpenedInformationOverlay = \"An information panel has been opened.\";\n\nvar general_ariaAnnounceClosedInformationOverlay = \"An information panel has been closed.\";\n\nvar general_ariaAnnounceEscapeOverlay = \"Press escape or click the close button to close.\";\n\nvar general_returnToAssistant = \"Return to assistant\";\n\nvar conversationalSearch_streamingIncomplete = \"This message was not completed. Please try again.\";\n\nvar conversationalSearch_viewSourceDocument = \"View source\";\n\nvar conversationalSearch_citationsLabel = \"Sources\";\n\nvar conversationalSearch_toggleCitations = \"Open or close the list of sources\";\n\nvar conversationalSearch_responseStopped = \"Response stopped\";\n\nvar launcher_chatNow = \"Chat now\";\n\nvar iframe_ariaSourceLoaded = \"The web page has loaded.\";\n\nvar iframe_ariaImageAltText = \"Preview image for the web page panel.\";\n\nvar iframe_ariaClosePanel = \"Close the web page panel.\";\n\nvar iframe_ariaOpenedPanel = \"Web page panel has opened.\";\n\nvar iframe_ariaClosedPanel = \"Web page panel has closed.\";\n\nvar iframe_ariaClickPreviewCard = \"Click to open the web page panel and visit {source}.\";\n\nvar closeAndRestartModal_title = \"End chat\";\n\nvar closeAndRestartModal_message = \"Are you sure you want to end your chat?\";\n\nvar closeAndRestartModal_confirm = \"Yes\";\n\nvar closeAndRestartModal_cancel = \"No\";\n\nvar datePicker_chooseDate = \"Choose a date ({format})\";\n\nvar datePicker_confirmDate = \"Confirm date\";\n\nvar tour_resumeButton = \"Resume\";\n\nvar tour_restartButton = \"Restart\";\n\nvar tour_startButton = \"Get started\";\n\nvar tour_doneButton = \"Done\";\n\nvar tour_ariaMinimizeButton = \"Hide tour window\";\n\nvar tour_ariaCloseButton = \"Close tour window\";\n\nvar tour_ariaChatButton = \"Open the chat window\";\n\nvar tour_ariaPreviousButton = \"Go to previous step\";\n\nvar tour_ariaNextButton = \"Go to next step\";\n\nvar tour_instructions = \"Use the previous and next buttons to navigate between steps of the tour. Use the {chatButtonText} button to open that chat window.\";\n\nvar tour_errorFetchingStep = \"There was a problem fetching the next step.\";\n\nvar tour_errorTitle = \"Unable to continue\";\n\nvar tour_errorBody = \"The content failed to load. Please try again.\";\n\nvar fileSharing_fileTooLarge = \"The maximum file size allowed is {maxSize}.\";\n\nvar fileSharing_ariaAnnounceSuccess = \"The file was uploaded successfully.\";\n\nvar fileSharing_fileIcon = \"File icon\";\n\nvar fileSharing_removeButtonTitle = \"Remove file\";\n\nvar fileSharing_statusUploading = \"Uploading file\";\n\nvar fileSharing_uploadFailed = \"There was an error uploading the file.\";\n\nvar fileSharing_agentMessageText = \"File upload\";\n\nvar fileSharing_request = \"The agent has requested you upload a file.\";\n\nvar carousel_prevNavButton = \"Go to previous slide.\";\n\nvar carousel_nextNavButton = \"Go to next slide.\";\n\nvar input_completionsTagApp = \"App\";\n\nvar input_completionsTagAssistant = \"Assistant\";\n\nvar table_filterPlaceholder = \"Filter table\";\n\nvar table_previousPage = \"Previous page\";\n\nvar table_nextPage = \"Next page\";\n\nvar table_itemsPerPage = \"Items per page:\";\n\nvar table_paginationSupplementalText = \"of {pagesCount, number} {pagesCount, plural, one {page} other {pages}}\";\n\nvar table_paginationStatus = \"{start, number}–{end, number} of {count, number} {count, plural, one {item} other {items}}\";\n\nvar feedback_positiveLabel = \"Good response\";\n\nvar feedback_negativeLabel = \"Bad response\";\n\nvar feedback_defaultTitle = \"Additional feedback\";\n\nvar feedback_defaultPrompt = \"Why did you choose this rating?\";\n\nvar feedback_defaultPlaceholder = \"Add a comment\";\n\nvar feedback_submitLabel = \"Submit\";\n\nvar feedback_cancelLabel = \"Cancel\";\n\nvar input_stopResponse = \"Stop response\";\n\nvar messages_responseStopped = \"Response stopped\";\n\nvar chainOfThought_stepTitle = \"{stepNumber, number}: {stepTitle}\";\n\nvar chainOfThought_inputLabel = \"Input\";\n\nvar chainOfThought_outputLabel = \"Output\";\n\nvar chainOfThought_toolLabel = \"Tool\";\n\nvar chainOfThought_statusSucceededLabel = \"Succeeded\";\n\nvar chainOfThought_statusFailedLabel = \"Failed\";\n\nvar chainOfThought_statusProcessingLabel = \"Processing\";\n\nvar chainOfThought_explainabilityLabel = \"How did I get this answer?\";\n\nvar enLanguagePack = {\n  ai_slug_title: ai_slug_title,\n  ai_slug_description: ai_slug_description,\n  components_overflow_ariaLabel: components_overflow_ariaLabel,\n  components_swiper_currentLabel: components_swiper_currentLabel,\n  errors_communicating: errors_communicating,\n  errors_imageSource: errors_imageSource,\n  errors_videoSource: errors_videoSource,\n  errors_audioSource: errors_audioSource,\n  errors_iframeSource: errors_iframeSource,\n  errors_singleMessage: errors_singleMessage,\n  errors_ariaMessageRetrying: errors_ariaMessageRetrying,\n  errors_ariaMessageFailed: errors_ariaMessageFailed,\n  errors_noHumanAgentsAvailable: errors_noHumanAgentsAvailable,\n  errors_noHumanAgentsJoined: errors_noHumanAgentsJoined,\n  errors_connectingToHumanAgent: errors_connectingToHumanAgent,\n  errors_busy: errors_busy,\n  errors_agentAppSessionExpired: errors_agentAppSessionExpired,\n  errors_generalContent: errors_generalContent,\n  errors_somethingWrong: errors_somethingWrong,\n  input_ariaLabel: input_ariaLabel,\n  input_placeholder: input_placeholder,\n  input_buttonLabel: input_buttonLabel,\n  input_uploadButtonLabel: input_uploadButtonLabel,\n  window_title: window_title,\n  window_ariaTourRegion: window_ariaTourRegion,\n  window_ariaTourRegionNamespace: window_ariaTourRegionNamespace,\n  window_ariaChatRegion: window_ariaChatRegion,\n  window_ariaChatRegionNamespace: window_ariaChatRegionNamespace,\n  window_ariaWindowOpened: window_ariaWindowOpened,\n  window_ariaWindowClosed: window_ariaWindowClosed,\n  window_ariaWindowLoading: window_ariaWindowLoading,\n  launcher_isOpen: launcher_isOpen,\n  launcher_isClosed: launcher_isClosed,\n  launcher_isTourOpen: launcher_isTourOpen,\n  launcher_isTourClosed: launcher_isTourClosed,\n  launcher_desktopGreeting: launcher_desktopGreeting,\n  launcher_mobileGreeting: launcher_mobileGreeting,\n  launcher_ariaIsExpanded: launcher_ariaIsExpanded,\n  launcher_closeButton: launcher_closeButton,\n  messages_youSaid: messages_youSaid,\n  messages_botSaid: messages_botSaid,\n  messages_agentSaid: messages_agentSaid,\n  messages_searchResults: messages_searchResults,\n  messages_searchResultsLink: messages_searchResultsLink,\n  messages_searchResultsOpenDocument: messages_searchResultsOpenDocument,\n  messages_searchResultsOpenDocumentWithLabel: messages_searchResultsOpenDocumentWithLabel,\n  messages_searchResultsExpand: messages_searchResultsExpand,\n  messages_searchResultsCollapse: messages_searchResultsCollapse,\n  messages_botIsLoading: messages_botIsLoading,\n  messages_botIsTyping: messages_botIsTyping,\n  messages_agentIsTyping: messages_agentIsTyping,\n  messages_scrollHandle: messages_scrollHandle,\n  messages_scrollHandleDetailed: messages_scrollHandleDetailed,\n  messages_scrollHandleEnd: messages_scrollHandleEnd,\n  messages_scrollHandleEndDetailed: messages_scrollHandleEndDetailed,\n  message_labelBot: message_labelBot,\n  message_labelYou: message_labelYou,\n  notifications_toastClose: notifications_toastClose,\n  buttons_restart: buttons_restart,\n  buttons_cancel: buttons_cancel,\n  buttons_retry: buttons_retry,\n  options_select: options_select,\n  options_ariaOptionsDisabled: options_ariaOptionsDisabled,\n  header_previewLinkTitle: header_previewLinkTitle,\n  header_ariaCloseRestart: header_ariaCloseRestart,\n  header_ariaBotAvatar: header_ariaBotAvatar,\n  header_overflowMenu_options: header_overflowMenu_options,\n  homeScreen_returnToAssistant: homeScreen_returnToAssistant,\n  homeScreen_returnToHome: homeScreen_returnToHome,\n  homeScreen_overflowMenuHomeScreen: homeScreen_overflowMenuHomeScreen,\n  homeScreen_ariaQuickStartListButton: homeScreen_ariaQuickStartListButton,\n  homeScreen_ariaQuickStartListOpened: homeScreen_ariaQuickStartListOpened,\n  homeScreen_ariaQuickStartListClosed: homeScreen_ariaQuickStartListClosed,\n  default_agent_availableMessage: default_agent_availableMessage,\n  default_agent_unavailableMessage: default_agent_unavailableMessage,\n  agent_reason_error: agent_reason_error,\n  agent_sdMissingWarning: agent_sdMissingWarning,\n  agent_noName: agent_noName,\n  agent_chatTitle: agent_chatTitle,\n  agent_startChat: agent_startChat,\n  agent_connecting: agent_connecting,\n  agent_agentNoNameTitle: agent_agentNoNameTitle,\n  agent_agentJoinedName: agent_agentJoinedName,\n  agent_agentJoinedNoName: agent_agentJoinedNoName,\n  agent_youConnectedWarning: agent_youConnectedWarning,\n  agent_connectingMinutes: agent_connectingMinutes,\n  agent_connectingQueue: agent_connectingQueue,\n  agent_ariaHumanAgentAvatar: agent_ariaHumanAgentAvatar,\n  agent_ariaGenericAvatar: agent_ariaGenericAvatar,\n  agent_ariaGenericBotAvatar: agent_ariaGenericBotAvatar,\n  agent_youEndedChat: agent_youEndedChat,\n  agent_conversationWasEnded: agent_conversationWasEnded,\n  agent_disconnected: agent_disconnected,\n  agent_reconnected: agent_reconnected,\n  agent_agentLeftChat: agent_agentLeftChat,\n  agent_agentLeftChatNoName: agent_agentLeftChatNoName,\n  agent_agentEndedChat: agent_agentEndedChat,\n  agent_agentEndedChatNoName: agent_agentEndedChatNoName,\n  agent_transferring: agent_transferring,\n  agent_transferringNoName: agent_transferringNoName,\n  agent_endChat: agent_endChat,\n  agent_confirmSuspendedEndChatTitle: agent_confirmSuspendedEndChatTitle,\n  agent_confirmSuspendedEndChatMessage: agent_confirmSuspendedEndChatMessage,\n  agent_confirmCancelRequestTitle: agent_confirmCancelRequestTitle,\n  agent_confirmCancelRequestMessage: agent_confirmCancelRequestMessage,\n  agent_confirmCancelRequestNo: agent_confirmCancelRequestNo,\n  agent_confirmCancelRequestYes: agent_confirmCancelRequestYes,\n  agent_confirmEndChat: agent_confirmEndChat,\n  agent_confirmEndChatNo: agent_confirmEndChatNo,\n  agent_confirmEndChatYes: agent_confirmEndChatYes,\n  agent_confirmEndSuspendedYes: agent_confirmEndSuspendedYes,\n  agent_botReturned: agent_botReturned,\n  agent_newMessage: agent_newMessage,\n  agent_cardButtonChatRequested: agent_cardButtonChatRequested,\n  agent_cardButtonConnected: agent_cardButtonConnected,\n  agent_cardButtonChatEnded: agent_cardButtonChatEnded,\n  agent_cardMessageChatEnded: agent_cardMessageChatEnded,\n  agent_cardMessageConnected: agent_cardMessageConnected,\n  agent_connectButtonCancel: agent_connectButtonCancel,\n  agent_connectedButtonEndChat: agent_connectedButtonEndChat,\n  agent_connectWaiting: agent_connectWaiting,\n  agent_defaultMessageToHumanAgent: agent_defaultMessageToHumanAgent,\n  agent_inputPlaceholderConnecting: agent_inputPlaceholderConnecting,\n  agent_inputPlaceholderReconnecting: agent_inputPlaceholderReconnecting,\n  agent_sharingStopSharingButton: agent_sharingStopSharingButton,\n  agent_sharingRequestTitle: agent_sharingRequestTitle,\n  agent_sharingRequestMessage: agent_sharingRequestMessage,\n  agent_sharingAcceptButton: agent_sharingAcceptButton,\n  agent_sharingDeclineButton: agent_sharingDeclineButton,\n  agent_sharingRequested: agent_sharingRequested,\n  agent_sharingAccepted: agent_sharingAccepted,\n  agent_sharingDeclined: agent_sharingDeclined,\n  agent_sharingCancelled: agent_sharingCancelled,\n  agent_sharingEnded: agent_sharingEnded,\n  agent_suspendedWarning: agent_suspendedWarning,\n  icon_ariaUnreadMessages: icon_ariaUnreadMessages,\n  showMore: showMore,\n  showMoreResults: showMoreResults,\n  disclaimer_title: disclaimer_title,\n  disclaimer_accept: disclaimer_accept,\n  general_ariaCloseInformationOverlay: general_ariaCloseInformationOverlay,\n  general_ariaAnnounceOpenedInformationOverlay: general_ariaAnnounceOpenedInformationOverlay,\n  general_ariaAnnounceClosedInformationOverlay: general_ariaAnnounceClosedInformationOverlay,\n  general_ariaAnnounceEscapeOverlay: general_ariaAnnounceEscapeOverlay,\n  general_returnToAssistant: general_returnToAssistant,\n  conversationalSearch_streamingIncomplete: conversationalSearch_streamingIncomplete,\n  conversationalSearch_viewSourceDocument: conversationalSearch_viewSourceDocument,\n  conversationalSearch_citationsLabel: conversationalSearch_citationsLabel,\n  conversationalSearch_toggleCitations: conversationalSearch_toggleCitations,\n  conversationalSearch_responseStopped: conversationalSearch_responseStopped,\n  launcher_chatNow: launcher_chatNow,\n  iframe_ariaSourceLoaded: iframe_ariaSourceLoaded,\n  iframe_ariaImageAltText: iframe_ariaImageAltText,\n  iframe_ariaClosePanel: iframe_ariaClosePanel,\n  iframe_ariaOpenedPanel: iframe_ariaOpenedPanel,\n  iframe_ariaClosedPanel: iframe_ariaClosedPanel,\n  iframe_ariaClickPreviewCard: iframe_ariaClickPreviewCard,\n  closeAndRestartModal_title: closeAndRestartModal_title,\n  closeAndRestartModal_message: closeAndRestartModal_message,\n  closeAndRestartModal_confirm: closeAndRestartModal_confirm,\n  closeAndRestartModal_cancel: closeAndRestartModal_cancel,\n  datePicker_chooseDate: datePicker_chooseDate,\n  datePicker_confirmDate: datePicker_confirmDate,\n  tour_resumeButton: tour_resumeButton,\n  tour_restartButton: tour_restartButton,\n  tour_startButton: tour_startButton,\n  tour_doneButton: tour_doneButton,\n  tour_ariaMinimizeButton: tour_ariaMinimizeButton,\n  tour_ariaCloseButton: tour_ariaCloseButton,\n  tour_ariaChatButton: tour_ariaChatButton,\n  tour_ariaPreviousButton: tour_ariaPreviousButton,\n  tour_ariaNextButton: tour_ariaNextButton,\n  tour_instructions: tour_instructions,\n  tour_errorFetchingStep: tour_errorFetchingStep,\n  tour_errorTitle: tour_errorTitle,\n  tour_errorBody: tour_errorBody,\n  fileSharing_fileTooLarge: fileSharing_fileTooLarge,\n  fileSharing_ariaAnnounceSuccess: fileSharing_ariaAnnounceSuccess,\n  fileSharing_fileIcon: fileSharing_fileIcon,\n  fileSharing_removeButtonTitle: fileSharing_removeButtonTitle,\n  fileSharing_statusUploading: fileSharing_statusUploading,\n  fileSharing_uploadFailed: fileSharing_uploadFailed,\n  fileSharing_agentMessageText: fileSharing_agentMessageText,\n  fileSharing_request: fileSharing_request,\n  carousel_prevNavButton: carousel_prevNavButton,\n  carousel_nextNavButton: carousel_nextNavButton,\n  input_completionsTagApp: input_completionsTagApp,\n  input_completionsTagAssistant: input_completionsTagAssistant,\n  table_filterPlaceholder: table_filterPlaceholder,\n  table_previousPage: table_previousPage,\n  table_nextPage: table_nextPage,\n  table_itemsPerPage: table_itemsPerPage,\n  table_paginationSupplementalText: table_paginationSupplementalText,\n  table_paginationStatus: table_paginationStatus,\n  feedback_positiveLabel: feedback_positiveLabel,\n  feedback_negativeLabel: feedback_negativeLabel,\n  feedback_defaultTitle: feedback_defaultTitle,\n  feedback_defaultPrompt: feedback_defaultPrompt,\n  feedback_defaultPlaceholder: feedback_defaultPlaceholder,\n  feedback_submitLabel: feedback_submitLabel,\n  feedback_cancelLabel: feedback_cancelLabel,\n  input_stopResponse: input_stopResponse,\n  messages_responseStopped: messages_responseStopped,\n  chainOfThought_stepTitle: chainOfThought_stepTitle,\n  chainOfThought_inputLabel: chainOfThought_inputLabel,\n  chainOfThought_outputLabel: chainOfThought_outputLabel,\n  chainOfThought_toolLabel: chainOfThought_toolLabel,\n  chainOfThought_statusSucceededLabel: chainOfThought_statusSucceededLabel,\n  chainOfThought_statusFailedLabel: chainOfThought_statusFailedLabel,\n  chainOfThought_statusProcessingLabel: chainOfThought_statusProcessingLabel,\n  chainOfThought_explainabilityLabel: chainOfThought_explainabilityLabel\n};\n\nexport { agent_agentEndedChat, agent_agentEndedChatNoName, agent_agentJoinedName, agent_agentJoinedNoName, agent_agentLeftChat, agent_agentLeftChatNoName, agent_agentNoNameTitle, agent_ariaGenericAvatar, agent_ariaGenericBotAvatar, agent_ariaHumanAgentAvatar, agent_botReturned, agent_cardButtonChatEnded, agent_cardButtonChatRequested, agent_cardButtonConnected, agent_cardMessageChatEnded, agent_cardMessageConnected, agent_chatTitle, agent_confirmCancelRequestMessage, agent_confirmCancelRequestNo, agent_confirmCancelRequestTitle, agent_confirmCancelRequestYes, agent_confirmEndChat, agent_confirmEndChatNo, agent_confirmEndChatYes, agent_confirmEndSuspendedYes, agent_confirmSuspendedEndChatMessage, agent_confirmSuspendedEndChatTitle, agent_connectButtonCancel, agent_connectWaiting, agent_connectedButtonEndChat, agent_connecting, agent_connectingMinutes, agent_connectingQueue, agent_conversationWasEnded, agent_defaultMessageToHumanAgent, agent_disconnected, agent_endChat, agent_inputPlaceholderConnecting, agent_inputPlaceholderReconnecting, agent_newMessage, agent_noName, agent_reason_error, agent_reconnected, agent_sdMissingWarning, agent_sharingAcceptButton, agent_sharingAccepted, agent_sharingCancelled, agent_sharingDeclineButton, agent_sharingDeclined, agent_sharingEnded, agent_sharingRequestMessage, agent_sharingRequestTitle, agent_sharingRequested, agent_sharingStopSharingButton, agent_startChat, agent_suspendedWarning, agent_transferring, agent_transferringNoName, agent_youConnectedWarning, agent_youEndedChat, ai_slug_description, ai_slug_title, buttons_cancel, buttons_restart, buttons_retry, carousel_nextNavButton, carousel_prevNavButton, chainOfThought_explainabilityLabel, chainOfThought_inputLabel, chainOfThought_outputLabel, chainOfThought_statusFailedLabel, chainOfThought_statusProcessingLabel, chainOfThought_statusSucceededLabel, chainOfThought_stepTitle, chainOfThought_toolLabel, closeAndRestartModal_cancel, closeAndRestartModal_confirm, closeAndRestartModal_message, closeAndRestartModal_title, components_overflow_ariaLabel, components_swiper_currentLabel, conversationalSearch_citationsLabel, conversationalSearch_responseStopped, conversationalSearch_streamingIncomplete, conversationalSearch_toggleCitations, conversationalSearch_viewSourceDocument, datePicker_chooseDate, datePicker_confirmDate, enLanguagePack as default, default_agent_availableMessage, default_agent_unavailableMessage, disclaimer_accept, disclaimer_title, errors_agentAppSessionExpired, errors_ariaMessageFailed, errors_ariaMessageRetrying, errors_audioSource, errors_busy, errors_communicating, errors_connectingToHumanAgent, errors_generalContent, errors_iframeSource, errors_imageSource, errors_noHumanAgentsAvailable, errors_noHumanAgentsJoined, errors_singleMessage, errors_somethingWrong, errors_videoSource, feedback_cancelLabel, feedback_defaultPlaceholder, feedback_defaultPrompt, feedback_defaultTitle, feedback_negativeLabel, feedback_positiveLabel, feedback_submitLabel, fileSharing_agentMessageText, fileSharing_ariaAnnounceSuccess, fileSharing_fileIcon, fileSharing_fileTooLarge, fileSharing_removeButtonTitle, fileSharing_request, fileSharing_statusUploading, fileSharing_uploadFailed, general_ariaAnnounceClosedInformationOverlay, general_ariaAnnounceEscapeOverlay, general_ariaAnnounceOpenedInformationOverlay, general_ariaCloseInformationOverlay, general_returnToAssistant, header_ariaBotAvatar, header_ariaCloseRestart, header_overflowMenu_options, header_previewLinkTitle, homeScreen_ariaQuickStartListButton, homeScreen_ariaQuickStartListClosed, homeScreen_ariaQuickStartListOpened, homeScreen_overflowMenuHomeScreen, homeScreen_returnToAssistant, homeScreen_returnToHome, icon_ariaUnreadMessages, iframe_ariaClickPreviewCard, iframe_ariaClosePanel, iframe_ariaClosedPanel, iframe_ariaImageAltText, iframe_ariaOpenedPanel, iframe_ariaSourceLoaded, input_ariaLabel, input_buttonLabel, input_completionsTagApp, input_completionsTagAssistant, input_placeholder, input_stopResponse, input_uploadButtonLabel, launcher_ariaIsExpanded, launcher_chatNow, launcher_closeButton, launcher_desktopGreeting, launcher_isClosed, launcher_isOpen, launcher_isTourClosed, launcher_isTourOpen, launcher_mobileGreeting, message_labelBot, message_labelYou, messages_agentIsTyping, messages_agentSaid, messages_botIsLoading, messages_botIsTyping, messages_botSaid, messages_responseStopped, messages_scrollHandle, messages_scrollHandleDetailed, messages_scrollHandleEnd, messages_scrollHandleEndDetailed, messages_searchResults, messages_searchResultsCollapse, messages_searchResultsExpand, messages_searchResultsLink, messages_searchResultsOpenDocument, messages_searchResultsOpenDocumentWithLabel, messages_youSaid, notifications_toastClose, options_ariaOptionsDisabled, options_select, showMore, showMoreResults, table_filterPlaceholder, table_itemsPerPage, table_nextPage, table_paginationStatus, table_paginationSupplementalText, table_previousPage, tour_ariaChatButton, tour_ariaCloseButton, tour_ariaMinimizeButton, tour_ariaNextButton, tour_ariaPreviousButton, tour_doneButton, tour_errorBody, tour_errorFetchingStep, tour_errorTitle, tour_instructions, tour_restartButton, tour_resumeButton, tour_startButton, window_ariaChatRegion, window_ariaChatRegionNamespace, window_ariaTourRegion, window_ariaTourRegionNamespace, window_ariaWindowClosed, window_ariaWindowLoading, window_ariaWindowOpened, window_title };\n","import { PureComponent } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class MountChildrenOnDelay extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      showChildren: false\n    };\n  }\n  componentDidMount() {\n    this.onComponentDidMount = setTimeout(() => {\n      this.setState({\n        showChildren: true\n      });\n    }, this.props.delay);\n  }\n  componentWillUnmount() {\n    clearTimeout(this.onComponentDidMount);\n    this.onComponentDidMount = undefined;\n  }\n  render() {\n    if (!this.state.showChildren) {\n      return false;\n    }\n    return this.props.children;\n  }\n}\n\nMountChildrenOnDelay.defaultProps = {\n  delay: 500\n};\n\nexport { MountChildrenOnDelay };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction resolvablePromise() {\n  let resolveFunction;\n  let rejectFunction;\n  const promise = new Promise((resolve, reject) => {\n    resolveFunction = resolve;\n    rejectFunction = reject;\n  });\n  promise.doResolve = resolveValue => {\n    promise.isResolved = true;\n    promise.isComplete = true;\n    resolveFunction(resolveValue);\n  };\n  promise.doReject = rejectValue => {\n    promise.isRejected = true;\n    promise.isComplete = true;\n    rejectFunction(rejectValue);\n  };\n  promise.isResolved = false;\n  promise.isRejected = false;\n  promise.isComplete = false;\n  return promise;\n}\n\nexport { resolvablePromise };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ async function loadHAA() {\n  const {createService: createService} = await import(\"../shared/services/haa/HumanAgentServiceImpl.js\");\n  return createService;\n}\n\nfunction lazyWithPreload(factory) {\n  const Component = React.lazy(factory);\n  Component.preload = factory;\n  return Component;\n}\n\nfunction lazyChat() {\n  return lazyWithPreload(() => import(\"../shared/components/Chat.js\"));\n}\n\nfunction lazyCatastrophicError() {\n  return lazyWithPreload(() => import(\"../shared/components/CatastrophicError.js\").then(mod => ({\n    default: mod.CatastrophicError\n  })));\n}\n\nfunction lazyDisclaimer() {\n  return lazyWithPreload(() => import(\"../shared/components/Disclaimer.js\").then(mod => ({\n    default: mod.Disclaimer\n  })));\n}\n\nfunction lazyHomeScreenContainer() {\n  return lazyWithPreload(() => import(\"../shared/components/homeScreen/HomeScreenContainer.js\").then(mod => ({\n    default: mod.HomeScreenContainer\n  })));\n}\n\nfunction lazyIFramePanel() {\n  return lazyWithPreload(() => import(\"../shared/components/responseTypes/iframe/IFramePanel.js\").then(mod => ({\n    default: mod.IFramePanel\n  })));\n}\n\nfunction lazyViewSourcePanel() {\n  return lazyWithPreload(() => import(\"../shared/components/responseTypes/util/citations/ViewSourcePanel.js\").then(mod => ({\n    default: mod.ViewSourcePanel\n  })));\n}\n\nfunction lazyBodyAndFooterPanelComponent() {\n  return lazyWithPreload(() => import(\"../shared/components/panels/BodyAndFooterPanelComponent.js\").then(mod => ({\n    default: mod.BodyAndFooterPanelComponent\n  })));\n}\n\nfunction lazyTourComponent() {\n  return React.lazy(() => import(\"../shared/components/tour/TourContainer.js\"));\n}\n\nfunction lazyMediaPlayer() {\n  return React.lazy(() => import(\"react-player/lazy/index.js\").then(mod => {\n    let exported = mod.default ?? mod;\n    if (exported && typeof exported === \"object\" && \"default\" in exported) {\n      exported = exported.default;\n    }\n    return {\n      default: exported\n    };\n  }));\n}\n\nfunction lazyCarousel() {\n  return React.lazy(() => import(\"../shared/components/responseTypes/carousel/Carousel.js\"));\n}\n\nexport { lazyBodyAndFooterPanelComponent, lazyCarousel, lazyCatastrophicError, lazyChat, lazyDisclaimer, lazyHomeScreenContainer, lazyIFramePanel, lazyMediaPlayer, lazyTourComponent, lazyViewSourcePanel, loadHAA };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const VisuallyHidden = React.forwardRef((props, ref) => React.createElement(\"div\", {\n  ref: ref,\n  ...props,\n  className: `WACVisuallyHidden ${props.className || \"\"}`\n}, props.children));\n\nVisuallyHidden.displayName = \"VisuallyHidden\";\n\nexport { VisuallyHidden as default };\n","import { detect } from \"detect-browser\";\n\nimport memoizeOne from \"memoize-one\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const isClient = typeof window !== \"undefined\" && typeof navigator !== \"undefined\";\n\nconst browser = isClient ? detect() : undefined;\n\nlet screenWidth = 0;\n\nlet screenHeight = 0;\n\nif (isClient) {\n  screenWidth = window.screen.width;\n  screenHeight = window.screen.height;\n}\n\nconst IS_IOS = browser?.os === \"iOS\";\n\nconst IS_ANDROID = browser?.os === \"Android OS\";\n\nconst IS_MOBILE = IS_IOS || IS_ANDROID;\n\nconst IS_PHONE = IS_MOBILE && (screenWidth < 500 || screenHeight < 500);\n\nconst IS_PHONE_IN_PORTRAIT_MODE = IS_PHONE && screenWidth < 500;\n\nfunction isSessionStorageAvailable() {\n  if (!isClient || !window.sessionStorage) {\n    return false;\n  }\n  try {\n    window.sessionStorage.setItem(\"web-chat-test-item\", \"true\");\n    window.sessionStorage.getItem(\"web-chat-test-item\");\n    window.sessionStorage.removeItem(\"web-chat-test-item\");\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nconst IS_SESSION_STORAGE = memoizeOne(isSessionStorageAvailable);\n\nfunction getURLHostName(url) {\n  try {\n    return new URL(url).hostname;\n  } catch {\n    return url;\n  }\n}\n\nfunction conditionalSetTimeout(operation, timeout) {\n  if (timeout) {\n    return setTimeout(operation, timeout);\n  }\n  operation();\n  return null;\n}\n\nexport { IS_IOS, IS_MOBILE, IS_PHONE, IS_PHONE_IN_PORTRAIT_MODE, IS_SESSION_STORAGE, conditionalSetTimeout, getURLHostName };\n","import { useRef, useEffect } from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function usePrevious(value) {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n}\n\nexport { usePrevious };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar ChatHeaderObjectType;\n\n(function(ChatHeaderObjectType) {\n  ChatHeaderObjectType[\"LINK\"] = \"link\";\n  ChatHeaderObjectType[\"MENU\"] = \"menu\";\n  ChatHeaderObjectType[\"BUTTON\"] = \"button\";\n  ChatHeaderObjectType[\"RADIO_GROUP\"] = \"radio-group\";\n})(ChatHeaderObjectType || (ChatHeaderObjectType = {}));\n\nexport { ChatHeaderObjectType };\n","import { __decorate } from \"tslib\";\n\nimport { bind } from \"bind-decorator\";\n\nimport { LitElement, unsafeCSS, css } from \"lit\";\n\nimport { property, state } from \"lit/decorators.js\";\n\nimport css_248z from \"./chatHeaderAvatarElement.scss.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class ChatHeaderAvatarElement extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isLoaded = false;\n  }\n  _handleOnError() {\n    this.onError?.();\n  }\n}\n\nChatHeaderAvatarElement.styles = css`\n    ${unsafeCSS(css_248z)}\n  `;\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"url\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"corners\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderAvatarElement.prototype, \"alt\", void 0);\n\n__decorate([ property({\n  type: Object\n}) ], ChatHeaderAvatarElement.prototype, \"onError\", void 0);\n\n__decorate([ state() ], ChatHeaderAvatarElement.prototype, \"isLoaded\", void 0);\n\n__decorate([ bind ], ChatHeaderAvatarElement.prototype, \"_handleOnError\", null);\n\nexport { ChatHeaderAvatarElement };\n","var css_248z = \".cds--aichat-chat-header-avatar{\\n  display:block;\\n  block-size:20px;\\n  max-block-size:20px;\\n}\\n\\n.cds--aichat-chat-header-avatar--round{\\n  border-radius:10px;\\n}\";\n\nexport { css_248z as default };\n","import { __decorate } from \"tslib\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { chatHeaderAvatarTemplate } from \"./src/chatHeaderAvatar.template.js\";\n\nimport { ChatHeaderAvatarElement } from \"./src/chatHeaderAvatarElement.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const CHAT_HEADER_AVATAR_TAG_NAME = \"cds-aichat-chat-header-avatar\";\n\nlet CDSChatHeaderAvatarElement = class CDSChatHeaderAvatarElement extends ChatHeaderAvatarElement {\n  render() {\n    return chatHeaderAvatarTemplate(this);\n  }\n};\n\nCDSChatHeaderAvatarElement = __decorate([ carbonElement(CHAT_HEADER_AVATAR_TAG_NAME) ], CDSChatHeaderAvatarElement);\n\nexport { CHAT_HEADER_AVATAR_TAG_NAME, CDSChatHeaderAvatarElement as default };\n","import \"@carbon/web-components/es-custom/components/skeleton-icon/index.js\";\n\nimport cx from \"classnames\";\n\nimport { html } from \"lit\";\n\nimport { CSS_CLASS_PREFIX } from \"../../../../settings.js\";\n\nimport { CornersType } from \"../../../../../../types/config/CornersType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderAvatarTemplate(classElement) {\n  const {url: url, corners: corners, alt: alt, onError: onError} = classElement;\n  return html`\n    <img\n      class=\"${cx(`${CSS_CLASS_PREFIX}-chat-header-avatar`, {\n    [`${CSS_CLASS_PREFIX}-chat-header-avatar--round`]: corners === CornersType.ROUND\n  })}\"\n      src=\"${url}\"\n      alt=\"${alt}\"\n      @error=\"${onError}\"\n    />\n  `;\n}\n\nexport { chatHeaderAvatarTemplate };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport CDSChatHeaderAvatarElement, { CHAT_HEADER_AVATAR_TAG_NAME } from \"../../../web-components/components/chatHeader/chatHeaderAvatar/cds-aichat-chat-header-avatar.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderAvatar = createComponent({\n  tagName: CHAT_HEADER_AVATAR_TAG_NAME,\n  elementClass: CDSChatHeaderAvatarElement,\n  react: React\n});\n\nexport { ChatHeaderAvatar };\n","import { __decorate } from \"tslib\";\n\nimport { LitElement } from \"lit\";\n\nimport { property } from \"lit/decorators.js\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../settings.js\";\n\nimport { chatHeaderLinkTemplate } from \"./src/chatHeaderLinkElement.template.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let ChatHeaderLinkElement = class ChatHeaderLinkElement extends LitElement {\n  constructor() {\n    super(...arguments);\n    this.isNewTab = true;\n  }\n  render() {\n    return chatHeaderLinkTemplate(this);\n  }\n};\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderLinkElement.prototype, \"url\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderLinkElement.prototype, \"label\", void 0);\n\n__decorate([ property({\n  type: Boolean\n}) ], ChatHeaderLinkElement.prototype, \"isNewTab\", void 0);\n\nChatHeaderLinkElement = __decorate([ carbonElement(`${WEB_COMPONENT_PREFIX}-chat-header-link`) ], ChatHeaderLinkElement);\n\nexport { ChatHeaderLinkElement };\n","import \"@carbon/web-components/es-custom/components/button/index.js\";\n\nimport \"@carbon/web-components/es-custom/components/overflow-menu/index.js\";\n\nimport { html } from \"lit\";\n\nimport { ButtonKindEnum } from \"../../../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderLinkTemplate(customElementClass) {\n  const {label: label, url: url, isNewTab: isNewTab} = customElementClass;\n  return html`<cds-custom-button\n    class=\"WACChatHeaderLink\"\n    href=\"${url}\"\n    target=\"${isNewTab ? \"_blank\" : \"_self\"}\"\n    kind=\"${ButtonKindEnum.GHOST}\"\n    size=\"md\"\n    >${label}</cds-custom-button\n  >`;\n}\n\nexport { chatHeaderLinkTemplate };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport { ChatHeaderLinkElement } from \"../../../web-components/components/chatHeader/chatHeaderLink/cds-aichat-chat-header-link.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../web-components/settings.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderLink = createComponent({\n  tagName: `${WEB_COMPONENT_PREFIX}-chat-header-link`,\n  elementClass: ChatHeaderLinkElement,\n  react: React\n});\n\nexport { ChatHeaderLink };\n","import { Menu } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenu({id: id, className: className, label: label, isOpen: isOpen, target: target, children: children, menuAlignment: menuAlignment, containerRef: containerRef}) {\n  return React.createElement(Menu, {\n    id: id,\n    className: className,\n    open: isOpen,\n    target: target,\n    label: label,\n    size: \"md\",\n    menuAlignment: menuAlignment,\n    mode: \"full\",\n    legacyAutoalign: false,\n    containerRef: containerRef\n  }, children);\n}\n\nexport { ChatHeaderMenu };\n","import ChevronDown from \"@carbon/icons-react/es/ChevronDown.js\";\n\nimport ChevronUp from \"@carbon/icons-react/es/ChevronUp.js\";\n\nimport { Button } from \"@carbon/react\";\n\nimport { useFloating, useInteractions, useClick, useDismiss } from \"@floating-ui/react\";\n\nimport React, { useState } from \"react\";\n\nimport { useUUID } from \"../../../shared/hooks/useUUID.js\";\n\nimport { ChatHeaderMenu } from \"./ChatHeaderMenu.js\";\n\nimport { ButtonKindEnum, ButtonSizeEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuButton(props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const {refs: menuRefs, context: menuContext} = useFloating({\n    open: isOpen,\n    onOpenChange: setIsOpen\n  });\n  const {getReferenceProps: getMenuReferenceProps, getFloatingProps: getMenuFloatingProps} = useInteractions([ useClick(menuContext), useDismiss(menuContext) ]);\n  const id = useUUID();\n  return React.createElement(\"div\", {\n    ref: menuRefs.setReference,\n    \"aria-owns\": id,\n    ...getMenuReferenceProps()\n  }, React.createElement(Button, {\n    size: ButtonSizeEnum.MEDIUM,\n    kind: ButtonKindEnum.GHOST,\n    onClick: () => setIsOpen(!isOpen),\n    renderIcon: isOpen ? ChevronUp : ChevronDown,\n    onMouseDown: event => event.preventDefault(),\n    \"aria-label\": props.ariaLabel,\n    \"aria-haspopup\": true,\n    \"aria-expanded\": isOpen,\n    \"aria-controls\": id\n  }, props.label), React.createElement(ChatHeaderMenu, {\n    id: id,\n    isOpen: isOpen,\n    target: menuRefs.floating.current,\n    label: props.label,\n    containerRef: props.containerRef,\n    menuAlignment: props.menuAlignment\n  }, props.children), React.createElement(\"div\", {\n    ref: menuRefs.setFloating,\n    className: \"WAChatHeaderMenuButton_HostElement\",\n    ...getMenuFloatingProps()\n  }));\n}\n\nexport { ChatHeaderMenuButton };\n","import { MenuItem } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuItem({label: label, url: url, isNewTab: isNewTab = true, onClick: onClick, children: children}) {\n  return React.createElement(MenuItem, {\n    label: label,\n    onClick: () => {\n      onClick?.();\n      if (url) {\n        window.open(url, isNewTab ? \"_blank\" : \"_self\");\n      }\n    }\n  }, children);\n}\n\nexport { ChatHeaderMenuItem };\n","import { MenuItemRadioGroup } from \"@carbon/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderMenuItemRadioGroup(props) {\n  const {label: label, items: items, defaultSelectedItem: defaultSelectedItem, selectedItem: selectedItem, onChange: onChange} = props;\n  return React.createElement(MenuItemRadioGroup, {\n    label: label,\n    items: items,\n    defaultSelectedItem: defaultSelectedItem,\n    selectedItem: selectedItem,\n    onChange: selectedItem => {\n      if (!selectedItem.preventDefault) {\n        onChange(selectedItem);\n      }\n    },\n    itemToString: menuItem => typeof menuItem === \"string\" ? menuItem : menuItem.label || menuItem.value\n  });\n}\n\nexport { ChatHeaderMenuItemRadioGroup };\n","import { Button } from \"@carbon/react\";\n\nimport { useFloating, useInteractions, useClick, useDismiss } from \"@floating-ui/react\";\n\nimport cx from \"classnames\";\n\nimport React, { useState } from \"react\";\n\nimport { useUUID } from \"../../../shared/hooks/useUUID.js\";\n\nimport { ChatHeaderMenu } from \"./ChatHeaderMenu.js\";\n\nimport { ButtonKindEnum, ButtonSizeEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function ChatHeaderOverflowMenu(props) {\n  const [isOpen, setIsOpen] = useState(false);\n  const {refs: menuRefs, context: menuContext} = useFloating({\n    open: isOpen,\n    onOpenChange: isOpen => {\n      setIsOpen(isOpen);\n      if (isOpen) {\n        props.onOpen?.();\n      } else {\n        props.onClose?.();\n      }\n    }\n  });\n  const {getReferenceProps: getMenuReferenceProps, getFloatingProps: getMenuFloatingProps} = useInteractions([ useClick(menuContext), useDismiss(menuContext) ]);\n  const id = useUUID();\n  return React.createElement(\"div\", {\n    ref: menuRefs.setReference,\n    \"aria-owns\": id,\n    ...getMenuReferenceProps()\n  }, React.createElement(Button, {\n    className: cx(\"WACChatHeaderOverflowMenu__Button\", props.className),\n    size: ButtonSizeEnum.MEDIUM,\n    kind: ButtonKindEnum.GHOST,\n    onClick: () => setIsOpen(!isOpen),\n    tooltipPosition: props.tooltipPosition,\n    renderIcon: props.renderIcon,\n    onMouseDown: event => event.preventDefault(),\n    iconDescription: props.iconDescription,\n    hasIconOnly: true,\n    \"aria-label\": props.ariaLabel,\n    \"aria-haspopup\": true,\n    \"aria-expanded\": isOpen,\n    \"aria-controls\": id\n  }), React.createElement(ChatHeaderMenu, {\n    id: id,\n    label: props.ariaLabel,\n    isOpen: isOpen,\n    target: menuRefs.floating.current,\n    containerRef: props.containerRef,\n    menuAlignment: props.menuAlignment\n  }, props.children), React.createElement(\"div\", {\n    ref: menuRefs.setFloating,\n    className: \"WACChatHeaderOverflowMenu__HostElement\",\n    ...getMenuFloatingProps()\n  }));\n}\n\nexport { ChatHeaderOverflowMenu };\n","import { __decorate } from \"tslib\";\n\nimport { LitElement, unsafeCSS, css } from \"lit\";\n\nimport { property } from \"lit/decorators.js\";\n\nimport { carbonElement } from \"../../../decorators/customElement.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../settings.js\";\n\nimport css_248z from \"./src/chatHeaderTitle.scss.js\";\n\nimport { chatHeaderTitleTemplate } from \"./src/chatHeaderTitle.template.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ let ChatHeaderTitleElement = class ChatHeaderTitleElement extends LitElement {\n  render() {\n    return chatHeaderTitleTemplate(this);\n  }\n};\n\nChatHeaderTitleElement.styles = css`\n    ${unsafeCSS(css_248z)}\n  `;\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderTitleElement.prototype, \"title\", void 0);\n\n__decorate([ property({\n  type: String\n}) ], ChatHeaderTitleElement.prototype, \"name\", void 0);\n\nChatHeaderTitleElement = __decorate([ carbonElement(`${WEB_COMPONENT_PREFIX}-chat-header-title`) ], ChatHeaderTitleElement);\n\nexport { ChatHeaderTitleElement };\n","import { html } from \"lit\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function chatHeaderTitleTemplate(customElementClass) {\n  const {title: title, name: name} = customElementClass;\n  return html`<div class=\"WACChatHeaderTitle\">\n    <span className=\"WACChatHeaderTitle__Title\" ?hidden=\"${!title}\"\n      >${title}</span\n    >\n    <span class=\"WACChatHeaderTitle__Name\">${name}</span>\n  </div>`;\n}\n\nexport { chatHeaderTitleTemplate };\n","var css_248z = \"cds-chat-header-title{\\n  text-align:center;\\n}\\n\\n.WACChatHeaderTitle{\\n  overflow:hidden;\\n  font-size:var(--cds-chat-BASE-font-size-med);\\n  font-weight:400;\\n  line-height:var(--cds-chat-BASE-line-height-med);\\n  overflow-wrap:break-word;\\n  text-overflow:ellipsis;\\n  white-space:nowrap;\\n  word-wrap:break-word;\\n}\\n\\n.WACChatHeaderTitle .WACChatHeaderTitle__Title:only-child{\\n  padding-inline-end:0.25rem;\\n}\\n\\n.WACChatHeaderTitle__Name{\\n  font-weight:var(--cds-chat-BASE-weight-semibold);\\n}\";\n\nexport { css_248z as default };\n","import { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\nimport { ChatHeaderTitleElement } from \"../../../web-components/components/chatHeader/chatHeaderTitle/cds-aichat-chat-header-title.js\";\n\nimport { WEB_COMPONENT_PREFIX } from \"../../../web-components/settings.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ChatHeaderTitle = createComponent({\n  tagName: `${WEB_COMPONENT_PREFIX}-chat-header-title`,\n  elementClass: ChatHeaderTitleElement,\n  react: React\n});\n\nexport { ChatHeaderTitle };\n","import \"@carbon/web-components/es-custom/components/ai-label/ai-label-action-button.js\";\n\nimport CDSAILabel from \"@carbon/web-components/es-custom/components/ai-label/ai-label.js\";\n\nimport { createComponent } from \"@lit/react\";\n\nimport React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const AISlug = createComponent({\n  tagName: \"cds-custom-ai-label\",\n  elementClass: CDSAILabel,\n  react: React\n});\n\nexport { AISlug };\n","import \"@carbon/web-components/es-custom/components/slug/index.js\";\n\nimport Close from \"@carbon/icons-react/es/Close.js\";\n\nimport CloseLarge from \"@carbon/icons-react/es/CloseLarge.js\";\n\nimport DownToBottom from \"@carbon/icons-react/es/DownToBottom.js\";\n\nimport Menu from \"@carbon/icons-react/es/Menu.js\";\n\nimport Restart from \"@carbon/icons-react/es/Restart.js\";\n\nimport SidePanelClose from \"@carbon/icons-react/es/SidePanelClose.js\";\n\nimport SubtractLarge from \"@carbon/icons-react/es/SubtractLarge.js\";\n\nimport { MenuItem, Button, MenuItemDivider } from \"@carbon/react\";\n\nimport { AI_LABEL_SIZE } from \"@carbon/web-components/es-custom/components/ai-label/defs.js\";\n\nimport { POPOVER_ALIGNMENT } from \"@carbon/web-components/es-custom/components/popover/defs.js\";\n\nimport cx from \"classnames\";\n\nimport React, { forwardRef, useRef, useState, useContext, useCallback, useImperativeHandle, useEffect, Fragment } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { ChatHeaderObjectType } from \"../../../../types/config/ChatHeaderConfig.js\";\n\nimport { ChatHeaderAvatar } from \"../../../react/components/chatHeader/ChatHeaderAvatar.js\";\n\nimport { ChatHeaderLink } from \"../../../react/components/chatHeader/ChatHeaderLink.js\";\n\nimport { ChatHeaderMenuButton } from \"../../../react/components/chatHeader/ChatHeaderMenuButton.js\";\n\nimport { ChatHeaderMenuItem } from \"../../../react/components/chatHeader/ChatHeaderMenuItem.js\";\n\nimport { ChatHeaderMenuItemRadioGroup } from \"../../../react/components/chatHeader/ChatHeaderMenuItemRadioGroup.js\";\n\nimport { ChatHeaderOverflowMenu } from \"../../../react/components/chatHeader/ChatHeaderOverflowMenu.js\";\n\nimport { ChatHeaderTitle } from \"../../../react/components/chatHeader/ChatHeaderTitle.js\";\n\nimport { HideComponentContext } from \"../../contexts/HideComponentContext.js\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { usePrevious } from \"../../hooks/usePrevious.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport actions from \"../../store/actions.js\";\n\nimport { ChatWidthBreakpoint } from \"../../../../types/state/AppState.js\";\n\nimport \"../../utils/constants.js\";\n\nimport { doFocusRef } from \"../../utils/domUtils.js\";\n\nimport { ConfirmModal } from \"../modals/ConfirmModal.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\nimport { AISlug } from \"./AISlug.js\";\n\nimport { ButtonSizeEnum, ButtonKindEnum } from \"../../../../types/utilities/carbonTypes.js\";\n\nimport { MinimizeButtonIconType } from \"../../../../types/config/PublicConfig.js\";\n\nimport { makeTestId, PageObjectId } from \"../../utils/PageObjectId.js\";\n\nimport { WriteableElementName } from \"../../../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst HEADER_OBJECTS_GAP_MIN_SIZE = 100;\n\nfunction Header(props, ref) {\n  const {displayName: displayName, backContent: backContent, showRestartButton: showRestartButton, showBackButton: showBackButton, useAITheme: useAITheme, labelBackButton: labelBackButton, onClickClose: onClickClose, onClickRestart: onClickRestart, onCloseAndRestart: onCloseAndRestart, onClickBack: onClickBack, overflowItems: overflowItems, overflowClicked: overflowClicked, backButtonType: backButtonType, showCenter: showCenter, hideCloseButton: hideCloseButton, hideCloseAndRestartButton: hideCloseAndRestartButton, brandColor: brandColor = \"primary\", enableChatHeaderConfig: enableChatHeaderConfig, headerAvatarConfig: headerAvatarConfig, testIdPrefix: testIdPrefix} = props;\n  const backButtonRef = useRef();\n  const restartButtonRef = useRef();\n  const closeAndRestartButtonRef = useRef();\n  const closeButtonRef = useRef();\n  const centerObjectsRef = useRef();\n  const centerGapRef = useRef();\n  const overflowRef = useRef();\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const publicConfig = useSelector(state => state.config.public);\n  const chatHeaderConfig = useSelector(state => state.chatHeaderState.config);\n  const chatWidthBreakpoint = useSelector(state => state.chatWidthBreakpoint);\n  const maxVisibleHeaderObjects = useSelector(state => state.chatHeaderState.maxVisibleHeaderObjects);\n  const [overflowIsOpen, setOverflowIsOpen] = useState(false);\n  const [confirmModelOpen, setConfirmModelOpen] = useState(false);\n  const [selectedGroupMenuitems, setSelectedGroupMenuItems] = useState({});\n  const [isImageError, setIsImageError] = useState(false);\n  const hasHeaderAvatar = Boolean(headerAvatarConfig) && !isImageError;\n  const isHidden = useContext(HideComponentContext);\n  const prevChatHeaderAvatarURL = usePrevious(headerAvatarConfig?.url);\n  const {headerConfig: headerConfig} = publicConfig;\n  const isWideWidth = chatWidthBreakpoint === ChatWidthBreakpoint.WIDE;\n  const chatHeaderTitle = enableChatHeaderConfig ? chatHeaderConfig?.headerTitle?.title : undefined;\n  const chatHeaderName = enableChatHeaderConfig ? chatHeaderConfig?.headerTitle?.name : undefined;\n  const chatHeaderDisplayName = chatHeaderName || displayName;\n  const closeConfirmModel = useCallback(() => {\n    setConfirmModelOpen(false);\n  }, []);\n  const showCloseAndRestartButton = headerConfig?.showCloseAndRestartButton && !hideCloseAndRestartButton && onCloseAndRestart;\n  const useHideCloseButton = headerConfig?.hideMinimizeButton || hideCloseButton;\n  let closeIcon;\n  let closeReverseIcon = false;\n  let closeIsReversible = true;\n  const minimizeButtonIconType = headerConfig?.minimizeButtonIconType;\n  switch (minimizeButtonIconType) {\n   case MinimizeButtonIconType.CLOSE:\n    closeIcon = React.createElement(CloseLarge, {\n      className: \"WACIcon__Close\",\n      size: 16\n    });\n    break;\n\n   case MinimizeButtonIconType.MINIMIZE:\n    closeIcon = React.createElement(SubtractLarge, {\n      className: \"WACIcon__Subtract\",\n      size: 16\n    });\n    break;\n\n   case MinimizeButtonIconType.SIDE_PANEL_LEFT:\n    closeIsReversible = false;\n    closeIcon = React.createElement(SidePanelClose, {\n      className: \"WACIcon__SidePanelClose\"\n    });\n    break;\n\n   case MinimizeButtonIconType.SIDE_PANEL_RIGHT:\n    closeIsReversible = false;\n    closeReverseIcon = true;\n    closeIcon = React.createElement(SidePanelClose, {\n      className: \"WACIcon__SidePanelClose\"\n    });\n    break;\n\n   default:\n    {\n      closeIcon = React.createElement(SubtractLarge, {\n        className: \"WACIcon__Subtract\",\n        size: 16\n      });\n      break;\n    }\n  }\n  if (showCloseAndRestartButton && showRestartButton) {\n    throw new Error(\"You cannot enable both the restart button and the close-and-restart buttons.\");\n  }\n  const onConfirm = useCallback(() => {\n    setConfirmModelOpen(false);\n    onCloseAndRestart();\n  }, [ onCloseAndRestart ]);\n  useImperativeHandle(ref, () => ({\n    requestFocus: () => {\n      if (closeButtonRef.current) {\n        doFocusRef(closeButtonRef, false, true);\n        return true;\n      }\n      if (backButtonRef.current) {\n        doFocusRef(backButtonRef, false, true);\n        return true;\n      }\n      if (restartButtonRef.current) {\n        doFocusRef(restartButtonRef, false, true);\n        return true;\n      }\n      return false;\n    }\n  }));\n  function getComponentInMenu(item, index, list) {\n    switch (item.type) {\n     case ChatHeaderObjectType.LINK:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label,\n        url: item.url,\n        isNewTab: item.isNewTab,\n        onClick: () => {\n          doFocusRef(overflowRef);\n        }\n      });\n\n     case ChatHeaderObjectType.BUTTON:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label,\n        onClick: () => {\n          item.onClick?.();\n          doFocusRef(overflowRef);\n        }\n      });\n\n     case ChatHeaderObjectType.RADIO_GROUP:\n      {\n        const nextObject = list[index + 1];\n        return React.createElement(Fragment, {\n          key: index\n        }, index !== 0 && React.createElement(MenuItemDivider, null), React.createElement(ChatHeaderMenuItemRadioGroup, {\n          label: item.label,\n          items: item.items,\n          defaultSelectedItem: item.defaultSelectedItem,\n          selectedItem: selectedGroupMenuitems[item.label],\n          onChange: selectedItem => {\n            setSelectedGroupMenuItems(prevState => ({\n              ...prevState,\n              [item.label]: selectedItem\n            }));\n            item.onChange?.(selectedItem);\n          }\n        }), Boolean(nextObject) && nextObject.type !== ChatHeaderObjectType.RADIO_GROUP && React.createElement(MenuItemDivider, null));\n      }\n\n     case ChatHeaderObjectType.MENU:\n      return React.createElement(ChatHeaderMenuItem, {\n        key: index,\n        label: item.label\n      }, item.items.filter(menuItem => menuItem.type !== ChatHeaderObjectType.MENU).map(getComponentInMenu));\n\n     default:\n      return null;\n    }\n  }\n  function getComponentInChatHeader(headerObject, index) {\n    switch (headerObject.type) {\n     case ChatHeaderObjectType.LINK:\n      return React.createElement(ChatHeaderLink, {\n        key: index,\n        label: headerObject.label,\n        url: headerObject.url,\n        isNewTab: headerObject.isNewTab\n      });\n\n     case ChatHeaderObjectType.MENU:\n      return React.createElement(ChatHeaderMenuButton, {\n        key: index,\n        label: headerObject.label,\n        menuAlignment: \"bottom-start\"\n      }, headerObject.items.map(getComponentInMenu));\n\n     case ChatHeaderObjectType.BUTTON:\n      return React.createElement(Button, {\n        key: index,\n        kind: ButtonKindEnum.GHOST,\n        size: ButtonSizeEnum.MEDIUM,\n        onClick: headerObject.onClick\n      }, headerObject.label);\n\n     default:\n      return null;\n    }\n  }\n  let leftObjectsLength = 0;\n  let rightObjectsLength = 0;\n  if (enableChatHeaderConfig) {\n    leftObjectsLength = chatHeaderConfig?.left?.length ?? 0;\n    rightObjectsLength = chatHeaderConfig?.right?.length ?? 0;\n  }\n  const isLeftObjectsInOverflow = leftObjectsLength > maxVisibleHeaderObjects;\n  const isRightObjectsInOverflow = rightObjectsLength > maxVisibleHeaderObjects;\n  const hasChatHeaderObjects = leftObjectsLength || rightObjectsLength;\n  const renderChatHeaderObjectsInOverflow = hasChatHeaderObjects && (!isWideWidth || isLeftObjectsInOverflow || isRightObjectsInOverflow);\n  const hasOverflow = Boolean(overflowItems?.length) || renderChatHeaderObjectsInOverflow;\n  const isRTL = document.dir === \"rtl\";\n  let leftChatHeaderComponents = null;\n  let rightChatHeaderComponents = null;\n  let leftChatHeaderMenuComponents = null;\n  let rightChatHeaderMenuComponents = null;\n  if (enableChatHeaderConfig) {\n    leftChatHeaderComponents = chatHeaderConfig?.left?.slice(0, isLeftObjectsInOverflow ? maxVisibleHeaderObjects : undefined).map(getComponentInChatHeader);\n    rightChatHeaderComponents = chatHeaderConfig?.right?.slice(0, isRightObjectsInOverflow ? maxVisibleHeaderObjects : undefined).map(getComponentInChatHeader);\n    leftChatHeaderMenuComponents = isLeftObjectsInOverflow && chatHeaderConfig?.left?.slice(maxVisibleHeaderObjects).map(getComponentInMenu);\n    rightChatHeaderMenuComponents = isRightObjectsInOverflow && chatHeaderConfig?.right?.slice(maxVisibleHeaderObjects).map(getComponentInMenu);\n  }\n  let leftContent;\n  if (hasOverflow) {\n    leftContent = React.createElement(ChatHeaderOverflowMenu, {\n      className: \"WACHeader__OverflowMenu\",\n      renderIcon: overflowIsOpen ? Close : Menu,\n      iconDescription: languagePack.header_overflowMenu_options,\n      ariaLabel: languagePack.components_overflow_ariaLabel,\n      containerRef: overflowRef,\n      tooltipPosition: isRTL ? \"left\" : \"right\",\n      menuAlignment: \"bottom-start\",\n      onOpen: () => {\n        setTimeout(() => {\n          setOverflowIsOpen(true);\n        });\n      },\n      onClose: () => {\n        setOverflowIsOpen(false);\n      }\n    }, overflowItems?.map((item, index) => React.createElement(MenuItem, {\n      key: item,\n      label: item,\n      onClick: () => {\n        doFocusRef(overflowRef);\n        overflowClicked(index);\n      }\n    })), leftChatHeaderMenuComponents, rightChatHeaderMenuComponents);\n  } else if (showBackButton) {\n    leftContent = React.createElement(HeaderButton, {\n      className: \"WACHeader__BackButton\",\n      label: labelBackButton,\n      onClick: onClickBack,\n      buttonRef: backButtonRef,\n      buttonKind: backButtonType,\n      tooltipPosition: isRTL ? \"left\" : \"right\"\n    }, backContent || React.createElement(DownToBottom, null));\n  }\n  useEffect(() => {\n    if (!isWideWidth) {\n      serviceManager.store.dispatch(actions.setMaxVisibleHeaderObjects(0));\n      return undefined;\n    }\n    if (!enableChatHeaderConfig) {\n      return undefined;\n    }\n    const centerResizeObserver = new ResizeObserver(() => {\n      const centerGapElement = centerGapRef.current;\n      if (centerGapElement) {\n        if (centerGapElement.offsetWidth > HEADER_OBJECTS_GAP_MIN_SIZE || centerGapElement.offsetWidth === 0) {\n          let newTotal = Math.floor((centerObjectsRef.current.offsetWidth - HEADER_OBJECTS_GAP_MIN_SIZE) / (HEADER_OBJECTS_GAP_MIN_SIZE * 2));\n          if (newTotal < 0) {\n            newTotal = 0;\n          }\n          setTimeout(() => {\n            serviceManager.store.dispatch(actions.setMaxVisibleHeaderObjects(newTotal));\n          });\n        }\n      }\n    });\n    centerResizeObserver.observe(centerObjectsRef.current);\n    return () => {\n      centerResizeObserver.disconnect();\n    };\n  }, [ isWideWidth, enableChatHeaderConfig, serviceManager ]);\n  useEffect(() => {\n    if (isImageError && prevChatHeaderAvatarURL !== headerAvatarConfig?.url) {\n      setIsImageError(false);\n    }\n  }, [ prevChatHeaderAvatarURL, headerAvatarConfig?.url, isImageError ]);\n  return React.createElement(\"div\", {\n    className: cx(\"WACHeader\", `WAC--${brandColor}Color`, {\n      \"WACHeader--withAvatar\": hasHeaderAvatar\n    })\n  }, React.createElement(\"div\", {\n    className: cx(\"WACHeader--content\", `WAC--${brandColor}Color`),\n    \"data-floating-menu-container\": true\n  }, leftContent && React.createElement(\"div\", {\n    className: \"WACHeader__Buttons WACHeader__LeftButtons\"\n  }, leftContent), showCenter && React.createElement(\"div\", {\n    className: \"WACHeader__CenterContainer\"\n  }, hasHeaderAvatar && React.createElement(ChatHeaderAvatar, {\n    url: headerAvatarConfig.url,\n    corners: headerAvatarConfig.corners,\n    alt: languagePack.header_ariaBotAvatar,\n    onError: () => setIsImageError(true)\n  }), (chatHeaderTitle || chatHeaderDisplayName) && React.createElement(\"div\", {\n    className: \"WACHeader__TitleContainer\"\n  }, React.createElement(ChatHeaderTitle, {\n    title: chatHeaderTitle,\n    name: chatHeaderDisplayName\n  })), isWideWidth && Boolean(leftObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__Separator\"\n  }), React.createElement(\"div\", {\n    ref: centerObjectsRef,\n    className: \"WACHeader__HeaderObjects\"\n  }, isWideWidth && Boolean(leftObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__LeftItems\"\n  }, leftChatHeaderComponents), React.createElement(\"div\", {\n    ref: centerGapRef,\n    className: \"WACHeader__CenterGap\"\n  }), isWideWidth && Boolean(rightObjectsLength) && React.createElement(\"div\", {\n    className: \"WACHeader__RightItems\"\n  }, rightChatHeaderComponents))), React.createElement(\"div\", {\n    className: \"WACHeader__Buttons WACHeader__RightButtons\"\n  }, useAITheme && React.createElement(AISlug, {\n    className: \"WACHeader__Slug\",\n    size: AI_LABEL_SIZE.EXTRA_SMALL,\n    alignment: isRTL ? POPOVER_ALIGNMENT.BOTTOM_LEFT : POPOVER_ALIGNMENT.BOTTOM_RIGHT\n  }, React.createElement(\"div\", {\n    slot: \"body-text\"\n  }, React.createElement(\"h4\", {\n    className: \"WACHeader__Slug-title\"\n  }, languagePack.ai_slug_title), React.createElement(\"div\", {\n    className: \"WACHeader__Slug-description\"\n  }, React.createElement(\"div\", null, languagePack.ai_slug_description), !isHidden && React.createElement(WriteableElement, {\n    slotName: WriteableElementName.AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT,\n    id: `aiTooltipAfterDescription${serviceManager.namespace.suffix}`\n  })))), showRestartButton && React.createElement(HeaderButton, {\n    className: \"WACHeader__RestartButton\",\n    label: languagePack.buttons_restart,\n    onClick: onClickRestart,\n    buttonRef: restartButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\"\n  }, React.createElement(Restart, null)), !useHideCloseButton && React.createElement(HeaderButton, {\n    className: cx(\"WACHeader__CloseButton\", {\n      WACReverseIcon: closeReverseIcon\n    }),\n    isReversible: closeIsReversible,\n    label: languagePack.launcher_isOpen,\n    onClick: async () => {\n      onClickClose();\n    },\n    buttonRef: closeButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\",\n    testId: makeTestId(PageObjectId.CLOSE_CHAT, testIdPrefix)\n  }, closeIcon), showCloseAndRestartButton && React.createElement(HeaderButton, {\n    className: \"WACHeader__CloseAndRestartButton\",\n    label: languagePack.header_ariaCloseRestart,\n    onClick: () => setConfirmModelOpen(true),\n    buttonRef: closeAndRestartButtonRef,\n    tooltipPosition: isRTL ? \"right\" : \"left\"\n  }, React.createElement(CloseLarge, {\n    className: \"WACIcon__Close\"\n  }))), confirmModelOpen && React.createElement(ConfirmModal, {\n    title: languagePack.closeAndRestartModal_title,\n    message: languagePack.closeAndRestartModal_message,\n    onConfirm: onConfirm,\n    onCancel: closeConfirmModel,\n    cancelButtonLabel: languagePack.closeAndRestartModal_cancel,\n    confirmButtonLabel: languagePack.closeAndRestartModal_confirm,\n    modalAnnounceMessage: languagePack.closeAndRestartModal_message,\n    serviceManager: serviceManager\n  })));\n}\n\nfunction HeaderButton({onClick: onClick, buttonRef: buttonRef, label: label, className: className, children: children, buttonKind: buttonKind, isReversible: isReversible = true, tooltipPosition: tooltipPosition, testId: testId}) {\n  return React.createElement(Button, {\n    ref: buttonRef,\n    className: cx(className, {\n      WACDirectionHasReversibleSVG: isReversible\n    }),\n    onClick: onClick,\n    hasIconOnly: true,\n    iconDescription: label,\n    size: ButtonSizeEnum.MEDIUM,\n    kind: buttonKind || ButtonKindEnum.GHOST,\n    tooltipPosition: tooltipPosition,\n    \"data-testid\": testId\n  }, children);\n}\n\nconst HeaderExport = React.memo(forwardRef(Header));\n\nexport { HeaderExport as Header };\n","import React from \"react\";\n\nimport { isElement, isInputNode, isTextAreaNode, isImageNode, isTextNode } from \"../../utils/domUtils.js\";\n\nimport VisuallyHidden from \"../util/VisuallyHidden.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst ANNOUNCE_INPUT_TYPES = new Set([ \"button\", \"date\", \"datetime-local\", \"email\", \"file\", \"month\", \"number\", \"range\", \"reset\", \"search\", \"submit\", \"tel\", \"text\", \"time\", \"url\", \"week\" ]);\n\nconst ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE = \"data-wac-exclude-node-read\";\n\nclass AriaAnnouncerComponent extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.ref1 = React.createRef();\n    this.ref2 = React.createRef();\n    this.useRef1 = true;\n    this.doAnnouncements = () => {\n      const strings = [];\n      this.pendingValues.forEach(elementToAnnounce => {\n        if (typeof elementToAnnounce === \"string\") {\n          strings.push(elementToAnnounce);\n        } else {\n          nodeToText(elementToAnnounce, strings);\n        }\n      });\n      const useElement = this.useRef1 ? this.ref1.current : this.ref2.current;\n      if (useElement) {\n        useElement.innerText = strings.join(\" \");\n        const clearElement = this.useRef1 ? this.ref2.current : this.ref1.current;\n        clearElement.innerHTML = \"\";\n      }\n      this.useRef1 = !this.useRef1;\n      this.pendingValues = null;\n    };\n  }\n  announceValue(value) {\n    if (!value) {\n      return;\n    }\n    if (!this.pendingValues) {\n      this.pendingValues = [];\n      setTimeout(this.doAnnouncements, 250);\n    }\n    if (typeof value === \"string\" || hasNodeType(value)) {\n      this.pendingValues.push(value);\n    } else if (value.messageID) {\n      const formattedMessage = this.props.intl.formatMessage({\n        id: value.messageID\n      }, value.messageValues);\n      this.pendingValues.push(formattedMessage);\n    } else {\n      this.pendingValues.push(value.messageText);\n    }\n  }\n  render() {\n    return React.createElement(VisuallyHidden, {\n      className: \"WACAriaAnnouncer\"\n    }, React.createElement(\"div\", {\n      ref: this.ref1,\n      \"aria-live\": \"polite\"\n    }), React.createElement(\"div\", {\n      ref: this.ref2,\n      \"aria-live\": \"polite\"\n    }));\n  }\n}\n\nfunction nodeToText(node, strings) {\n  if (isElement(node)) {\n    if (window.getComputedStyle(node).display !== \"none\" && node.getAttribute(\"aria-hidden\") !== \"true\" && !node.hasAttribute(ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE)) {\n      trimAndPush(node.getAttribute(\"aria-label\"), strings);\n      if (isInputNode(node) && ANNOUNCE_INPUT_TYPES.has(node.type.toLowerCase())) {\n        if (node.value === \"\") {\n          trimAndPush(node.placeholder, strings);\n        } else {\n          trimAndPush(node.value, strings);\n        }\n      } else if (isTextAreaNode(node)) {\n        if (node.value === \"\") {\n          trimAndPush(node.placeholder, strings);\n        }\n      } else if (isImageNode(node)) {\n        trimAndPush(node.alt, strings);\n      }\n      if (node.shadowRoot) {\n        node.shadowRoot.childNodes?.forEach(childNode => {\n          nodeToText(childNode, strings);\n        });\n      }\n      if (node.childNodes) {\n        node.childNodes.forEach(childNode => {\n          nodeToText(childNode, strings);\n        });\n      }\n    }\n  } else if (isTextNode(node)) {\n    trimAndPush(node.data, strings);\n  }\n}\n\nfunction trimAndPush(value, strings) {\n  if (value) {\n    value = value.trim();\n    if (value) {\n      strings.push(value.replaceAll(\"\\n\", \" \"));\n    }\n  }\n}\n\nfunction hasNodeType(value) {\n  return value.nodeType !== undefined;\n}\n\nexport { AriaAnnouncerComponent, nodeToText };\n","import React, { forwardRef, useRef, useImperativeHandle, useCallback } from \"react\";\n\nimport { useSelector } from \"react-redux\";\n\nimport { Header as HeaderExport } from \"../header/Header.js\";\n\nimport { OverlayPanelName } from \"../OverlayPanel.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HomeScreenHeader(props, ref) {\n  const {brandColor: brandColor, onClose: onClose, onRestart: onRestart, onCloseAndRestart: onCloseAndRestart} = props;\n  const showRestartButton = useSelector(state => state.config.public.showRestartButton || state.config.public.headerConfig?.showRestartButton);\n  const showBackButton = useSelector(state => state.persistedToBrowserStorage.chatState.homeScreenState.showBackToBot);\n  const displayName = useSelector(state => state.headerDisplayName);\n  const customMenuOptions = useSelector(state => state.customMenuOptions);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const headerRef = useRef();\n  useImperativeHandle(ref, () => headerRef.current);\n  const hideCloseAndRestartButton = !showBackButton;\n  const overflowClicked = useCallback(index => {\n    const {handler: handler} = customMenuOptions[index];\n    handler();\n  }, [ customMenuOptions ]);\n  const overflowItems = customMenuOptions?.map(option => option.text);\n  return React.createElement(\"div\", {\n    className: \"WACHomeScreenHeader\"\n  }, React.createElement(HeaderExport, {\n    ref: headerRef,\n    displayName: displayName,\n    showCenter: true,\n    showRestartButton: showRestartButton,\n    hideCloseAndRestartButton: hideCloseAndRestartButton,\n    onClickRestart: onRestart,\n    onClickClose: onClose,\n    onCloseAndRestart: onCloseAndRestart,\n    overflowClicked: overflowClicked,\n    overflowItems: overflowItems,\n    useAITheme: useAITheme,\n    brandColor: brandColor,\n    testIdPrefix: OverlayPanelName.HOME_SCREEN\n  }));\n}\n\nconst HomeScreenHeaderExport = React.memo(forwardRef(HomeScreenHeader));\n\nexport { HomeScreenHeaderExport as HomeScreenHeader };\n","import dayjs from \"dayjs\";\n\nimport enLocaleData from \"dayjs/locale/en.js\";\n\nimport IntlMessageFormat from \"intl-messageformat\";\n\nimport React from \"react\";\n\nimport { consoleError } from \"./miscUtils.js\";\n\nimport \"../../../types/instance/apiTypes.js\";\n\nimport enLanguagePack from \"../../languages/en.json.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const locales = {\n  ar: () => import(\"dayjs/locale/ar.js\"),\n  \"ar-dz\": () => import(\"dayjs/locale/ar-dz.js\"),\n  \"ar-kw\": () => import(\"dayjs/locale/ar-kw.js\"),\n  \"ar-ly\": () => import(\"dayjs/locale/ar-ly.js\"),\n  \"ar-ma\": () => import(\"dayjs/locale/ar-ma.js\"),\n  \"ar-sa\": () => import(\"dayjs/locale/ar-sa.js\"),\n  \"ar-tn\": () => import(\"dayjs/locale/ar-tn.js\"),\n  cs: () => import(\"dayjs/locale/cs.js\"),\n  de: () => import(\"dayjs/locale/de.js\"),\n  \"de-at\": () => import(\"dayjs/locale/de-at.js\"),\n  \"de-ch\": () => import(\"dayjs/locale/de-ch.js\"),\n  en: () => import(\"dayjs/locale/en.js\"),\n  \"en-au\": () => import(\"dayjs/locale/en-au.js\"),\n  \"en-ca\": () => import(\"dayjs/locale/en-ca.js\"),\n  \"en-gb\": () => import(\"dayjs/locale/en-gb.js\"),\n  \"en-ie\": () => import(\"dayjs/locale/en-ie.js\"),\n  \"en-il\": () => import(\"dayjs/locale/en-il.js\"),\n  \"en-nz\": () => import(\"dayjs/locale/en-nz.js\"),\n  es: () => import(\"dayjs/locale/es.js\"),\n  \"es-do\": () => import(\"dayjs/locale/es-do.js\"),\n  \"es-us\": () => import(\"dayjs/locale/es-us.js\"),\n  nl: () => import(\"dayjs/locale/nl.js\"),\n  fr: () => import(\"dayjs/locale/fr.js\"),\n  \"fr-ca\": () => import(\"dayjs/locale/fr-ca.js\"),\n  \"fr-ch\": () => import(\"dayjs/locale/fr-ch.js\"),\n  it: () => import(\"dayjs/locale/it.js\"),\n  \"it-ch\": () => import(\"dayjs/locale/it-ch.js\"),\n  ja: () => import(\"dayjs/locale/ja.js\"),\n  ko: () => import(\"dayjs/locale/ko.js\"),\n  pt: () => import(\"dayjs/locale/pt.js\"),\n  \"pt-br\": () => import(\"dayjs/locale/pt-br.js\"),\n  zh: () => import(\"dayjs/locale/zh-cn.js\"),\n  \"zh-cn\": () => import(\"dayjs/locale/zh-cn.js\"),\n  \"zh-tw\": () => import(\"dayjs/locale/zh-tw.js\"),\n  \"zh-mo\": () => import(\"dayjs/locale/zh-tw.js\"),\n  \"zh-hk\": () => import(\"dayjs/locale/zh-tw.js\")\n};\n\nfunction isSupportedLocale(locale, object) {\n  if (!locale) {\n    return null;\n  }\n  locale = locale.toLowerCase().replace(/_/g, \"-\");\n  if (object[locale]) {\n    return locale;\n  }\n  const language = locale.substring(0, 2);\n  if (object[language]) {\n    return language;\n  }\n  return null;\n}\n\nfunction findSupportedKey(requestedLocale, object, objectType) {\n  const requestedSupported = isSupportedLocale(requestedLocale, object);\n  if (requestedSupported) {\n    return requestedSupported;\n  }\n  if (requestedLocale) {\n    const keyList = JSON.stringify(Object.keys(object));\n    consoleError(`The requested locale \"${requestedLocale}\" does not contain a supported ${objectType}. We are defaulting to \"en\". The supported values are ${keyList}.`);\n  }\n  return \"en\";\n}\n\nasync function loadLocale(requestedLocale) {\n  try {\n    const localeKey = findSupportedKey(requestedLocale, locales, \"locale\");\n    const localeModule = await locales[localeKey]();\n    if (localeModule) {\n      return localeModule.default;\n    }\n    consoleError(`The locale data for \"${localeKey}\" did not load. The application will default to \"en\".`);\n  } catch (error) {\n    consoleError(`An error occurred loading the locale data for \"${requestedLocale}\". The application will default to \"en\".`, error);\n  }\n  return enLocaleData;\n}\n\nasync function loadLanguagePack(providedLanguagePack) {\n  if (providedLanguagePack) {\n    return fillWithEnglish(providedLanguagePack);\n  }\n  return enLanguagePack;\n}\n\nfunction fillWithEnglish(languagePack) {\n  return {\n    ...enLanguagePack,\n    ...languagePack\n  };\n}\n\nfunction handleBTag(chunks) {\n  return React.createElement(\"b\", null, chunks);\n}\n\nfunction handleBRTag() {\n  return React.createElement(\"br\", null);\n}\n\nfunction addHTMLSupport(values) {\n  values.b = handleBTag;\n  values.br = handleBRTag;\n  return values;\n}\n\nasync function loadDayjsLocale(locale) {\n  if (!dayjs.Ls[locale]) {\n    const previousLocale = dayjs.locale();\n    const localePack = await loadLocale(locale);\n    dayjs.locale(localePack);\n    dayjs.locale(previousLocale);\n    const isLoaded = Boolean(dayjs.Ls[locale]);\n    if (!isLoaded && locale.length === 2) {\n      throw Error(\"Locale is not recognized.\");\n    } else if (!isLoaded) {\n      return loadDayjsLocale(locale.substring(0, 2));\n    }\n  }\n  return locale;\n}\n\nfunction formatMessage(intl, id, values) {\n  return intl.formatMessage({\n    id: id\n  }, values);\n}\n\nfunction createEnglishFormat(key) {\n  return new IntlMessageFormat(enLanguagePack[key], \"en-US\");\n}\n\nexport { addHTMLSupport, createEnglishFormat, formatMessage, loadDayjsLocale, loadLanguagePack, loadLocale };\n","import { useContext } from \"react\";\n\nimport { LanguagePackContext } from \"../contexts/LanguagePackContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useLanguagePack() {\n  return useContext(LanguagePackContext);\n}\n\nexport { useLanguagePack };\n","import cx from \"classnames\";\n\nimport React from \"react\";\n\nimport { HideComponentContext } from \"../../contexts/HideComponentContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function HideComponent(props) {\n  const {hidden: hidden, children: children, className: className, ...htmlAttributes} = props;\n  return React.createElement(HideComponentContext.Provider, {\n    value: hidden\n  }, React.createElement(\"div\", {\n    className: cx(className, {\n      WAC__hidden: hidden\n    }),\n    ...htmlAttributes\n  }, children));\n}\n\nexport { HideComponent };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const WindowSizeContext = React.createContext(null);\n\nexport { WindowSizeContext };\n","export { CarbonTheme } from \"../config/PublicConfig.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var CarbonThemeClassNames;\n\n(function(CarbonThemeClassNames) {\n  CarbonThemeClassNames[\"WHITE\"] = \"cds--white\";\n  CarbonThemeClassNames[\"G10\"] = \"cds--g10\";\n  CarbonThemeClassNames[\"G90\"] = \"cds--g90\";\n  CarbonThemeClassNames[\"G100\"] = \"cds--g100\";\n})(CarbonThemeClassNames || (CarbonThemeClassNames = {}));\n\nvar ButtonKindEnum;\n\n(function(ButtonKindEnum) {\n  ButtonKindEnum[\"PRIMARY\"] = \"primary\";\n  ButtonKindEnum[\"SECONDARY\"] = \"secondary\";\n  ButtonKindEnum[\"DANGER\"] = \"danger\";\n  ButtonKindEnum[\"GHOST\"] = \"ghost\";\n  ButtonKindEnum[\"DANGER_PRIMARY\"] = \"danger--primary\";\n  ButtonKindEnum[\"DANGER_GHOST\"] = \"danger--ghost\";\n  ButtonKindEnum[\"DANGER_TERTIARY\"] = \"danger--tertiary\";\n  ButtonKindEnum[\"TERTIARY\"] = \"tertiary\";\n})(ButtonKindEnum || (ButtonKindEnum = {}));\n\nvar ButtonSizeEnum;\n\n(function(ButtonSizeEnum) {\n  ButtonSizeEnum[\"SMALL\"] = \"sm\";\n  ButtonSizeEnum[\"MEDIUM\"] = \"md\";\n  ButtonSizeEnum[\"LARGE\"] = \"lg\";\n  ButtonSizeEnum[\"XLARGE\"] = \"xl\";\n  ButtonSizeEnum[\"XXLARGE\"] = \"2xl\";\n})(ButtonSizeEnum || (ButtonSizeEnum = {}));\n\nexport { ButtonKindEnum, ButtonSizeEnum, CarbonThemeClassNames };\n","import { useContext } from \"react\";\n\nimport { ServiceManagerContext } from \"../contexts/ServiceManagerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useServiceManager() {\n  return useContext(ServiceManagerContext);\n}\n\nexport { useServiceManager };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ModalPortalRootContext = React.createContext(null);\n\nexport { ModalPortalRootContext };\n","import { v4 } from \"uuid\";\n\nexport { UUIDType } from \"./UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function uuid(_type) {\n  return v4();\n}\n\nexport { uuid };\n","import React, { useContext, useEffect } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function AriaLiveMessage(props) {\n  const ariaAnnouncer = useContext(AriaAnnouncerContext);\n  useEffect(() => {\n    ariaAnnouncer(props.message);\n  }, [ ariaAnnouncer, props.message ]);\n  return React.createElement(\"div\", null);\n}\n\nconst AriaLiveMessageExport = React.memo(AriaLiveMessage);\n\nexport { AriaLiveMessageExport as AriaLiveMessage };\n","import { compute } from \"compute-scroll-into-view\";\n\nimport memoizeOne from \"memoize-one\";\n\nimport { tabbable } from \"tabbable\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const SCROLLBAR_WIDTH = memoizeOne(getScrollbarWidth);\n\nfunction doScrollElementIntoView(element, animate = false, boundary) {\n  if (element) {\n    const actions = compute(element, {\n      boundary: boundary,\n      scrollMode: \"if-needed\",\n      block: \"nearest\",\n      inline: \"nearest\"\n    });\n    actions.forEach(({el: el, top: top, left: left}) => {\n      doScrollElement(el, Math.round(top), Math.round(left), animate);\n    });\n  }\n}\n\nfunction doScrollElement(element, scrollTop, scrollLeft, animate = false) {\n  setTimeout(() => {\n    if (element) {\n      if (animate && element.scroll) {\n        element.scroll({\n          top: scrollTop,\n          left: scrollLeft,\n          behavior: \"smooth\"\n        });\n      } else {\n        element.scrollTop = scrollTop;\n        element.scrollLeft = scrollLeft;\n      }\n    }\n  });\n}\n\nfunction getScrollbarWidth() {\n  const outer = document.createElement(\"div\");\n  outer.style.visibility = \"hidden\";\n  outer.style.overflow = \"scroll\";\n  document.body.appendChild(outer);\n  const inner = document.createElement(\"div\");\n  outer.appendChild(inner);\n  const scrollbarWidth = outer.offsetWidth - inner.offsetWidth;\n  outer.parentNode.removeChild(outer);\n  return scrollbarWidth;\n}\n\nfunction doFocus(element, preventScroll = false) {\n  if (element && document.activeElement !== element && tabbable(element, {\n    getShadowRoot: true\n  })) {\n    element.focus({\n      preventScroll: preventScroll\n    });\n  }\n}\n\nfunction doFocusRef(ref, defer = false, preventScroll = false) {\n  if (ref) {\n    if (defer) {\n      setTimeout(() => {\n        doFocusRef(ref);\n      });\n    } else if (ref.current) {\n      doFocus(ref.current, preventScroll);\n    }\n  }\n}\n\nfunction isElement(node) {\n  return node?.nodeType === 1;\n}\n\nfunction isTextNode(node) {\n  return node?.nodeType === 3;\n}\n\nfunction isInputNode(node) {\n  return node?.tagName === \"INPUT\";\n}\n\nfunction isImageNode(node) {\n  return node?.tagName === \"IMG\";\n}\n\nfunction isTextAreaNode(node) {\n  return node?.tagName === \"TEXTAREA\";\n}\n\nfunction focusOnFirstFocusableItemInArrayOfElements(elements) {\n  for (let index = 0; index < elements.length; index++) {\n    if (focusOnFirstFocusableElement(elements[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction focusOnFirstFocusableElement(parentElement) {\n  const focusableElements = tabbable(parentElement, {\n    getShadowRoot: true\n  });\n  if (focusableElements?.length) {\n    doFocus(focusableElements[0]);\n    return true;\n  }\n  return false;\n}\n\nfunction isEnterKey(event) {\n  if (event.key === \"Enter\" && !hasModifiers(event)) {\n    return !(event.isComposing || event.keyCode === 229);\n  }\n  return false;\n}\n\nfunction hasModifiers(event) {\n  return event.shiftKey || event.altKey || event.metaKey || event.ctrlKey;\n}\n\nfunction getScrollBottom(element) {\n  if (element) {\n    return element.scrollHeight - element.offsetHeight - element.scrollTop;\n  }\n  return 0;\n}\n\nexport { SCROLLBAR_WIDTH, doFocusRef, doScrollElement, doScrollElementIntoView, focusOnFirstFocusableItemInArrayOfElements, getScrollBottom, isElement, isEnterKey, isImageNode, isInputNode, isTextAreaNode, isTextNode };\n","import cloneDeep from \"lodash-es/cloneDeep.js\";\n\nimport \"./constants.js\";\n\nimport { findLastWithMap } from \"./lang/arrayUtils.js\";\n\nimport { uuid } from \"./lang/uuid.js\";\n\nimport { MessageResponseTypes, MessageInputType, ButtonItemType, HumanAgentMessageType, InternalMessageRequestType } from \"../../../types/messaging/Messages.js\";\n\nimport { UUIDType } from \"./lang/UUIDType.js\";\n\nimport { FileStatusValue } from \"../../../types/instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const THREAD_ID_MAIN = \"main\";\n\nfunction isResponse(message) {\n  return message && message.output !== undefined;\n}\n\nfunction isDateResponseType(localMessage) {\n  return localMessage?.item.response_type === MessageResponseTypes.DATE;\n}\n\nfunction addDefaultsToMessage(fullMessage) {\n  if (!fullMessage.id) {\n    fullMessage.id = uuid(UUIDType.MESSAGE);\n  }\n  if (!fullMessage.thread_id) {\n    fullMessage.thread_id = THREAD_ID_MAIN;\n  }\n  if (!fullMessage.history) {\n    fullMessage.history = {};\n  }\n  if (!fullMessage.ui_state_internal) {\n    fullMessage.ui_state_internal = {};\n  }\n  if (!fullMessage.history.timestamp) {\n    fullMessage.history.timestamp = Date.now();\n  }\n  if (fullMessage.ui_state_internal.from_history === undefined) {\n    fullMessage.ui_state_internal.from_history = false;\n  }\n  return fullMessage;\n}\n\nfunction isRequest(message) {\n  return message?.input !== undefined;\n}\n\nfunction isLiveHumanAgentMessage(message) {\n  return Boolean(message.item.agent_message_type);\n}\n\nfunction hasLiveHumanAgentMessage(message) {\n  return isResponse(message) && Boolean(message.output.generic?.find(item => item?.agent_message_type)) || isRequest(message) && Boolean(message.input.agent_message_type);\n}\n\nfunction isEventRequest(message) {\n  return message?.input?.message_type === MessageInputType.EVENT;\n}\n\nfunction isTextItem(item) {\n  return item && item.response_type === \"text\" && item.text !== undefined;\n}\n\nfunction isTyping(message) {\n  return message.response_type === MessageResponseTypes.PAUSE && message.typing == true;\n}\n\nfunction isPause(message) {\n  return message.response_type === MessageResponseTypes.PAUSE;\n}\n\nfunction isOptionItem(item) {\n  return item?.response_type === MessageResponseTypes.OPTION && item.options !== undefined;\n}\n\nfunction createMessageRequestForChoice(choice, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    ...cloneDeep(choice.value)\n  };\n  messageRequest.history = {\n    label: choice.label,\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageRequestForButtonItemOption(buttonItem, relatedResponseID) {\n  const messageRequest = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: THREAD_ID_MAIN,\n    input: null\n  };\n  if (buttonItem.value?.input?.text) {\n    messageRequest.input = cloneDeep(buttonItem.value.input);\n  } else {\n    messageRequest.input = {\n      text: buttonItem.label\n    };\n  }\n  messageRequest.history = {\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createWelcomeRequest() {\n  return addDefaultsToMessage({\n    id: uuid(UUIDType.MESSAGE),\n    input: {\n      text: \"\"\n    },\n    history: {\n      silent: true,\n      is_welcome_request: true\n    },\n    thread_id: THREAD_ID_MAIN\n  });\n}\n\nfunction createMessageRequestForText(text) {\n  return addDefaultsToMessage({\n    input: {\n      text: text,\n      message_type: MessageInputType.TEXT\n    }\n  });\n}\n\nfunction createMessageRequestForFileUpload(upload) {\n  return addDefaultsToMessage({\n    id: upload.id,\n    input: {\n      text: upload.file.name,\n      message_type: InternalMessageRequestType.FILE,\n      agent_message_type: HumanAgentMessageType.FROM_USER\n    },\n    history: {\n      file_upload_status: FileStatusValue.UPLOADING\n    }\n  });\n}\n\nfunction createMessageRequestForDate(inputString, userString, relatedResponseID) {\n  const messageRequest = createMessageRequestForText(inputString);\n  messageRequest.history = {\n    label: userString,\n    related_message_id: relatedResponseID\n  };\n  return messageRequest;\n}\n\nfunction createMessageResponseForText(text, threadID = THREAD_ID_MAIN, responseType = MessageResponseTypes.TEXT, context) {\n  const textItem = {\n    response_type: responseType,\n    text: text\n  };\n  const messageResponse = {\n    id: uuid(UUIDType.MESSAGE),\n    thread_id: threadID,\n    output: {\n      generic: [ textItem ]\n    }\n  };\n  return messageResponse;\n}\n\nfunction createMessageResponseForItem(item, context) {\n  const messageResponse = {\n    output: {\n      generic: [ item ]\n    }\n  };\n  return addDefaultsToMessage(messageResponse);\n}\n\nfunction isConnectToHumanAgent(response) {\n  return response?.response_type === MessageResponseTypes.CONNECT_TO_HUMAN_AGENT;\n}\n\nfunction isCardResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CARD;\n}\n\nfunction isCarouselResponseType(response) {\n  return response?.response_type === MessageResponseTypes.CAROUSEL;\n}\n\nfunction isButtonResponseType(response) {\n  return response?.response_type === MessageResponseTypes.BUTTON;\n}\n\nfunction isShowPanelButtonType(response) {\n  return isButtonResponseType(response) && response.button_type === ButtonItemType.SHOW_PANEL;\n}\n\nfunction isResponseWithNestedItems(item) {\n  if (isButtonResponseType(item)) {\n    return hasBodyOrFooter(item.panel);\n  }\n  if (isCardResponseType(item)) {\n    return hasBodyOrFooter(item);\n  }\n  if (isCarouselResponseType(item)) {\n    return item.items !== undefined;\n  }\n  return isGridResponseType(item);\n}\n\nfunction hasBodyOrFooter(item) {\n  return item?.body !== undefined || item?.footer !== undefined;\n}\n\nfunction renderAsUserDefinedMessage(messageItem) {\n  const responseType = messageItem.response_type;\n  switch (responseType) {\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.OPTION:\n   case MessageResponseTypes.CONNECT_TO_HUMAN_AGENT:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.DATE:\n   case MessageResponseTypes.CONVERSATIONAL_SEARCH:\n   case MessageResponseTypes.TABLE:\n   case MessageResponseTypes.INLINE_ERROR:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.CAROUSEL:\n   case MessageResponseTypes.BUTTON:\n   case MessageResponseTypes.GRID:\n    return false;\n\n   default:\n    return !renderAsTour(messageItem);\n  }\n}\n\nfunction renderAsTour(messageItem) {\n  return hasTourUserDefinedType(messageItem);\n}\n\nfunction hasTourUserDefinedType(message) {\n  return message?.user_defined?.user_defined_type === \"IBM_BETA_JOURNEYS_TOUR\";\n}\n\nfunction hasServiceDesk(config) {\n  return Boolean(config.public.serviceDeskFactory);\n}\n\nfunction isItemSupportedInResponseBody(item) {\n  switch (item.response_type) {\n   case MessageResponseTypes.IMAGE:\n   case MessageResponseTypes.IFRAME:\n   case MessageResponseTypes.VIDEO:\n   case MessageResponseTypes.AUDIO:\n   case MessageResponseTypes.TEXT:\n   case MessageResponseTypes.USER_DEFINED:\n   case MessageResponseTypes.CARD:\n   case MessageResponseTypes.GRID:\n    return true;\n\n   default:\n    return false;\n  }\n}\n\nfunction isSingleItemCarousel(messageItem) {\n  return isCarouselResponseType(messageItem) && messageItem.items.length === 1;\n}\n\nfunction isGridResponseType(item) {\n  return item?.response_type === MessageResponseTypes.GRID;\n}\n\nfunction getOptionType(preference, totalOptions) {\n  let type = \"button\";\n  if (preference && preference === \"button\") {\n    type = \"button\";\n  } else if (preference && preference === \"dropdown\") {\n    type = \"dropdown\";\n  } else if (totalOptions > 4) {\n    type = \"dropdown\";\n  }\n  return type;\n}\n\nfunction isStreamPartialItem(chunk) {\n  return Boolean(chunk.partial_item);\n}\n\nfunction isStreamCompleteItem(chunk) {\n  return Boolean(chunk.complete_item);\n}\n\nfunction isStreamFinalResponse(chunk) {\n  return Boolean(chunk.final_response);\n}\n\nfunction streamItemID(messageID, item) {\n  const itemID = item?.streaming_metadata?.id;\n  if (!itemID) {\n    return null;\n  }\n  return `${messageID}-${itemID}`;\n}\n\nfunction getMediaDimensions(item) {\n  return item.dimensions;\n}\n\nfunction getLastBotResponseWithContext(state) {\n  const messageIDs = state.botMessageState.messageIDs || [];\n  return findLastWithMap(messageIDs, state.allMessagesByID, message => isResponse(message) && !hasLiveHumanAgentMessage(message) && Boolean(message.context));\n}\n\nexport { THREAD_ID_MAIN, addDefaultsToMessage, createMessageRequestForButtonItemOption, createMessageRequestForChoice, createMessageRequestForDate, createMessageRequestForFileUpload, createMessageRequestForText, createMessageResponseForItem, createMessageResponseForText, createWelcomeRequest, getLastBotResponseWithContext, getMediaDimensions, getOptionType, hasServiceDesk, hasTourUserDefinedType, isButtonResponseType, isCardResponseType, isCarouselResponseType, isConnectToHumanAgent, isDateResponseType, isEventRequest, isGridResponseType, isItemSupportedInResponseBody, isLiveHumanAgentMessage, isOptionItem, isPause, isRequest, isResponse, isResponseWithNestedItems, isShowPanelButtonType, isSingleItemCarousel, isStreamCompleteItem, isStreamFinalResponse, isStreamPartialItem, isTextItem, isTyping, renderAsTour, renderAsUserDefinedMessage, streamItemID };\n","import React, { PureComponent } from \"react\";\n\nimport { withAriaAnnouncer } from \"../../hocs/withAriaAnnouncer.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class AnnounceOnMountComponent extends PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isMounted: false\n    };\n    this.onceAnnounced = false;\n  }\n  componentDidMount() {\n    this.setState({\n      isMounted: true\n    });\n    if (!this.onceAnnounced) {\n      if (this.props.announceOnce) {\n        setTimeout(() => {\n          this.props.ariaAnnouncer(this.props.announceOnce);\n        });\n      }\n      this.onceAnnounced = true;\n    }\n  }\n  render() {\n    return React.createElement(\"div\", {\n      \"aria-live\": \"polite\"\n    }, this.state.isMounted && this.props.children);\n  }\n}\n\nconst AnnounceOnMountComponentExport = withAriaAnnouncer(AnnounceOnMountComponent);\n\nexport { AnnounceOnMountComponentExport as AnnounceOnMountComponent };\n","export { ViewType } from \"../instance/apiTypes.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ var ChatWidthBreakpoint;\n\n(function(ChatWidthBreakpoint) {\n  ChatWidthBreakpoint[\"NARROW\"] = \"narrow\";\n  ChatWidthBreakpoint[\"STANDARD\"] = \"standard\";\n  ChatWidthBreakpoint[\"WIDE\"] = \"wide\";\n})(ChatWidthBreakpoint || (ChatWidthBreakpoint = {}));\n\nexport { ChatWidthBreakpoint };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function WriteableElement({slotName: slotName, id: id, className: className}) {\n  return React.createElement(\"div\", {\n    className: className,\n    id: id,\n    \"data-floating-menu-container\": true\n  }, React.createElement(\"slot\", {\n    name: slotName\n  }));\n}\n\nvar WriteableElement$1 = React.memo(WriteableElement);\n\nexport { WriteableElement$1 as default };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const ServiceManagerContext = React.createContext(null);\n\nexport { ServiceManagerContext };\n","import { Component } from \"react\";\n\nimport ReactDOM from \"react-dom\";\n\nimport { ModalPortalRootContext } from \"../contexts/ModalPortalRootContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nclass ModalPortal extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      attachedToHost: null\n    };\n    this.modalElement = document.createElement(\"div\");\n  }\n  componentDidMount() {\n    this.attachIfNeeded();\n  }\n  componentDidUpdate() {\n    this.attachIfNeeded();\n  }\n  componentWillUnmount() {\n    if (this.state.attachedToHost) {\n      this.state.attachedToHost.removeChild(this.modalElement);\n    }\n  }\n  attachIfNeeded() {\n    const hostElement = this.context;\n    if (hostElement && !this.state.attachedToHost) {\n      this.setState({\n        attachedToHost: hostElement\n      });\n      hostElement.appendChild(this.modalElement);\n    }\n  }\n  render() {\n    if (!this.state.attachedToHost) {\n      return null;\n    }\n    return ReactDOM.createPortal(this.props.children, this.modalElement);\n  }\n}\n\nModalPortal.contextType = ModalPortalRootContext;\n\nexport { ModalPortal };\n","import { Button } from \"@carbon/react\";\n\nimport FocusTrap from \"focus-trap-react\";\n\nimport React, { Component } from \"react\";\n\nimport { ModalPortal } from \"../../containers/ModalPortal.js\";\n\nimport { AriaLiveMessage as AriaLiveMessageExport } from \"../aria/AriaLiveMessage.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ class ConfirmModal extends Component {\n  constructor() {\n    super(...arguments);\n    this.onYesClick = () => {\n      this.props.onConfirm();\n    };\n    this.onNoClick = () => {\n      this.props.onCancel();\n    };\n    this.onKeyDown = event => {\n      if (event.key === \"Escape\") {\n        this.props.onCancel();\n      }\n    };\n  }\n  render() {\n    const {title: title, message: message, cancelButtonLabel: cancelButtonLabel, confirmButtonLabel: confirmButtonLabel, modalAnnounceMessage: modalAnnounceMessage, serviceManager: serviceManager} = this.props;\n    return React.createElement(ModalPortal, null, React.createElement(FocusTrap, null, React.createElement(\"div\", {\n      className: \"WACConfirmModal\",\n      role: \"dialog\",\n      \"aria-labelledby\": `WACConfirmModal__title${serviceManager.namespace.suffix}`,\n      \"aria-describedby\": `WACConfirmModal__message${serviceManager.namespace.suffix}`\n    }, React.createElement(\"div\", {\n      className: \"WACConfirmModal__container\"\n    }, React.createElement(AriaLiveMessageExport, {\n      message: modalAnnounceMessage\n    }), React.createElement(\"div\", {\n      className: \"WACConfirmModal__title\",\n      id: `WACConfirmModal__title${serviceManager.namespace.suffix}`\n    }, title), React.createElement(\"div\", {\n      className: \"WACConfirmModal__message\",\n      id: `WACConfirmModal__message${serviceManager.namespace.suffix}`\n    }, message), React.createElement(\"div\", {\n      className: \"WACConfirmModal__buttonContainer\"\n    }, React.createElement(Button, {\n      className: \"WACConfirmModal__NoButton\",\n      kind: \"secondary\",\n      onClick: this.onNoClick,\n      onKeyDown: this.onKeyDown,\n      size: \"md\"\n    }, cancelButtonLabel), React.createElement(Button, {\n      className: \"WACConfirmModal__YesButton\",\n      onClick: this.onYesClick,\n      onKeyDown: this.onKeyDown,\n      size: \"md\"\n    }, confirmButtonLabel))))));\n  }\n}\n\nexport { ConfirmModal };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nvar CSSVariable;\n\n(function(CSSVariable) {\n  CSSVariable[\"BASE_HEIGHT\"] = \"BASE-height\";\n  CSSVariable[\"BASE_MAX_HEIGHT\"] = \"BASE-max-height\";\n  CSSVariable[\"BASE_WIDTH\"] = \"BASE-width\";\n  CSSVariable[\"BASE_Z_INDEX\"] = \"BASE-z-index\";\n})(CSSVariable || (CSSVariable = {}));\n\nvar WriteableElementName;\n\n(function(WriteableElementName) {\n  WriteableElementName[\"AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT\"] = \"aiTooltipAfterDescriptionElement\";\n  WriteableElementName[\"WELCOME_NODE_BEFORE_ELEMENT\"] = \"welcomeNodeBeforeElement\";\n  WriteableElementName[\"HEADER_BOTTOM_ELEMENT\"] = \"headerBottomElement\";\n  WriteableElementName[\"BEFORE_INPUT_ELEMENT\"] = \"beforeInputElement\";\n  WriteableElementName[\"HOME_SCREEN_BEFORE_INPUT_ELEMENT\"] = \"homeScreenBeforeInputElement\";\n  WriteableElementName[\"HOME_SCREEN_AFTER_STARTERS_ELEMENT\"] = \"homeScreenAfterStartersElement\";\n  WriteableElementName[\"HOME_SCREEN_HEADER_BOTTOM_ELEMENT\"] = \"homeScreenHeaderBottomElement\";\n  WriteableElementName[\"CUSTOM_PANEL_ELEMENT\"] = \"customPanelElement\";\n})(WriteableElementName || (WriteableElementName = {}));\n\nexport { CSSVariable, WriteableElementName };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst HA_SET_HUMAN_AGENT_AVAILABILITY = \"HA_SET_HUMAN_AGENT_AVAILABILITY\";\n\nconst HA_SET_IS_CONNECTING = \"HA_SET_IS_CONNECTING\";\n\nconst HA_SET_IS_RECONNECTING = \"HA_SET_IS_RECONNECTING\";\n\nconst HA_SET_HUMAN_AGENT_JOINED = \"HA_SET_HUMAN_AGENT_JOINED\";\n\nconst HA_SET_HUMAN_AGENT_LEFT_CHAT = \"HA_SET_HUMAN_AGENT_LEFT_CHAT\";\n\nconst HA_END_CHAT = \"HA_END_CHAT\";\n\nconst HA_UPDATE_CAPABILITIES = \"HA_UPDATE_CAPABILITIES\";\n\nconst HA_UPDATE_FILE_UPLOAD_IN_PROGRESS = \"HA_UPDATE_FILE_UPLOAD_IN_PROGRESS\";\n\nconst HA_SET_SHOW_SCREEN_SHARE_REQUEST = \"HA_SET_SHOW_SCREEN_SHARE_REQUEST\";\n\nconst HA_SET_IS_SCREEN_SHARING = \"HA_SET_IS_SCREEN_SHARING\";\n\nconst HA_SET_PERSISTED_STATE = \"HA_SET_PERSISTED_STATE\";\n\nconst HA_UPDATE_IS_SUSPENDED = \"HA_UPDATE_IS_SUSPENDED\";\n\nconst HA_UPDATE_IS_TYPING = \"HA_UPDATE_IS_TYPING\";\n\nfunction setIsConnecting(isConnecting, localMessageID) {\n  return {\n    type: HA_SET_IS_CONNECTING,\n    isConnecting: isConnecting,\n    localMessageID: localMessageID\n  };\n}\n\nfunction setIsReconnecting(isReconnecting) {\n  return {\n    type: HA_SET_IS_RECONNECTING,\n    isReconnecting: isReconnecting\n  };\n}\n\nfunction setHumanAgentLeftChat() {\n  return {\n    type: HA_SET_HUMAN_AGENT_LEFT_CHAT\n  };\n}\n\nfunction endChat() {\n  return {\n    type: HA_END_CHAT\n  };\n}\n\nfunction setAgentAvailability(availability) {\n  return {\n    type: HA_SET_HUMAN_AGENT_AVAILABILITY,\n    availability: availability\n  };\n}\n\nfunction setHumanAgentJoined(responseUserProfile) {\n  return {\n    type: HA_SET_HUMAN_AGENT_JOINED,\n    responseUserProfile: responseUserProfile\n  };\n}\n\nfunction updateCapabilities(capabilities) {\n  return {\n    type: HA_UPDATE_CAPABILITIES,\n    capabilities: capabilities\n  };\n}\n\nfunction updateFilesUploadInProgress(fileUploadInProgress) {\n  return {\n    type: HA_UPDATE_FILE_UPLOAD_IN_PROGRESS,\n    fileUploadInProgress: fileUploadInProgress\n  };\n}\n\nfunction setShowScreenShareRequest(showRequest) {\n  return {\n    type: HA_SET_SHOW_SCREEN_SHARE_REQUEST,\n    showRequest: showRequest\n  };\n}\n\nfunction setIsScreenSharing(isSharing) {\n  return {\n    type: HA_SET_IS_SCREEN_SHARING,\n    isSharing: isSharing\n  };\n}\n\nfunction setPersistedServiceDeskState(state) {\n  return {\n    type: HA_SET_PERSISTED_STATE,\n    state: state\n  };\n}\n\nfunction agentUpdateIsSuspended(isSuspended) {\n  return {\n    type: HA_UPDATE_IS_SUSPENDED,\n    isSuspended: isSuspended\n  };\n}\n\nfunction agentUpdateIsTyping(isTyping) {\n  return {\n    type: HA_UPDATE_IS_TYPING,\n    isTyping: isTyping\n  };\n}\n\nexport { HA_END_CHAT, HA_SET_HUMAN_AGENT_AVAILABILITY, HA_SET_HUMAN_AGENT_JOINED, HA_SET_HUMAN_AGENT_LEFT_CHAT, HA_SET_IS_CONNECTING, HA_SET_IS_RECONNECTING, HA_SET_IS_SCREEN_SHARING, HA_SET_PERSISTED_STATE, HA_SET_SHOW_SCREEN_SHARE_REQUEST, HA_UPDATE_CAPABILITIES, HA_UPDATE_FILE_UPLOAD_IN_PROGRESS, HA_UPDATE_IS_SUSPENDED, HA_UPDATE_IS_TYPING, agentUpdateIsSuspended, agentUpdateIsTyping, endChat, setAgentAvailability, setHumanAgentJoined, setHumanAgentLeftChat, setIsConnecting, setIsReconnecting, setIsScreenSharing, setPersistedServiceDeskState, setShowScreenShareRequest, updateCapabilities, updateFilesUploadInProgress };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nconst getBotInputState = state => state.botInputState;\n\nconst getHumanAgentInputState = state => state.humanAgentState.inputState;\n\nconst getHumanAgentState = state => state.humanAgentState;\n\nconst getPersistedHumanAgent = state => state.persistedToBrowserStorage.chatState.humanAgentState;\n\nfunction selectHumanAgentDisplayState(state) {\n  const humanAgentState = getHumanAgentState(state);\n  const persisted = getPersistedHumanAgent(state);\n  if (persisted.isSuspended) {\n    return {\n      isConnectingOrConnected: false,\n      disableInput: false,\n      isHumanAgentTyping: false,\n      inputPlaceholderKey: null\n    };\n  }\n  const {isReconnecting: isReconnecting, isConnecting: isConnecting, isHumanAgentTyping: isHumanAgentTyping} = humanAgentState;\n  const {isConnected: isConnected} = persisted;\n  let inputPlaceholderKey;\n  if (isConnecting) {\n    inputPlaceholderKey = \"agent_inputPlaceholderConnecting\";\n  } else if (isReconnecting) {\n    inputPlaceholderKey = \"agent_inputPlaceholderReconnecting\";\n  } else {\n    inputPlaceholderKey = null;\n  }\n  return {\n    isHumanAgentTyping: isHumanAgentTyping,\n    isConnectingOrConnected: isConnecting || isConnected,\n    disableInput: isConnecting || isReconnecting,\n    inputPlaceholderKey: inputPlaceholderKey\n  };\n}\n\nfunction selectIsInputToHumanAgent(state) {\n  return selectHumanAgentDisplayState(state).isConnectingOrConnected;\n}\n\nfunction selectInputState(state) {\n  return selectIsInputToHumanAgent(state) ? getHumanAgentInputState(state) : getBotInputState(state);\n}\n\nexport { selectHumanAgentDisplayState, selectInputState, selectIsInputToHumanAgent };\n","import Home from \"@carbon/icons-react/es/Home.js\";\n\nimport React, { forwardRef, useRef, useCallback, useImperativeHandle } from \"react\";\n\nimport { useSelector, shallowEqual } from \"react-redux\";\n\nimport { useLanguagePack } from \"../../hooks/useLanguagePack.js\";\n\nimport { useServiceManager } from \"../../hooks/useServiceManager.js\";\n\nimport { selectHumanAgentDisplayState } from \"../../store/selectors.js\";\n\nimport \"../../utils/constants.js\";\n\nimport WriteableElement from \"../WriteableElement.js\";\n\nimport { Header as HeaderExport } from \"./Header.js\";\n\nimport { WriteableElementName } from \"../../../../types/instance/ChatInstance.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function BotHeader(props, ref) {\n  const {onClose: onClose, onCloseAndRestart: onCloseAndRestart, onRestart: onRestart, onToggleHomeScreen: onToggleHomeScreen, headerDisplayName: headerDisplayName, includeWriteableElement: includeWriteableElement, enableChatHeaderConfig: enableChatHeaderConfig, headerAvatarConfig: headerAvatarConfig, testIdPrefix: testIdPrefix} = props;\n  const serviceManager = useServiceManager();\n  const languagePack = useLanguagePack();\n  const homeScreenIsOn = useSelector(state => state.homeScreenConfig.is_on && state.homeScreenConfig.allow_return);\n  const publicConfig = useSelector(state => state.config.public);\n  const customMenuOptions = useSelector(state => state.customMenuOptions);\n  const {isConnectingOrConnected: isConnectingOrConnected} = useSelector(selectHumanAgentDisplayState, shallowEqual);\n  const useAITheme = useSelector(state => state.theme.useAITheme);\n  const maxVisibleHeaderObjects = useSelector(state => state.chatHeaderState.maxVisibleHeaderObjects);\n  const leftObjectsLength = useSelector(state => state.chatHeaderState.config?.left?.length || 0);\n  const rightObjectsLength = useSelector(state => state.chatHeaderState.config?.right?.length || 0);\n  const headerRef = useRef();\n  const isHeaderObjectsInOverflow = leftObjectsLength > maxVisibleHeaderObjects || rightObjectsLength > maxVisibleHeaderObjects;\n  const hasChatHeaderObjects = enableChatHeaderConfig && isHeaderObjectsInOverflow;\n  const showRestartButton = publicConfig.showRestartButton || publicConfig.headerConfig?.showRestartButton;\n  const allowHomeScreen = homeScreenIsOn && !isConnectingOrConnected;\n  const overflowClicked = useCallback(index => {\n    if (index === 0 && allowHomeScreen) {\n      onToggleHomeScreen?.();\n    } else {\n      const {handler: handler} = customMenuOptions[allowHomeScreen ? index - 1 : index];\n      handler();\n    }\n  }, [ customMenuOptions, onToggleHomeScreen, allowHomeScreen ]);\n  let overflowItems = customMenuOptions?.map(option => option.text);\n  if (overflowItems && allowHomeScreen) {\n    overflowItems.splice(0, 0, languagePack.homeScreen_overflowMenuHomeScreen);\n  } else if (!overflowItems && allowHomeScreen && hasChatHeaderObjects) {\n    overflowItems = [ languagePack.homeScreen_overflowMenuHomeScreen ];\n  }\n  useImperativeHandle(ref, () => headerRef.current);\n  return React.createElement(\"div\", {\n    className: \"WACHeader__Container\"\n  }, React.createElement(HeaderExport, {\n    ref: headerRef,\n    showCenter: true,\n    headerAvatarConfig: headerAvatarConfig,\n    displayName: headerDisplayName,\n    showBackButton: Boolean(allowHomeScreen && onToggleHomeScreen),\n    showRestartButton: showRestartButton,\n    useAITheme: useAITheme,\n    backContent: React.createElement(Home, null),\n    labelBackButton: languagePack.homeScreen_returnToHome,\n    onClickRestart: onRestart,\n    onClickClose: onClose,\n    onCloseAndRestart: onCloseAndRestart,\n    onClickBack: onToggleHomeScreen,\n    overflowItems: overflowItems,\n    overflowClicked: overflowClicked,\n    enableChatHeaderConfig: enableChatHeaderConfig,\n    testIdPrefix: testIdPrefix\n  }), includeWriteableElement && React.createElement(WriteableElement, {\n    slotName: WriteableElementName.HEADER_BOTTOM_ELEMENT,\n    id: `headerBottomElement${serviceManager.namespace.suffix}`,\n    className: \"WACHeader__HeaderBottomElement\"\n  }));\n}\n\nconst BotHeaderExport = React.memo(forwardRef(BotHeader));\n\nexport { BotHeaderExport as BotHeader };\n","/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */\nfunction deepFreeze(object) {\n  Object.freeze(object);\n  Object.getOwnPropertyNames(object).forEach(prop => {\n    if (Object.prototype.hasOwnProperty.call(object, prop) && object[prop] !== null && (typeof object[prop] === \"object\" || typeof object[prop] === \"function\") && !Object.isFrozen(object[prop])) {\n      deepFreeze(object[prop]);\n    }\n  });\n  return object;\n}\n\nexport { deepFreeze };\n","import { MessageResponseTypes } from \"../../../types/messaging/Messages.js\";\n\nimport { uuid } from \"../utils/lang/uuid.js\";\n\nimport { UUIDType } from \"../utils/lang/UUIDType.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function inputItemToLocalItem(message, originalUserText, id = uuid(UUIDType.LOCAL_MESSAGE)) {\n  const localMessage = {\n    item: {\n      response_type: MessageResponseTypes.TEXT,\n      ...message.input\n    },\n    ui_state: {\n      id: id,\n      originalUserText: originalUserText,\n      needsAnnouncement: false\n    },\n    fullMessageID: message.id\n  };\n  return localMessage;\n}\n\nexport { inputItemToLocalItem as default };\n","import { useContext } from \"react\";\n\nimport { AriaAnnouncerContext } from \"../contexts/AriaAnnouncerContext.js\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ function useAriaAnnouncer() {\n  return useContext(AriaAnnouncerContext);\n}\n\nexport { useAriaAnnouncer };\n","import React from \"react\";\n\n/*\n *  Copyright IBM Corp. 2025\n *\n *  This source code is licensed under the Apache-2.0 license found in the\n *  LICENSE file in the root directory of this source tree.\n *\n *  @license\n */ const LanguagePackContext = React.createContext(null);\n\nexport { LanguagePackContext };\n"],"names":["useUUID","ref","useRef","undefined","current","uuid","UUIDType","COMPONENT","AriaAnnouncerContext","React","CSS_CLASS_PREFIX","WEB_COMPONENT_PREFIX","asArray","value","Array","isArray","async","asyncForEach","array","callbackFunction","index","length","findLast","predicate","startAt","lastIndex","findLastIndex","findLastWithMap","keys","map","arrayLastValue","outputItemToLocalItem","messageItem","fullMessage","isLatestWelcomeNode","disableFadeAnimation","localMessage","ui_state","id","streamItemID","LOCAL_MESSAGE","needsAnnouncement","ui_state_internal","from_history","item","fullMessageID","isWelcomeResponse","createLocalMessageForInlineError","text","originalMessage","createMessageResponseForItem","createLocalMessageForItem","response_type","MessageResponseTypes","INLINE_ERROR","createLocalMessageItemsForNestedMessageItems","localMessageItem","fromHistory","nestedLocalMessageItems","allowFooter","isGridResponseType","gridLocalMessageItemIDs","rows","row","cells","cell","cellLocalMessageItemIDs","createLocalMessageItemsForNestedType","items","nestedMessageItem","isSupportedMessageItemInBody","isCarouselResponseType","itemsLocalMessageItemIDs","bodyItems","body","panel","bodyLocalMessageItemIDs","isShowPanelButtonType","footerItems","footer","footerLocalMessageItemIDs","rootMessageItem","isButtonResponseType","isSupportedMessageItemInFooter","type","nestedMessageItemIDs","isSupported","forEach","nestedLocalMessageItem","push","isResponseWithNestedItems","consoleError","CARD","isCardResponseType","isItemSupportedInResponseBody","CAROUSEL","BUTTON","button_type","ButtonItemType","SHOW_PANEL","GRID","BasePanelComponent","className","children","isOpen","hidePanelHeader","labelBackButton","title","hideBackButton","useAITheme","onClickCloseAndRestart","onClickRestart","testIdPrefix","headerProps","showRestartButton","useSelector","state","config","public","headerConfig","headerRef","useImperativeHandle","FocusTrap","active","focusTrapOptions","clickOutsideDeactivates","returnFocusOnDeactivate","IS_MOBILE","preventScroll","HeaderExport","onCloseAndRestart","showBackButton","displayName","showCenter","BasePanelComponentExport","withoutEmptyStarters","newConfig","starters","buttons","allow_return","filter","button","Boolean","label","trim","is_on","setIntl","serviceManager","locale","messages","intl","createIntl","store","dispatch","actions","setAppStateValue","createWriteableElementsProxy","elementSet","Set","handler","get","target","element","has","add","Proxy","writeableElements","VERSION","NotificationType","BOUNCING_ANIMATION_TIMEOUTS","DEFAULT_LAUNCHER","mobile","time_to_expand","new_expand_time","time_to_reduce","notification_type","TEXT_NOTIFICATION","desktop","deepFreeze","DEFAULT_CUSTOM_PANEL_CONFIG_OPTIONS","disableAnimation","DEFAULT_CUSTOM_PANEL_STATE","panelID","DEFAULT_CUSTOM_PANEL_ID","options","DEFAULT_IFRAME_PANEL_STATE","DEFAULT_CITATION_PANEL_STATE","citationItem","DEFAULT_TOUR_STATE","activeTourStepItems","DEFAULT_MESSAGE_PANEL_STATE","isMessageForInput","VIEW_STATE_ALL_CLOSED","launcher","mainWindow","tour","VIEW_STATE_LAUNCHER_OPEN","VIEW_STATE_MAIN_WINDOW_OPEN","DEFAULT_PERSISTED_TO_BROWSER","chatState","version","disclaimersAccepted","homeScreenState","isHomeScreenOpen","showBackToBot","hasSentNonWelcomeMessage","persistedTourState","activeTourID","activeTourCurrentStepIndex","humanAgentState","isConnected","isSuspended","responseUserProfiles","launcherState","wasLoadedFromBrowser","viewState","activeTour","showUnreadIndicator","mobileLauncherIsExtended","mobileLauncherWasReduced","mobileLauncherDisableBounce","desktopLauncherIsExpanded","desktopLauncherWasMinimized","bounceTurn","DEFAULT_CHAT_MESSAGES_STATE","localMessageIDs","messageIDs","isTypingCounter","isLoadingCounter","isHydratingCounter","isScrollAnchored","DEFAULT_MESSAGE_STATE","allMessageItemsByID","allMessagesByID","botMessageState","DEFAULT_HUMAN_AGENT_STATE","isConnecting","isReconnecting","numUnreadMessages","fileUploadInProgress","showScreenShareRequest","isScreenSharing","isHumanAgentTyping","inputState","fieldVisible","isReadonly","files","allowFileUploads","allowMultipleFileUploads","allowedFileUploadTypes","stopStreamingButtonState","currentStreamID","isVisible","isDisabled","DEFAULT_THEME_STATE","carbonTheme","CarbonTheme","G10","corners","CornersType","ROUND","DEFAULT_LAYOUT_STATE","showFrame","hasContentMaxWidth","applyBotMessageState","newState","setHomeScreenOpenState","persistedToBrowserStorage","applyLocalMessageUIState","localMessageID","propertyName","propertyValue","oldMessage","applyFullMessage","message","MIN_CONTRAST","hexCodeToRGB","color","red","substring","blue","green","parseInt","calculateContrast","color1","color2","rgb1","rgb2","luminance1","calculateRelativeLuminance","luminance2","contrast","r8","g8","b8","rRGB","gRGB","bRGB","whiteOrBlackText","background","gray100","white","adjustLightness","token","shift","original","Color","hsl","object","l","round","hex","toLowerCase","CSS_VAR_PREFIX","HEXADECIMAL_REGEX","INTERNAL_OVERRIDES_LIGHT_THEME_MAP","INTERNAL_OVERRIDES_DARK_THEME_MAP","ACCENT_COLOR_MAPS","blue20","blue60","blue60Hover","blue80","g10","g90","g100","fillValues","styles","propertyNames","mergeCSSVariables","publicVars","whiteLabelVariables","internalOverrides","internalOverridesMap","WHITE","includes","G90","G100","createInternalCSSOverridesMap","result","Object","entries","key","startsWith","match","console","warn","WA_CONSOLE_PREFIX","remoteVars","cssOverrides","primaryColor","secondaryColor","accentColor","useAccentColor","tryFocusColor","useFocusColor","colorMap","accentBlue20","accentBlue60Hover","accentBlue80","accentColorRGB","toString","accentColorBW","gray80","gray10","remoteStylesToCSSVars","getThemeClassNames","themeState","themeClassnames","CarbonThemeClassNames","validateViewState","appState","VALID_PUBLIC_VARS_IN_AI_THEME_SET","values","CSSVariable","UPDATE_CSS_VARS_AI_THEME_WARNING_MESSAGE","join","ChatActionsImpl","constructor","this","hydrating","restarting","alreadyHydrated","chunkQueue","hydrateChat","alternateWelcomeRequest","alternateWelcomeRequestSource","alternateOptions","fireReady","hydrationPromise","doHydrateChat","fire","BusEventType","CHAT_READY","history","debugLog","addIsHydratingCounter","historyService","loadHistory","humanAgentService","initialize","getState","hydrateMessageHistory","messageHistory","createElementsForUserDefinedResponses","latestPanelLocalMessageItem","openResponsePanel","homeScreenConfig","setHomeScreenIsOpen","messaging","skipWelcome","send","createWelcomeRequest","MessageSendSource","WELCOME_REQUEST","returnBeforeStreaming","chatWasHydrated","lastMessageID","lastMessage","lastOriginalMessage","isLiveHumanAgentMessage","isRequest","messageService","resendMessage","allowReconnect","serviceDesk","handleHydration","getPublicWebChatState","isConnectedWithHumanAgent","isWebChatOpen","isConnectingWithHumanAgent","isDebugEnabled","isEnableDebugLog","hasUserSentMessage","isTourActive","sendWithCatch","source","ignoreHydration","error","messageRequest","createMessageRequestForText","responsePanelState","setResponsePanelIsOpen","doSend","addDefaultsToMessage","originalUserText","input","silent","inputItemToLocalItem","addMessage","addLocalMessageItem","setValueSelectedForMessageID","messageSetOptionSelected","cloneDeep","receive","requestMessage","requestOptions","restartCount","initialRestartCount","MESSAGE","preReceiveEvent","PRE_RECEIVE","data","updateHasSentNonWelcomeMessage","languagePack","isResponse","processMessageResponse","catch","inlineError","createMessageResponseForText","errors_singleMessage","thread_id","RECEIVE","removeMessages","insertHistory","scrollBottom","getMessagesScrollBottom","notes","currentAppStateMessages","newAppStateMessages","merge","doAutoScroll","scrollToBottom","receiveChunk","chunk","messageID","chunkPromise","resolvablePromise","processChunkQueue","isCompleteItem","isStreamCompleteItem","isPartialItem","isStreamPartialItem","isStopGeneratingVisible","botInputState","partial_item","streaming_metadata","cancellable","setStopStreamingButtonVisible","response_id","streamingStart","complete_item","streamingAddChunk","partial_response","Error","streamingMergeHistory","handleUserDefinedResponseItemsChunk","isStreamFinalResponse","final_response","setStopStreamingButtonDisabled","doResolve","getOrCreateUserDefinedElement","messageItemID","userDefinedItem","userDefinedElementRegistry","document","createElement","slotName","setAttribute","set","handleUserDefinedResponseItems","renderAsUserDefinedMessage","user_defined","userDefinedResponseEvent","USER_DEFINED_RESPONSE","slot","fullWidth","setMessageUIProperty","createElementForNestedUserDefinedResponse","localMessageItemID","nestedLocalMessage","itemID","CHUNK_USER_DEFINED_RESPONSE","output","generic","request_id","previousItemID","pause","isPause","agent","isConnectToHumanAgent","hasTourUserDefinedType","skipTourCard","skip_card","startTourReason","TourStartReason","START_TOUR_METHOD","SKIP_CARD","mainWindowCloseReason","MainWindowCloseReason","CALLED_START_TOUR","TOUR_SKIP_CARD","startTour","viewChangeReason","ViewChangeReason","addNestedMessages","addIsTypingCounter","partialMessage","hasServiceDesk","errorOccurred","errorType","OnErrorType","INTEGRATION_ERROR","setMessageUIStateInternalProperty","agent_no_service_desk","agentAvailability","checkAreAnyHumanAgentsOnline","agent_availability","shouldAutoRequestHumanAgent","skipConnectHumanAgentCard","HumanAgentsOnlineStatus","ONLINE","startChat","showIsTyping","isTyping","sleep","time","setResponsePanelContent","insertLocalMessageResponse","updateLanguagePack","changes","addNotification","notification","removeNotification","groupID","removeNotifications","removeAllNotifications","updateCSSVariables","theme","usePublicVars","variable","consoleWarn","allVariables","updateBotName","name","updateMainHeaderTitle","updateBotAvatarURL","url","updateHomeScreenConfig","updateLauncherConfig","launcherConfig","changeView","newView","reason","tryHydrating","forceViewChange","newViewState","constructViewState","isEqual","fireViewChangeEventsAndChangeView","isHydrated","viewChanging","setViewChanging","oldViewState","preViewChangeEvent","VIEW_PRE_CHANGE","cancelViewChange","setViewState","viewChangeEvent","VIEW_CHANGE","changeViewReason","setTourData","ViewType","TOUR","TOUR_START","TOUR_STEP","step","tourState","endTour","LAUNCHER","clearTourData","goToSpecificTourStep","stepId","newStepIndex","findIndex","stepItem","step_id","changeStepInTour","changeStepOptions","nextStep","previousStep","actualNewStepIndex","catastrophicErrorType","callOnError","additionalChatParameters","onError","restartConversation","skipHydration","endHumanAgentConversation","fireEvents","PRE_RESTART_CONVERSATION","currentState","endChat","MAIN_WINDOW","mainWindowOpenReason","MainWindowOpenReason","CALLED_RESTART_CONVERSATION","instance","updateAssistantInputFieldVisibility","cancelAllMessageRequests","RESTART_CONVERSATION","destroySession","keepOpenState","originalViewState","newPersistedToBrowserStorage","userSessionStorageService","clearLauncherSession","clearChatSession","agentEndConversation","endedByUser","agentUpdateIsSuspended","HANDLER_NOT_FUNCTION","EventBus","handlersByType","Map","eventsTypesRunning","eventsRunningCount","busEvent","logEvent","JSON","stringify","handlersForType","handlersCopy","slice","Promise","delete","waitForEmptyPromise","fireSync","waitForEmpty","on","handlers","debugStackTrace","off","indexOf","removed","splice","once","onceHandler","event","logListeners","listeners","group","listener","consoleLog","groupEnd","clear","eventCopy","createCustomPanelInstance","customPanelInstance","open","setCustomPanelConfigOptions","setCustomPanelOpen","close","freeze","HistoryService","useHistory","publicConfig","resultData","customLoadHistory","historyNotes","allLocalMessagesByID","loadingState","allMessages","threadMessagesByThreadID","responsesByRequestID","relatedMessageByID","localMessagesByOriginalMessageID","lastThreadID","loadedHistory","latestTransferToHumanAgentResponse","note","historyItem","isEventRequest","timestamp","Date","getTime","THREAD_ID_MAIN","file_upload_status","FileStatusValue","UPLOADING","COMPLETE","error_state","MessageErrorState","FAILED","related_message_id","beginEvent","HISTORY_BEGIN","eventBus","HISTORY_END","notesToMessages","getResponseItems","thread","addMessageToThread","createLocalMessages","localMessagesByFullMessageID","toChatMessageState","createChatStates","mainThreadMessages","welcomeRequest","is_welcome_request","welcomeResponse","markIsLatestWelcomeNode","isOptionItem","relatedRequest","optionSelected","isDateResponseType","markSelectedOptions","notesToLoadedHistory","SESSION_HISTORY","MessageLoadingManager","start","onExceededMaxSilentLoading","onEnd","onTimeout","msMaxSilentLoading","msMaxAttempt","hasExceededMaxSilentLoading","onSilentLoading","setTimeout","onMaxAttempt","end","clearTimeout","MS_BETWEEN_RETRIES","RetryType","MessageService","pendingLocale","localeIsExplicit","messageLoadingManager","queue","waiting","timeoutOverride","messageTimeoutSecs","timeoutMS","processSuccess","received","isProcessed","isWelcomeNode","setMessageErrorState","NONE","message_type","MessageInputType","EVENT","now","trackData","lastRequestTime","timeLastRequest","totalRequestTime","timeFirstRequest","sendMessagePromise","moveToNextQueueItem","addErrorMessage","errorMessage","HYDRATE_RESEND","skipQueue","sendToAssistantAndUpdateErrorState","sendToAssistant","SILENT","VISIBLE","RETRYING","waitingMessage","WAITING","processError","pendingRequest","resultText","allowRetry","tryCount","isWelcome","msSinceStarted","isInAttemptWindow","numErrors","retryDelay","MESSAGE_COMMUNICATION","otherData","rejectFinalErrorOnMessage","doReject","customSendMessage","updateMessage","controller","AbortController","sendMessageController","signal","runQueueIfReady","clearCurrentQueueItem","getLastBotResponseWithContext","LOADING_INDICATOR_TIMER","messageLoadingIndicatorTimeoutSecs","addIsLoadingCounter","didExceedMaxLoading","cancelMessageRequestByID","PRE_SEND","updateLocalMessageItem","SEND","addToMessageQueue","newPendingMessage","errorState","messageToUpdate","announceMessageID","announceMessage","TEXT","logError","lastResponse","abort","safeFetchTextWithTimeout","NamespaceService","namespace","originalName","attributeSafe","suffix","computedName","computeNamespaceName","getSuffix","ServiceManager","innerStorage","storage","getItem","setItem","removeItem","IS_SESSION_STORAGE","window","sessionStorage","storage$1","UserSessionStorageService","prefix","loadChatSession","chatSessionString","getChatSessionKey","chatSession","parse","loadLauncherSession","launcherSessionString","getLauncherSessionKey","launcherSession","persistChatSession","session","persistLauncherSession","replaceCurrentArrayValue","currentValue","newValue","humanAgentReducers","HA_SET_IS_CONNECTING","action","activeLocalMessageID","HA_SET_IS_RECONNECTING","HA_SET_HUMAN_AGENT_AVAILABILITY","availability","HA_SET_SHOW_SCREEN_SHARE_REQUEST","showRequest","HA_SET_HUMAN_AGENT_JOINED","responseUserProfile","HA_SET_PERSISTED_STATE","serviceDeskState","HA_UPDATE_IS_SUSPENDED","HA_UPDATE_IS_TYPING","HA_SET_HUMAN_AGENT_LEFT_CHAT","HA_UPDATE_CAPABILITIES","newInputState","capabilities","HA_SET_IS_SCREEN_SHARING","isSharing","HA_UPDATE_FILE_UPLOAD_IN_PROGRESS","HA_END_CHAT","populateTourStepItems","tourMessageItem","find","steps","clearTourState","EXCLUDE_HUMAN_AGENT_UNREAD","HumanAgentMessageType","USER_ENDED_CHAT","CHAT_WAS_ENDED","RELOAD_WARNING","reducers","CHANGE_STATE","partialState","HYDRATE_CHAT","iFramePanelState","viewSourcePanelState","customPanelState","HYDRATE_MESSAGE_HISTORY","ADD_LOCAL_MESSAGE_ITEM","addAfterID","isSilent","currentIndex","existingID","newLocalMessageIDs","insertAtIndex","afterIDIndex","isBotMessage","agent_message_type","isMainWindowOpen","isBrowserPageVisible","REMOVE_MESSAGES","idsSet","newAllMessages","newAllMessageItems","newMessageIDs","newMessageItemsIDs","UPDATE_LOCAL_MESSAGE_ITEM","UPDATE_MESSAGE","ADD_MESSAGE","itemIDsInNewMessage","newAllMessageItemsByID","existingItemIDs","firstFoundIndex","isItemInMessage","itemIDsToInsert","MESSAGE_SET_OPTION_SELECTED","newMessagesByID","sentMessage","ADD_IS_TYPING_COUNTER","Math","max","addToIsTyping","ADD_IS_LOADING_COUNTER","addToIsLoading","ADD_IS_HYDRATING_COUNTER","addToIsHydrating","SET_APP_STATE_VALUE","UPDATE_PERSISTED_CHAT_STATE","UPDATE_HAS_SENT_NON_WELCOME_MESSAGE","SET_VIEW_STATE","previousState","handleViewStateChange","SET_VIEW_CHANGING","SET_INITIAL_VIEW_CHANGE_COMPLETE","initialViewChangeComplete","changeComplete","UPDATE_BOT_NAME","botName","headerDisplayName","UPDATE_BOT_AVATAR_URL","botAvatarURL","UPDATE_LAUNCHER_AVATAR_URL","avatar_url_override","UPDATE_MAIN_HEADER_TITLE","UPDATE_CSS_VARIABLES","variables","cssVariableOverrides","UPDATE_HOME_SCREEN_CONFIG","newHomeScreenConfig","mergeWith","SET_MESSAGE_UI_PROPERTY","SET_MESSAGE_HISTORY_PROPERTY","SET_MESSAGE_UI_STATE_INTERNAL_PROPERTY","MERGE_HISTORY","ANNOUNCE_MESSAGE","ACCEPTED_DISCLAIMER","location","hostname","SET_HOME_SCREEN_IS_OPEN","TOGGLE_HOME_SCREEN","UPDATE_LAUNCHER_CONFIG","SET_LAUNCHER_PROPERTY","SET_LAUNCHER_CONFIG_PROPERTY","launcherType","LauncherType","DESKTOP","MOBILE","SET_CHAT_MESSAGES_PROPERTY","SET_LAUNCHER_MINIMIZED","OPEN_IFRAME_CONTENT","CLOSE_IFRAME_PANEL","SET_CONVERSATIONAL_SEARCH_CITATION_PANEL_IS_OPEN","relatedSearchResult","SET_CUSTOM_PANEL_OPEN","SET_CUSTOM_PANEL_OPTIONS","SET_TOUR_DATA","newActiveTourMessageID","CLEAR_TOUR_DATA","CHANGE_STEP_IN_TOUR","min","newStepNumber","UPDATE_INPUT_STATE","applyInputState","getInputState","isInputToHumanAgent","SET_IS_BROWSER_PAGE_VISIBLE","ADD_INPUT_FILE","file","currentInputState","REMOVE_INPUT_FILE","fileID","newUploads","REMOVE_LOCAL_MESSAGE_ITEM","ADD_NOTIFICATION","notificationID","notifications","concat","REMOVE_NOTIFICATIONS","REMOVE_ALL_NOTIFICATIONS","CLEAR_INPUT_FILES","FILE_UPLOAD_INPUT_ERROR","currentInputSate","isError","status","ADD_NESTED_MESSAGES","localMessageItems","SET_RESPONSE_PANEL_IS_OPEN","SET_RESPONSE_PANEL_CONTENT","STREAMING_START","STREAMING_MERGE_HISTORY","existingMessage","newMessage","STREAMING_ADD_CHUNK","chunkItem","localItemID","existingLocalMessageItem","newItem","streamingState","chunks","isDone","isIntermediateStreaming","UPDATE_CHAT_HEADER_CONFIG","chatHeaderConfig","chatHeaderState","UPDATE_MAX_VISIBLE_HEADER_OBJECTS","maxTotal","maxVisibleHeaderObjects","SET_STOP_STREAMING_BUTTON_VISIBLE","SET_STOP_STREAMING_BUTTON_DISABLED","SET_STREAM_ID","UPDATE_MAIN_HEADER_AVATAR","headerAvatarConfig","assign","getThemeCornersType","getLayoutState","IS_PHONE","themeConfig","SQUARE","layout","reducerFunction","DEFAULT_PUBLIC_CONFIG","openChatByDefault","showLauncher","shouldTakeFocusIfOpensAutomatically","dayjs","LocalizedFormat","Chat","publicConfigProvided","customHostElement","additionalChatParametersProvided","debug","consoleDebug","appConfig","startInternal","doesHaveServiceDesk","getBotName","initialState","chatWidthBreakpoint","chatWidth","chatHeight","enLanguagePack","originalConfig","suspendScrollDetection","isDestroyed","targetViewState","customMenuOptions","showNonHeaderBackgroundCover","sessionStorageLauncherState","enhancer","__REDUX_DEVTOOLS_EXTENSION__","instanceId","createStore","doCreateStore","subscribe","previousPersistedToBrowserStorage","copyToSessionStorage","disableWindowTitleChanges","originalTitle","changeTitleTimer","agent_newMessage","createHandleWindowTitle","customPanelManager","serviceManger","panels","getPanel","createCustomPanelManager","WriteableElementName","AI_TOOLTIP_AFTER_DESCRIPTION_ELEMENT","WELCOME_NODE_BEFORE_ELEMENT","HEADER_BOTTOM_ELEMENT","BEFORE_INPUT_ELEMENT","HOME_SCREEN_HEADER_BOTTOM_ELEMENT","HOME_SCREEN_AFTER_STARTERS_ELEMENT","HOME_SCREEN_BEFORE_INPUT_ELEMENT","CUSTOM_PANEL_ELEMENT","setEnableDebugLog","debugStackTraces","setEnableDebugStackTracesLog","createServiceManager","localePack","render","createHumanAgentService","all","loadLanguagePack","loadLocale","resolve","loadHAA","reallyRenderAndReturnInstance","OPEN_BY_DEFAULT","WEB_CHAT_LOADED","setInitialViewChangeComplete","callRender","wasRendered","newPack","updateLocale","newLocale","localePromise","languagePackPromise","then","selectInputState","INSTANCE_SEND","destroy","container","remove","updateInputState","updateInputIsDisabled","updateBotUnreadIndicatorVisibility","setLauncherProperty","issueWithNewView","viewTypeValues","CALLED_CHANGE_VIEW","homeScreenConfigClone","scrollToMessage","animate","doScrollToMessage","customPanels","updateCustomMenuOptions","updateIsTypingCounter","direction","updateIsLoadingCounter","updateIsChatLoadingCounter","updateHeaderConfig","configCopy","updateChatHeaderConfig","updateMainHeaderAvatar","elements","getMainWindow","addClassName","removeClassName","getMessageInput","getHTMLElement","setValue","setEnableEnterKey","addChangeListener","removeChangeListener","getHomeScreenInput","tours","CALLED_END_TOUR","goToNextStep","goToStep","addMessageChunk","clearConversation","requestFocus","appWindow","endConversation","updateIsSuspended","createChatInstance","renderAndReturnInstance","promise","renderPromise","AriaAnnouncerProvider","props","useIntl","useServiceManager","announcerRef","announcerFunction","useCallback","announceValue","previousAnnounceMessageRef","useEffect","currentAnnounceMessage","Provider","AriaAnnouncerComponent","getLauncherButtonAriaLabel","isLauncherHidden","launcher_isTourOpen","launcher_isTourClosed","launcher_isOpen","launcher_isClosed","Launcher","onToggleOpen","unreadHumanAgentCount","tabIndex","launcherHidden","launcherAvatarURL","buttonRef","doFocusRef","ariaLabel","formatMessage","count","launcherAvatar","AiLaunch","size","ChatLaunch","src","alt","cx","Button","WACLauncher__TourButton","PageObjectId","kind","ButtonKindEnum","PRIMARY","onClick","ArrowUpLeft","LauncherExport","forwardRef","LauncherComplex","launcherComplexRef","launcherRef","onOpen","onMinimize","launcher_desktopGreeting","launcher_closeButton","launcher_ariaIsExpanded","disabled","WACLauncherComplex__Text","Tag","Close","LauncherDesktopContainer","onDoToggle","useLanguagePack","browserLauncherState","isExpandedLauncherEnabled","smallLauncherClassName","setSmallLauncherClassName","useState","complexLauncherClassName","setComplexLauncherClassName","launcherHiddenRef","animateOnceVisible","bounceTurnRef","animationStartTimerRef","animationFinishedTimerRef","firstBounceAnimationStartTimerRef","firstBounceAnimationFinishedTimerRef","secondBounceAnimationStartTimerRef","secondBounceAnimationFinishedTimerRef","determineLauncherHeight","expandedLauncherHeight","offsetHeight","style","setProperty","startExpandLauncher","setExpandAnimationTimers","clearExpandAnimationTimers","startBounceAnimation","finishBounceAnimation","setBounceAnimationTimers","clearBounceAnimationTimers","setDefaultLauncherState","setLauncherMinimized","useOnMount","setLauncherConfigProperty","prevLauncherTitle","usePrevious","animateWithClass","endAnimationNameOrDelay","endAnimationCallback","classList","animationName","removeEventListener","addEventListener","LauncherExtended","isExtended","playExtendAnimation","onSwipeRight","onReduceEnd","ariaAnnouncer","useAriaAnnouncer","animateExtendedState","setAnimateExtendedState","showGreetingMessage","setShowGreetingMessage","prevIsExtended","extendedContainerRef","greetingMessageRef","textHolderRef","touchStartRef","touchStartX","touchStartY","shouldReduceExtendedLauncher","extendWithAnimation","extendWithoutAnimation","launcherGreetingMessage","launcher_mobileGreeting","launcherContainerElement","textHolderEl","greetingMessageEl","extendedContainerEl","maxTextHolderWidth","launcherPosition","width","height","screen","extendedWidth","getMaxLauncherExtendedWidth","clientWidth","querySelector","launcherExtendedWidth","removeAttribute","calculateAndSetMaxExtendedLauncherWidth","doFadeAnimationForElements","fadeInElement","fadeInTime","buttonEl","handleTouchMove","touchList","touchStartCoordinates","callback","clientX","touchEndX","clientY","touchEndY","differenceX","differenceY","abs","checkIfUserSwipedRight","touches","handleTouchStart","touchStart","reduceAnimationEndListener","fadeOutElement","GHOST","LauncherExtendedExport","LauncherMobileContainer","wasReduced","disableBounce","isStartingBounceAnimation","setIsStartingBounceAnimation","prevWasReduced","initialBounceTurn","previouslyPlayedExtendAnimation","extendLauncherTimeoutIDRef","reduceLauncherTimeoutIDRef","endBounceAnimationRef","shouldBounceRef","isExtending","disableIntroAnimation","setLauncherStateAsReduced","reduceLauncher","extendLauncherTimeoutID","reduceLauncherTimeoutID","clearTimeouts","setExpandAnimationTimeout","endBounceAnimation","startRecurringBounceAnimation","turnCounter","animation","timeouts","startingIndex","beforeAll","afterAll","beforeEach","afterEach","terminate","timeoutID","playAnimation","isComplete","setAnimationListener","replayAnimation","setAnimationTimeouts","handleToggleOpen","handleSwipeRight","LauncherContainer","LAUNCHER_CLICKED","launcherContainer","effect","deps","hasRunRef","useEffectDidUpdate","HydrationPanel","onClose","useHomeScreenVersion","isHidden","useContext","HideComponentContext","header","HomeScreenHeaderExport","BotHeaderExport","onToggleHomeScreen","includeWriteableElement","OverlayPanelName","HYDRATING","MountChildrenOnDelay","delay","AnnounceOnMountComponentExport","announceOnce","window_ariaWindowLoading","Loading","withOverlay","CustomPanel","onPanelOpenEnd","onPanelCloseEnd","onPanelOpenStart","onPanelCloseStart","disableDefaultCloseAction","onClickBack","onClickClose","prevIsOpen","openAnimation","AnimationInType","SLIDE_IN_FROM_BOTTOM","closeAnimation","AnimationOutType","SLIDE_OUT_TO_BOTTOM","onClickBackLocal","onClickCloseLocal","checkAllowClose","onCloseAndRestartLocal","OverlayPanel","onOpenStart","CUSTOM_PANEL_PRE_OPEN","onOpenEnd","CUSTOM_PANEL_OPEN","onCloseStart","CUSTOM_PANEL_PRE_CLOSE","onCloseEnd","CUSTOM_PANEL_CLOSE","animationOnOpen","animationOnClose","shouldOpen","overlayPanelName","CUSTOM","eventName","eventDescription","general_returnToAssistant","hideCloseButton","hideCloseAndRestartButton","WriteableElement","CustomPanelExport","lazyChat","CatastrophicError","lazyCatastrophicError","Disclaimer","lazyDisclaimer","HomeScreenContainer","lazyHomeScreenContainer","IFramePanel","lazyIFramePanel","ViewSourcePanel","lazyViewSourcePanel","BodyAndFooterPanelComponent","lazyBodyAndFooterPanelComponent","WIDTH_BREAKPOINT_STANDARD","WIDTH_BREAKPOINT_NARROW","WIDTH_BREAKPOINT_WIDE","MainWindow","Component","super","arguments","closing","modalPortalHostElement","numPanelsOpen","numPanelsAnimating","numPanelsCovering","isHydrationAnimationComplete","shouldAutoFocus","extraClassNames","areModulesLoaded","mainWindowRef","containerRef","botChatRef","homeScreenInputRef","disclaimerRef","brandingRef","animationContainerRef","iframePanelRef","viewSourcePanelRef","previousBodyVisibility","previousBodyPosition","onResize","appChatWidthBreakpoint","offsetWidth","ChatWidthBreakpoint","WIDE","STANDARD","NARROW","onVisualViewportResize","updateFromVisualViewport","visualViewport","offsetTop","offsetLeft","setModalPortalHostElement","setState","onSendInput","selectIsInputToHumanAgent","sendMessageToAgent","clearInputFiles","onSendHomeButtonInput","createMessageRequestForChoice","HOME_SCREEN_STARTER","removeChatFromDom","onRestart","doClose","toggleHomeScreen","getShowDisclaimer","getShowHomeScreen","takeFocus","requestInputFocus","onUserTyping","userTyping","onAcceptDisclaimer","acceptDisclaimer","coverBackground","prevState","onHydrationPanelClose","componentDidMount","mainWindowObserver","ResizeObserver","observe","disableCustomElementMobileEnhancements","updateBody","SCROLLBAR_WIDTH","loadPanels","componentWillUnmount","unobserve","componentDidUpdate","oldProps","oldState","newProps","useCustomHostElement","prevViewState","requestAnimationFrame","newLastItemID","lastMessageItem","componentDidCatch","errorInfo","createDidCatchErrorData","preload","unmounting","IS_IOS","getPropertyValue","fromCloseAndRestart","MAIN_WINDOW_CLOSED_AND_RESTARTED","DEFAULT_MINIMIZE","disclaimer","addClassNameToState","removeClassNameFromState","renderChat","showCovering","renderCustomPanel","renderHydrationPanel","renderDisclaimerPanel","renderResponsePanel","renderHomeScreenPanel","renderIFramePanel","renderViewSourcePanel","renderBotChat","headerAvatar","agentDisplayState","selectHumanAgentDisplayState","showDisclaimer","hideBotContainer","HideComponent","hidden","Suspense","fallback","messageState","MESSAGE_INPUT","renderInnerHydrationPanel","shouldHide","renderCatastrophicPanel","CATASTROPHIC","showHeader","FADE_IN","FADE_OUT","DISCLAIMER","disclaimerHTML","disclaimerAcceptButtonRef","showHomeScreen","onSendBotInput","HOME_SCREEN_INPUT","onSendButtonInput","IFRAME","CONVERSATIONAL_SEARCH_CITATION","panelOptions","PANEL_RESPONSE","showAnimations","show_animations","renderWidget","localeClassName","showGlass","enableFocusTrap","hideMinimizeButton","trapActive","isWideWidth","VisuallyHidden","window_title","onScroll","scrollTop","ModalPortalRootContext","MainWindow$1","connect","TourContainerLazy","lazyTourComponent","App","hostElement","applicationStyles","fontStyles","combinedStyles","AppContainer","useDispatch","windowSize","setWindowSize","innerWidth","innerHeight","cssVariableOverrideString","useMemo","cssVariables","cssVariablesString","allValues","replace","convertCSSVariablesToString","dir","windowListener","visibilityListener","setIsBrowserPageVisible","visibilityState","node","nonce","cspNonce","IS_PHONE_IN_PORTRAIT_MODE","WindowSizeContext","ServiceManagerContext","RawIntlProvider","LanguagePackContext","MainContainer","tourContainerRef","showTour","showedTourOnce","languageKey","regionLabel","role","UserDefinedResponsePortalsContainer","chatInstance","renderUserDefinedResponse","userDefinedResponseEventsBySlot","slotState","UserDefinedResponseComponentPortal","ReactDOM","UserDefinedResponsePortalsContainerExport","WriteableElementsPortalsContainer","renderResponseMap","responseItem","WriteableElementsComponentPortal","WriteableElementsPortalsContainerExport","onBeforeRender","onAfterRender","renderWriteableElements","setParentInstance","setInstance","renderProps","setRenderProps","setApplicationStyles","setInstances","setUserDefinedResponseEventsBySlot","managedWebChatRef","previousConfigRef","previousConfig","managedWebChat","shouldDestroy","destroyWebChat","widget","pagePublicConfig","chatConstructorPromise","protocol","compatMode","instantiateWidget","webChatInstance","userDefinedEventsBySlot","itemChunk","partialItems","addUserDefinedResponseHandler","loadChat","carbonStyles","loadBaseStyles","loadCarbon","loadStyles","AppContainerExport","default","carbon","changeState","updatePersistedChatState","setMessageHistoryProperty","mergeMessageHistory","setMessageWasAnnounced","setChatMessagesStateProperty","closeIFramePanel","setIFrameContent","setViewSourcePanelIsOpen","addInputFile","removeFileUpload","removeLocalMessageItem","fileUploadInputError","setMaxVisibleHeaderObjects","setStreamID","withAriaAnnouncer","Wrapped","makeTestId","PureComponent","isClosing","isOpening","openPanelTimeout","closePanelTimeout","openPanel","animationDurationOpen","durationInMS","conditionalSetTimeout","closePanel","animationDurationClose","prevProps","ai_slug_title","ai_slug_description","components_overflow_ariaLabel","components_swiper_currentLabel","errors_communicating","errors_imageSource","errors_videoSource","errors_audioSource","errors_iframeSource","errors_ariaMessageRetrying","errors_ariaMessageFailed","errors_noHumanAgentsAvailable","errors_noHumanAgentsJoined","errors_connectingToHumanAgent","errors_busy","errors_agentAppSessionExpired","errors_generalContent","errors_somethingWrong","input_ariaLabel","input_placeholder","input_buttonLabel","input_uploadButtonLabel","window_ariaTourRegion","window_ariaTourRegionNamespace","window_ariaChatRegion","window_ariaChatRegionNamespace","window_ariaWindowOpened","window_ariaWindowClosed","messages_youSaid","messages_botSaid","messages_agentSaid","messages_searchResults","messages_searchResultsLink","messages_searchResultsOpenDocument","messages_searchResultsOpenDocumentWithLabel","messages_searchResultsExpand","messages_searchResultsCollapse","messages_botIsLoading","messages_botIsTyping","messages_agentIsTyping","messages_scrollHandle","messages_scrollHandleDetailed","messages_scrollHandleEnd","messages_scrollHandleEndDetailed","message_labelBot","message_labelYou","notifications_toastClose","buttons_restart","buttons_cancel","buttons_retry","options_select","options_ariaOptionsDisabled","header_previewLinkTitle","header_ariaCloseRestart","header_ariaBotAvatar","header_overflowMenu_options","homeScreen_returnToAssistant","homeScreen_returnToHome","homeScreen_overflowMenuHomeScreen","homeScreen_ariaQuickStartListButton","homeScreen_ariaQuickStartListOpened","homeScreen_ariaQuickStartListClosed","default_agent_availableMessage","default_agent_unavailableMessage","agent_reason_error","agent_sdMissingWarning","agent_noName","agent_chatTitle","agent_startChat","agent_connecting","agent_agentNoNameTitle","agent_agentJoinedName","agent_agentJoinedNoName","agent_youConnectedWarning","agent_connectingMinutes","agent_connectingQueue","agent_ariaHumanAgentAvatar","agent_ariaGenericAvatar","agent_ariaGenericBotAvatar","agent_youEndedChat","agent_conversationWasEnded","agent_disconnected","agent_reconnected","agent_agentLeftChat","agent_agentLeftChatNoName","agent_agentEndedChat","agent_agentEndedChatNoName","agent_transferring","agent_transferringNoName","agent_endChat","agent_confirmSuspendedEndChatTitle","agent_confirmSuspendedEndChatMessage","agent_confirmCancelRequestTitle","agent_confirmCancelRequestMessage","agent_confirmCancelRequestNo","agent_confirmCancelRequestYes","agent_confirmEndChat","agent_confirmEndChatNo","agent_confirmEndChatYes","agent_confirmEndSuspendedYes","agent_botReturned","agent_cardButtonChatRequested","agent_cardButtonConnected","agent_cardButtonChatEnded","agent_cardMessageChatEnded","agent_cardMessageConnected","agent_connectButtonCancel","agent_connectedButtonEndChat","agent_connectWaiting","agent_defaultMessageToHumanAgent","agent_inputPlaceholderConnecting","agent_inputPlaceholderReconnecting","agent_sharingStopSharingButton","agent_sharingRequestTitle","agent_sharingRequestMessage","agent_sharingAcceptButton","agent_sharingDeclineButton","agent_sharingRequested","agent_sharingAccepted","agent_sharingDeclined","agent_sharingCancelled","agent_sharingEnded","agent_suspendedWarning","icon_ariaUnreadMessages","showMore","showMoreResults","disclaimer_title","disclaimer_accept","general_ariaCloseInformationOverlay","general_ariaAnnounceOpenedInformationOverlay","general_ariaAnnounceClosedInformationOverlay","general_ariaAnnounceEscapeOverlay","conversationalSearch_streamingIncomplete","conversationalSearch_viewSourceDocument","conversationalSearch_citationsLabel","conversationalSearch_toggleCitations","conversationalSearch_responseStopped","launcher_chatNow","iframe_ariaSourceLoaded","iframe_ariaImageAltText","iframe_ariaClosePanel","iframe_ariaOpenedPanel","iframe_ariaClosedPanel","iframe_ariaClickPreviewCard","closeAndRestartModal_title","closeAndRestartModal_message","closeAndRestartModal_confirm","closeAndRestartModal_cancel","datePicker_chooseDate","datePicker_confirmDate","tour_resumeButton","tour_restartButton","tour_startButton","tour_doneButton","tour_ariaMinimizeButton","tour_ariaCloseButton","tour_ariaChatButton","tour_ariaPreviousButton","tour_ariaNextButton","tour_instructions","tour_errorFetchingStep","tour_errorTitle","tour_errorBody","fileSharing_fileTooLarge","fileSharing_ariaAnnounceSuccess","fileSharing_fileIcon","fileSharing_removeButtonTitle","fileSharing_statusUploading","fileSharing_uploadFailed","fileSharing_agentMessageText","fileSharing_request","carousel_prevNavButton","carousel_nextNavButton","input_completionsTagApp","input_completionsTagAssistant","table_filterPlaceholder","table_previousPage","table_nextPage","table_itemsPerPage","table_paginationSupplementalText","table_paginationStatus","feedback_positiveLabel","feedback_negativeLabel","feedback_defaultTitle","feedback_defaultPrompt","feedback_defaultPlaceholder","feedback_submitLabel","feedback_cancelLabel","input_stopResponse","messages_responseStopped","chainOfThought_stepTitle","chainOfThought_inputLabel","chainOfThought_outputLabel","chainOfThought_toolLabel","chainOfThought_statusSucceededLabel","chainOfThought_statusFailedLabel","chainOfThought_statusProcessingLabel","chainOfThought_explainabilityLabel","showChildren","onComponentDidMount","defaultProps","resolveFunction","rejectFunction","reject","resolveValue","isResolved","rejectValue","isRejected","createService","lazyWithPreload","factory","mod","lazyMediaPlayer","exported","lazyCarousel","isClient","navigator","browser","detect","screenWidth","screenHeight","os","memoizeOne","getURLHostName","URL","operation","timeout","ChatHeaderObjectType","ChatHeaderAvatarElement","LitElement","isLoaded","_handleOnError","css","unsafeCSS","__decorate","property","String","prototype","bind","CHAT_HEADER_AVATAR_TAG_NAME","CDSChatHeaderAvatarElement","classElement","html","chatHeaderAvatarTemplate","carbonElement","ChatHeaderAvatar","createComponent","tagName","elementClass","react","ChatHeaderLinkElement","isNewTab","customElementClass","chatHeaderLinkTemplate","ChatHeaderLink","ChatHeaderMenu","menuAlignment","Menu","mode","legacyAutoalign","ChatHeaderMenuButton","setIsOpen","refs","menuRefs","context","menuContext","useFloating","onOpenChange","getReferenceProps","getMenuReferenceProps","getFloatingProps","getMenuFloatingProps","useInteractions","useClick","useDismiss","setReference","ButtonSizeEnum","MEDIUM","renderIcon","ChevronUp","ChevronDown","onMouseDown","preventDefault","floating","setFloating","ChatHeaderMenuItem","MenuItem","ChatHeaderMenuItemRadioGroup","defaultSelectedItem","selectedItem","onChange","MenuItemRadioGroup","itemToString","menuItem","ChatHeaderOverflowMenu","tooltipPosition","iconDescription","hasIconOnly","ChatHeaderTitleElement","chatHeaderTitleTemplate","ChatHeaderTitle","AISlug","CDSAILabel","Header","backContent","overflowItems","overflowClicked","backButtonType","brandColor","enableChatHeaderConfig","backButtonRef","restartButtonRef","closeAndRestartButtonRef","closeButtonRef","centerObjectsRef","centerGapRef","overflowRef","overflowIsOpen","setOverflowIsOpen","confirmModelOpen","setConfirmModelOpen","selectedGroupMenuitems","setSelectedGroupMenuItems","isImageError","setIsImageError","hasHeaderAvatar","prevChatHeaderAvatarURL","chatHeaderTitle","headerTitle","chatHeaderDisplayName","closeConfirmModel","showCloseAndRestartButton","useHideCloseButton","closeIcon","closeReverseIcon","closeIsReversible","minimizeButtonIconType","MinimizeButtonIconType","CLOSE","CloseLarge","MINIMIZE","SubtractLarge","SIDE_PANEL_LEFT","SidePanelClose","SIDE_PANEL_RIGHT","onConfirm","getComponentInMenu","list","LINK","RADIO_GROUP","nextObject","Fragment","MenuItemDivider","MENU","getComponentInChatHeader","headerObject","leftObjectsLength","rightObjectsLength","left","right","isLeftObjectsInOverflow","isRightObjectsInOverflow","renderChatHeaderObjectsInOverflow","hasOverflow","isRTL","leftContent","leftChatHeaderComponents","rightChatHeaderComponents","leftChatHeaderMenuComponents","rightChatHeaderMenuComponents","HeaderButton","buttonKind","DownToBottom","centerResizeObserver","centerGapElement","newTotal","floor","disconnect","AI_LABEL_SIZE","EXTRA_SMALL","alignment","POPOVER_ALIGNMENT","BOTTOM_LEFT","BOTTOM_RIGHT","Restart","WACReverseIcon","isReversible","testId","CLOSE_CHAT","ConfirmModal","onCancel","cancelButtonLabel","confirmButtonLabel","modalAnnounceMessage","WACDirectionHasReversibleSVG","ANNOUNCE_INPUT_TYPES","ANNOUNCE_NODE_EXCLUDE_ATTRIBUTE","ref1","ref2","useRef1","doAnnouncements","strings","pendingValues","elementToAnnounce","nodeToText","useElement","innerText","innerHTML","nodeType","hasNodeType","formattedMessage","messageValues","messageText","isElement","getComputedStyle","display","getAttribute","hasAttribute","trimAndPush","isInputNode","placeholder","isTextAreaNode","isImageNode","shadowRoot","childNodes","childNode","isTextNode","replaceAll","HomeScreenHeader","option","HOME_SCREEN","locales","ar","ar-dz","ar-kw","ar-ly","ar-ma","ar-sa","ar-tn","cs","de","de-at","de-ch","en","en-au","en-ca","en-gb","en-ie","en-il","en-nz","es","es-do","es-us","nl","fr","fr-ca","fr-ch","it","it-ch","ja","ko","pt","pt-br","zh","zh-cn","zh-tw","zh-mo","zh-hk","requestedLocale","localeKey","requestedSupported","language","isSupportedLocale","keyList","findSupportedKey","localeModule","enLocaleData","providedLanguagePack","handleBTag","handleBRTag","addHTMLSupport","b","br","loadDayjsLocale","previousLocale","createEnglishFormat","IntlMessageFormat","htmlAttributes","WAC__hidden","_type","v4","AriaLiveMessage","AriaLiveMessageExport","outer","visibility","overflow","appendChild","inner","scrollbarWidth","parentNode","removeChild","doScrollElementIntoView","boundary","compute","scrollMode","block","inline","el","top","doScrollElement","scrollLeft","scroll","behavior","doFocus","activeElement","tabbable","getShadowRoot","focus","defer","focusOnFirstFocusableItemInArrayOfElements","focusOnFirstFocusableElement","parentElement","focusableElements","isEnterKey","shiftKey","altKey","metaKey","ctrlKey","hasModifiers","isComposing","keyCode","getScrollBottom","scrollHeight","DATE","isTextItem","PAUSE","typing","OPTION","choice","relatedResponseID","createMessageRequestForButtonItemOption","buttonItem","createMessageRequestForFileUpload","upload","InternalMessageRequestType","FILE","FROM_USER","createMessageRequestForDate","inputString","userString","threadID","responseType","textItem","response","CONNECT_TO_HUMAN_AGENT","hasBodyOrFooter","IMAGE","VIDEO","AUDIO","CONVERSATIONAL_SEARCH","TABLE","renderAsTour","user_defined_type","serviceDeskFactory","USER_DEFINED","isSingleItemCarousel","getOptionType","preference","totalOptions","getMediaDimensions","dimensions","hasLiveHumanAgentMessage","AnnounceOnMountComponent","isMounted","onceAnnounced","WriteableElement$1","ModalPortal","attachedToHost","modalElement","attachIfNeeded","contextType","onYesClick","onNoClick","onKeyDown","setIsConnecting","setIsReconnecting","setHumanAgentLeftChat","setAgentAvailability","setHumanAgentJoined","updateCapabilities","updateFilesUploadInProgress","setShowScreenShareRequest","setIsScreenSharing","setPersistedServiceDeskState","agentUpdateIsTyping","getBotInputState","getHumanAgentInputState","getHumanAgentState","getPersistedHumanAgent","persisted","isConnectingOrConnected","disableInput","inputPlaceholderKey","BotHeader","homeScreenIsOn","shallowEqual","hasChatHeaderObjects","allowHomeScreen","Home","getOwnPropertyNames","prop","hasOwnProperty","call","isFrozen"],"sourceRoot":""}