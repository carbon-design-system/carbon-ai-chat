/* 
 *  Copyright IBM Corp. 2025
 *  
 *  This source code is licensed under the Apache-2.0 license found in the
 *  LICENSE file in the root directory of this source tree.
 */

@use "sass:meta";
@use "@carbon/styles/scss/reset";
@use "@carbon/styles/scss/type";
@use "@carbon/styles/scss/theme";
@use "@carbon/layout";
@use "@carbon/styles/scss/components/data-table";
@use "@carbon/styles/scss/components/link";
@use "@carbon/styles/scss/components/list";

:host {
  display: block;
}

.WACConversationalSearchText--hasCitation {
  border-radius: 4px;
  background-color: theme.$highlight;
}

.WACWidget__MarkdownP,
.cds--data-table-content,
.WACWidget__MarkdownBlockquote,
.WACWidget__MarkdownImg,
.WACWidget__MarkdownPre {
  margin-block: 0;
}

.cds--list--unordered:not(.cds--list--nested),
.cds--list--ordered:not(.cds--list--nested) {
  padding: 0;
  margin-block: 0;
  padding-block: layout.$spacing-03;
}

.WACWidget__MarkdownP {
  @include type.type-style("body-01");

  font-size: var(--cds-chat-BASE-font-size-med);
  line-height: var(--cds-chat-BASE-line-height-large);
}

.WACWidget__MarkdownBlockquote {
  border-inline-start: 4px solid var(--cds-chat-ACCENT-color);
  padding-inline-start: layout.$spacing-03;
}

pre,
.WACWidget__MarkdownPre {
  @include type.type-style("code-02");

  overflow: auto hidden;
  padding: layout.$spacing-05;

  border: solid 1px theme.$chat-bubble-border;
  background-color: theme.$layer-02;
  white-space: pre-wrap;
}

.WACWidget__MarkdownImg {
  /* Make sure images in markdown do not overflow. */
  max-inline-size: 100%;
}

h1.WACWidget__MarkdownHeading,
h2.WACWidget__MarkdownHeading,
h3.WACWidget__MarkdownHeading,
h4.WACWidget__MarkdownHeading,
h5.WACWidget__MarkdownHeading,
h6.WACWidget__MarkdownHeading {
  &:not(:first-child) {
    margin-block-start: layout.$spacing-06;
  }
}

h1.WACWidget__MarkdownHeading {
  @include type.type-style("heading-03");
}

h2.WACWidget__MarkdownHeading {
  @include type.type-style("heading-02");
}

h3.WACWidget__MarkdownHeading {
  @include type.type-style("heading-01");
}

h4.WACWidget__MarkdownHeading {
  @include type.type-style("heading-01");
}

h5.WACWidget__MarkdownHeading {
  @include type.type-style("heading-01");
}

h6.WACWidget__MarkdownHeading {
  @include type.type-style("heading-01");
}

.cds--data-table-content {
  overflow: auto hidden;
  overflow-wrap: normal;
  word-break: normal;
  word-wrap: normal;
}

.WACWidget__MarkdownP,
.cds--data-table-content,
.WACWidget__MarkdownBlockquote,
.WACWidget__MarkdownImg,
.cds--list--ordered:not(.cds--list--nested),
.cds--list--unordered:not(.cds--list--nested),
pre,
.WACWidget__MarkdownPre,
hr {
  &:not(:first-child) {
    margin-block-start: layout.$spacing-05;
  }
}

.cds--list--ordered:not(.cds--list--nested) {
  margin-inline-start: layout.$spacing-06;
}

:host-context(.WAC--narrowWidth),
:host-context(.WAC--standardWidth) {
  // Carbon displays cds--link using display: inline-flex to allow icons to align well. In our narrow viewport this can
  // lead to some funky linebreaks. This CSS will set cds--link to be display: inline if there is no icon.
  .cds--link:not(:has(.cds--link__icon)) {
    display: inline;
  }
}
