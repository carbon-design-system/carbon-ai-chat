/*
 *  Copyright IBM Corp. 2025
 *
 *  This source code is licensed under the Apache-2.0 license found in the
 *  LICENSE file in the root directory of this source tree.
 */

@use "@carbon/layout";
@use "@carbon/styles/scss/theme";
@use "@carbon/styles/scss/motion";
@use "@carbon/styles/scss/type";
@use "@carbon/styles/scss/components/button" as button;
@use "../../../styles/chatTheme";

$launcher-default-size: 56px;
$unread-indicator-color-background: theme.$support-error;
$unread-indicator-color-text: theme.$text-on-color;
$launcher-position-bottom: layout.$spacing-07;
$launcher-position-right: layout.$spacing-07;
$launcher-position-bottom-mobile: layout.$spacing-05;

// Launcher color variables
$launcher-color-background: button.$button-primary;
$launcher-color-avatar: theme.$text-on-color;
$launcher-color-background-hover: button.$button-primary-hover;
$launcher-color-background-active: button.$button-primary-active;
$launcher-color-focus-border: theme.$text-on-color;
$launcher-mobile-color-text: theme.$text-on-color;
$launcher-expanded-message-color-background: button.$button-primary;
$launcher-expanded-message-color-text: theme.$text-on-color;
$launcher-expanded-message-color-background-hover: button.$button-primary-hover;
$launcher-expanded-message-color-background-active: button.$button-primary-active;
$launcher-expanded-message-color-focus-border: theme.$text-on-color;

@keyframes WACLauncherIn {
  0% {
    /* Launcher positioning should probably be handled by remote config not CSS. */
    inset-block-end: calc($launcher-position-bottom - #{layout.$spacing-05});
    opacity: 0;
  }

  100% {
    /* Launcher positioning should probably be handled by remote config not CSS. */
    inset-block-end: $launcher-position-bottom;
    opacity: 1;
  }
}

@media screen and (prefers-reduced-motion: reduce) {
  .WACLauncher__ButtonContainer {
    position: fixed;
    z-index: var(--cds-chat-BASE-z-index);
    border-radius: layout.$spacing-01;
    animation: none;
    background-color: theme.$background;
    box-shadow: chatTheme.$BASE-box-shadow;
    inset-block-end: $launcher-position-bottom;
    inset-inline-end: $launcher-position-bottom;
  }
}

.WACLauncher__ButtonContainer {
  position: fixed;
  z-index: var(--cds-chat-BASE-z-index);
  border-radius: layout.$spacing-01;
  animation: WACLauncherIn motion.$duration-moderate-01
    motion.motion(entrance, expressive) both;
  background-color: theme.$background;
  box-shadow: chatTheme.$BASE-box-shadow;
  inset-block-end: $launcher-position-bottom;
  inset-inline-end: $launcher-position-bottom;
}

.WACContainer--render[dir="rtl"] .WACLauncher__ButtonContainer {
  inset-inline: $launcher-position-bottom unset;
}

.WACLauncher__ButtonContainer.WACLauncher__ButtonContainer--hidden {
  /* Using display:none causes the entrance animation to replay */
  visibility: hidden;
}

// This is the div that wraps the small launcher button. We need to add the box-shadow here because the box shadow of
// the actual button is used for the focus state. Because the box-shadow is being added here we have to make sure to set
// the background to transparent, otherwise there could be some weird white pixels sneaking out from beneath the
// launcher button depending on how css decides to round the corners.
.WACLauncher__ButtonContainer.WACLauncher__ButtonContainer--round {
  border-radius: 28px;
  box-shadow: chatTheme.$BASE-box-shadow;
}

// This is the actual small launcher button itself, it's color and box shadow are already set, we just need to make it
// round as well.
.WACLauncher__ButtonContainer.WACLauncher__ButtonContainer--round
  .WACLauncher__Button {
  border-radius: 28px;
  background-color: $launcher-color-background;
  transition: unset;
  @media screen and (prefers-reduced-motion: reduce) {
    background-color: $launcher-color-background;
    transition: none;

    // Make the focus and active box-shadow one px wider since the default 1px width looks weird with the rounded launcher.
    &:focus {
      border-width: button.$button-border-width;
      border-color: $launcher-color-background;

      &::part(button) {
        box-shadow: inset 0 0 0 button.$button-border-width
          $launcher-color-focus-border;
      }
    }

    &:hover {
      border-color: $launcher-color-background-hover;
      background-color: $launcher-color-background-hover;
    }

    &:active {
      border-width: button.$button-border-width;
      border-color: $launcher-color-background-active;
      background-color: $launcher-color-background-active;
      box-shadow: inset 0 0 0 button.$button-border-width
        $launcher-color-focus-border;
    }
  }

  &::part(button) {
    &:focus {
      box-shadow: inset 0 0 0 button.$button-border-width
        $launcher-color-focus-border;
    }
  }
  // Make the focus and active box-shadow one px wider since the default 1px width looks weird with the rounded launcher.
  &:focus {
    border-width: button.$button-border-width;
    border-color: $launcher-color-background;
  }

  &:hover {
    border-color: $launcher-color-background-hover;
    background-color: $launcher-color-background-hover;
  }

  &:active {
    border-width: button.$button-border-width;
    border-color: $launcher-color-background-active;
    background-color: $launcher-color-background-active;
    box-shadow: inset 0 0 0 button.$button-border-width
      $launcher-color-focus-border;
  }
}

.WACLauncher__ButtonContainer.WACLauncher__ButtonContainer--round
  .WACLauncher__Button
  .WAC__countIndicator {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 4px;
  border-radius: 10px;
  background-color: $unread-indicator-color-background;
  color: $unread-indicator-color-text;
  @include type.type-style("caption-01");

  inset-block-start: calc(-1 * #{layout.$spacing-01});
  inset-inline-end: calc(-1 * #{layout.$spacing-01});
  min-block-size: 20px;

  // This is 20px and not a multiple of 4 because of the 12px font-size plus 4px of padding on each side.
  min-inline-size: 20px;
}

.WACContainer--render[dir="rtl"]
  .WACLauncher__ButtonContainer.WACLauncher__ButtonContainer--round
  .WACLauncher__Button
  .WAC__countIndicator {
  inset-inline: calc(-1 * #{layout.$spacing-01}) unset;
}

// Used to stop the small launchers original entrance animation if we're transitioning from medium.
.WACLauncher__ButtonContainer.WACLauncher__ButtonContainer--noAnimation {
  animation: none;
}

@media screen and (prefers-reduced-motion: reduce) {
  cds-custom-button.WACLauncher__Button {
    position: static;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    border-radius: layout.$spacing-01;
    background-color: $launcher-color-background;
    block-size: $launcher-default-size;
    inline-size: $launcher-default-size;
    transition: none;
  }
}

cds-custom-button.WACLauncher__Button {
  &::part(button) {
    svg {
      block-size: 24px;
      fill: $launcher-color-avatar;
      inline-size: 24px;
    }

    display: flex;
    align-items: center;
    justify-content: center;
    padding: inherit;
    border-radius: inherit;
    block-size: inherit;
    inline-size: inherit;
    max-inline-size: inherit;
  }

  &::part(button):focus {
    border-width: button.$button-border-width;
  }

  position: static;
  padding: 0;
  border-radius: layout.$spacing-01;
  background-color: $launcher-color-background;
  block-size: $launcher-default-size;
  inline-size: $launcher-default-size;
  transition:
    background 250ms ease-in-out,
    transform 150ms ease;
}

.WACLauncher__svg {
  fill: currentcolor;
}

.WACLauncher__Avatar {
  border-radius: 50%;
  block-size: 32px;
  inline-size: 32px;
  user-select: none;
}

.WACLauncher__Button .WAC__countIndicator {
  box-shadow: 1px layout.$spacing-01 layout.$spacing-01 rgb(23 23 23 / 30%);
  inset-block-start: calc(-1 * #{layout.$spacing-02});
  inset-inline-end: calc(-1 * #{layout.$spacing-02});
}

.WACContainer--render[dir="rtl"] .WACLauncher__Button .WAC__countIndicator {
  inset-inline: calc(-1 * #{layout.$spacing-02}) unset;
}

@media screen and (prefers-reduced-motion: reduce) {
  .WACLauncher__ButtonContainer.WACLauncher__ButtonContainer--bounceAnimation {
    animation: none;
  }
}

.WACLauncher__ButtonContainer.WACLauncher__ButtonContainer--bounceAnimation {
  animation: WACLauncherBounce 500ms motion.motion(entrance, expressive)
    forwards;
}

@keyframes WACLauncherBounce {
  0% {
    transform: translateY(0);
  }

  30% {
    transform: translateY(-10px);
  }

  50% {
    transform: translateY(0);
  }

  70% {
    transform: translateY(-10px);
  }

  100% {
    transform: translateY(0);
  }
}

.WACLauncherComplex__Container .WACLauncherComplex__Text {
  display: -webkit-box;
  margin: layout.$spacing-05;
  -webkit-box-orient: vertical;
  color: $launcher-expanded-message-color-text;
  font-size: 20px;
  letter-spacing: 0;
  -webkit-line-clamp: 3;
  line-clamp: 3;
  line-height: 1.4;
  opacity: 0;
  overflow-wrap: break-word;
  text-align: start;

  // Fixes a random bug with multi line line-clamp that caused the line-clamp to be ignored on first render after the
  // component had its visibility set to hidden or inherited it from it's parent. In our case this bug occurs after the
  // Carbon AI Chat has been opened and then closed. When its opened we apply visibility: hidden to the Launcher as a part of
  // the changes made for this class ".WACLauncher__ButtonContainer--hidden" above. So it's necessary that we apply
  // visibility: visible here as a workaround otherwise the line-clamp is ignored when the launcher renders again after
  // the Carbon AI Chat is closed. src
  // https://stackoverflow.com/questions/38989475/css-multi-line-line-clamp-ellipsis-doesnt-work
  // This class needs to be removed when the element isn't visible otherwise the content will still show.
  visibility: visible;
  white-space: normal;
  word-break: break-word;
}

// LauncherComplex
.WACLauncherComplex__Container {
  border-radius: layout.$spacing-04;
  animation: none;
  background: transparent;
  box-shadow: none;

  // Start at the bottom of the page, move up 16px for the padding between small launcher and top of medium container,
  // then up 56px more for small launcher height, and then up 32px for the padding between small launcher and the bottom
  // of the page. Once all of that has been done move down the height of the launcher container. This way the top of the
  // container always starts 16px above the small launcher before the animation, irrelevant of how tall the container is.
  inset-block-end: calc(
    #{layout.$spacing-05} + $launcher-default-size +
      $launcher-position-bottom - var(
        --cds-chat-LAUNCHER-desktop-expanded-height
      )
  );

  // 64px of distance between the right side of the medium container and the right side of the page, so that theres a
  // slight overlap between the container and the small launcher which has an 80px width when it's expanded.
  inset-inline-end: layout.$spacing-10;
  max-inline-size: 270px;
}

.WACContainer--render[dir="rtl"] .WACLauncherComplex__Container {
  inset-inline: layout.$spacing-10 unset;
}

.WACLauncherComplex__Container .WACLauncherComplex__ContentButton {
  padding: 0;
  border: button.$button-border-width solid transparent;
  border-radius: layout.$spacing-04;
  background: transparent;
  box-shadow: none;
  min-inline-size: layout.$spacing-13;

  &:enabled:focus {
    border-width: button.$button-border-width;
    border-color: $launcher-expanded-message-color-background;
    box-shadow: inset 0 0 0 button.$button-border-width
      $launcher-expanded-message-color-focus-border;
    outline: none;
  }

  &:enabled:hover {
    border-color: $launcher-expanded-message-color-background-hover;
    background-color: $launcher-expanded-message-color-background-hover;
    cursor: pointer;
  }

  &:enabled:active {
    border-width: button.$button-border-width;
    border-color: $launcher-expanded-message-color-background-active;
    background: $launcher-expanded-message-color-background-active;
    box-shadow: inset 0 0 0 button.$button-border-width
      $launcher-expanded-message-color-focus-border;
  }
}

.WACContainer--render[dir="rtl"]
  .WACLauncherComplex__Container
  .WACLauncherComplex__Text {
  text-align: end;
}

.WACLauncherComplex__Container .WACLauncher__CloseButton {
  position: absolute;

  // 1px less padding everywhere to fit the border.
  padding: 3px 7px 3px 3px;
  border: button.$button-outline-width solid transparent;
  margin: 0;

  // Slightly less blur than the normal box-shadow since the close button is so small.
  box-shadow: 1px 0 2px rgb(23 23 23 / 30%);
  cursor: pointer;
  @include type.type-style("caption-01");

  // The height of the tag 24px, plus the 8px gap we want.
  inset-block-start: calc((#{layout.$spacing-06} + #{layout.$spacing-03}) * -1);
  inset-inline-end: 0;
  opacity: 0;
}

.WACLauncherComplex__Container .WACLauncher__CloseButton:focus {
  border-color: theme.$focus;
  outline: none;
}

.WACContainer--render[dir="rtl"]
  .WACLauncherComplex__Container
  .WACLauncher__CloseButton {
  padding: 3px 3px 3px 7px;
  inset-inline: 0 unset;
}

.WACLauncherComplex__Container
  .WACLauncher__CloseButton
  .WACLauncher__CloseButtonIcon {
  margin-inline-end: layout.$spacing-02;
}

.WACContainer--render[dir="rtl"]
  .WACLauncherComplex__Container
  .WACLauncher__CloseButton
  .WACLauncher__CloseButtonIcon {
  margin-inline: layout.$spacing-02 unset;
}

@media screen and (prefers-reduced-motion: reduce) {
  .WACLauncherComplex__Container--introAnimation {
    animation: none;
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncher__Avatar {
        animation: none;
      }
    }

    .WACLauncher__Avatar {
      animation: motion.$duration-slow-02 WACAnimLauncherComplex__AvatarResize
        forwards;
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__Text {
        animation: none;
      }
    }

    .WACLauncherComplex__Text {
      animation: motion.$duration-slow-02 WACAnimLauncherComplex__FadeInText
        forwards;
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__SmallLauncherContainer,
      .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
        .WACLauncher__Button {
        animation: none;
      }
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__SmallLauncherContainer,
      .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
        .WACLauncher__Button {
        animation: none;
      }
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__SmallLauncherContainer,
      .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
        .WACLauncher__Button {
        animation: none;
      }
    }

    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: motion.$duration-slow-02
        WACAnimLauncherComplex__SmallLauncherResizeReposition forwards;
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncher__CloseButton {
        animation: none;
      }
    }

    .WACLauncher__CloseButton {
      animation: motion.$duration-slow-02
        WACAnimLauncherComplex__FadeInCloseButton forwards;
    }
  }
}

.WACLauncherComplex__Container--introAnimation {
  animation: motion.$duration-slow-02 WACAnimLauncherComplex__FadeInSlideUp
    forwards;
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncher__Avatar {
      animation: none;
    }
  }

  .WACLauncher__Avatar {
    animation: motion.$duration-slow-02 WACAnimLauncherComplex__AvatarResize
      forwards;
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__Text {
      animation: none;
    }
  }

  .WACLauncherComplex__Text {
    animation: motion.$duration-slow-02 WACAnimLauncherComplex__FadeInText
      forwards;
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: none;
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: none;
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: none;
    }
  }

  .WACLauncherComplex__SmallLauncherContainer,
  .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
    .WACLauncher__Button {
    animation: motion.$duration-slow-02
      WACAnimLauncherComplex__SmallLauncherResizeReposition forwards;
  }

  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncher__CloseButton {
      animation: none;
    }
  }

  .WACLauncher__CloseButton {
    animation: motion.$duration-slow-02
      WACAnimLauncherComplex__FadeInCloseButton forwards;
  }
}

.WACContainer--render[dir="rtl"]
  .WACLauncherComplex__Container--introAnimation {
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: none;
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: none;
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: none;
    }
  }

  .WACLauncherComplex__SmallLauncherContainer,
  .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
    .WACLauncher__Button {
    animation: motion.$duration-slow-02
      WACAnimLauncherComplex__SmallLauncherResizeRepositionRTL forwards;
  }
}

@keyframes WACAnimLauncherComplex__FadeInSlideUp {
  0% {
    background: transparent;
    box-shadow: none;
    // Start at the bottom of the page, move up 16px for the padding between small launcher and top of medium container,
    // then up 56px more for small launcher height, and then up 32px for the padding between small launcher and the bottom
    // of the page. Once all of that has been done move down the height of the launcher container. This way the top of the
    // container always starts 16px above the small launcher before the animation, irrelevant of how tall the container is.
    inset-block-end: calc(
      #{layout.$spacing-05} + $launcher-default-size +
        $launcher-position-bottom - var(
          --cds-chat-LAUNCHER-desktop-expanded-height
        )
    );
  }

  30% {
    background: transparent;
    box-shadow: none;
  }

  100% {
    background: $launcher-expanded-message-color-background;
    box-shadow: chatTheme.$BASE-box-shadow;
    // 64px of distance between the bottom of the medium container and the bottom of the page, so that theres a slight
    // overlap between the container and the small launcher which has an 80px height when it's expanded.
    inset-block-end: layout.$spacing-10;
  }
}

@keyframes WACAnimLauncherComplex__FadeInText {
  0% {
    opacity: 0;
  }

  40% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

@keyframes WACAnimLauncherComplex__SmallLauncherResizeReposition {
  0% {
    padding: 0;
    border-radius: 28px;
    block-size: $launcher-default-size;
    inline-size: $launcher-default-size;
    inset-block-end: $launcher-position-bottom;
    inset-inline-end: $launcher-position-right;
  }

  100% {
    padding: 0 60px 60px 0;
    border-radius: layout.$spacing-11;
    block-size: layout.$spacing-13;
    inline-size: layout.$spacing-13;
    inset-block-end: calc(-1 * #{layout.$spacing-11});
    inset-inline-end: calc(-1 * #{layout.$spacing-11});
  }
}

@keyframes WACAnimLauncherComplex__SmallLauncherResizeRepositionRTL {
  0% {
    padding: 0;
    border-radius: 28px;
    block-size: $launcher-default-size;
    inline-size: $launcher-default-size;
    inset-block-end: $launcher-position-bottom;
    inset-inline-start: $launcher-position-right;
  }

  100% {
    padding: 0 0 60px 60px;
    border-radius: layout.$spacing-11;
    block-size: layout.$spacing-13;
    inline-size: layout.$spacing-13;
    inset-block-end: calc(-1 * #{layout.$spacing-11});
    inset-inline-start: calc(-1 * #{layout.$spacing-11});
  }
}

@keyframes WACAnimLauncherComplex__FadeInCloseButton {
  0% {
    opacity: 0;
  }

  80% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

@media screen and (prefers-reduced-motion: reduce) {
  .WACLauncherComplex__Container--simpleAnimation {
    animation: none;
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncher__Avatar {
        animation: none;
      }
    }

    .WACLauncher__Avatar {
      animation: motion.$duration-moderate-01
        WACAnimLauncherComplex__AvatarResize forwards;
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__Text {
        animation: none;
      }
    }

    .WACLauncherComplex__Text {
      animation: motion.$duration-moderate-01 WACAnimLauncherComplex__FadeInText
        forwards;
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__SmallLauncherContainer,
      .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
        .WACLauncher__Button {
        padding: 0 60px 60px 0;
        border-radius: layout.$spacing-11;
        animation: none;
        block-size: layout.$spacing-13;
        inline-size: layout.$spacing-13;
        inset-inline-end: calc(-1 * #{layout.$spacing-11});
      }
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__SmallLauncherContainer,
      .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
        .WACLauncher__Button {
        padding: 0 60px 60px 0;
        border-radius: layout.$spacing-11;
        animation: none;
        block-size: layout.$spacing-13;
        inline-size: layout.$spacing-13;
        inset-inline-end: calc(-1 * #{layout.$spacing-11});
      }
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__SmallLauncherContainer,
      .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
        .WACLauncher__Button {
        padding: 0 60px 60px 0;
        border-radius: layout.$spacing-11;
        animation: none;
        block-size: layout.$spacing-13;
        inline-size: layout.$spacing-13;
        inset-inline-end: calc(-1 * #{layout.$spacing-11});
      }
    }

    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      padding: 0 60px 60px 0;
      border-radius: layout.$spacing-11;
      animation: motion.$duration-moderate-01
        WACAnimLauncherComplex__FadeInSlideUpSmallExpandedLauncher forwards;
      block-size: layout.$spacing-13;
      inline-size: layout.$spacing-13;
      inset-inline-end: calc(-1 * #{layout.$spacing-11});
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncher__CloseButton {
        animation: none;
      }
    }

    .WACLauncher__CloseButton {
      animation: motion.$duration-moderate-01
        WACAnimLauncherComplex__FadeInCloseButton forwards;
    }
  }
}

.WACLauncherComplex__Container--simpleAnimation {
  animation: motion.$duration-moderate-01 WACAnimLauncherComplex__FadeInSlideUp
    forwards;
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncher__Avatar {
      animation: none;
    }
  }

  .WACLauncher__Avatar {
    animation: motion.$duration-moderate-01 WACAnimLauncherComplex__AvatarResize
      forwards;
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__Text {
      animation: none;
    }
  }

  .WACLauncherComplex__Text {
    animation: motion.$duration-moderate-01 WACAnimLauncherComplex__FadeInText
      forwards;
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      padding: 0 60px 60px 0;
      border-radius: layout.$spacing-11;
      animation: none;
      block-size: layout.$spacing-13;
      inline-size: layout.$spacing-13;
      inset-inline-end: calc(-1 * #{layout.$spacing-11});
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      padding: 0 60px 60px 0;
      border-radius: layout.$spacing-11;
      animation: none;
      block-size: layout.$spacing-13;
      inline-size: layout.$spacing-13;
      inset-inline-end: calc(-1 * #{layout.$spacing-11});
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      padding: 0 60px 60px 0;
      border-radius: layout.$spacing-11;
      animation: none;
      block-size: layout.$spacing-13;
      inline-size: layout.$spacing-13;
      inset-inline-end: calc(-1 * #{layout.$spacing-11});
    }
  }

  .WACLauncherComplex__SmallLauncherContainer,
  .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
    .WACLauncher__Button {
    padding: 0 60px 60px 0;
    border-radius: layout.$spacing-11;
    animation: motion.$duration-moderate-01
      WACAnimLauncherComplex__FadeInSlideUpSmallExpandedLauncher forwards;
    block-size: layout.$spacing-13;
    inline-size: layout.$spacing-13;
    inset-inline-end: calc(-1 * #{layout.$spacing-11});
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncher__CloseButton {
      animation: none;
    }
  }

  .WACLauncher__CloseButton {
    animation: motion.$duration-moderate-01
      WACAnimLauncherComplex__FadeInCloseButton forwards;
  }
}

.WACContainer--render[dir="rtl"]
  .WACLauncherComplex__Container--simpleAnimation {
  .WACLauncherComplex__SmallLauncherContainer,
  .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
    .WACLauncher__Button {
    padding: 0 0 60px 60px;
    inset-inline: calc(-1 * #{layout.$spacing-11}) unset;
  }
}

@keyframes WACAnimLauncherComplex__AvatarResize {
  0% {
    block-size: 32px;
    inline-size: 32px;
  }

  100% {
    block-size: 48px;
    inline-size: 48px;
  }
}

@keyframes WACAnimLauncherComplex__FadeInSlideUpSmallExpandedLauncher {
  0% {
    inset-block-end: -160px;
    opacity: 0;
  }

  30% {
    opacity: 0;
  }

  100% {
    inset-block-end: calc(-1 * #{layout.$spacing-11});
    opacity: 1;
  }
}

.WACLauncherComplex__Container--toolingPreview {
  background: $launcher-expanded-message-color-background;
  box-shadow: chatTheme.$BASE-box-shadow;
  // 64px of distance between the bottom of the medium container and the bottom of the page, so that theres a slight
  // overlap between the container and the small launcher which has an 80px height when it's expanded.
  inset-block-end: layout.$spacing-10;

  .WACLauncherComplex__Text {
    opacity: 1;
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      padding: 0 60px 60px 0;
      border-radius: layout.$spacing-11;
      animation: none;
      block-size: layout.$spacing-13;
      inline-size: layout.$spacing-13;
      inset-block-end: calc(-1 * #{layout.$spacing-11});
      inset-inline-end: calc(-1 * #{layout.$spacing-11});
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      padding: 0 60px 60px 0;
      border-radius: layout.$spacing-11;
      animation: none;
      block-size: layout.$spacing-13;
      inline-size: layout.$spacing-13;
      inset-block-end: calc(-1 * #{layout.$spacing-11});
      inset-inline-end: calc(-1 * #{layout.$spacing-11});
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      padding: 0 60px 60px 0;
      border-radius: layout.$spacing-11;
      animation: none;
      block-size: layout.$spacing-13;
      inline-size: layout.$spacing-13;
      inset-block-end: calc(-1 * #{layout.$spacing-11});
      inset-inline-end: calc(-1 * #{layout.$spacing-11});
    }
  }

  .WACLauncherComplex__SmallLauncherContainer,
  .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
    .WACLauncher__Button {
    padding: 0 60px 60px 0;
    border-radius: layout.$spacing-11;
    animation: unset;
    block-size: layout.$spacing-13;
    inline-size: layout.$spacing-13;
    inset-block-end: calc(-1 * #{layout.$spacing-11});
    inset-inline-end: calc(-1 * #{layout.$spacing-11});
  }

  .WACLauncher__CloseButton {
    opacity: 1;
  }
}

@media screen and (prefers-reduced-motion: reduce) {
  .WACLauncherComplex__Container--closeAnimation {
    animation: none;
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncher__Avatar {
        animation: none;
      }
    }

    .WACLauncher__Avatar {
      animation: motion.$duration-slow-01 WACAnimLauncherComplex__AvatarResize
        backwards;
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__Text,
      .WACLauncher__CloseButton {
        animation: none;
      }
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__Text,
      .WACLauncher__CloseButton {
        animation: none;
      }
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__Text,
      .WACLauncher__CloseButton {
        animation: none;
      }
    }

    .WACLauncherComplex__Text,
    .WACLauncher__CloseButton {
      animation: motion.$duration-slow-01 WACAnimLauncherComplex__FadeOut
        forwards;
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__SmallLauncherContainer,
      .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
        .WACLauncher__Button {
        animation: none;
      }
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__SmallLauncherContainer,
      .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
        .WACLauncher__Button {
        animation: none;
      }
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncherComplex__SmallLauncherContainer,
      .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
        .WACLauncher__Button {
        animation: none;
      }
    }

    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: motion.$duration-slow-01
        WACAnimLauncherComplex__SmallLauncherDefaultSizePosition forwards;
    }
  }
}

.WACLauncherComplex__Container--closeAnimation {
  animation: motion.$duration-slow-01 WACAnimLauncherComplex__FadeOutSlideDown
    forwards;
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncher__Avatar {
      animation: none;
    }
  }

  .WACLauncher__Avatar {
    animation: motion.$duration-slow-01 WACAnimLauncherComplex__AvatarResize
      backwards;
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__Text,
    .WACLauncher__CloseButton {
      animation: none;
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__Text,
    .WACLauncher__CloseButton {
      animation: none;
    }
  }

  .WACLauncherComplex__Text,
  .WACLauncher__CloseButton {
    animation: motion.$duration-slow-01 WACAnimLauncherComplex__FadeOut forwards;
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: none;
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: none;
    }
  }

  .WACLauncherComplex__SmallLauncherContainer,
  .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
    .WACLauncher__Button {
    animation: motion.$duration-slow-01
      WACAnimLauncherComplex__SmallLauncherDefaultSizePosition forwards;
  }
}

.WACContainer--render[dir="rtl"]
  .WACLauncherComplex__Container--closeAnimation {
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: none;
    }
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncherComplex__SmallLauncherContainer,
    .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
      .WACLauncher__Button {
      animation: none;
    }
  }

  .WACLauncherComplex__SmallLauncherContainer,
  .WACLauncher__ButtonContainer.WACLauncherComplex__SmallLauncherContainer
    .WACLauncher__Button {
    animation: motion.$duration-slow-02
      WACAnimLauncherComplex__SmallLauncherDefaultSizePositionRTL forwards;
  }
}

@keyframes WACAnimLauncherComplex__FadeOutSlideDown {
  0% {
    background: $launcher-expanded-message-color-background;
    box-shadow: chatTheme.$BASE-box-shadow;
    inset-block-end: layout.$spacing-10;
  }

  40% {
    background: transparent;
    box-shadow: none;
  }

  100% {
    background: transparent;
    box-shadow: none;
    inset-block-end: calc(
      #{layout.$spacing-05} + $launcher-default-size +
        $launcher-position-bottom - var(
          --cds-chat-LAUNCHER-desktop-expanded-height
        )
    );
  }
}

@keyframes WACAnimLauncherComplex__FadeOut {
  0% {
    opacity: 1;
  }

  40% {
    opacity: 0;
  }

  100% {
    opacity: 0;
  }
}

@keyframes WACAnimLauncherComplex__SmallLauncherDefaultSizePosition {
  0% {
    padding: 0 60px 60px 0;
    border-radius: layout.$spacing-11;
    block-size: layout.$spacing-13;
    inline-size: layout.$spacing-13;
    inset-block-end: calc(-1 * #{layout.$spacing-11});
    inset-inline-end: calc(-1 * #{layout.$spacing-11});
  }

  100% {
    padding: 0;
    border-radius: 28px;
    block-size: $launcher-default-size;
    inline-size: $launcher-default-size;
    inset-block-end: $launcher-position-bottom;
    inset-inline-end: $launcher-position-right;
  }
}

@keyframes WACAnimLauncherComplex__SmallLauncherDefaultSizePositionRTL {
  0% {
    padding: 0 0 60px 60px;
    border-radius: layout.$spacing-11;
    block-size: layout.$spacing-13;
    inline-size: layout.$spacing-13;
    inset-block-end: calc(-1 * #{layout.$spacing-11});
    inset-inline-start: calc(-1 * #{layout.$spacing-11});
  }

  100% {
    padding: 0;
    border-radius: 28px;
    block-size: $launcher-default-size;
    inline-size: $launcher-default-size;
    inset-block-end: $launcher-position-bottom;
    inset-inline-start: $launcher-position-right;
  }
}

// Launcher Extended styles
.WACLauncherExtended__Container {
  block-size: $launcher-default-size;
  inline-size: $launcher-default-size;
}

// Mobile launcher positioning - use 1rem instead of spacing-07
.WACLauncher__ButtonContainer.WACLauncher__ButtonContainer--mobile {
  inset-block-end: $launcher-position-bottom-mobile;
  inset-inline-end: $launcher-position-bottom-mobile;
}

button.WACLauncherExtended__Button {
  padding: 0;
  border-width: button.$button-border-width;
  block-size: 100%;
  cursor: pointer;
  inline-size: 100%;
}

.WACLauncherExtended__Button--hidden {
  visibility: hidden;
}

.WACLauncherExtended__WrapperContainer {
  position: relative;
  overflow: hidden;
  block-size: 100%;
  inline-size: 100%;
}

.WACLauncherExtended__Wrapper {
  position: absolute;
  display: flex;
  inline-size: calc(var(--cds-chat--LAUNCHER-EXTENDED-width) - 6px);
  inset-inline-end: 0;
  max-inline-size: calc(100vw - $launcher-position-bottom - 6px);
}

.WACLauncherExtended__TextHolder {
  position: relative;
  flex: 1;
  padding: layout.$spacing-04 0 layout.$spacing-04 layout.$spacing-04;
  text-align: start;
}

.WACLauncherExtended__Greeting {
  position: absolute;
  display: flex;
  align-items: center;
  block-size: 100%;
  color: $launcher-mobile-color-text;
  @include type.type-style("body-01");

  inline-size: calc(100% - 12px);
  inset-block-end: 0;
  word-break: break-word;
}

.WAC-isPhone .WACLauncherExtended__Greeting {
  @include type.type-style("body-01");
}

.WACLauncherExtended__GreetingText {
  display: -webkit-box;
  overflow: hidden;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  line-clamp: 2;
  text-overflow: ellipsis;
}

.WACLauncherExtended__Button .WACLauncher__IconHolder {
  display: flex;
  align-items: center;
  justify-content: center;
  block-size: calc($launcher-default-size - button.$button-border-width * 2);
  inline-size: calc($launcher-default-size - button.$button-border-width * 2);
  margin-inline-start: auto;

  svg {
    position: absolute;
    block-size: 24px;
    inline-size: 24px;
  }
}

.WACLauncherExtended__Button .WACLauncherExtended__Element--hidden {
  display: none;
}

@media screen and (prefers-reduced-motion: reduce) {
  .WACLauncherExtended__Button .WACLauncherExtended__Element--FadeOut {
    animation: none;
  }
}

.WACLauncherExtended__Button .WACLauncherExtended__Element--FadeOut {
  animation: WACLauncherExtendedElementFadeOut 0.5s ease-out 0.4s both;
}

@media screen and (prefers-reduced-motion: reduce) {
  .WACLauncherExtended__Button .WACLauncherExtended__Element--FadeIn {
    animation: none;
  }
}

.WACLauncherExtended__Button .WACLauncherExtended__Element--FadeIn {
  animation: WACLauncherExtendedElementFadeIn 0.5s ease-out 0.4s both;
}

.WACLauncher__ButtonContainer.WACLauncherExtended__Button--extended {
  border-radius: 14px;
  inline-size: var(--cds-chat--LAUNCHER-EXTENDED-width);

  button.WACLauncherExtended__Button {
    border-radius: 14px;
  }

  .WACLauncher__svg {
    inline-size: 24px;
  }
}

@media screen and (prefers-reduced-motion: reduce) {
  .WACLauncher__ButtonContainer.WACLauncherExtended__Button--extendedAnimation {
    animation: none;
    @media screen and (prefers-reduced-motion: reduce) {
      button.WACLauncherExtended__Button {
        animation: none;
      }
    }

    button.WACLauncherExtended__Button {
      animation: WACLauncherPartiallyRound 0.3s ease-in 0.5s both;
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncher__svg {
        animation: none;
      }
    }

    .WACLauncher__svg {
      animation: WACLauncherIconTo24 0.3s ease-out 0.5s both;
    }
  }
}

.WACLauncher__ButtonContainer.WACLauncherExtended__Button--extendedAnimation {
  animation:
    WACLauncherExtend 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.5s both,
    WACLauncherPartiallyRound 0.3s ease-in 0.5s both;
  @media screen and (prefers-reduced-motion: reduce) {
    button.WACLauncherExtended__Button {
      animation: none;
    }
  }

  button.WACLauncherExtended__Button {
    animation: WACLauncherPartiallyRound 0.3s ease-in 0.5s both;
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncher__svg {
      animation: none;
    }
  }

  .WACLauncher__svg {
    animation: WACLauncherIconTo24 0.3s ease-out 0.5s both;
  }
}

@media screen and (prefers-reduced-motion: reduce) {
  .WACLauncher__ButtonContainer.WACLauncherExtended__Button--reducedAnimation {
    animation: none;
    @media screen and (prefers-reduced-motion: reduce) {
      button.WACLauncherExtended__Button {
        animation: none;
      }
    }

    button.WACLauncherExtended__Button {
      animation: WACLauncherCompletelyRound 0.3s ease-out 0.5s both;
    }
    @media screen and (prefers-reduced-motion: reduce) {
      .WACLauncher__svg {
        animation: none;
      }
    }

    .WACLauncher__svg {
      animation: WACLauncherIconTo32 0.3s ease-out 0.5s both;
    }
  }
}

.WACLauncher__ButtonContainer.WACLauncherExtended__Button--reducedAnimation {
  animation:
    WACLauncherReduce 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.5s both,
    WACLauncherCompletelyRound 0.3s ease-out 0.5s both;
  @media screen and (prefers-reduced-motion: reduce) {
    button.WACLauncherExtended__Button {
      animation: none;
    }
  }

  button.WACLauncherExtended__Button {
    animation: WACLauncherCompletelyRound 0.3s ease-out 0.5s both;
  }
  @media screen and (prefers-reduced-motion: reduce) {
    .WACLauncher__svg {
      animation: none;
    }
  }

  .WACLauncher__svg {
    animation: WACLauncherIconTo32 0.3s ease-out 0.5s both;
  }
}

.WACContainer--render[dir="rtl"] .WACLauncherExtended__Container {
  .WACLauncherExtended__Wrapper {
    inset-inline: 0 unset;
  }

  .WACLauncherExtended__TextHolder {
    padding: layout.$spacing-04 layout.$spacing-04 layout.$spacing-04 0;
  }
}

@keyframes WACLauncherIconTo32 {
  0% {
    inline-size: 24px;
  }

  100% {
    inline-size: 32px;
  }
}

@keyframes WACLauncherIconTo24 {
  0% {
    inline-size: 32px;
  }

  100% {
    inline-size: 24px;
  }
}

@keyframes WACLauncherPartiallyRound {
  0% {
    border-radius: 28px;
  }

  100% {
    border-radius: 14px;
  }
}

@keyframes WACLauncherCompletelyRound {
  0% {
    border-radius: 14px;
  }

  100% {
    border-radius: 28px;
  }
}

@keyframes WACLauncherExtend {
  0% {
    inline-size: $launcher-default-size;
  }

  100% {
    inline-size: var(--cds-chat--LAUNCHER-EXTENDED-width);
  }
}

@keyframes WACLauncherReduce {
  0% {
    inline-size: var(--cds-chat--LAUNCHER-EXTENDED-width);
  }

  100% {
    inline-size: $launcher-default-size;
  }
}

@keyframes WACLauncherExtendedElementFadeIn {
  0% {
    inset-block-end: -12px;
    opacity: 0;
  }

  50%,
  100% {
    inset-block-end: 0;
    opacity: 1;
  }
}

@keyframes WACLauncherExtendedElementFadeOut {
  0% {
    inset-block-start: 0;
    opacity: 1;
  }

  50%,
  100% {
    inset-block-start: -12px;
    opacity: 0;
  }
}
