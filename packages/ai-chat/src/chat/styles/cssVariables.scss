/*
 *  Copyright IBM Corp. 2025
 *
 *  This source code is licensed under the Apache-2.0 license found in the
 *  LICENSE file in the root directory of this source tree.
 */

@use "@carbon/layout";
@use "@carbon/colors";
@use "@carbon/styles/scss/theme";
@use "@carbon/styles/scss/components/button/tokens";
@use "@carbon/styles/scss/motion";

.cds--white,
.cds--g10,
.cds--g90,
.cds--g100 {
  /* **************************************************************************************************************** */

  /* Generic variables using for common values that are repeated throughout the widget. */

  /* **************************************************************************************************************** */

  /* Internal properties where reuse is needed */

  /* Application */
  --cds-chat-BASE-max-height: 640px;

  /* WCAG 2.1 states that the widget must be usable at 320x256 (or the equivalent from zoom happening) https://www.w3.org/WAI/WCAG21/Understanding/reflow.html
  We make sure the min-height at least 150px (to show at least the header/footer and one line of text) and is the lower of 256px minus the spacing from the bottom of the view port or 100vh - the bottom position. */
  --cds-chat-BASE-min-height: max(
    150px,
    calc(min(256px, 100vh) - var(--cds-chat-BASE-bottom-position))
  );
  --cds-chat-BASE-max-width: calc(
    100vw - (2 * var(--cds-chat-BASE-right-position))
  );
  --cds-chat-BASE-bottom-position: #{layout.$spacing-07};
  --cds-chat-BASE-right-position: #{layout.$spacing-07};
  --cds-chat-BASE-top-position: auto;
  --cds-chat-BASE-left-position: auto;

  /* **************************************************************************************************************** */

  /* Customizations applied by tooling or developer configuration */

  /* Miscellaneous */
  --cds-chat-BASE-z-index: 99999;

  /* The smaller of 380px or the available width of the screen. The is to account for zoom levels pushing us to 320px. */
  --cds-chat-BASE-width: min(380px, var(--cds-chat-BASE-max-width));
  --cds-chat-BASE-height: calc(100vh - (2 * #{layout.$spacing-07}));
}

.WACWidget--rounded {
  --cds-chat-CONTAINER-border-radius: #{layout.$spacing-03};
}

// The carbon tiles currently use the layer-01 token for the background color of the tiles. These layer tokens don't
// work with chat because they produce different colors between white and g10, and between g90 and g100. For now create
// a token whose color that will be consistent for both light themes (based off the g10 color), and for both dark themes
// (based off the g100 color). In the future carbon should create and use a new token for this background and we can
// remove this override.
.cds--white,
.cds--g10 {
  --cds-chat-TILE-background: #ffffff;
}

.cds--g90,
.cds--g100 {
  --cds-chat-TILE-background: #292929;
}

/* We will have to think on what this looks like if we are going to remove these CSS variables and make them SASS based. */
.WAC-isPhone {
  --cds-chat-BASE-width: var(--cds-chat-viewport-width, "100vw");
  --cds-chat-BASE-height: var(--cds-chat-viewport-height, "100vh");
  --cds-chat-BASE-left-position: var(--cds-chat-viewport-offsetLeft, "0");
  --cds-chat-BASE-top-position: var(--cds-chat-viewport-offsetTop, "0");
  --cds-chat-BASE-max-height: auto;
  --cds-chat-BASE-min-height: auto;
  --cds-chat-BASE-right-position: auto;
}
