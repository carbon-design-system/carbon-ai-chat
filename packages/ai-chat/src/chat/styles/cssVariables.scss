/* 
 *  Copyright IBM Corp. 2025
 *  
 *  This source code is licensed under the Apache-2.0 license found in the
 *  LICENSE file in the root directory of this source tree.
 */

@use "@carbon/layout";
@use "@carbon/colors";
@use "@carbon/styles/scss/theme";
@use "@carbon/styles/scss/components/button/tokens";
@use "@carbon/styles/scss/motion";

.cds--white,
.cds--g10,
.cds--g90,
.cds--g100 {
  /* **************************************************************************************************************** */

  /* Generic variables using for common values that are repeated throughout the widget. */

  /* TODO: Start using Carbon sass variables as appropriate below. See chatTheme.scss. */

  /* Typography */
  --cds-chat-BASE-weight-semibold: 600;
  --cds-chat-BASE-font-size-extra-small: 9px;
  --cds-chat-BASE-font-size-small: 12px;
  --cds-chat-BASE-font-size-med: 14px;
  --cds-chat-BASE-font-size-large: 16px;
  --cds-chat-BASE-font-size-xlarge: 20px;
  --cds-chat-BASE-font-size-xxlarge: 28px;
  --cds-chat-BASE-line-height-extra-small: 14px;
  --cds-chat-BASE-line-height-small: 16px;
  --cds-chat-BASE-line-height-med: 18px;
  --cds-chat-BASE-line-height-large: 20px;
  --cds-chat-BASE-line-height-xlarge: 26px;
  --cds-chat-BASE-line-height-xxlarge: 36px;

  /* Borders */
  --cds-chat-BASE-border-radius-xsmall: 2px;
  --cds-chat-BASE-border-radius-small: 4px;
  --cds-chat-BASE-border-radius-med: 8px;
  --cds-chat-BASE-border-radius-large: 12px;
  --cds-chat-BASE-border-radius-xlarge: 16px;
  --cds-chat-BASE-border-width-small: 1px;
  --cds-chat-BASE-border-width-med: 2px;
  --cds-chat-BASE-border-width-large: 3px;
  --cds-chat-WIDGET-border-radius: 8px;

  /* **************************************************************************************************************** */

  /* Internal properties where reuse is needed */

  /* Application */
  --cds-chat-BASE-max-height: 640px;

  /* WCAG 2.1 states that the widget must be usable at 320x256 (or the equivalent from zoom happening) https://www.w3.org/WAI/WCAG21/Understanding/reflow.html
  We make sure the min-height at least 150px (to show at least the header/footer and one line of text) and is the lower of 256px minus the spacing from the bottom of the view port or 100vh - the bottom position. */
  --cds-chat-BASE-min-height: max(
    150px,
    calc(min(256px, 100vh) - var(--cds-chat-BASE-bottom-position))
  );
  --cds-chat-BASE-max-width: calc(
    100vw - (2 * var(--cds-chat-BASE-right-position))
  );
  --cds-chat-BASE-bottom-position: #{layout.$spacing-07};
  --cds-chat-BASE-right-position: #{layout.$spacing-07};
  --cds-chat-BASE-top-position: auto;
  --cds-chat-BASE-left-position: auto;

  /* Launcher */
  --cds-chat-LAUNCHER-default-size: 56px;
  --cds-chat-LAUNCHER-position-bottom: #{layout.$spacing-07};
  --cds-chat-LAUNCHER-position-right: #{layout.$spacing-07};

  /* **************************************************************************************************************** */

  /* Customizations applied by tooling or developer configuration */

  /* Miscellaneous */
  --cds-chat-BASE-z-index: 99999;

  /* The smaller of 380px or the available width of the screen. The is to account for zoom levels pushing us to 320px. */
  --cds-chat-BASE-width: min(380px, var(--cds-chat-BASE-max-width));
  --cds-chat-BASE-height: calc(100vh - (2 * #{layout.$spacing-07}));
  --cds-chat-UNREAD-INDICATOR-color-background: #da1e28;
  --cds-chat-UNREAD-INDICATOR-color-text: #ffffff;

  /* Font Family */
  --cds-chat-BASE-font-family: "IBM Plex Sans", "Helvetica Neue", arial,
    sans-serif;
  --cds-chat-BASE-header-font-family: "IBM Plex Sans", "Helvetica Neue", arial,
    sans-serif;
  --cds-chat-HOME_SCREEN-greeting-font-family: "IBM Plex Sans", "Helvetica Neue",
    arial, sans-serif;

  /* PRIMARY color customizations */
  --cds-chat-PRIMARY-color: #{theme.$chat-header-background};
  --cds-chat-PRIMARY-color-text: #{theme.$text-primary};
  --cds-chat-PRIMARY-color-hover: var(
    --cds-background-hover
  ); /* Ghost button hover */
  --cds-chat-PRIMARY-color-active: var(
    --cds-background-active
  ); /* Ghost button active */
  --cds-chat-PRIMARY-color-focus: var(--cds-focus);

  /* SECONDARY color customizations */
  --cds-chat-SECONDARY-color: var(--cds-chat-bubble-user);
  --cds-chat-SECONDARY-color-text: var(--cds-text-secondary);

  /* ACCENT color customizations */
  --cds-chat-ACCENT-color: var(--cds-background-brand);
  --cds-chat-ACCENT-color-hover: #{tokens.$button-tertiary-hover}; /* Ghost button hover */
  --cds-chat-ACCENT-color-active: #{tokens.$button-tertiary-active}; /* Ghost button hover */

  /* The default rgb for blue-60 */
  --cds-chat-ACCENT-color-r: 15;
  --cds-chat-ACCENT-color-g: 98;
  --cds-chat-ACCENT-color-b: 254;
  --cds-chat-ACCENT-color-ghost-text: var(--cds-link-primary);
  --cds-chat-ACCENT-color-text: var(--cds-text-on-color);

  /* This color is either black or white and is based on the contrast difference with the accent color. Its primary use
 is the color of button on top of the accent color. */
  --cds-chat-ACCENT-color-bw: #ffffff;
  --cds-chat-ACCENT-color-bw-hover: #{colors.$gray-20};
  --cds-chat-ACCENT-color-bw-active: #{colors.$gray-30};

  /* The inverse of ACCENT-color-bw. Used for accessible text within our bw buttons. */
  --cds-chat-ACCENT-color-bw-inverse: #{colors.$gray-100};

  /* A slightly more gray version of our bw color in case there are different kinds of buttons on top of the same accent
  color background. */
  --cds-chat-ACCENT-color-bw-gray: #{colors.$gray-10};

  /* LAUNCHER color customizations */
  --cds-chat-LAUNCHER-color-background: var(--cds-chat-ACCENT-color);
  --cds-chat-LAUNCHER-color-avatar: var(--cds-chat-ACCENT-color-text);
  --cds-chat-LAUNCHER-color-background-hover: #{tokens.$button-primary-hover};
  --cds-chat-LAUNCHER-color-background-active: #{tokens.$button-primary-active};
  --cds-chat-LAUNCHER-color-focus-border: var(--cds-chat-ACCENT-color-text);
  --cds-chat-LAUNCHER-MOBILE-color-text: var(--cds-chat-ACCENT-color-text);
  --cds-chat-LAUNCHER-EXPANDED-MESSAGE-color-background: var(
    --cds-chat-ACCENT-color
  );
  --cds-chat-LAUNCHER-EXPANDED-MESSAGE-color-text: var(
    --cds-chat-ACCENT-color-text
  );
  --cds-chat-LAUNCHER-EXPANDED-MESSAGE-color-background-hover: #{tokens.$button-primary-hover};
  --cds-chat-LAUNCHER-EXPANDED-MESSAGE-color-background-active: #{tokens.$button-primary-active};
  --cds-chat-LAUNCHER-EXPANDED-MESSAGE-color-focus-border: var(
    --cds-chat-ACCENT-color-text
  );

  /*
    BRANDING customizations

    TODO: Web Chat branding colors and font should not be customizable, but not dealing with this now since it is unclear if its going to stay in new designs.
  */
  --cds-chat-BRANDING-color-text-01: var(--cds-text-primary);
  --cds-chat-BRANDING-color-text-02: var(--cds-text-secondary);
  --cds-chat-BRANDING-background: var(--cds-layer-01);
  --cds-chat-BRANDING-link: var(--cds-link-primary);
  --cds-chat-BRANDING-border-color: var(--cds-layer-02);
  --cds-chat-BRANDING-font-family: "IBM Plex Sans", "Helvetica Neue", arial,
    sans-serif;

  /*  Other styles */
  --cds-chat-CONTAINER-border-radius: 0;
}

.WACWidget--rounded {
  --cds-chat-CONTAINER-border-radius: 8px;
}

// The carbon tiles currently use the layer-01 token for the background color of the tiles. These layer tokens don't
// work with chat because they produce different colors between white and g10, and between g90 and g100. For now create
// a token whose color that will be consistent for both light themes (based off the g10 color), and for both dark themes
// (based off the g100 color). In the future carbon should create and use a new token for this background and we can
// remove this override.
.cds--white,
.cds--g10 {
  --cds-chat-TILE-background: #ffffff;
}

.cds--g90,
.cds--g100 {
  --cds-chat-TILE-background: #292929;
}

/* We will have to think on what this looks like if we are going to remove these CSS variables and make them SASS based. */
.WAC-isPhone {
  --cds-chat-LAUNCHER-position-bottom: 16px;
  --cds-chat-BASE-width: var(--cds-chat-viewport-width, "100vw");
  --cds-chat-BASE-height: var(--cds-chat-viewport-height, "100vh");
  --cds-chat-BASE-left-position: var(--cds-chat-viewport-offsetLeft, "0");
  --cds-chat-BASE-top-position: var(--cds-chat-viewport-offsetTop, "0");
  --cds-chat-BASE-max-height: auto;
  --cds-chat-BASE-min-height: auto;
  --cds-chat-BASE-right-position: auto;
  --cds-chat-BASE-font-size-extra-small: 12px;
  --cds-chat-BASE-font-size-small: 14px;
  --cds-chat-BASE-font-size-med: 16px;
  --cds-chat-BASE-font-size-large: 18px;
  --cds-chat-BASE-font-size-xlarge: 24px;
  --cds-chat-BASE-font-size-xxlarge: 32px;
  --cds-chat-BASE-line-height-extra-small: 16px;
  --cds-chat-BASE-line-height-small: 19px;
  --cds-chat-BASE-line-height-med: 21px;
  --cds-chat-BASE-line-height-large: 23px;
  --cds-chat-BASE-line-height-xlarge: 30px;
  --cds-chat-BASE-line-height-xxlarge: 40px;
}
