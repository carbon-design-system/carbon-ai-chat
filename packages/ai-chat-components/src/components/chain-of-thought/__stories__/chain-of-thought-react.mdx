import { ArgTypes, Canvas, Meta } from '@storybook/addon-docs/blocks';
import * as ChainOfThoughtReactStories from "./chain-of-thought-react.stories.jsx";

<Meta of={ChainOfThoughtReactStories} parameters={{ previewTabs: { "storybook/docs/panel": { title: "Overview" } } }} />

# Chain of thought

[Source code](https://github.com/carbon-design-system/carbon-ai-chat/tree/main/packages/ai-chat-components/src/components/chain-of-thought) &nbsp;|&nbsp; [Feedback](https://github.com/carbon-design-system/carbon-ai-chat/issues)

{/* <!-- START doctoc generated TOC please keep comment here to allow auto update --> <!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --> */}

## Table of Contents

- [Overview](#overview)
- [Component API](#component-api)
- [Feedback](#feedback)

{/* <!-- END doctoc generated TOC please keep comment here to allow auto update --> */}

## Overview

The `<ChainOfThought>` component wraps the `cds-aichat-chain-of-thought` web component and exposes a React API for displaying tool calls and intermediate outputs that an AI agent used to arrive at its final answer. It is primarily focused on tool calling and technical output. You should highly consider using `<ReasoningSteps>` for most non-debugging use cases.

### Getting started

Here's a quick example to get you started.

```jsx
import ChainOfThought from "@carbon/ai-chat-components/es/react/chain-of-thought.js";

const steps = [
  {
    title: "Search documentation",
    description: "Find authentication guidance in the product docs",
    tool_name: "documentation_search",
    request: {
      args: {
        query: "API authentication methods",
      },
    },
    response: {
      content: {
        results: [
          {
            title: "OAuth 2.0 Authentication",
            snippet: "Use OAuth 2.0 for user-facing authentication flows.",
          },
        ],
      },
    },
    status: "success",
  },
  {
    title: "Fetch account settings",
    tool_name: "database_query",
    request: {
      args: {
        table: "user_settings",
        user_id: "12345",
      },
    },
    response: {
      content: {
        auth_method: "oauth",
        scopes: ["read", "write"],
      },
    },
    status: "success",
  },
  {
    title: "Draft response",
    tool_name: "response_generator",
    request: {
      args: {
        format: "markdown",
      },
    },
    response: {
      content:
        "You're using **OAuth 2.0** with read and write scopes. Tokens expire after 1 hour.",
    },
    status: "processing",
  },
];

function ChainOfThoughtExample() {
  return (
    <ChainOfThought
      explainabilityText="Show chain of thought"
      inputLabelText="Input"
      outputLabelText="Output"
      toolLabelText="Tool"
      statusSucceededLabelText="Succeeded"
      statusFailedLabelText="Failed"
      statusProcessingLabelText="Processing"
      steps={steps}
    />
  );
}
```

## Component API

<ArgTypes of={ChainOfThoughtReactStories.Default} />

### Step Structure

Each step in the `steps` array should follow the `ChainOfThoughtStep` shape:

- **title**: Plain text name of the step
- **description**: Optional markdown-formatted description of what the tool does
- **tool_name**: Name of the tool that was called
- **request.args**: Arguments sent to the tool (automatically formatted as JSON if applicable)
- **response.content**: Content returned by the tool (supports JSON and markdown)
- **status**: One of `"processing"`, `"success"`, or `"failure"`

## Feedback

Open an issue at https://github.com/carbon-design-system/carbon-ai-chat/issues to provide feedback or request changes.
